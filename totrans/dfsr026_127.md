# æµæ°´çº¿

> åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/diffusers/api/pipelines/overview](https://huggingface.co/docs/diffusers/api/pipelines/overview)

æµæ°´çº¿æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è¿è¡Œæœ€å…ˆè¿›çš„æ‰©æ•£æ¨¡å‹ï¼Œé€šè¿‡å°†æ‰€æœ‰å¿…è¦çš„ç»„ä»¶ï¼ˆå¤šä¸ªç‹¬ç«‹è®­ç»ƒçš„æ¨¡å‹ã€è°ƒåº¦å™¨å’Œå¤„ç†å™¨ï¼‰æ†ç»‘åˆ°ä¸€ä¸ªç«¯åˆ°ç«¯ç±»ä¸­ã€‚æµæ°´çº¿çµæ´»ï¼Œå¯ä»¥é€‚åº”ä½¿ç”¨ä¸åŒè°ƒåº¦å™¨ç”šè‡³æ¨¡å‹ç»„ä»¶ã€‚

æ‰€æœ‰æµæ°´çº¿éƒ½æ˜¯åŸºäº[DiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline)ç±»æ„å»ºçš„ï¼Œè¯¥ç±»æä¾›äº†åŠ è½½ã€ä¸‹è½½å’Œä¿å­˜æ‰€æœ‰ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½ã€‚åŠ è½½å…·ä½“æµæ°´çº¿ç±»å‹ï¼ˆä¾‹å¦‚[StableDiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/text2img#diffusers.StableDiffusionPipeline)ï¼‰æ—¶ï¼Œä½¿ç”¨[from_pretrained()](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline.from_pretrained)ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æµæ°´çº¿ç»„ä»¶ï¼Œå¹¶å°†å…¶åŠ è½½å¹¶ä¼ é€’ç»™æµæ°´çº¿çš„`__init__`å‡½æ•°ã€‚

ä¸åº”è¯¥ä½¿ç”¨[DiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline)ç±»è¿›è¡Œè®­ç»ƒã€‚æ‰©æ•£æµæ°´çº¿çš„å„ä¸ªç»„ä»¶ï¼ˆä¾‹å¦‚[UNet2DModel](/docs/diffusers/v0.26.3/en/api/models/unet2d#diffusers.UNet2DModel)å’Œ[UNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel)ï¼‰é€šå¸¸æ˜¯å•ç‹¬è®­ç»ƒçš„ï¼Œå› æ­¤å»ºè®®ç›´æ¥ä¸å®ƒä»¬ä¸€èµ·å·¥ä½œã€‚

æµæ°´çº¿ä¸æä¾›ä»»ä½•è®­ç»ƒåŠŸèƒ½ã€‚æ‚¨ä¼šæ³¨æ„åˆ°é€šè¿‡åœ¨`__call__()`æ–¹æ³•ä¸Šè£…é¥°[`torch.no_grad`](https://pytorch.org/docs/stable/generated/torch.no_grad.html)è£…é¥°å™¨æ¥ç¦ç”¨PyTorchçš„autogradï¼Œå› ä¸ºæµæ°´çº¿ä¸åº”è¯¥ç”¨äºè®­ç»ƒã€‚å¦‚æœæ‚¨å¯¹è®­ç»ƒæ„Ÿå…´è¶£ï¼Œè¯·æŸ¥çœ‹[åŸ¹è®­](../../training/overview)æŒ‡å—ï¼

ä¸‹è¡¨åˆ—å‡ºäº†ğŸ¤— Diffusersä¸­å½“å‰å¯ç”¨çš„æ‰€æœ‰æµæ°´çº¿åŠå…¶æ”¯æŒçš„ä»»åŠ¡ã€‚å•å‡»æµæ°´çº¿ä»¥æŸ¥çœ‹å…¶æ‘˜è¦å’Œå·²å‘è¡¨çš„è®ºæ–‡ã€‚

| æµæ°´çº¿ | ä»»åŠ¡ |
| --- | --- |
| [AltDiffusion](alt_diffusion) | å›¾åƒåˆ°å›¾åƒ |
| [AnimateDiff](animatediff) | æ–‡æœ¬åˆ°è§†é¢‘ |
| [Attend-and-Excite](attend_and_excite) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Audio Diffusion](audio_diffusion) | å›¾åƒåˆ°éŸ³é¢‘ |
| [AudioLDM](audioldm) | æ–‡æœ¬åˆ°éŸ³é¢‘ |
| [AudioLDM2](audioldm2) | æ–‡æœ¬åˆ°éŸ³é¢‘ |
| [BLIP Diffusion](blip_diffusion) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Consistency Models](consistency_models) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [ControlNet](controlnet) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œä¿®è¡¥ |
| [ControlNet with Stable Diffusion XL](controlnet_sdxl) | æ–‡æœ¬åˆ°å›¾åƒ |
| [ControlNet-XS](controlnetxs) | æ–‡æœ¬åˆ°å›¾åƒ |
| [ControlNet-XS with Stable Diffusion XL](controlnetxs_sdxl) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Cycle Diffusion](cycle_diffusion) | å›¾åƒåˆ°å›¾åƒ |
| [Dance Diffusion](dance_diffusion) | æ— æ¡ä»¶éŸ³é¢‘ç”Ÿæˆ |
| [DDIM](ddim) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [DDPM](ddpm) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [DeepFloyd IF](deepfloyd_if) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œä¿®è¡¥ï¼Œè¶…åˆ†è¾¨ç‡ |
| [DiffEdit](diffedit) | ä¿®è¡¥ |
| [DiT](dit) | æ–‡æœ¬åˆ°å›¾åƒ |
| [GLIGEN](stable_diffusion/gligen) | æ–‡æœ¬åˆ°å›¾åƒ |
| [InstructPix2Pix](pix2pix) | å›¾åƒç¼–è¾‘ |
| [Kandinsky 2.1](kandinsky) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œä¿®è¡¥ï¼Œæ’å€¼ |
| [Kandinsky 2.2](kandinsky_v22) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œä¿®è¡¥ |
| [Kandinsky 3](kandinsky3) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒ |
| [Latent Consistency Models](latent_consistency_models) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Latent Diffusion](latent_diffusion) | æ–‡æœ¬åˆ°å›¾åƒï¼Œè¶…åˆ†è¾¨ç‡ |
| [LDM3D](stable_diffusion/ldm3d_diffusion) | æ–‡æœ¬åˆ°å›¾åƒï¼Œæ–‡æœ¬åˆ°3Dï¼Œæ–‡æœ¬åˆ°å…¨æ™¯ï¼Œæ”¾å¤§ |
| [MultiDiffusion](panorama) | æ–‡æœ¬åˆ°å›¾åƒ |
| [MusicLDM](musicldm) | æ–‡æœ¬åˆ°éŸ³é¢‘ |
| [Paint by Example](paint_by_example) | ä¿®è¡¥ |
| [ParaDiGMS](paradigms) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Pix2Pix Zero](pix2pix_zero) | å›¾åƒç¼–è¾‘ |
| [PixArt-Î±](pixart) | æ–‡æœ¬åˆ°å›¾åƒ |
| [PNDM](pndm) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [é‡æ–°ç»˜åˆ¶](repaint) | è¡¥æ¼† |
| [å¾—åˆ†SDE VE](score_sde_ve) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [è‡ªæ³¨æ„å¼•å¯¼](self_attention_guidance) | æ–‡æœ¬åˆ°å›¾åƒ |
| [è¯­ä¹‰å¼•å¯¼](semantic_stable_diffusion) | æ–‡æœ¬åˆ°å›¾åƒ |
| [Shap-E](shap_e) | æ–‡æœ¬åˆ°3Dï¼Œå›¾åƒåˆ°3D |
| [å£°è°±å›¾æ‰©æ•£](spectrogram_diffusion) |  |
| [ç¨³å®šæ‰©æ•£](stable_diffusion/overview) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œæ·±åº¦åˆ°å›¾åƒï¼Œè¡¥æ¼†ï¼Œå›¾åƒå˜åŒ–ï¼Œæ½œåœ¨æ”¾å¤§å™¨ï¼Œè¶…åˆ†è¾¨ç‡ |
| [ç¨³å®šæ‰©æ•£æ¨¡å‹ç¼–è¾‘](model_editing) | æ¨¡å‹ç¼–è¾‘ |
| [ç¨³å®šæ‰©æ•£XL](stable_diffusion/stable_diffusion_xl) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œè¡¥æ¼† |
| [ç¨³å®šæ‰©æ•£XL Turbo](stable_diffusion/sdxl_turbo) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°å›¾åƒï¼Œè¡¥æ¼† |
| [ç¨³å®šunCLIP](stable_unclip) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒå˜åŒ– |
| [éšæœºKarras VE](stochastic_karras_ve) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [T2I-Adapter](stable_diffusion/adapter) | æ–‡æœ¬åˆ°å›¾åƒ |
| [æ–‡æœ¬åˆ°è§†é¢‘](text_to_video) | æ–‡æœ¬åˆ°è§†é¢‘ï¼Œè§†é¢‘åˆ°è§†é¢‘ |
| [æ–‡æœ¬åˆ°è§†é¢‘-é›¶](text_to_video_zero) | æ–‡æœ¬åˆ°è§†é¢‘ |
| [unCLIP](unclip) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒå˜åŒ– |
| [æ— æ¡ä»¶æ½œåœ¨æ‰©æ•£](latent_diffusion_uncond) | æ— æ¡ä»¶å›¾åƒç”Ÿæˆ |
| [UniDiffuser](unidiffuser) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒåˆ°æ–‡æœ¬ï¼Œå›¾åƒå˜åŒ–ï¼Œæ–‡æœ¬å˜åŒ–ï¼Œæ— æ¡ä»¶å›¾åƒç”Ÿæˆï¼Œæ— æ¡ä»¶éŸ³é¢‘ç”Ÿæˆ |
| [ä»·å€¼å¯¼å‘è§„åˆ’](value_guided_sampling) | ä»·å€¼å¯¼å‘é‡‡æ · |
| [å¤šåŠŸèƒ½æ‰©æ•£](versatile_diffusion) | æ–‡æœ¬åˆ°å›¾åƒï¼Œå›¾åƒå˜åŒ– |
| [VQæ‰©æ•£](vq_diffusion) | æ–‡æœ¬åˆ°å›¾åƒ |
| [ç»´æ–¯ç‰¹ç´](wuerstchen) | æ–‡æœ¬åˆ°å›¾åƒ |

## æ‰©æ•£ç®¡é“

### `class diffusers.DiffusionPipeline`

[<æºä»£ç >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L569)

```py
( )
```

æ‰€æœ‰ç®¡é“çš„åŸºç±»ã€‚

[æ‰©æ•£ç®¡é“](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline) å­˜å‚¨æ‰©æ•£ç®¡é“çš„æ‰€æœ‰ç»„ä»¶ï¼ˆæ¨¡å‹ã€è°ƒåº¦å™¨å’Œå¤„ç†å™¨ï¼‰ï¼Œå¹¶æä¾›åŠ è½½ã€ä¸‹è½½å’Œä¿å­˜æ¨¡å‹çš„æ–¹æ³•ã€‚è¿˜åŒ…æ‹¬ä»¥ä¸‹æ–¹æ³•ï¼š

+   å°†æ‰€æœ‰PyTorchæ¨¡å—ç§»åŠ¨åˆ°æ‰€é€‰è®¾å¤‡ä¸Š

+   å¯ç”¨/ç¦ç”¨å»å™ªè¿­ä»£çš„è¿›åº¦æ¡

ç±»å±æ€§ï¼š

+   `config_name` (`str`) â€” å­˜å‚¨æ‰©æ•£ç®¡é“æ‰€æœ‰ç»„ä»¶çš„ç±»å’Œæ¨¡å—åç§°çš„é…ç½®æ–‡ä»¶åã€‚

+   `_optional_components` (`List[str]`) â€” ä¸å¿…ä¼ é€’ç»™ç®¡é“ä»¥è¿è¡Œçš„æ‰€æœ‰å¯é€‰ç»„ä»¶çš„åˆ—è¡¨ï¼ˆåº”è¯¥è¢«å­ç±»è¦†ç›–ï¼‰ã€‚

#### `__call__`

```py
( *args **kwargs )
```

å°†è‡ªèº«ä½œä¸ºå‡½æ•°è°ƒç”¨ã€‚

#### `device`

[<æºä»£ç >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L901)

```py
( ) â†’ export const metadata = 'undefined';torch.device
```

è¿”å›

`torch.device`

ç®¡é“æ‰€åœ¨çš„torchè®¾å¤‡ã€‚

#### `to`

[<æºä»£ç >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L742)

```py
( *args **kwargs ) â†’ export const metadata = 'undefined';DiffusionPipeline
```

å‚æ•°

+   `dtype` (`torch.dtype`, *å¯é€‰*) â€” è¿”å›å…·æœ‰æŒ‡å®š[`dtype`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype)çš„ç®¡é“

+   `device` (`torch.Device`, *å¯é€‰*) â€” è¿”å›å…·æœ‰æŒ‡å®š[`device`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.device)çš„ç®¡é“

+   `silence_dtype_warnings` (`str`, *å¯é€‰*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦å¿½ç•¥è­¦å‘Šï¼Œå¦‚æœç›®æ ‡`dtype`ä¸ç›®æ ‡`device`ä¸å…¼å®¹ã€‚

è¿”å›

[æ‰©æ•£ç®¡é“](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline)

å°†ç®¡é“è½¬æ¢ä¸ºæŒ‡å®šçš„`dtype`å’Œ/æˆ–`dtype`ã€‚

æ‰§è¡Œç®¡é“çš„æ•°æ®ç±»å‹å’Œ/æˆ–è®¾å¤‡è½¬æ¢ã€‚ä»`self.to(*args, **kwargs)`çš„å‚æ•°ä¸­æ¨æ–­å‡ºtorch.dtypeå’Œtorch.deviceã€‚

å¦‚æœç®¡é“å·²ç»å…·æœ‰æ­£ç¡®çš„torch.dtypeå’Œtorch.deviceï¼Œåˆ™è¿”å›åŸæ ·ã€‚å¦åˆ™ï¼Œè¿”å›çš„ç®¡é“æ˜¯å…·æœ‰æ‰€éœ€torch.dtypeå’Œtorch.deviceçš„selfçš„å‰¯æœ¬ã€‚

ä»¥ä¸‹æ˜¯è°ƒç”¨`to`çš„æ–¹æ³•ï¼š

+   `to(dtype, silence_dtype_warnings=False) â†’ DiffusionPipeline` è¿”å›å…·æœ‰æŒ‡å®š[`dtype`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype)çš„ç®¡é“ã€‚

+   `to(device, silence_dtype_warnings=False) â†’ DiffusionPipeline` è¿”å›å…·æœ‰æŒ‡å®š[`device`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.device)çš„ç®¡é“ã€‚

+   `to(device=None, dtype=None, silence_dtype_warnings=False) â†’ DiffusionPipeline` è¿”å›å…·æœ‰æŒ‡å®š[`device`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.device)å’Œ[`dtype`](https://pytorch.org/docs/stable/tensor_attributes.html#torch.dtype)çš„ç®¡é“ã€‚

#### `components`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1941)

```py
( )
```

`self.components`å±æ€§å¯ç”¨äºä½¿ç”¨ç›¸åŒçš„æƒé‡å’Œé…ç½®è¿è¡Œä¸åŒçš„ç®¡é“ï¼Œè€Œæ— éœ€é‡æ–°åˆ†é…é¢å¤–çš„å†…å­˜ã€‚

è¿”å› (`dict`): åŒ…å«åˆå§‹åŒ–ç®¡é“æ‰€éœ€çš„æ‰€æœ‰æ¨¡å—çš„å­—å…¸ã€‚

ç¤ºä¾‹ï¼š

```py
>>> from diffusers import (
...     StableDiffusionPipeline,
...     StableDiffusionImg2ImgPipeline,
...     StableDiffusionInpaintPipeline,
... )

>>> text2img = StableDiffusionPipeline.from_pretrained("runwayml/stable-diffusion-v1-5")
>>> img2img = StableDiffusionImg2ImgPipeline(**text2img.components)
>>> inpaint = StableDiffusionInpaintPipeline(**text2img.components)
```

#### `disable_attention_slicing`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L2103)

```py
( )
```

ç¦ç”¨åˆ‡ç‰‡æ³¨æ„åŠ›è®¡ç®—ã€‚å¦‚æœä¹‹å‰è°ƒç”¨äº†`enable_attention_slicing`ï¼Œåˆ™æ³¨æ„åŠ›åœ¨ä¸€æ­¥ä¸­è®¡ç®—ã€‚

#### `disable_xformers_memory_efficient_attention`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L2037)

```py
( )
```

ç¦ç”¨[xFormers](https://facebookresearch.github.io/xformers/)çš„å†…å­˜é«˜æ•ˆæ³¨æ„åŠ›ã€‚

#### `download`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1552)

```py
( pretrained_model_name **kwargs ) â†’ export const metadata = 'undefined';os.PathLike
```

å‚æ•°

+   `pretrained_model_name` (`str` æˆ– `os.PathLike`, *optional*) â€” ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¢„è®­ç»ƒç®¡é“çš„*å­˜å‚¨åº“id*ï¼ˆä¾‹å¦‚ `CompVis/ldm-text2im-large-256`ï¼‰ï¼Œæ‰˜ç®¡åœ¨Hubä¸Šã€‚

+   `custom_pipeline` (`str`, *optional*) â€” å¯ä»¥æ˜¯ï¼š

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¢„è®­ç»ƒç®¡é“çš„*å­˜å‚¨åº“id*ï¼ˆä¾‹å¦‚ `CompVis/ldm-text2im-large-256`ï¼‰ï¼Œæ‰˜ç®¡åœ¨Hubä¸Šã€‚å­˜å‚¨åº“å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º`pipeline.py`çš„æ–‡ä»¶ï¼Œå®šä¹‰äº†è‡ªå®šä¹‰ç®¡é“ã€‚

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰˜ç®¡åœ¨GitHubçš„[Community](https://github.com/huggingface/diffusers/tree/main/examples/community)ä¸‹çš„ç¤¾åŒºç®¡é“çš„*æ–‡ä»¶å*ã€‚æœ‰æ•ˆçš„æ–‡ä»¶åå¿…é¡»åŒ¹é…æ–‡ä»¶åè€Œä¸æ˜¯ç®¡é“è„šæœ¬ï¼ˆ`clip_guided_stable_diffusion`è€Œä¸æ˜¯`clip_guided_stable_diffusion.py`ï¼‰ã€‚ç¤¾åŒºç®¡é“å§‹ç»ˆä»GitHubçš„å½“å‰`main`åˆ†æ”¯åŠ è½½ã€‚

    +   ä¸€ä¸ªæŒ‡å‘åŒ…å«è‡ªå®šä¹‰ç®¡é“çš„*ç›®å½•*ï¼ˆ`./my_pipeline_directory/`ï¼‰çš„è·¯å¾„ã€‚è¯¥ç›®å½•å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º`pipeline.py`çš„æ–‡ä»¶ï¼Œå®šä¹‰äº†è‡ªå®šä¹‰ç®¡é“ã€‚

    ğŸ§ª è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œå¯èƒ½ä¼šåœ¨æœªæ¥æ›´æ”¹ã€‚

    æœ‰å…³å¦‚ä½•åŠ è½½å’Œåˆ›å»ºè‡ªå®šä¹‰ç®¡é“çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[å¦‚ä½•è´¡çŒ®ç¤¾åŒºç®¡é“](https://huggingface.co/docs/diffusers/main/en/using-diffusers/contribute_pipeline)ã€‚

+   `force_download` (`bool`, *optional*, é»˜è®¤ä¸º `False`) â€” æ˜¯å¦å¼ºåˆ¶ï¼ˆé‡æ–°ï¼‰ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ï¼Œè¦†ç›–ç¼“å­˜ç‰ˆæœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚

+   `resume_download` (`bool`, *optional*, é»˜è®¤ä¸º `False`) â€” æ˜¯å¦æ¢å¤ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º`False`ï¼Œåˆ™åˆ é™¤ä»»ä½•æœªå®Œå…¨ä¸‹è½½çš„æ–‡ä»¶ã€‚

+   `proxies` (`Dict[str, str]`, *optional*) â€” ä¸€ä¸ªä»£ç†æœåŠ¡å™¨å­—å…¸ï¼ŒæŒ‰åè®®æˆ–ç«¯ç‚¹ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œ`{'http': 'foo.bar:3128', 'http://hostname': 'foo.bar:4012'}`ã€‚ä»£ç†æœåŠ¡å™¨åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šä½¿ç”¨ã€‚

+   `output_loading_info(bool,` *optional*, defaults to `False`) â€” æ˜¯å¦è¿˜è¿”å›åŒ…å«ç¼ºå¤±é”®ã€æ„å¤–é”®å’Œé”™è¯¯æ¶ˆæ¯çš„å­—å…¸ã€‚

+   `local_files_only` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦ä»…åŠ è½½æœ¬åœ°æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º `True`ï¼Œåˆ™ä¸ä¼šä» Hub ä¸‹è½½æ¨¡å‹ã€‚

+   `token` (`str` or *bool*, *optional*) â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶ HTTP bearer æˆæƒçš„ä»¤ç‰Œã€‚å¦‚æœä¸º `True`ï¼Œåˆ™ä½¿ç”¨ä» `diffusers-cli login` ç”Ÿæˆçš„ä»¤ç‰Œï¼ˆå­˜å‚¨åœ¨ `~/.huggingface` ä¸­ï¼‰ã€‚

+   `revision` (`str`, *optional*, defaults to `"main"`) â€” ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°ã€æäº¤ ID æˆ– Git å…è®¸çš„ä»»ä½•æ ‡è¯†ç¬¦ã€‚

+   `custom_revision` (`str`, *optional*, defaults to `"main"`) â€” ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°æˆ–ä¸ä» Hub åŠ è½½è‡ªå®šä¹‰æµæ°´çº¿æ—¶çš„ `revision` ç±»ä¼¼çš„æäº¤ IDã€‚ä» GitHub åŠ è½½è‡ªå®šä¹‰æµæ°´çº¿æ—¶ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ª ğŸ¤— Diffusers ç‰ˆæœ¬ï¼Œå¦åˆ™åœ¨ä» Hub åŠ è½½æ—¶é»˜è®¤ä¸º `"main"`ã€‚

+   `mirror` (`str`, *optional*) â€” å¦‚æœæ‚¨åœ¨ä¸­å›½ä¸‹è½½æ¨¡å‹æ—¶é‡åˆ°å¯è®¿é—®æ€§é—®é¢˜ï¼Œè¯·ä½¿ç”¨é•œåƒæºè§£å†³ã€‚æˆ‘ä»¬ä¸ä¿è¯æºçš„åŠæ—¶æ€§æˆ–å®‰å…¨æ€§ï¼Œæ‚¨åº”å‚è€ƒé•œåƒç«™ç‚¹è·å–æ›´å¤šä¿¡æ¯ã€‚

+   `variant` (`str`, *optional*) â€” ä»æŒ‡å®šçš„å˜ä½“æ–‡ä»¶ååŠ è½½æƒé‡ï¼Œä¾‹å¦‚ `"fp16"` æˆ– `"ema"`ã€‚åœ¨åŠ è½½ `from_flax` æ—¶ä¼šå¿½ç•¥æ­¤é€‰é¡¹ã€‚

+   `use_safetensors` (`bool`, *optional*, defaults to `None`) â€” å¦‚æœè®¾ç½®ä¸º `None`ï¼Œåˆ™åœ¨å¯ç”¨æ—¶ä¸‹è½½ safetensors æƒé‡ **å¹¶ä¸”** å¦‚æœå·²å®‰è£… safetensors åº“ã€‚å¦‚æœè®¾ç½®ä¸º `True`ï¼Œåˆ™å¼ºåˆ¶ä» safetensors æƒé‡åŠ è½½æ¨¡å‹ã€‚å¦‚æœè®¾ç½®ä¸º `False`ï¼Œåˆ™ä¸åŠ è½½ safetensors æƒé‡ã€‚

+   `use_onnx` (`bool`, *optional*, defaults to `False`) â€” å¦‚æœè®¾ç½®ä¸º `True`ï¼Œåˆ™å§‹ç»ˆä¼šä¸‹è½½ ONNX æƒé‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚å¦‚æœè®¾ç½®ä¸º `False`ï¼Œåˆ™æ°¸è¿œä¸ä¼šä¸‹è½½ ONNX æƒé‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`use_onnx` é»˜è®¤ä¸º `_is_onnx` ç±»å±æ€§ï¼Œå¯¹äºé ONNX æµæ°´çº¿ä¸º `False`ï¼Œå¯¹äº ONNX æµæ°´çº¿ä¸º `True`ã€‚ONNX æƒé‡åŒ…æ‹¬ä»¥ `.onnx` å’Œ `.pb` ç»“å°¾çš„æ–‡ä»¶ã€‚

+   `trust_remote_code` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦å…è®¸åœ¨ Hub ä¸Šå®šä¹‰çš„è‡ªå®šä¹‰æµæ°´çº¿å’Œç»„ä»¶åœ¨å…¶è‡ªå·±çš„æ–‡ä»¶ä¸­æ‰§è¡Œã€‚æ­¤é€‰é¡¹åº”ä»…å¯¹æ‚¨ä¿¡ä»»çš„å­˜å‚¨åº“è®¾ç½®ä¸º `True`ï¼Œå¹¶ä¸”æ‚¨å·²ç»é˜…è¯»äº†ä»£ç ï¼Œå› ä¸ºå®ƒå°†åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡Œ Hub ä¸Šå­˜åœ¨çš„ä»£ç ã€‚

è¿”å›

`os.PathLike`

ä¸‹è½½çš„æµæ°´çº¿è·¯å¾„ã€‚

ä»é¢„è®­ç»ƒçš„æµæ°´çº¿æƒé‡ä¸‹è½½å¹¶ç¼“å­˜ PyTorch æ‰©æ•£æµæ°´çº¿ã€‚

è¦ä½¿ç”¨ç§æœ‰æˆ– [é—¨æ§æ¨¡å‹](https://huggingface.co/docs/hub/models-gated#gated-models)ï¼Œè¯·ä½¿ç”¨ `huggingface-cli login` ç™»å½•ã€‚

#### `enable_attention_slicing`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L2063)

```py
( slice_size: Union = 'auto' )
```

å‚æ•°

+   `slice_size` (`str` or `int`, *optional*, defaults to `"auto"`) â€” å½“ä¸º `"auto"` æ—¶ï¼Œå°†è¾“å…¥å‡åŠåˆ°æ³¨æ„åŠ›å¤´ï¼Œå› æ­¤æ³¨æ„åŠ›å°†åˆ†ä¸¤æ­¥è®¡ç®—ã€‚å¦‚æœä¸º `"max"`ï¼Œå°†é€šè¿‡ä¸€æ¬¡åªè¿è¡Œä¸€ä¸ªåˆ‡ç‰‡æ¥èŠ‚çœæœ€å¤§å†…å­˜é‡ã€‚å¦‚æœæä¾›ä¸€ä¸ªæ•°å­—ï¼Œåˆ™ä½¿ç”¨ `attention_head_dim // slice_size` ä¸ªåˆ‡ç‰‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`attention_head_dim` å¿…é¡»æ˜¯ `slice_size` çš„å€æ•°ã€‚

å¯ç”¨åˆ‡ç‰‡æ³¨æ„åŠ›è®¡ç®—ã€‚å¯ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œæ³¨æ„åŠ›æ¨¡å—å°†è¾“å…¥å¼ é‡åˆ†å‰²æˆå¤šä¸ªåˆ‡ç‰‡ï¼Œä»¥ä¾¿åœ¨å‡ ä¸ªæ­¥éª¤ä¸­è®¡ç®—æ³¨æ„åŠ›ã€‚å¯¹äºå¤šä¸ªæ³¨æ„åŠ›å¤´ï¼Œè®¡ç®—å°†æŒ‰é¡ºåºåœ¨æ¯ä¸ªå¤´ä¸Šæ‰§è¡Œã€‚è¿™å¯¹äºèŠ‚çœä¸€äº›å†…å­˜ä»¥æ¢å–ä¸€ç‚¹é€Ÿåº¦é™ä½å¾ˆæœ‰ç”¨ã€‚

âš ï¸ å¦‚æœæ‚¨å·²ç»åœ¨ä½¿ç”¨ PyTorch 2.0 æˆ– xFormers ä¸­çš„ `scaled_dot_product_attention`ï¼ˆSDPAï¼‰ï¼Œè¯·ä¸è¦å¯ç”¨æ³¨æ„åŠ›åˆ‡ç‰‡ã€‚è¿™äº›æ³¨æ„åŠ›è®¡ç®—å·²ç»éå¸¸å†…å­˜é«˜æ•ˆï¼Œå› æ­¤æ‚¨ä¸éœ€è¦å¯ç”¨æ­¤åŠŸèƒ½ã€‚å¦‚æœæ‚¨åœ¨ SDPA æˆ– xFormers ä¸­å¯ç”¨äº†æ³¨æ„åŠ›åˆ‡ç‰‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„å‡é€Ÿï¼

ç¤ºä¾‹ï¼š

```py
>>> import torch
>>> from diffusers import StableDiffusionPipeline

>>> pipe = StableDiffusionPipeline.from_pretrained(
...     "runwayml/stable-diffusion-v1-5",
...     torch_dtype=torch.float16,
...     use_safetensors=True,
... )

>>> prompt = "a photo of an astronaut riding a horse on mars"
>>> pipe.enable_attention_slicing()
>>> image = pipe(prompt).images[0]
```

#### `enable_model_cpu_offload`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1410)

```py
( gpu_id: Optional = None device: Union = 'cuda' )
```

å‚æ•°

+   `gpu_id` (`int`ï¼Œ*å¯é€‰*) â€” ç”¨äºæ¨ç†çš„åŠ é€Ÿå™¨çš„IDã€‚å¦‚æœæœªæŒ‡å®šï¼Œå®ƒå°†é»˜è®¤ä¸º0ã€‚

+   `device` (`torch.Device`æˆ–`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸ºâ€œcudaâ€) â€” ç”¨äºæ¨ç†çš„åŠ é€Ÿå™¨çš„PyTorchè®¾å¤‡ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®šï¼Œå®ƒå°†é»˜è®¤ä¸ºâ€œcudaâ€ã€‚

ä½¿ç”¨åŠ é€Ÿå™¨å°†æ‰€æœ‰æ¨¡å‹è½¬ç§»åˆ°CPUï¼Œå‡å°‘å†…å­˜ä½¿ç”¨é‡å¯¹æ€§èƒ½å½±å“è¾ƒå°ã€‚ä¸`enable_sequential_cpu_offload`ç›¸æ¯”ï¼Œæ­¤æ–¹æ³•åœ¨è°ƒç”¨å…¶`forward`æ–¹æ³•æ—¶ä¸€æ¬¡å°†æ•´ä¸ªæ¨¡å‹ç§»åŠ¨åˆ°GPUï¼Œå¹¶ä¸”æ¨¡å‹ä¿æŒåœ¨GPUä¸­ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªæ¨¡å‹è¿è¡Œã€‚ä¸`enable_sequential_cpu_offload`ç›¸æ¯”ï¼Œå†…å­˜èŠ‚çœè¾ƒä½ï¼Œä½†ç”±äº`unet`çš„è¿­ä»£æ‰§è¡Œï¼Œæ€§èƒ½è¦å¥½å¾—å¤šã€‚

#### `enable_sequential_cpu_offload`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1499)

```py
( gpu_id: Optional = None device: Union = 'cuda' )
```

å‚æ•°

+   `gpu_id` (`int`ï¼Œ*å¯é€‰*) â€” ç”¨äºæ¨ç†çš„åŠ é€Ÿå™¨çš„IDã€‚å¦‚æœæœªæŒ‡å®šï¼Œå®ƒå°†é»˜è®¤ä¸º0ã€‚

+   `device` (`torch.Device`æˆ–`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸ºâ€œcudaâ€) â€” ç”¨äºæ¨ç†çš„åŠ é€Ÿå™¨çš„PyTorchè®¾å¤‡ç±»å‹ã€‚å¦‚æœæœªæŒ‡å®šï¼Œå®ƒå°†é»˜è®¤ä¸ºâ€œcudaâ€ã€‚

ä½¿ç”¨ğŸ¤— Accelerateå°†æ‰€æœ‰æ¨¡å‹è½¬ç§»åˆ°CPUï¼Œæ˜¾è‘—å‡å°‘å†…å­˜ä½¿ç”¨ã€‚å½“è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰`torch.nn.Module`ç»„ä»¶çš„çŠ¶æ€å­—å…¸ï¼ˆé™¤äº†`self._exclude_from_cpu_offload`ä¸­çš„ç»„ä»¶ï¼‰å°†ä¿å­˜åˆ°CPUï¼Œç„¶åç§»åŠ¨åˆ°`torch.device('meta')`ï¼Œä»…å½“å…¶ç‰¹å®šå­æ¨¡å—è°ƒç”¨å…¶`forward`æ–¹æ³•æ—¶æ‰åŠ è½½åˆ°GPUã€‚å¸è½½æ˜¯åŸºäºå­æ¨¡å—çš„ã€‚ä¸`enable_model_cpu_offload`ç›¸æ¯”ï¼Œå†…å­˜èŠ‚çœæ›´é«˜ï¼Œä½†æ€§èƒ½è¾ƒä½ã€‚

#### `enable_xformers_memory_efficient_attention`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L2002)

```py
( attention_op: Optional = None )
```

å‚æ•°

+   `attention_op` (`Callable`ï¼Œ*å¯é€‰*) â€” è¦†ç›–ç”¨ä½œxFormersçš„[`memory_efficient_attention()`](https://facebookresearch.github.io/xformers/components/ops.html#xformers.ops.memory_efficient_attention)å‡½æ•°çš„`op`å‚æ•°çš„é»˜è®¤`None`è¿ç®—ç¬¦ã€‚

å¯ç”¨[xFormers](https://facebookresearch.github.io/xformers/)çš„å†…å­˜é«˜æ•ˆæ³¨æ„åŠ›ã€‚å¯ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œæ‚¨åº”è¯¥è§‚å¯Ÿåˆ°GPUå†…å­˜ä½¿ç”¨é‡é™ä½ï¼Œå¹¶åœ¨æ¨ç†è¿‡ç¨‹ä¸­æ½œåœ¨åŠ é€Ÿã€‚è®­ç»ƒè¿‡ç¨‹ä¸­çš„åŠ é€Ÿä¸è¢«ä¿è¯ã€‚

âš ï¸ å½“å†…å­˜é«˜æ•ˆæ³¨æ„åŠ›å’Œåˆ‡ç‰‡æ³¨æ„åŠ›åŒæ—¶å¯ç”¨æ—¶ï¼Œå†…å­˜é«˜æ•ˆæ³¨æ„åŠ›ä¼˜å…ˆã€‚

ç¤ºä¾‹ï¼š

```py
>>> import torch
>>> from diffusers import DiffusionPipeline
>>> from xformers.ops import MemoryEfficientAttentionFlashAttentionOp

>>> pipe = DiffusionPipeline.from_pretrained("stabilityai/stable-diffusion-2-1", torch_dtype=torch.float16)
>>> pipe = pipe.to("cuda")
>>> pipe.enable_xformers_memory_efficient_attention(attention_op=MemoryEfficientAttentionFlashAttentionOp)
>>> # Workaround for not accepting attention shape using VAE for Flash Attention
>>> pipe.vae.enable_xformers_memory_efficient_attention(attention_op=None)
```

#### `from_pretrained`

[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L931)

```py
( pretrained_model_name_or_path: Union **kwargs )
```

å‚æ•°

+   `pretrained_model_name_or_path` (`str`æˆ–`os.PathLike`ï¼Œ*å¯é€‰*) â€” å¯ä»¥æ˜¯ï¼š

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰˜ç®¡åœ¨Hubä¸Šçš„é¢„è®­ç»ƒæµæ°´çº¿çš„*repo id*ï¼ˆä¾‹å¦‚`CompVis/ldm-text2im-large-256`ï¼‰ã€‚

    +   ä¸€ä¸ªæŒ‡å‘ä½¿ç”¨[save_pretrained()](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline.save_pretrained)ä¿å­˜çš„æµæ°´çº¿æƒé‡çš„*ç›®å½•*çš„è·¯å¾„ï¼ˆä¾‹å¦‚`./my_pipeline_directory/`ï¼‰ã€‚

+   `torch_dtype` (`str`æˆ–`torch.dtype`ï¼Œ*å¯é€‰*) â€” è¦†ç›–é»˜è®¤çš„`torch.dtype`å¹¶ä½¿ç”¨å¦ä¸€ç§dtypeåŠ è½½æ¨¡å‹ã€‚å¦‚æœä¼ é€’â€œautoâ€ï¼Œåˆ™dtypeå°†è‡ªåŠ¨ä»æ¨¡å‹çš„æƒé‡ä¸­æ´¾ç”Ÿã€‚

+   `custom_pipeline` (`str`, *å¯é€‰*) â€”

    ğŸ§ª è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œå¯èƒ½ä¼šåœ¨æœªæ¥å‘ç”Ÿå˜åŒ–ã€‚

    å¯ä»¥æ˜¯ï¼š

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰˜ç®¡åœ¨Hubä¸Šçš„è‡ªå®šä¹‰æµæ°´çº¿çš„*repo id*ï¼ˆä¾‹å¦‚`hf-internal-testing/diffusers-dummy-pipeline`ï¼‰ã€‚å­˜å‚¨åº“å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸ºpipeline.pyçš„æ–‡ä»¶ï¼Œå®šä¹‰äº†è‡ªå®šä¹‰æµæ°´çº¿ã€‚

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰˜ç®¡åœ¨GitHubä¸Šçš„ç¤¾åŒºç®¡é“çš„*æ–‡ä»¶å*ï¼Œä½äº[Community](https://github.com/huggingface/diffusers/tree/main/examples/community)ä¸‹ã€‚æœ‰æ•ˆçš„æ–‡ä»¶åå¿…é¡»ä¸æ–‡ä»¶ååŒ¹é…ï¼Œè€Œä¸æ˜¯ç®¡é“è„šæœ¬ï¼ˆ`clip_guided_stable_diffusion`è€Œä¸æ˜¯`clip_guided_stable_diffusion.py`ï¼‰ã€‚ç¤¾åŒºç®¡é“å§‹ç»ˆä»GitHubçš„å½“å‰ä¸»åˆ†æ”¯åŠ è½½ã€‚

    +   ä¸€ä¸ªåŒ…å«è‡ªå®šä¹‰ç®¡é“çš„ç›®å½•çš„è·¯å¾„ï¼ˆ`./my_pipeline_directory/`ï¼‰ã€‚è¯¥ç›®å½•å¿…é¡»åŒ…å«ä¸€ä¸ªåä¸º`pipeline.py`çš„æ–‡ä»¶ï¼Œå®šä¹‰äº†è‡ªå®šä¹‰ç®¡é“ã€‚

    æœ‰å…³å¦‚ä½•åŠ è½½å’Œåˆ›å»ºè‡ªå®šä¹‰ç®¡é“çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[åŠ è½½å’Œæ·»åŠ è‡ªå®šä¹‰ç®¡é“](https://huggingface.co/docs/diffusers/using-diffusers/custom_pipeline_overview)

+   `force_download` (`bool`, *optional*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦å¼ºåˆ¶ï¼ˆé‡æ–°ï¼‰ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ï¼Œè¦†ç›–ç¼“å­˜ç‰ˆæœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚

+   `cache_dir` (`Union[str, os.PathLike]`, *optional*) â€” ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹é…ç½®çš„ç¼“å­˜è·¯å¾„ï¼Œå¦‚æœæœªä½¿ç”¨æ ‡å‡†ç¼“å­˜ã€‚

+   `resume_download` (`bool`, *optional*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦æ¢å¤ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º`False`ï¼Œåˆ™ä¼šåˆ é™¤ä»»ä½•æœªå®Œå…¨ä¸‹è½½çš„æ–‡ä»¶ã€‚

+   `proxies` (`Dict[str, str]`, *optional*) â€” ä¸€ä¸ªæŒ‰åè®®æˆ–ç«¯ç‚¹ä½¿ç”¨çš„ä»£ç†æœåŠ¡å™¨å­—å…¸ï¼Œä¾‹å¦‚ï¼Œ`{'http': 'foo.bar:3128', 'http://hostname': 'foo.bar:4012'}`ã€‚è¿™äº›ä»£ç†åœ¨æ¯ä¸ªè¯·æ±‚ä¸­ä½¿ç”¨ã€‚

+   `output_loading_info(bool,` *optional*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦è¿˜è¿”å›ä¸€ä¸ªåŒ…å«ç¼ºå¤±é”®ã€æ„å¤–é”®å’Œé”™è¯¯æ¶ˆæ¯çš„å­—å…¸ã€‚

+   `local_files_only` (`bool`, *optional*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦ä»…åŠ è½½æœ¬åœ°æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º`True`ï¼Œåˆ™æ¨¡å‹ä¸ä¼šä»Hubä¸‹è½½ã€‚

+   `token` (`str`æˆ–*bool*, *optional*) â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶çš„HTTP beareræˆæƒçš„ä»¤ç‰Œã€‚å¦‚æœä¸º`True`ï¼Œåˆ™ä½¿ç”¨ä»`diffusers-cli login`ç”Ÿæˆçš„ä»¤ç‰Œï¼ˆå­˜å‚¨åœ¨`~/.huggingface`ä¸­ï¼‰ã€‚

+   `revision` (`str`, *optional*, é»˜è®¤ä¸º`"main"`) â€” è¦ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°ã€æäº¤IDæˆ–Gitå…è®¸çš„ä»»ä½•æ ‡è¯†ç¬¦ã€‚

+   `custom_revision` (`str`, *optional*, é»˜è®¤ä¸º`"main"`) â€” è¦ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°æˆ–ä¸ä»HubåŠ è½½è‡ªå®šä¹‰ç®¡é“æ—¶çš„`revision`ç±»ä¼¼çš„æäº¤IDã€‚ä»GitHubåŠ è½½è‡ªå®šä¹‰ç®¡é“æ—¶å¯ä»¥æ˜¯ğŸ¤— Diffusersç‰ˆæœ¬ï¼Œå¦åˆ™åœ¨ä»HubåŠ è½½æ—¶é»˜è®¤ä¸º`"main"`ã€‚

+   `mirror` (`str`, *optional*) â€” é•œåƒæºï¼Œç”¨äºè§£å†³åœ¨ä¸­å›½ä¸‹è½½æ¨¡å‹æ—¶çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚æˆ‘ä»¬ä¸ä¿è¯æºçš„åŠæ—¶æ€§æˆ–å®‰å…¨æ€§ï¼Œæ‚¨åº”å‚è€ƒé•œåƒç«™ç‚¹è·å–æ›´å¤šä¿¡æ¯ã€‚

+   `device_map` (`str`æˆ–`Dict[str, Union[int, str, torch.device]]`, *optional*) â€” æŒ‡å®šæ¯ä¸ªå­æ¨¡å—åº”è¯¥å»çš„åœ°æ–¹çš„æ˜ å°„ã€‚ä¸éœ€è¦ä¸ºæ¯ä¸ªå‚æ•°/ç¼“å†²åŒºåç§°å®šä¹‰å®ƒï¼›ä¸€æ—¦ç»™å®šæ¨¡å—åç§°åœ¨å†…éƒ¨ï¼Œå®ƒçš„æ¯ä¸ªå­æ¨¡å—éƒ½å°†è¢«å‘é€åˆ°ç›¸åŒçš„è®¾å¤‡ã€‚

    è®¾ç½®`device_map="auto"`ä»¥ä½¿ğŸ¤— Accelerateè‡ªåŠ¨è®¡ç®—æœ€ä¼˜åŒ–çš„`device_map`ã€‚æœ‰å…³æ¯ä¸ªé€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[è®¾è®¡è®¾å¤‡æ˜ å°„](https://hf.co/docs/accelerate/main/en/usage_guides/big_modeling#designing-a-device-map)ã€‚

+   `max_memory` (`Dict`, *optional*) â€” ä¸€ä¸ªå­—å…¸è®¾å¤‡æ ‡è¯†ç¬¦ï¼Œç”¨äºæœ€å¤§å†…å­˜ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†é»˜è®¤ä¸ºæ¯ä¸ªGPUå’Œå¯ç”¨CPU RAMçš„æœ€å¤§å†…å­˜ã€‚

+   `offload_folder` (`str`æˆ–`os.PathLike`, *optional*) â€” å¦‚æœ`device_map`åŒ…å«å€¼`"disk"`ï¼Œåˆ™æ˜¯å¸è½½æƒé‡çš„è·¯å¾„ã€‚

+   `offload_state_dict` (`bool`, *optional*) â€” å¦‚æœä¸º `True`ï¼Œæš‚æ—¶å°†CPUçŠ¶æ€å­—å…¸å¸è½½åˆ°ç¡¬ç›˜ï¼Œä»¥é¿å…CPU RAMä¸è¶³ï¼Œå¦‚æœCPUçŠ¶æ€å­—å…¸çš„é‡é‡ + æ£€æŸ¥ç‚¹çš„æœ€å¤§åˆ†ç‰‡é‡é‡ä¸é€‚åˆã€‚å½“å­˜åœ¨ä¸€äº›ç£ç›˜å¸è½½æ—¶ï¼Œé»˜è®¤ä¸º `True`ã€‚

+   `low_cpu_mem_usage` (`bool`, *optional*, defaults to `True` if torch version >= 1.9.0 else `False`) â€” ä»…åŠ è½½é¢„è®­ç»ƒæƒé‡è€Œä¸åˆå§‹åŒ–æƒé‡ï¼ŒåŠ å¿«æ¨¡å‹åŠ è½½é€Ÿåº¦ã€‚åŒæ—¶å°è¯•åœ¨åŠ è½½æ¨¡å‹æ—¶ä¸ä½¿ç”¨è¶…è¿‡1å€æ¨¡å‹å¤§å°çš„CPUå†…å­˜ï¼ˆåŒ…æ‹¬å³°å€¼å†…å­˜ï¼‰ã€‚ä»…æ”¯æŒPyTorch >= 1.9.0ã€‚å¦‚æœæ‚¨ä½¿ç”¨è¾ƒæ—§ç‰ˆæœ¬çš„PyTorchï¼Œå°†æ­¤å‚æ•°è®¾ç½®ä¸º `True` å°†å¼•å‘é”™è¯¯ã€‚

+   `use_safetensors` (`bool`, *optional*, defaults to `None`) â€” å¦‚æœè®¾ç½®ä¸º `None`ï¼Œåˆ™åœ¨å¯ç”¨æ—¶ä¸‹è½½safetensorsæƒé‡ **å¹¶ä¸”** å¦‚æœå·²å®‰è£…safetensorsåº“ã€‚å¦‚æœè®¾ç½®ä¸º `True`ï¼Œåˆ™å¼ºåˆ¶ä»safetensorsæƒé‡åŠ è½½æ¨¡å‹ã€‚å¦‚æœè®¾ç½®ä¸º `False`ï¼Œåˆ™ä¸åŠ è½½safetensorsæƒé‡ã€‚

+   `use_onnx` (`bool`, *optional*, defaults to `None`) â€” å¦‚æœè®¾ç½®ä¸º `True`ï¼Œåˆ™å§‹ç»ˆä¸‹è½½ONNXæƒé‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚å¦‚æœè®¾ç½®ä¸º `False`ï¼Œåˆ™æ°¸è¿œä¸ä¼šä¸‹è½½ONNXæƒé‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`use_onnx` é»˜è®¤ä¸º `_is_onnx` ç±»å±æ€§ï¼Œå¯¹äºéONNXç®¡é“ä¸º `False`ï¼Œå¯¹äºONNXç®¡é“ä¸º `True`ã€‚ONNXæƒé‡åŒ…æ‹¬ä»¥ `.onnx` å’Œ `.pb` ç»“å°¾çš„æ–‡ä»¶ã€‚

+   `kwargs`ï¼ˆå‰©ä½™çš„å…³é”®å­—å‚æ•°å­—å…¸ï¼Œ*optional*ï¼‰ â€” å¯ç”¨äºè¦†ç›–åŠ è½½å’Œå¯ä¿å­˜å˜é‡ï¼ˆç‰¹å®šç®¡é“ç±»çš„ç®¡é“ç»„ä»¶ï¼‰ã€‚è¢«è¦†ç›–çš„ç»„ä»¶ç›´æ¥ä¼ é€’ç»™ç®¡é“çš„ `__init__` æ–¹æ³•ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹ã€‚

+   `variant` (`str`, *optional*) â€” ä»æŒ‡å®šçš„å˜ä½“æ–‡ä»¶åï¼ˆå¦‚ `"fp16"` æˆ– `"ema"`ï¼‰åŠ è½½æƒé‡ã€‚åœ¨åŠ è½½ `from_flax` æ—¶ä¼šè¢«å¿½ç•¥ã€‚

ä»é¢„è®­ç»ƒçš„ç®¡é“æƒé‡å®ä¾‹åŒ–ä¸€ä¸ªPyTorchæ‰©æ•£ç®¡é“ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡é“è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ï¼ˆ`model.eval()`ï¼‰ã€‚

å¦‚æœæ”¶åˆ°ä¸‹é¢çš„é”™è¯¯æ¶ˆæ¯ï¼Œåˆ™éœ€è¦ä¸ºä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒæƒé‡ï¼š

```py
Some weights of UNet2DConditionModel were not initialized from the model checkpoint at runwayml/stable-diffusion-v1-5 and are newly initialized because the shapes did not match:
- conv_in.weight: found shape torch.Size([320, 4, 3, 3]) in the checkpoint and torch.Size([320, 9, 3, 3]) in the model instantiated
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
```

è¦ä½¿ç”¨ç§æœ‰æˆ–[é—¨æ§](https://huggingface.co/docs/hub/models-gated#gated-models)æ¨¡å‹ï¼Œè¯·ä½¿ç”¨ `huggingface-cli login` ç™»å½•ã€‚

ç¤ºä¾‹ï¼š

```py
>>> from diffusers import DiffusionPipeline

>>> # Download pipeline from huggingface.co and cache.
>>> pipeline = DiffusionPipeline.from_pretrained("CompVis/ldm-text2im-large-256")

>>> # Download pipeline that requires an authorization token
>>> # For more information on access tokens, please refer to this section
>>> # of the documentation](https://huggingface.co/docs/hub/security-tokens)
>>> pipeline = DiffusionPipeline.from_pretrained("runwayml/stable-diffusion-v1-5")

>>> # Use a different scheduler
>>> from diffusers import LMSDiscreteScheduler

>>> scheduler = LMSDiscreteScheduler.from_config(pipeline.scheduler.config)
>>> pipeline.scheduler = scheduler
```

#### `maybe_free_model_hooks`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1480)

```py
( )
```

å‡½æ•°å°†å¸è½½æ‰€æœ‰ç»„ä»¶ï¼Œåˆ é™¤åœ¨ä½¿ç”¨ `enable_model_cpu_offload` æ—¶æ·»åŠ çš„æ‰€æœ‰æ¨¡å‹é’©å­ï¼Œç„¶åå†æ¬¡åº”ç”¨å®ƒä»¬ã€‚å¦‚æœæ¨¡å‹å°šæœªè¢«å¸è½½ï¼Œåˆ™æ­¤å‡½æ•°ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚ç¡®ä¿å°†æ­¤å‡½æ•°æ·»åŠ åˆ°ç®¡é“çš„ `__call__` å‡½æ•°çš„æœ«å°¾ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ `enable_model_cpu_offload` æ—¶æ­£ç¡®è¿è¡Œã€‚

#### `numpy_to_pil`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L1977)

```py
( images )
```

å°†NumPyå›¾åƒæˆ–ä¸€æ‰¹å›¾åƒè½¬æ¢ä¸ºPILå›¾åƒã€‚

#### `save_pretrained`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_utils.py#L624)

```py
( save_directory: Union safe_serialization: bool = True variant: Optional = None push_to_hub: bool = False **kwargs )
```

å‚æ•°

+   `save_directory` (`str` æˆ– `os.PathLike`) â€” ä¿å­˜ç®¡é“çš„ç›®å½•ã€‚å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå°†ä¼šåˆ›å»ºã€‚

+   `safe_serialization` (`bool`, *optional*, defaults to `True`) â€” æ˜¯å¦ä½¿ç”¨ `safetensors` æˆ–ä¼ ç»Ÿçš„PyTorchæ–¹å¼ï¼ˆä½¿ç”¨ `pickle`ï¼‰ä¿å­˜æ¨¡å‹ã€‚

+   `variant` (`str`, *optional*) â€” å¦‚æœæŒ‡å®šï¼Œæƒé‡å°†ä»¥ `pytorch_model.<variant>.bin` æ ¼å¼ä¿å­˜ã€‚

+   `push_to_hub` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦åœ¨ä¿å­˜æ¨¡å‹åå°†å…¶æ¨é€åˆ°Hugging Faceæ¨¡å‹ä¸­å¿ƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `repo_id` æŒ‡å®šè¦æ¨é€åˆ°çš„å­˜å‚¨åº“ï¼ˆå°†é»˜è®¤ä¸ºæ‚¨çš„å‘½åç©ºé—´ä¸­çš„ `save_directory` åç§°ï¼‰ã€‚

+   `kwargs` (`Dict[str, Any]`, *optional*) â€” ä¼ é€’ç»™ [push_to_hub()](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.utils.PushToHubMixin.push_to_hub) æ–¹æ³•çš„é¢å¤–å…³é”®å­—å‚æ•°ã€‚

å°†ç®¡é“çš„æ‰€æœ‰å¯ä¿å­˜å˜é‡ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•ä¸­ã€‚å¦‚æœä¸€ä¸ªç®¡é“å˜é‡çš„ç±»å®ç°äº†ä¿å­˜å’ŒåŠ è½½æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä¿å­˜å’ŒåŠ è½½è¯¥å˜é‡ã€‚å¯ä»¥ä½¿ç”¨[from_pretrained()](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline.from_pretrained)ç±»æ–¹æ³•è½»æ¾é‡æ–°åŠ è½½ç®¡é“ã€‚

## FlaxDiffusionPipeline

### `class diffusers.FlaxDiffusionPipeline`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_flax_utils.py#L101)

```py
( )
```

åŸºäºFlaxçš„ç®¡é“çš„åŸºç±»ã€‚

[FlaxDiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.FlaxDiffusionPipeline)å­˜å‚¨äº†æ‰©æ•£ç®¡é“çš„æ‰€æœ‰ç»„ä»¶ï¼ˆæ¨¡å‹ã€è°ƒåº¦å™¨å’Œå¤„ç†å™¨ï¼‰ï¼Œå¹¶æä¾›äº†åŠ è½½ã€ä¸‹è½½å’Œä¿å­˜æ¨¡å‹çš„æ–¹æ³•ã€‚å®ƒè¿˜åŒ…æ‹¬ç”¨äºï¼š

+   å¯ç”¨/ç¦ç”¨å»å™ªè¿­ä»£çš„è¿›åº¦æ¡

ç±»å±æ€§ï¼š

+   `config_name` (`str`) â€” å­˜å‚¨æ‰€æœ‰æ‰©æ•£ç®¡é“ç»„ä»¶çš„ç±»å’Œæ¨¡å—åç§°çš„é…ç½®æ–‡ä»¶åã€‚

#### `from_pretrained`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_flax_utils.py#L229)

```py
( pretrained_model_name_or_path: Union **kwargs )
```

å‚æ•°

+   `pretrained_model_name_or_path` (`str`æˆ–`os.PathLike`, *optional*) â€” å¯ä»¥æ˜¯ï¼š

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¢„è®­ç»ƒç®¡é“åœ¨Hubä¸Šæ‰˜ç®¡çš„*repo id*ï¼ˆä¾‹å¦‚`runwayml/stable-diffusion-v1-5`ï¼‰ã€‚

    +   ä¸€ä¸ª*ç›®å½•*çš„è·¯å¾„ï¼ˆä¾‹å¦‚`./my_model_directory`ï¼‰ï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨[save_pretrained()](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.FlaxDiffusionPipeline.save_pretrained)ä¿å­˜çš„æ¨¡å‹æƒé‡ã€‚

+   `dtype` (`str`æˆ–`jnp.dtype`, *optional*) â€” è¦†ç›–é»˜è®¤çš„`jnp.dtype`å¹¶åœ¨æ­¤dtypeä¸‹åŠ è½½æ¨¡å‹ã€‚å¦‚æœæ˜¯`"auto"`ï¼Œåˆ™dtypeä¼šæ ¹æ®æ¨¡å‹çš„æƒé‡è‡ªåŠ¨æ¨å¯¼ã€‚

+   `force_download` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦å¼ºåˆ¶ï¼ˆé‡æ–°ï¼‰ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ï¼Œè¦†ç›–ç¼“å­˜ç‰ˆæœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚

+   `resume_download` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦æ¢å¤ä¸‹è½½æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º`False`ï¼Œåˆ™ä¼šåˆ é™¤ä»»ä½•æœªå®Œå…¨ä¸‹è½½çš„æ–‡ä»¶ã€‚

+   `proxies` (`Dict[str, str]`, *optional*) â€” ä¸€ä¸ªä»£ç†æœåŠ¡å™¨å­—å…¸ï¼ŒæŒ‰åè®®æˆ–ç«¯ç‚¹ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œ`{'http': 'foo.bar:3128', 'http://hostname': 'foo.bar:4012'}`ã€‚è¿™äº›ä»£ç†ä¼šåœ¨æ¯ä¸ªè¯·æ±‚ä¸­ä½¿ç”¨ã€‚

+   `output_loading_info(bool,` *optional*, defaults to `False`) â€” æ˜¯å¦è¿”å›åŒ…å«ç¼ºå¤±é”®ã€æ„å¤–é”®å’Œé”™è¯¯æ¶ˆæ¯çš„å­—å…¸ã€‚

+   `local_files_only` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦ä»…åŠ è½½æœ¬åœ°æ¨¡å‹æƒé‡å’Œé…ç½®æ–‡ä»¶ã€‚å¦‚æœè®¾ç½®ä¸º`True`ï¼Œåˆ™ä¸ä¼šä»Hubä¸‹è½½æ¨¡å‹ã€‚

+   `token` (`str`æˆ–*bool*, *optional*) â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶çš„HTTP beareræˆæƒçš„ä»¤ç‰Œã€‚å¦‚æœä¸º`True`ï¼Œåˆ™ä½¿ç”¨ä»`diffusers-cli login`ç”Ÿæˆçš„ä»¤ç‰Œï¼ˆå­˜å‚¨åœ¨`~/.huggingface`ï¼‰ã€‚

+   `revision` (`str`, *optional*, defaults to `"main"`) â€” è¦ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°ã€æäº¤IDæˆ–Gitå…è®¸çš„ä»»ä½•æ ‡è¯†ç¬¦ã€‚

+   `mirror` (`str`, *optional*) â€” é•œåƒæºä»¥è§£å†³åœ¨ä¸­å›½ä¸‹è½½æ¨¡å‹æ—¶çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚æˆ‘ä»¬ä¸ä¿è¯æºçš„åŠæ—¶æ€§æˆ–å®‰å…¨æ€§ï¼Œæ‚¨åº”å‚è€ƒé•œåƒç«™ç‚¹è·å–æ›´å¤šä¿¡æ¯ã€‚

+   `kwargs`ï¼ˆå‰©ä½™çš„å…³é”®å­—å‚æ•°å­—å…¸ï¼Œ*optional*ï¼‰ â€” å¯ä»¥ç”¨æ¥è¦†ç›–ç‰¹å®šç®¡é“ç±»çš„åŠ è½½å’Œå¯ä¿å­˜å˜é‡ï¼ˆç®¡é“ç»„ä»¶ï¼‰ã€‚è¢«è¦†ç›–çš„ç»„ä»¶ç›´æ¥ä¼ é€’ç»™ç®¡é“çš„`__init__`æ–¹æ³•ã€‚

ä»é¢„è®­ç»ƒçš„ç®¡é“æƒé‡å®ä¾‹åŒ–ä¸€ä¸ªåŸºäºFlaxçš„æ‰©æ•£ç®¡é“ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡é“è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ï¼ˆ`model.eval()`ï¼‰ï¼Œå¹¶ä¸”å…³é—­äº†dropoutæ¨¡å—ã€‚

å¦‚æœæ”¶åˆ°ä¸‹é¢çš„é”™è¯¯æ¶ˆæ¯ï¼Œåˆ™éœ€è¦ä¸ºä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒæƒé‡ï¼š

```py
Some weights of FlaxUNet2DConditionModel were not initialized from the model checkpoint at runwayml/stable-diffusion-v1-5 and are newly initialized because the shapes did not match:
```

è¦ä½¿ç”¨ç§æœ‰æˆ–[é—¨æ§æ¨¡å‹](https://huggingface.co/docs/hub/models-gated#gated-models)ï¼Œè¯·ä½¿ç”¨ `huggingface-cli login` ç™»å½•ã€‚

ç¤ºä¾‹:

```py
>>> from diffusers import FlaxDiffusionPipeline

>>> # Download pipeline from huggingface.co and cache.
>>> # Requires to be logged in to Hugging Face hub,
>>> # see more in [the documentation](https://huggingface.co/docs/hub/security-tokens)
>>> pipeline, params = FlaxDiffusionPipeline.from_pretrained(
...     "runwayml/stable-diffusion-v1-5",
...     revision="bf16",
...     dtype=jnp.bfloat16,
... )

>>> # Download pipeline, but use a different scheduler
>>> from diffusers import FlaxDPMSolverMultistepScheduler

>>> model_id = "runwayml/stable-diffusion-v1-5"
>>> dpmpp, dpmpp_state = FlaxDPMSolverMultistepScheduler.from_pretrained(
...     model_id,
...     subfolder="scheduler",
... )

>>> dpm_pipe, dpm_params = FlaxStableDiffusionPipeline.from_pretrained(
...     model_id, revision="bf16", dtype=jnp.bfloat16, scheduler=dpmpp
... )
>>> dpm_params["scheduler"] = dpmpp_state
```

#### `numpy_to_pil`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_flax_utils.py#L588)

```py
( images )
```

å°† NumPy å›¾åƒæˆ–ä¸€æ‰¹å›¾åƒè½¬æ¢ä¸º PIL å›¾åƒã€‚

#### `save_pretrained`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/pipeline_flax_utils.py#L151)

```py
( save_directory: Union params: Union push_to_hub: bool = False **kwargs )
```

å‚æ•°

+   `save_directory` (`str` æˆ– `os.PathLike`) â€” è¦ä¿å­˜åˆ°çš„ç›®å½•ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå°†ä¼šåˆ›å»ºã€‚

+   `push_to_hub` (`bool`, *optional*, é»˜è®¤ä¸º `False`) â€” åœ¨ä¿å­˜æ¨¡å‹åæ˜¯å¦å°†å…¶æ¨é€åˆ° Hugging Face æ¨¡å‹ä¸­å¿ƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `repo_id` æŒ‡å®šè¦æ¨é€åˆ°çš„å­˜å‚¨åº“ï¼ˆå°†é»˜è®¤ä¸ºæ‚¨çš„å‘½åç©ºé—´ä¸­çš„ `save_directory` åç§°ï¼‰ã€‚

+   `kwargs` (`Dict[str, Any]`, *optional*) â€” ä¼ é€’ç»™ [push_to_hub()](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.utils.PushToHubMixin.push_to_hub) æ–¹æ³•çš„é¢å¤–å…³é”®å­—å‚æ•°ã€‚

å°†ç®¡é“çš„æ‰€æœ‰å¯ä¿å­˜å˜é‡ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•ä¸­ã€‚å¦‚æœç®¡é“çš„ç±»å®ç°äº†ä¿å­˜å’ŒåŠ è½½æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä¿å­˜å’ŒåŠ è½½ç®¡é“å˜é‡ã€‚å¯ä»¥ä½¿ç”¨ [from_pretrained()](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.FlaxDiffusionPipeline.from_pretrained) ç±»æ–¹æ³•è½»æ¾é‡æ–°åŠ è½½ç®¡é“ã€‚

## PushToHubMixin

### `class diffusers.utils.PushToHubMixin`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L351)

```py
( )
```

ä¸€ä¸ªç”¨äºå°†æ¨¡å‹ã€è°ƒåº¦å™¨æˆ–ç®¡é“æ¨é€åˆ° Hugging Face Hub çš„ Mixinã€‚

#### `push_to_hub`

[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L380)

```py
( repo_id: str commit_message: Optional = None private: Optional = None token: Optional = None create_pr: bool = False safe_serialization: bool = True variant: Optional = None )
```

å‚æ•°

+   `repo_id` (`str`) â€” æ‚¨è¦å°†æ¨¡å‹ã€è°ƒåº¦å™¨æˆ–ç®¡é“æ–‡ä»¶æ¨é€åˆ°çš„å­˜å‚¨åº“çš„åç§°ã€‚å½“æ¨é€åˆ°ç»„ç»‡æ—¶ï¼Œå®ƒåº”åŒ…å«æ‚¨çš„ç»„ç»‡åç§°ã€‚`repo_id` ä¹Ÿå¯ä»¥æ˜¯æœ¬åœ°ç›®å½•çš„è·¯å¾„ã€‚

+   `commit_message` (`str`, *optional*) â€” æ¨é€æ—¶è¦æäº¤çš„æ¶ˆæ¯ã€‚é»˜è®¤ä¸º `"Upload {object}"`ã€‚

+   `private` (`bool`, *optional*) â€” æ˜¯å¦åˆ›å»ºçš„å­˜å‚¨åº“åº”ä¸ºç§æœ‰ã€‚

+   `token` (`str`, *optional*) â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶çš„ HTTP bearer æˆæƒçš„ä»¤ç‰Œã€‚åœ¨è¿è¡Œ `huggingface-cli login` æ—¶ç”Ÿæˆçš„ä»¤ç‰Œï¼ˆå­˜å‚¨åœ¨ `~/.huggingface` ä¸­ï¼‰ã€‚

+   `create_pr` (`bool`, *optional*, é»˜è®¤ä¸º `False`) â€” æ˜¯å¦åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸Šä¼ æ–‡ä»¶çš„ PR æˆ–ç›´æ¥æäº¤ã€‚

+   `safe_serialization` (`bool`, *optional*, é»˜è®¤ä¸º `True`) â€” æ˜¯å¦å°†æ¨¡å‹æƒé‡è½¬æ¢ä¸º `safetensors` æ ¼å¼ã€‚

+   `variant` (`str`, *optional*) â€” å¦‚æœæŒ‡å®šï¼Œæƒé‡å°†ä»¥ `pytorch_model.<variant>.bin` æ ¼å¼ä¿å­˜ã€‚

å°†æ¨¡å‹ã€è°ƒåº¦å™¨æˆ–ç®¡é“æ–‡ä»¶ä¸Šä¼ åˆ° ğŸ¤— Hugging Face Hubã€‚

ç¤ºä¾‹:

```py
from diffusers import UNet2DConditionModel

unet = UNet2DConditionModel.from_pretrained("stabilityai/stable-diffusion-2", subfolder="unet")

# Push the `unet` to your namespace with the name "my-finetuned-unet".
unet.push_to_hub("my-finetuned-unet")

# Push the `unet` to an organization with the name "my-finetuned-unet".
unet.push_to_hub("your-org/my-finetuned-unet")
```
