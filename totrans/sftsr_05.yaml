- en: Metadata Parsing
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å…ƒæ•°æ®è§£æž
- en: 'Original text: [https://huggingface.co/docs/safetensors/metadata_parsing](https://huggingface.co/docs/safetensors/metadata_parsing)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'åŽŸæ–‡é“¾æŽ¥: [https://huggingface.co/docs/safetensors/metadata_parsing](https://huggingface.co/docs/safetensors/metadata_parsing)'
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Given the simplicity of the format, itâ€™s very simple and efficient to fetch
    and parse metadata about Safetensors weights â€“ i.e. the list of tensors, their
    types, and their shapes or numbers of parameters â€“ using small [(Range) HTTP requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘åˆ°è¿™ç§æ ¼å¼çš„ç®€å•æ€§ï¼Œéžå¸¸ç®€å•å’Œé«˜æ•ˆåœ°èŽ·å–å’Œè§£æžæœ‰å…³Safetensorsæƒé‡çš„å…ƒæ•°æ® - å³å¼ é‡åˆ—è¡¨ã€å®ƒä»¬çš„ç±»åž‹å’Œå®ƒä»¬çš„å½¢çŠ¶æˆ–å‚æ•°æ•°é‡ - ä½¿ç”¨å°çš„[(èŒƒå›´)HTTPè¯·æ±‚](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests)ã€‚
- en: This parsing has been implemented in JS in [`huggingface.js`](https://huggingface.co/docs/huggingface.js/main/en/hub/modules#parsesafetensorsmetadata)
    (sample code follows below), but it would be similar in any language.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§è§£æžå·²ç»åœ¨[`huggingface.js`](https://huggingface.co/docs/huggingface.js/main/en/hub/modules#parsesafetensorsmetadata)ä¸­ç”¨JSå®žçŽ°ï¼ˆä¸‹é¢æ˜¯ç¤ºä¾‹ä»£ç ï¼‰ï¼Œä½†åœ¨ä»»ä½•è¯­è¨€ä¸­éƒ½ä¼šç±»ä¼¼ã€‚
- en: Example use case
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ç”¨ä¾‹
- en: 'There can be many potential use cases. For instance, we use it on the HuggingFace
    Hub to display info about models which have safetensors weights:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: å¯èƒ½æœ‰è®¸å¤šæ½œåœ¨çš„ç”¨ä¾‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨HuggingFace Hubä¸Šä½¿ç”¨å®ƒæ¥æ˜¾ç¤ºå…·æœ‰safetensorsæƒé‡çš„æ¨¡åž‹çš„ä¿¡æ¯ï¼š
- en: '![](../Images/555be3a5ebb40fdd1a0fbd5277d15b1a.png) ![](../Images/1feaa6e3290eb5ae97b1e2e5279e0de1.png)![](../Images/213783eaa480d7a50c99889522778fdd.png)
    ![](../Images/b63c0bdd195755851d17295e7a367d1b.png)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/555be3a5ebb40fdd1a0fbd5277d15b1a.png) ![](../Images/1feaa6e3290eb5ae97b1e2e5279e0de1.png)![](../Images/213783eaa480d7a50c99889522778fdd.png)
    ![](../Images/b63c0bdd195755851d17295e7a367d1b.png)'
- en: Usage
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç”¨æ³•
- en: httpjavascriptpython
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: httpjavascriptpython
- en: From [ðŸ¤— Hub](hf.co/models), you can get metadata of a model with [HTTP range
    requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests) instead
    of downloading the entire safetensors file with all the weights. In this example
    python script below (you can use any language that has HTTP requests support),
    we are parsing metadata of [gpt2](https://huggingface.co/gpt2/blob/main/model.safetensors).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ä»Ž[ðŸ¤— Hub](hf.co/models)ä¸Šï¼Œæ‚¨å¯ä»¥é€šè¿‡[HTTPèŒƒå›´è¯·æ±‚](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests)èŽ·å–æ¨¡åž‹çš„å…ƒæ•°æ®ï¼Œè€Œä¸æ˜¯ä¸‹è½½å¸¦æœ‰æ‰€æœ‰æƒé‡çš„å®Œæ•´safetensorsæ–‡ä»¶ã€‚åœ¨ä¸‹é¢çš„è¿™ä¸ªç¤ºä¾‹pythonè„šæœ¬ä¸­ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒHTTPè¯·æ±‚çš„è¯­è¨€ï¼‰ï¼Œæˆ‘ä»¬æ­£åœ¨è§£æž[gpt2](https://huggingface.co/gpt2/blob/main/model.safetensors)çš„å…ƒæ•°æ®ã€‚
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Example output
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹è¾“å‡º
- en: For instance, here are the number of params per dtype for a few models on the
    HuggingFace Hub. Also see [this issue](https://github.com/huggingface/safetensors/issues/44)
    for more examples of usage.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯HuggingFace Hubä¸Šå‡ ä¸ªæ¨¡åž‹æ¯ç§æ•°æ®ç±»åž‹çš„å‚æ•°æ•°é‡ã€‚è¿˜å¯ä»¥æŸ¥çœ‹[æ­¤é—®é¢˜](https://github.com/huggingface/safetensors/issues/44)ä»¥èŽ·å–æ›´å¤šç”¨æ³•ç¤ºä¾‹ã€‚
- en: '| model | safetensors | params |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| æ¨¡åž‹ | safetensors | å‚æ•° |'
- en: '| --- | --- | --- |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| [gpt2](https://huggingface.co/gpt2?show_tensors=true) | single-file | { â€˜F32â€™
    => 137022720 } |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
  zh: '| [gpt2](https://huggingface.co/gpt2?show_tensors=true) | å•æ–‡ä»¶ | { â€˜F32â€™ =>
    137022720 } |'
- en: '| [roberta-base](https://huggingface.co/roberta-base?show_tensors=true) | single-file
    | { â€˜F32â€™ => 124697433, â€˜I64â€™ => 514 } |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '| [roberta-base](https://huggingface.co/roberta-base?show_tensors=true) | å•æ–‡ä»¶
    | { â€˜F32â€™ => 124697433, â€˜I64â€™ => 514 } |'
- en: '| [Jean-Baptiste/camembert-ner](https://huggingface.co/Jean-Baptiste/camembert-ner?show_tensors=true)
    | single-file | { â€˜F32â€™ => 110035205, â€˜I64â€™ => 514 } |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| [Jean-Baptiste/camembert-ner](https://huggingface.co/Jean-Baptiste/camembert-ner?show_tensors=true)
    | å•æ–‡ä»¶ | { â€˜F32â€™ => 110035205, â€˜I64â€™ => 514 } |'
- en: '| [roberta-large](https://huggingface.co/roberta-large?show_tensors=true) |
    single-file | { â€˜F32â€™ => 355412057, â€˜I64â€™ => 514 } |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| [roberta-large](https://huggingface.co/roberta-large?show_tensors=true) |
    å•æ–‡ä»¶ | { â€˜F32â€™ => 355412057, â€˜I64â€™ => 514 } |'
- en: '| [distilbert-base-german-cased](https://huggingface.co/distilbert-base-german-cased?show_tensors=true)
    | single-file | { â€˜F32â€™ => 67431550 } |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| [distilbert-base-german-cased](https://huggingface.co/distilbert-base-german-cased?show_tensors=true)
    | å•æ–‡ä»¶ | { â€˜F32â€™ => 67431550 } |'
- en: '| [EleutherAI/gpt-neox-20b](https://huggingface.co/EleutherAI/gpt-neox-20b?show_tensors=true)
    | sharded | { â€˜F16â€™ => 20554568208, â€˜U8â€™ => 184549376 } |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| [EleutherAI/gpt-neox-20b](https://huggingface.co/EleutherAI/gpt-neox-20b?show_tensors=true)
    | åˆ†ç‰‡ | { â€˜F16â€™ => 20554568208, â€˜U8â€™ => 184549376 } |'
- en: '| [bigscience/bloom-560m](https://huggingface.co/bigscience/bloom-560m?show_tensors=true)
    | single-file | { â€˜F16â€™ => 559214592 } |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| [bigscience/bloom-560m](https://huggingface.co/bigscience/bloom-560m?show_tensors=true)
    | å•æ–‡ä»¶ | { â€˜F16â€™ => 559214592 } |'
- en: '| [bigscience/bloom](https://huggingface.co/bigscience/bloom?show_tensors=true)
    | sharded | { â€˜BF16â€™ => 176247271424 } |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| [bigscience/bloom](https://huggingface.co/bigscience/bloom?show_tensors=true)
    | åˆ†ç‰‡ | { â€˜BF16â€™ => 176247271424 } |'
- en: '| [bigscience/bloom-3b](https://huggingface.co/bigscience/bloom-3b?show_tensors=true)
    | single-file | { â€˜F16â€™ => 3002557440 } |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| [bigscience/bloom-3b](https://huggingface.co/bigscience/bloom-3b?show_tensors=true)
    | å•æ–‡ä»¶ | { â€˜F16â€™ => 3002557440 } |'
