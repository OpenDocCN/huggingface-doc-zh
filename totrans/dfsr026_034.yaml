- en: Control image brightness
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Original text: [https://huggingface.co/docs/diffusers/using-diffusers/control_brightness](https://huggingface.co/docs/diffusers/using-diffusers/control_brightness)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en:  
    
    
    
    
    
    
    
    
    
    
    
    
  prefs: []
  type: TYPE_NORMAL
- en: The Stable Diffusion pipeline is mediocre at generating images that are either
    very bright or dark as explained in the [Common Diffusion Noise Schedules and
    Sample Steps are Flawed](https://huggingface.co/papers/2305.08891) paper. The
    solutions proposed in the paper are currently implemented in the [DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)
    which you can use to improve the lighting in your images.
  prefs: []
  type: TYPE_NORMAL
- en: ðŸ’¡ Take a look at the paper linked above for more details about the proposed
    solutions!
  prefs: []
  type: TYPE_NORMAL
- en: 'One of the solutions is to train a model with *v prediction* and *v loss*.
    Add the following flag to the [`train_text_to_image.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py)
    or [`train_text_to_image_lora.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)
    scripts to enable `v_prediction`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: For example, letâ€™s use the [`ptx0/pseudo-journey-v2`](https://huggingface.co/ptx0/pseudo-journey-v2)
    checkpoint which has been finetuned with `v_prediction`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, configure the following parameters in the [DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler):'
  prefs: []
  type: TYPE_NORMAL
- en: '`rescale_betas_zero_snr=True`, rescales the noise schedule to zero terminal
    signal-to-noise ratio (SNR)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`timestep_spacing="trailing"`, starts sampling from the last timestep'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Finally, in your call to the pipeline, set `guidance_rescale` to prevent overexposure:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/3870b9f500f183b40c0a88444a5b8e97.png)'
  prefs: []
  type: TYPE_IMG
