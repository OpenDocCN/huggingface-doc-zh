- en: UNetMotionModel
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: UNetMotionModel
- en: 'Original text: [https://huggingface.co/docs/diffusers/api/models/unet-motion](https://huggingface.co/docs/diffusers/api/models/unet-motion)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/diffusers/api/models/unet-motion](https://huggingface.co/docs/diffusers/api/models/unet-motion)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The [UNet](https://huggingface.co/papers/1505.04597) model was originally introduced
    by Ronneberger et al for biomedical image segmentation, but it is also commonly
    used in ğŸ¤— Diffusers because it outputs images that are the same size as the input.
    It is one of the most important components of a diffusion system because it facilitates
    the actual diffusion process. There are several variants of the UNet model in
    ğŸ¤— Diffusers, depending on itâ€™s number of dimensions and whether it is a conditional
    model or not. This is a 2D UNet model.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet](https://huggingface.co/papers/1505.04597)æ¨¡å‹æœ€åˆç”±Ronnebergerç­‰äººå¼•å…¥ï¼Œç”¨äºç”Ÿç‰©åŒ»å­¦å›¾åƒåˆ†å‰²ï¼Œä½†å®ƒä¹Ÿå¸¸ç”¨äºğŸ¤—
    Diffusersï¼Œå› ä¸ºå®ƒè¾“å‡ºä¸è¾“å…¥ç›¸åŒå¤§å°çš„å›¾åƒã€‚å®ƒæ˜¯æ‰©æ•£ç³»ç»Ÿä¸­æœ€é‡è¦çš„ç»„ä»¶ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒä¿ƒè¿›äº†å®é™…çš„æ‰©æ•£è¿‡ç¨‹ã€‚ğŸ¤— Diffusersä¸­æœ‰å‡ ç§UNetæ¨¡å‹çš„å˜ä½“ï¼Œå–å†³äºå®ƒçš„ç»´åº¦æ•°é‡ä»¥åŠå®ƒæ˜¯å¦æ˜¯æ¡ä»¶æ¨¡å‹ã€‚è¿™æ˜¯ä¸€ä¸ª2D
    UNetæ¨¡å‹ã€‚'
- en: 'The abstract from the paper is:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: è®ºæ–‡æ‘˜è¦å¦‚ä¸‹ï¼š
- en: '*There is large consent that successful training of deep networks requires
    many thousand annotated training samples. In this paper, we present a network
    and training strategy that relies on the strong use of data augmentation to use
    the available annotated samples more efficiently. The architecture consists of
    a contracting path to capture context and a symmetric expanding path that enables
    precise localization. We show that such a network can be trained end-to-end from
    very few images and outperforms the prior best method (a sliding-window convolutional
    network) on the ISBI challenge for segmentation of neuronal structures in electron
    microscopic stacks. Using the same network trained on transmitted light microscopy
    images (phase contrast and DIC) we won the ISBI cell tracking challenge 2015 in
    these categories by a large margin. Moreover, the network is fast. Segmentation
    of a 512x512 image takes less than a second on a recent GPU. The full implementation
    (based on Caffe) and the trained networks are available at [http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net](http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net).*'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*å¤§å¤šæ•°äººä¸€è‡´è®¤ä¸ºæˆåŠŸè®­ç»ƒæ·±åº¦ç½‘ç»œéœ€è¦æˆåƒä¸Šä¸‡ä¸ªæ³¨é‡Šè®­ç»ƒæ ·æœ¬ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ä¾èµ–äºæ•°æ®å¢å¼ºçš„ç½‘ç»œå’Œè®­ç»ƒç­–ç•¥ï¼Œä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¯ç”¨çš„æ³¨é‡Šæ ·æœ¬ã€‚è¯¥æ¶æ„ç”±ä¸€ä¸ªæ”¶ç¼©è·¯å¾„å’Œä¸€ä¸ªå¯¹ç§°æ‰©å±•è·¯å¾„ç»„æˆï¼Œç”¨äºæ•è·ä¸Šä¸‹æ–‡å’Œå®ç°ç²¾ç¡®å®šä½ã€‚æˆ‘ä»¬å±•ç¤ºäº†è¿™æ ·ä¸€ä¸ªç½‘ç»œå¯ä»¥ä»å¾ˆå°‘çš„å›¾åƒç«¯åˆ°ç«¯è®­ç»ƒï¼Œå¹¶ä¸”åœ¨ISBIæŒ‘æˆ˜ä¸­è¡¨ç°ä¼˜äºå…ˆå‰æœ€ä½³æ–¹æ³•ï¼ˆæ»‘åŠ¨çª—å£å·ç§¯ç½‘ç»œï¼‰ç”¨äºç”µå­æ˜¾å¾®é•œå †æ ˆä¸­ç¥ç»ç»“æ„çš„åˆ†å‰²ã€‚ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œåœ¨é€å°„å…‰å­¦æ˜¾å¾®é•œå›¾åƒï¼ˆç›¸å·®å’ŒDICï¼‰ä¸Šè®­ç»ƒï¼Œæˆ‘ä»¬åœ¨è¿™äº›ç±»åˆ«ä¸Šä»¥å¾ˆå¤§çš„ä¼˜åŠ¿èµ¢å¾—äº†2015å¹´ISBIç»†èƒè·Ÿè¸ªæŒ‘æˆ˜ã€‚æ­¤å¤–ï¼Œè¯¥ç½‘ç»œé€Ÿåº¦å¾ˆå¿«ã€‚åœ¨æœ€æ–°çš„GPUä¸Šï¼Œå¯¹512x512å›¾åƒçš„åˆ†å‰²ä¸åˆ°ä¸€ç§’ã€‚å®Œæ•´çš„å®ç°ï¼ˆåŸºäºCaffeï¼‰å’Œè®­ç»ƒçš„ç½‘ç»œå¯åœ¨[http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net](http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net)ä¸Šè·å¾—ã€‚*'
- en: UNetMotionModel
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: UNetMotionModel
- en: '### `class diffusers.UNetMotionModel`'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.UNetMotionModel`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L176)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L176)'
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A modified conditional 2D UNet model that takes a noisy sample, conditional
    state, and a timestep and returns a sample shaped output.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªä¿®æ”¹åçš„æ¡ä»¶2D UNetæ¨¡å‹ï¼Œæ¥å—å˜ˆæ‚æ ·æœ¬ã€æ¡ä»¶çŠ¶æ€å’Œæ—¶é—´æ­¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå½¢çŠ¶è¾“å‡ºçš„æ ·æœ¬ã€‚
- en: This model inherits from [ModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.ModelMixin).
    Check the superclass documentation for itâ€™s generic methods implemented for all
    models (such as downloading or saving).
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡å‹ç»§æ‰¿è‡ª[ModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.ModelMixin)ã€‚æ£€æŸ¥è¶…ç±»æ–‡æ¡£ä»¥äº†è§£ä¸ºæ‰€æœ‰æ¨¡å‹å®ç°çš„é€šç”¨æ–¹æ³•ï¼ˆå¦‚ä¸‹è½½æˆ–ä¿å­˜ï¼‰ã€‚
- en: '#### `disable_freeu`'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `disable_freeu`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L695)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L695)'
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Disables the FreeU mechanism.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ç¦ç”¨FreeUæœºåˆ¶ã€‚
- en: '#### `enable_forward_chunking`'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `enable_forward_chunking`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L608)'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L608)'
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Parameters
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`chunk_size` (`int`, *optional*) â€” The chunk size of the feed-forward layers.
    If not specified, will run feed-forward layer individually over each tensor of
    dim=`dim`.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`chunk_size`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼‰â€” å‰é¦ˆå±‚çš„åˆ†å—å¤§å°ã€‚å¦‚æœæœªæŒ‡å®šï¼Œå°†åœ¨dim=`dim`çš„æ¯ä¸ªå¼ é‡ä¸Šå•ç‹¬è¿è¡Œå‰é¦ˆå±‚ã€‚'
- en: '`dim` (`int`, *optional*, defaults to `0`) â€” The dimension over which the feed-forward
    computation should be chunked. Choose between dim=0 (batch) or dim=1 (sequence
    length).'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dim`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`0`ï¼‰â€” å‰é¦ˆè®¡ç®—åº”è¯¥åœ¨å“ªä¸ªç»´åº¦ä¸Šåˆ†å—ã€‚é€‰æ‹©dim=0ï¼ˆæ‰¹å¤„ç†ï¼‰æˆ–dim=1ï¼ˆåºåˆ—é•¿åº¦ï¼‰ä¹‹é—´çš„å€¼ã€‚'
- en: Sets the attention processor to use [feed forward chunking](https://huggingface.co/blog/reformer#2-chunked-feed-forward-layers).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½®æ³¨æ„åŠ›å¤„ç†å™¨ä½¿ç”¨[å‰é¦ˆåˆ†å—](https://huggingface.co/blog/reformer#2-chunked-feed-forward-layers)ã€‚
- en: '#### `enable_freeu`'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `enable_freeu`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L670)'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L670)'
- en: '[PRE3]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`s1` (`float`) â€” Scaling factor for stage 1 to attenuate the contributions
    of the skip features. This is done to mitigate the â€œoversmoothing effectâ€ in the
    enhanced denoising process.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s1`ï¼ˆ`float`ï¼‰â€” é˜¶æ®µ1çš„ç¼©æ”¾å› å­ï¼Œç”¨äºå‡å¼±è·³è·ƒç‰¹å¾çš„è´¡çŒ®ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å‡è½»å¢å¼ºå»å™ªè¿‡ç¨‹ä¸­çš„â€œè¿‡åº¦å¹³æ»‘æ•ˆåº”â€ã€‚'
- en: '`s2` (`float`) â€” Scaling factor for stage 2 to attenuate the contributions
    of the skip features. This is done to mitigate the â€œoversmoothing effectâ€ in the
    enhanced denoising process.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s2`ï¼ˆ`float`ï¼‰â€” é˜¶æ®µ2çš„ç¼©æ”¾å› å­ï¼Œç”¨äºå‡å¼±è·³è·ƒç‰¹å¾çš„è´¡çŒ®ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å‡è½»å¢å¼ºå»å™ªè¿‡ç¨‹ä¸­çš„â€œè¿‡åº¦å¹³æ»‘æ•ˆåº”â€ã€‚'
- en: '`b1` (`float`) â€” Scaling factor for stage 1 to amplify the contributions of
    backbone features.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`b1`ï¼ˆ`float`ï¼‰â€” é˜¶æ®µ1çš„ç¼©æ”¾å› å­ï¼Œç”¨äºæ”¾å¤§éª¨å¹²ç‰¹å¾çš„è´¡çŒ®ã€‚'
- en: '`b2` (`float`) â€” Scaling factor for stage 2 to amplify the contributions of
    backbone features.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`b2`ï¼ˆ`float`ï¼‰â€” é˜¶æ®µ2çš„ç¼©æ”¾å› å­ï¼Œç”¨äºæ”¾å¤§éª¨å¹²ç‰¹å¾çš„è´¡çŒ®ã€‚'
- en: Enables the FreeU mechanism from [https://arxiv.org/abs/2309.11497](https://arxiv.org/abs/2309.11497).
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨æ¥è‡ª [https://arxiv.org/abs/2309.11497](https://arxiv.org/abs/2309.11497) çš„
    FreeU æœºåˆ¶ã€‚
- en: The suffixes after the scaling factors represent the stage blocks where they
    are being applied.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼©æ”¾å› å­åçš„åç¼€è¡¨ç¤ºå®ƒä»¬è¢«åº”ç”¨çš„é˜¶æ®µå—ã€‚
- en: Please refer to the [official repository](https://github.com/ChenyangSi/FreeU)
    for combinations of values that are known to work well for different pipelines
    such as Stable Diffusion v1, v2, and Stable Diffusion XL.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·å‚è€ƒ[å®˜æ–¹å­˜å‚¨åº“](https://github.com/ChenyangSi/FreeU)ä»¥è·å–å·²çŸ¥é€‚ç”¨äºä¸åŒæµæ°´çº¿ï¼ˆå¦‚ Stable Diffusion
    v1ã€v2 å’Œ Stable Diffusion XLï¼‰çš„å€¼ç»„åˆã€‚
- en: '#### `forward`'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `forward`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L703)'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L703)'
- en: '[PRE4]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Parameters
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`torch.FloatTensor`) â€” The noisy input tensor with the following
    shape `(batch, num_frames, channel, height, width`.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample` (`torch.FloatTensor`) â€” å…·æœ‰ä»¥ä¸‹å½¢çŠ¶ `(batch, num_frames, channel, height,
    width)` çš„å˜ˆæ‚è¾“å…¥å¼ é‡ã€‚'
- en: '`timestep` (`torch.FloatTensor` or `float` or `int`) â€” The number of timesteps
    to denoise an input.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestep` (`torch.FloatTensor` æˆ– `float` æˆ– `int`) â€” å¯¹è¾“å…¥è¿›è¡Œå»å™ªçš„æ—¶é—´æ­¥æ•°ã€‚'
- en: '`encoder_hidden_states` (`torch.FloatTensor`) â€” The encoder hidden states with
    shape `(batch, sequence_length, feature_dim)`. timestep_cond â€” (`torch.Tensor`,
    *optional*, defaults to `None`): Conditional embeddings for timestep. If provided,
    the embeddings will be summed with the samples passed through the `self.time_embedding`
    layer to obtain the timestep embeddings.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states` (`torch.FloatTensor`) â€” å…·æœ‰å½¢çŠ¶ `(batch, sequence_length,
    feature_dim)` çš„ç¼–ç å™¨éšè—çŠ¶æ€ã€‚timestep_cond â€” (`torch.Tensor`, *å¯é€‰*, é»˜è®¤ä¸º `None`): æ—¶é—´æ­¥çš„æ¡ä»¶åµŒå…¥ã€‚å¦‚æœæä¾›äº†ï¼Œè¿™äº›åµŒå…¥å°†ä¸é€šè¿‡
    `self.time_embedding` å±‚ä¼ é€’çš„æ ·æœ¬ç›¸åŠ ï¼Œä»¥è·å¾—æ—¶é—´æ­¥åµŒå…¥ã€‚'
- en: '`attention_mask` (`torch.Tensor`, *optional*, defaults to `None`) â€” An attention
    mask of shape `(batch, key_tokens)` is applied to `encoder_hidden_states`. If
    `1` the mask is kept, otherwise if `0` it is discarded. Mask will be converted
    into a bias, which adds large negative values to the attention scores corresponding
    to â€œdiscardâ€ tokens.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attention_mask` (`torch.Tensor`, *å¯é€‰*, é»˜è®¤ä¸º `None`) â€” ä¸€ä¸ªå½¢çŠ¶ä¸º `(batch, key_tokens)`
    çš„æ³¨æ„åŠ›æ©ç è¢«åº”ç”¨äº `encoder_hidden_states`ã€‚å¦‚æœä¸º `1`ï¼Œåˆ™ä¿ç•™æ©ç ï¼Œå¦åˆ™å¦‚æœä¸º `0`ï¼Œåˆ™ä¸¢å¼ƒã€‚æ©ç å°†è¢«è½¬æ¢ä¸ºåç½®ï¼Œè¿™ä¼šåœ¨â€œä¸¢å¼ƒâ€æ ‡è®°å¯¹åº”çš„æ³¨æ„åŠ›åˆ†æ•°ä¸Šæ·»åŠ å¤§çš„è´Ÿå€¼ã€‚'
- en: '`cross_attention_kwargs` (`dict`, *optional*) â€” A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).
    down_block_additional_residuals â€” (`tuple` of `torch.Tensor`, *optional*): A tuple
    of tensors that if specified are added to the residuals of down unet blocks. mid_block_additional_residual
    â€” (`torch.Tensor`, *optional*): A tensor that if specified is added to the residual
    of the middle unet block.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *å¯é€‰*) â€” å¦‚æœæŒ‡å®šäº†ï¼Œå°†ä¼ é€’ç»™ `AttentionProcessor` çš„
    kwargs å­—å…¸ï¼Œå¦‚ [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)
    ä¸­çš„ `self.processor` ä¸­å®šä¹‰çš„é‚£æ ·ã€‚down_block_additional_residuals â€” (`torch.Tensor` çš„
    `tuple`, *å¯é€‰*): å¦‚æœæŒ‡å®šäº†ï¼Œå°†æ·»åŠ åˆ° down unet å—çš„æ®‹å·®ä¸­ã€‚mid_block_additional_residual â€” (`torch.Tensor`,
    *å¯é€‰*): å¦‚æœæŒ‡å®šäº†ï¼Œå°†æ·»åŠ åˆ°ä¸­é—´ unet å—çš„æ®‹å·®ä¸­ã€‚'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) â€” Whether or not to
    return a `~models.unet_3d_condition.UNet3DConditionOutput` instead of a plain
    tuple.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º `True`) â€” æ˜¯å¦è¿”å›ä¸€ä¸ª `~models.unet_3d_condition.UNet3DConditionOutput`
    è€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šå…ƒç»„ã€‚'
- en: Returns
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '`~models.unet_3d_condition.UNet3DConditionOutput` or `tuple`'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '`~models.unet_3d_condition.UNet3DConditionOutput` æˆ– `tuple`'
- en: If `return_dict` is True, an `~models.unet_3d_condition.UNet3DConditionOutput`
    is returned, otherwise a `tuple` is returned where the first element is the sample
    tensor.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ `return_dict` ä¸º Trueï¼Œåˆ™è¿”å›ä¸€ä¸ª `~models.unet_3d_condition.UNet3DConditionOutput`ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ·æœ¬å¼ é‡ã€‚
- en: The [UNetMotionModel](/docs/diffusers/v0.26.3/en/api/models/unet-motion#diffusers.UNetMotionModel)
    forward method.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNetMotionModel](/docs/diffusers/v0.26.3/en/api/models/unet-motion#diffusers.UNetMotionModel)
    çš„å‰å‘æ–¹æ³•ã€‚'
- en: '#### `freeze_unet2d_params`'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `freeze_unet2d_params`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L478)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L478)'
- en: '[PRE5]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Freeze the weights of just the UNet2DConditionModel, and leave the motion modules
    unfrozen for fine tuning.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: å†»ç»“ä»… UNet2DConditionModel çš„æƒé‡ï¼Œå¹¶ä¿æŒè¿åŠ¨æ¨¡å—æœªå†»ç»“ä»¥è¿›è¡Œå¾®è°ƒã€‚
- en: '#### `set_attn_processor`'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_attn_processor`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L573)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L573)'
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Parameters
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`processor` (`dict` of `AttentionProcessor` or only `AttentionProcessor`) â€”
    The instantiated processor class or a dictionary of processor classes that will
    be set as the processor for **all** `Attention` layers.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`processor` (`AttentionProcessor` çš„ `dict` æˆ–ä»… `AttentionProcessor`) â€” å®ä¾‹åŒ–çš„å¤„ç†å™¨ç±»æˆ–å¤„ç†å™¨ç±»çš„å­—å…¸ï¼Œå°†è¢«è®¾ç½®ä¸º**æ‰€æœ‰**
    `Attention` å±‚çš„å¤„ç†å™¨ã€‚'
- en: If `processor` is a dict, the key needs to define the path to the corresponding
    cross attention processor. This is strongly recommended when setting trainable
    attention processors.
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ `processor` æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œåˆ™é”®éœ€è¦å®šä¹‰ç›¸åº”çš„äº¤å‰æ³¨æ„åŠ›å¤„ç†å™¨çš„è·¯å¾„ã€‚åœ¨è®¾ç½®å¯è®­ç»ƒçš„æ³¨æ„åŠ›å¤„ç†å™¨æ—¶ï¼Œå¼ºçƒˆå»ºè®®è¿™æ ·åšã€‚
- en: Sets the attention processor to use to compute attention.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½®ç”¨äºè®¡ç®—æ³¨æ„åŠ›çš„æ³¨æ„åŠ›å¤„ç†å™¨ã€‚
- en: '#### `set_default_attn_processor`'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_default_attn_processor`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L650)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_motion_model.py#L650)'
- en: '[PRE7]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Disables custom attention processors and sets the default attention implementation.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: ç¦ç”¨è‡ªå®šä¹‰æ³¨æ„åŠ›å¤„ç†å™¨å¹¶è®¾ç½®é»˜è®¤çš„æ³¨æ„åŠ›å®ç°ã€‚
- en: UNet3DConditionOutput
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: UNet3DConditionOutput
- en: '### `class diffusers.models.unets.unet_3d_condition.UNet3DConditionOutput`'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.models.unets.unet_3d_condition.UNet3DConditionOutput`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_3d_condition.py#L51)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_3d_condition.py#L51)'
- en: '[PRE8]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Parameters
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`torch.FloatTensor` of shape `(batch_size, num_frames, num_channels,
    height, width)`) â€” The hidden states output conditioned on `encoder_hidden_states`
    input. Output of last layer of model.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, num_frames, num_channels, height, width)`çš„`torch.FloatTensor`ï¼‰-
    åœ¨`encoder_hidden_states`è¾“å…¥æ¡ä»¶ä¸‹çš„éšè—çŠ¶æ€è¾“å‡ºã€‚æ¨¡å‹çš„æœ€åä¸€å±‚çš„è¾“å‡ºã€‚'
- en: The output of [UNet3DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet3d-cond#diffusers.UNet3DConditionModel).
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet3DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet3d-cond#diffusers.UNet3DConditionModel)çš„è¾“å‡ºã€‚'
