- en: Process text data
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¤„ç†æ–‡æœ¬æ•°æ®
- en: 'Original text: [https://huggingface.co/docs/datasets/nlp_process](https://huggingface.co/docs/datasets/nlp_process)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/datasets/nlp_process](https://huggingface.co/docs/datasets/nlp_process)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'This guide shows specific methods for processing text datasets. Learn how to:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æŒ‡å—å±•ç¤ºäº†å¤„ç†æ–‡æœ¬æ•°æ®é›†çš„å…·ä½“æ–¹æ³•ã€‚å­¦ä¹ å¦‚ä½•ï¼š
- en: Tokenize a dataset with [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map).
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    å¯¹æ•°æ®é›†è¿›è¡Œæ ‡è®°åŒ–ã€‚
- en: Align dataset labels with label ids for NLI datasets.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†æ•°æ®é›†æ ‡ç­¾ä¸ NLI æ•°æ®é›†çš„æ ‡ç­¾ id å¯¹é½ã€‚
- en: For a guide on how to process any type of dataset, take a look at the [general
    process guide](./process).
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰å…³å¦‚ä½•å¤„ç†ä»»ä½•ç±»å‹çš„æ•°æ®é›†çš„æŒ‡å—ï¼Œè¯·æŸ¥çœ‹[é€šç”¨å¤„ç†æŒ‡å—](./process)ã€‚
- en: Map
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ˜ å°„
- en: The [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    function supports processing batches of examples at once which speeds up tokenization.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    å‡½æ•°æ”¯æŒä¸€æ¬¡å¤„ç†æ‰¹é‡ç¤ºä¾‹ï¼Œä»è€ŒåŠ å¿«æ ‡è®°åŒ–é€Ÿåº¦ã€‚'
- en: 'Load a tokenizer from ğŸ¤— [Transformers](https://huggingface.co/transformers/):'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä» ğŸ¤— [Transformers](https://huggingface.co/transformers/) åŠ è½½æ ‡è®°å™¨ï¼š
- en: '[PRE0]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Set the `batched` parameter to `True` in the [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    function to apply the tokenizer to batches of examples:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    å‡½æ•°ä¸­å°† `batched` å‚æ•°è®¾ç½®ä¸º `True`ï¼Œä»¥å°†æ ‡è®°å™¨åº”ç”¨äºæ‰¹é‡ç¤ºä¾‹ï¼š
- en: '[PRE1]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The [map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    function converts the returned values to a PyArrow-supported format. But explicitly
    returning the tensors as NumPy arrays is faster because it is a natively supported
    PyArrow format. Set `return_tensors="np"` when you tokenize your text:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map)
    å‡½æ•°å°†è¿”å›çš„å€¼è½¬æ¢ä¸º PyArrow æ”¯æŒçš„æ ¼å¼ã€‚ä½†æ˜¯ï¼Œå°†å¼ é‡æ˜¾å¼è¿”å›ä¸º NumPy æ•°ç»„æ›´å¿«ï¼Œå› ä¸ºå®ƒæ˜¯æœ¬æœºæ”¯æŒçš„ PyArrow æ ¼å¼ã€‚åœ¨æ ‡è®°æ–‡æœ¬æ—¶è®¾ç½®
    `return_tensors="np"`ï¼š'
- en: '[PRE2]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Align
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¯¹é½
- en: 'The [align_labels_with_mapping()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.align_labels_with_mapping)
    function aligns a dataset label id with the label name. Not all ğŸ¤— Transformers
    models follow the prescribed label mapping of the original dataset, especially
    for NLI datasets. For example, the [MNLI](https://huggingface.co/datasets/glue)
    dataset uses the following label mapping:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[align_labels_with_mapping()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.align_labels_with_mapping)
    å‡½æ•°å°†æ•°æ®é›†æ ‡ç­¾ id ä¸æ ‡ç­¾åç§°å¯¹é½ã€‚å¹¶éæ‰€æœ‰ ğŸ¤— Transformers æ¨¡å‹éƒ½éµå¾ªåŸå§‹æ•°æ®é›†çš„è§„å®šæ ‡ç­¾æ˜ å°„ï¼Œç‰¹åˆ«æ˜¯å¯¹äº NLI æ•°æ®é›†ã€‚ä¾‹å¦‚ï¼Œ[MNLI](https://huggingface.co/datasets/glue)
    æ•°æ®é›†ä½¿ç”¨ä»¥ä¸‹æ ‡ç­¾æ˜ å°„ï¼š'
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'To align the dataset label mapping with the mapping used by a model, create
    a dictionary of the label name and id to align on:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å°†æ•°æ®é›†æ ‡ç­¾æ˜ å°„ä¸æ¨¡å‹ä½¿ç”¨çš„æ˜ å°„å¯¹é½ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«æ ‡ç­¾åç§°å’Œ id çš„å­—å…¸è¿›è¡Œå¯¹é½ï¼š
- en: '[PRE4]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Pass the dictionary of the label mappings to the [align_labels_with_mapping()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.align_labels_with_mapping)
    function, and the column to align on:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æ ‡ç­¾æ˜ å°„çš„å­—å…¸ä¼ é€’ç»™ [align_labels_with_mapping()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.align_labels_with_mapping)
    å‡½æ•°ï¼Œå¹¶æŒ‡å®šè¦å¯¹é½çš„åˆ—ï¼š
- en: '[PRE5]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: You can also use this function to assign a custom mapping of labels to ids.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ­¤å‡½æ•°å°†æ ‡ç­¾æ˜ å°„åˆ° id çš„è‡ªå®šä¹‰æ˜ å°„ã€‚
