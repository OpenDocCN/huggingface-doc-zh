- en: Search index
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŽŸæ–‡ï¼š[https://huggingface.co/docs/datasets/faiss_es](https://huggingface.co/docs/datasets/faiss_es)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link href="/docs/datasets/v2.17.0/en/_app/immutable/assets/0.e3b0c442.css"
    rel="modulepreload"> <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/entry/start.146395b0.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/scheduler.bdbef820.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/singletons.98dc5b8b.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/index.8a885b74.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/paths.a483fec8.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/entry/app.e612c4fb.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/index.c0aea24a.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/nodes/0.5e8dbda6.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/each.e59479a4.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/nodes/19.850a5cd4.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/CodeBlock.6ccca92e.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/Heading.2eb892cb.js">
  prefs: []
  type: TYPE_NORMAL
- en: '[FAISS](https://github.com/facebookresearch/faiss) and [Elasticsearch](https://www.elastic.co/elasticsearch/)
    enables searching for examples in a dataset. This can be useful when you want
    to retrieve specific examples from a dataset that are relevant to your NLP task.
    For example, if you are working on a Open Domain Question Answering task, you
    may want to only return examples that are relevant to answering your question.'
  prefs: []
  type: TYPE_NORMAL
- en: This guide will show you how to build an index for your dataset that will allow
    you to search it.
  prefs: []
  type: TYPE_NORMAL
- en: FAISS
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: FAISS retrieves documents based on the similarity of their vector representations.
    In this example, you will generate the vector representations with the [DPR](https://huggingface.co/transformers/model_doc/dpr.html)
    model.
  prefs: []
  type: TYPE_NORMAL
- en: 'Download the DPR model from ðŸ¤— Transformers:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Load your dataset and compute the vector representations:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Create the index with [Dataset.add_faiss_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.add_faiss_index):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Now you can query your dataset with the `embeddings` index. Load the DPR Question
    Encoder, and search for a question with [Dataset.get_nearest_examples()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.get_nearest_examples):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'You can access the index with [Dataset.get_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.get_index)
    and use it for special operations, e.g. query it using `range_search`:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'When you are done querying, save the index on disk with [Dataset.save_faiss_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.save_faiss_index):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Reload it at a later time with [Dataset.load_faiss_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.load_faiss_index):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Elasticsearch
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Unlike FAISS, Elasticsearch retrieves documents based on exact matches.
  prefs: []
  type: TYPE_NORMAL
- en: Start Elasticsearch on your machine, or see the [Elasticsearch installation
    guide](https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html)
    if you donâ€™t already have it installed.
  prefs: []
  type: TYPE_NORMAL
- en: 'Load the dataset you want to index:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Build the index with [Dataset.add_elasticsearch_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.add_elasticsearch_index):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Then you can query the `context` index with [Dataset.get_nearest_examples()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.get_nearest_examples):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'If you want to reuse the index, define the `es_index_name` parameter when you
    build the index:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Reload it later with the index name when you call [Dataset.load_elasticsearch_index()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.load_elasticsearch_index):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'For more advanced Elasticsearch usage, you can specify your own configuration
    with custom settings:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
