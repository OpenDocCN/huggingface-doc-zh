- en: Sentiment Tuning Examples
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://huggingface.co/docs/trl/sentiment_tuning](https://huggingface.co/docs/trl/sentiment_tuning)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link href="/docs/trl/v0.7.10/en/_app/immutable/assets/0.e3b0c442.css" rel="modulepreload">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/entry/start.d9a24ea1.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/scheduler.9039eef2.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/singletons.9eef12cc.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/paths.1355483e.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/entry/app.5bef33b8.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/index.ded8f90d.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/nodes/0.abccdcd8.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/each.e59479a4.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/nodes/20.1afc48e0.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/CodeBlock.8580f3e8.js">
    <link rel="modulepreload" href="/docs/trl/v0.7.10/en/_app/immutable/chunks/Heading.f027f30d.js">
  prefs: []
  type: TYPE_NORMAL
- en: The notebooks and scripts in this examples show how to fine-tune a model with
    a sentiment classifier (such as `lvwerra/distilbert-imdb`).
  prefs: []
  type: TYPE_NORMAL
- en: 'Here’s an overview of the notebooks and scripts in the [trl repository](https://github.com/huggingface/trl/tree/main/examples):'
  prefs: []
  type: TYPE_NORMAL
- en: '| File | Description |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| [`examples/scripts/ppo.py`](https://github.com/huggingface/trl/blob/main/examples/scripts/ppo.py)
    [![Open In Colab](../Images/7e2db436150c38a00650f96925aa5581.png)](https://colab.research.google.com/github/huggingface/trl/blob/main/examples/sentiment/notebooks/gpt2-sentiment.ipynb)
    | This script shows how to use the `PPOTrainer` to fine-tune a sentiment analysis
    model using IMDB dataset |'
  prefs: []
  type: TYPE_TB
- en: '| [`examples/notebooks/gpt2-sentiment.ipynb`](https://github.com/huggingface/trl/tree/main/examples/notebooks/gpt2-sentiment.ipynb)
    | This notebook demonstrates how to reproduce the GPT2 imdb sentiment tuning example
    on a jupyter notebook. |'
  prefs: []
  type: TYPE_TB
- en: '| [`examples/notebooks/gpt2-control.ipynb`](https://github.com/huggingface/trl/tree/main/examples/notebooks/gpt2-control.ipynb)
    [![Open In Colab](../Images/7e2db436150c38a00650f96925aa5581.png)](https://colab.research.google.com/github/huggingface/trl/blob/main/examples/sentiment/notebooks/gpt2-sentiment-control.ipynb)
    | This notebook demonstrates how to reproduce the GPT2 sentiment control example
    on a jupyter notebook. |'
  prefs: []
  type: TYPE_TB
- en: Usage
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Note: if you don’t want to log with `wandb` remove `log_with="wandb"` in the
    scripts/notebooks. You can also replace it with your favourite experiment tracker
    that’s [supported by `accelerate`](https://huggingface.co/docs/accelerate/usage_guides/tracking).'
  prefs: []
  type: TYPE_NORMAL
- en: Few notes on multi-GPU
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To run in multi-GPU setup with DDP (distributed Data Parallel) change the `device_map`
    value to `device_map={"": Accelerator().process_index}` and make sure to run your
    script with `accelerate launch yourscript.py`. If you want to apply naive pipeline
    parallelism you can use `device_map="auto"`.'
  prefs: []
  type: TYPE_NORMAL
- en: Benchmarks
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Below are some benchmark results for `examples/scripts/ppo.py`. To reproduce
    locally, please check out the `--command` arguments below.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/7eb75e2595afa46b69405e410ebe6c16.png)'
  prefs: []
  type: TYPE_IMG
- en: With and without gradient accumulation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/0d187c5e249329742341a95c5a612b0b.png)'
  prefs: []
  type: TYPE_IMG
- en: Comparing different models (gpt2, gpt2-xl, falcon, llama2)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/2c0d7636b8246d84ed501f1808612688.png)'
  prefs: []
  type: TYPE_IMG
- en: With and without PEFT
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/a8ff38e77e1b8e1246b3aba680ea6b0a.png)'
  prefs: []
  type: TYPE_IMG
