- en: UNet2DConditionModel
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: UNet2DConditionModel
- en: 'Original text: [https://huggingface.co/docs/diffusers/api/models/unet2d-cond](https://huggingface.co/docs/diffusers/api/models/unet2d-cond)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡é“¾æ¥ï¼š[https://huggingface.co/docs/diffusers/api/models/unet2d-cond](https://huggingface.co/docs/diffusers/api/models/unet2d-cond)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The [UNet](https://huggingface.co/papers/1505.04597) model was originally introduced
    by Ronneberger et al. for biomedical image segmentation, but it is also commonly
    used in ğŸ¤— Diffusers because it outputs images that are the same size as the input.
    It is one of the most important components of a diffusion system because it facilitates
    the actual diffusion process. There are several variants of the UNet model in
    ğŸ¤— Diffusers, depending on itâ€™s number of dimensions and whether it is a conditional
    model or not. This is a 2D UNet conditional model.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet](https://huggingface.co/papers/1505.04597)æ¨¡å‹æœ€åˆç”±Ronnebergerç­‰äººæå‡ºï¼Œç”¨äºç”Ÿç‰©åŒ»å­¦å›¾åƒåˆ†å‰²ï¼Œä½†å®ƒä¹Ÿå¸¸ç”¨äºğŸ¤—æ‰©æ•£å™¨ï¼Œå› ä¸ºå®ƒè¾“å‡ºä¸è¾“å…¥ç›¸åŒå¤§å°çš„å›¾åƒã€‚å®ƒæ˜¯æ‰©æ•£ç³»ç»Ÿä¸­æœ€é‡è¦çš„ç»„ä»¶ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒä¿ƒè¿›äº†å®é™…çš„æ‰©æ•£è¿‡ç¨‹ã€‚åœ¨ğŸ¤—æ‰©æ•£å™¨ä¸­æœ‰å‡ ä¸ªUNetæ¨¡å‹çš„å˜ä½“ï¼Œå–å†³äºå®ƒçš„ç»´åº¦æ•°é‡ä»¥åŠå®ƒæ˜¯å¦æ˜¯æ¡ä»¶æ¨¡å‹ã€‚è¿™æ˜¯ä¸€ä¸ª2D
    UNetæ¡ä»¶æ¨¡å‹ã€‚'
- en: 'The abstract from the paper is:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: è®ºæ–‡æ‘˜è¦å¦‚ä¸‹ï¼š
- en: '*There is large consent that successful training of deep networks requires
    many thousand annotated training samples. In this paper, we present a network
    and training strategy that relies on the strong use of data augmentation to use
    the available annotated samples more efficiently. The architecture consists of
    a contracting path to capture context and a symmetric expanding path that enables
    precise localization. We show that such a network can be trained end-to-end from
    very few images and outperforms the prior best method (a sliding-window convolutional
    network) on the ISBI challenge for segmentation of neuronal structures in electron
    microscopic stacks. Using the same network trained on transmitted light microscopy
    images (phase contrast and DIC) we won the ISBI cell tracking challenge 2015 in
    these categories by a large margin. Moreover, the network is fast. Segmentation
    of a 512x512 image takes less than a second on a recent GPU. The full implementation
    (based on Caffe) and the trained networks are available at [http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net](http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net).*'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æˆåŠŸè®­ç»ƒæ·±åº¦ç½‘ç»œéœ€è¦æˆåƒä¸Šä¸‡ä¸ªå¸¦æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬çš„å¤§é‡ä¸€è‡´æ€§ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ä¾èµ–äºæ•°æ®å¢å¼ºçš„ç½‘ç»œå’Œè®­ç»ƒç­–ç•¥ï¼Œä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨å¯ç”¨çš„å¸¦æ³¨é‡Šæ ·æœ¬ã€‚è¯¥æ¶æ„åŒ…æ‹¬ä¸€ä¸ªæ”¶ç¼©è·¯å¾„æ¥æ•è·ä¸Šä¸‹æ–‡å’Œä¸€ä¸ªå¯¹ç§°æ‰©å±•è·¯å¾„ï¼Œå®ç°ç²¾ç¡®çš„å®šä½ã€‚æˆ‘ä»¬å±•ç¤ºäº†è¿™æ ·ä¸€ä¸ªç½‘ç»œå¯ä»¥ä»éå¸¸å°‘çš„å›¾åƒç«¯åˆ°ç«¯è®­ç»ƒï¼Œå¹¶ä¸”åœ¨ISBIæŒ‘æˆ˜ä¸­è¡¨ç°ä¼˜äºå…ˆå‰æœ€ä½³æ–¹æ³•ï¼ˆæ»‘åŠ¨çª—å£å·ç§¯ç½‘ç»œï¼‰ç”¨äºç”µå­æ˜¾å¾®é•œå †å ä¸­ç¥ç»ç»“æ„çš„åˆ†å‰²ã€‚ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œåœ¨é€å°„å…‰æ˜¾å¾®é•œå›¾åƒï¼ˆç›¸å·®å’ŒDICï¼‰ä¸Šè®­ç»ƒï¼Œæˆ‘ä»¬åœ¨2015å¹´ISBIç»†èƒè·Ÿè¸ªæŒ‘æˆ˜ä¸­åœ¨è¿™äº›ç±»åˆ«ä¸­å¤§å¹…é¢†å…ˆã€‚æ­¤å¤–ï¼Œè¯¥ç½‘ç»œé€Ÿåº¦å¾ˆå¿«ã€‚åœ¨æœ€æ–°çš„GPUä¸Šï¼Œå¯¹512x512å›¾åƒçš„åˆ†å‰²ä¸åˆ°ä¸€ç§’ã€‚å®Œæ•´çš„å®ç°ï¼ˆåŸºäºCaffeï¼‰å’Œè®­ç»ƒçš„ç½‘ç»œå¯åœ¨[http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net](http://lmb.informatik.uni-freiburg.de/people/ronneber/u-net)ä¸Šæ‰¾åˆ°ã€‚
- en: UNet2DConditionModel
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: UNet2DConditionModel
- en: '### `class diffusers.UNet2DConditionModel`'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.UNet2DConditionModel`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L71)'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L71)'
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Parameters
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample_size` (`int` or `Tuple[int, int]`, *optional*, defaults to `None`)
    â€” Height and width of input/output sample.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample_size`ï¼ˆ`int`æˆ–`Tuple[int, int]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰â€” è¾“å…¥/è¾“å‡ºæ ·æœ¬çš„é«˜åº¦å’Œå®½åº¦ã€‚'
- en: '`in_channels` (`int`, *optional*, defaults to 4) â€” Number of channels in the
    input sample.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`in_channels`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º4ï¼‰â€” è¾“å…¥æ ·æœ¬ä¸­çš„é€šé“æ•°ã€‚'
- en: '`out_channels` (`int`, *optional*, defaults to 4) â€” Number of channels in the
    output.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`out_channels`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º4ï¼‰â€” è¾“å‡ºä¸­çš„é€šé“æ•°ã€‚'
- en: '`center_input_sample` (`bool`, *optional*, defaults to `False`) â€” Whether to
    center the input sample.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`center_input_sample`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦å°†è¾“å…¥æ ·æœ¬å±…ä¸­ã€‚'
- en: '`flip_sin_to_cos` (`bool`, *optional*, defaults to `False`) â€” Whether to flip
    the sin to cos in the time embedding.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`flip_sin_to_cos`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦åœ¨æ—¶é—´åµŒå…¥ä¸­å°†sinç¿»è½¬ä¸ºcosã€‚'
- en: '`freq_shift` (`int`, *optional*, defaults to 0) â€” The frequency shift to apply
    to the time embedding.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`freq_shift`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º0ï¼‰â€” åº”ç”¨äºæ—¶é—´åµŒå…¥çš„é¢‘ç§»ã€‚'
- en: '`down_block_types` (`Tuple[str]`, *optional*, defaults to `("CrossAttnDownBlock2D",
    "CrossAttnDownBlock2D", "CrossAttnDownBlock2D", "DownBlock2D")`) â€” The tuple of
    downsample blocks to use.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`down_block_types`ï¼ˆ`Tuple[str]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`("CrossAttnDownBlock2D", "CrossAttnDownBlock2D",
    "CrossAttnDownBlock2D", "DownBlock2D")`ï¼‰â€” è¦ä½¿ç”¨çš„ä¸‹é‡‡æ ·å—çš„å…ƒç»„ã€‚'
- en: '`mid_block_type` (`str`, *optional*, defaults to `"UNetMidBlock2DCrossAttn"`)
    â€” Block type for middle of UNet, it can be one of `UNetMidBlock2DCrossAttn`, `UNetMidBlock2D`,
    or `UNetMidBlock2DSimpleCrossAttn`. If `None`, the mid block layer is skipped.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mid_block_type`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"UNetMidBlock2DCrossAttn"`ï¼‰â€” UNetä¸­é—´çš„å—ç±»å‹ï¼Œå¯ä»¥æ˜¯`UNetMidBlock2DCrossAttn`ã€`UNetMidBlock2D`æˆ–`UNetMidBlock2DSimpleCrossAttn`ä¹‹ä¸€ã€‚å¦‚æœä¸º`None`ï¼Œåˆ™è·³è¿‡ä¸­é—´å—å±‚ã€‚'
- en: '`up_block_types` (`Tuple[str]`, *optional*, defaults to `("UpBlock2D", "CrossAttnUpBlock2D",
    "CrossAttnUpBlock2D", "CrossAttnUpBlock2D")`) â€” The tuple of upsample blocks to
    use.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`up_block_types`ï¼ˆ`Tuple[str]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`("UpBlock2D", "CrossAttnUpBlock2D",
    "CrossAttnUpBlock2D", "CrossAttnUpBlock2D")`ï¼‰â€” è¦ä½¿ç”¨çš„ä¸Šé‡‡æ ·å—çš„å…ƒç»„ã€‚'
- en: '`only_cross_attention(bool` or `Tuple[bool]`, *optional*, default to `False`)
    â€” Whether to include self-attention in the basic transformer blocks, see `BasicTransformerBlock`.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`only_cross_attention(bool`æˆ–`Tuple[bool]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦åœ¨åŸºæœ¬å˜æ¢å™¨å—ä¸­åŒ…å«è‡ªæ³¨æ„åŠ›ï¼Œå‚è§`BasicTransformerBlock`ã€‚'
- en: '`block_out_channels` (`Tuple[int]`, *optional*, defaults to `(320, 640, 1280,
    1280)`) â€” The tuple of output channels for each block.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`block_out_channels`ï¼ˆ`Tuple[int]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`(320, 640, 1280, 1280)`ï¼‰â€” æ¯ä¸ªå—çš„è¾“å‡ºé€šé“çš„å…ƒç»„ã€‚'
- en: '`layers_per_block` (`int`, *optional*, defaults to 2) â€” The number of layers
    per block.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`layers_per_block`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º2ï¼‰â€” æ¯ä¸ªå—çš„å±‚æ•°ã€‚'
- en: '`downsample_padding` (`int`, *optional*, defaults to 1) â€” The padding to use
    for the downsampling convolution.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`downsample_padding`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º1ï¼‰â€” ç”¨äºä¸‹é‡‡æ ·å·ç§¯çš„å¡«å……ã€‚'
- en: '`mid_block_scale_factor` (`float`, *optional*, defaults to 1.0) â€” The scale
    factor to use for the mid block.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mid_block_scale_factor`ï¼ˆ`float`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º1.0ï¼‰â€” ç”¨äºä¸­é—´å—çš„æ¯”ä¾‹å› å­ã€‚'
- en: '`dropout` (`float`, *optional*, defaults to 0.0) â€” The dropout probability
    to use.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dropout` (`float`, *å¯é€‰*, é»˜è®¤ä¸º0.0) â€” è¦ä½¿ç”¨çš„ dropout æ¦‚ç‡ã€‚'
- en: '`act_fn` (`str`, *optional*, defaults to `"silu"`) â€” The activation function
    to use.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`act_fn` (`str`, *å¯é€‰*, é»˜è®¤ä¸º`"silu"`) â€” è¦ä½¿ç”¨çš„æ¿€æ´»å‡½æ•°ã€‚'
- en: '`norm_num_groups` (`int`, *optional*, defaults to 32) â€” The number of groups
    to use for the normalization. If `None`, normalization and activation layers is
    skipped in post-processing.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`norm_num_groups` (`int`, *å¯é€‰*, é»˜è®¤ä¸º32) â€” ç”¨äºè§„èŒƒåŒ–çš„ç»„æ•°ã€‚å¦‚æœä¸º`None`ï¼Œåˆ™åœ¨åå¤„ç†ä¸­è·³è¿‡è§„èŒƒåŒ–å’Œæ¿€æ´»å±‚ã€‚'
- en: '`norm_eps` (`float`, *optional*, defaults to 1e-5) â€” The epsilon to use for
    the normalization.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`norm_eps` (`float`, *å¯é€‰*, é»˜è®¤ä¸º1e-5) â€” ç”¨äºè§„èŒƒåŒ–çš„ epsilon å€¼ã€‚'
- en: '`cross_attention_dim` (`int` or `Tuple[int]`, *optional*, defaults to 1280)
    â€” The dimension of the cross attention features.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_dim` (`int` æˆ– `Tuple[int]`, *å¯é€‰*, é»˜è®¤ä¸º1280) â€” äº¤å‰æ³¨æ„åŠ›ç‰¹å¾çš„ç»´åº¦ã€‚'
- en: '`transformer_layers_per_block` (`int`, `Tuple[int]`, or `Tuple[Tuple]` , *optional*,
    defaults to 1) â€” The number of transformer blocks of type `BasicTransformerBlock`.
    Only relevant for `~models.unet_2d_blocks.CrossAttnDownBlock2D`, `~models.unet_2d_blocks.CrossAttnUpBlock2D`,
    `~models.unet_2d_blocks.UNetMidBlock2DCrossAttn`.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_layers_per_block` (`int`, `Tuple[int]`, æˆ– `Tuple[Tuple]`, *å¯é€‰*,
    é»˜è®¤ä¸º1) â€” `BasicTransformerBlock` ç±»å‹çš„ transformer å—çš„æ•°é‡ã€‚ä»…é€‚ç”¨äº `~models.unet_2d_blocks.CrossAttnDownBlock2D`,
    `~models.unet_2d_blocks.CrossAttnUpBlock2D`, `~models.unet_2d_blocks.UNetMidBlock2DCrossAttn`ã€‚'
- en: A conditional 2D UNet model that takes a noisy sample, conditional state, and
    a timestep and returns a sample shaped output.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæœ‰æ¡ä»¶çš„ 2D UNet æ¨¡å‹ï¼Œæ¥å—ä¸€ä¸ªå¸¦å™ªå£°çš„æ ·æœ¬ã€æ¡ä»¶çŠ¶æ€å’Œä¸€ä¸ªæ—¶é—´æ­¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå½¢çŠ¶è¾“å‡ºçš„æ ·æœ¬ã€‚
- en: This model inherits from [ModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.ModelMixin).
    Check the superclass documentation for itâ€™s generic methods implemented for all
    models (such as downloading or saving).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ¨¡å‹ç»§æ‰¿è‡ª [ModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.ModelMixin)ã€‚æŸ¥çœ‹è¶…ç±»æ–‡æ¡£ä»¥äº†è§£ä¸ºæ‰€æœ‰æ¨¡å‹å®ç°çš„é€šç”¨æ–¹æ³•ï¼ˆå¦‚ä¸‹è½½æˆ–ä¿å­˜ï¼‰ã€‚
- en: 'reverse_transformer_layers_per_block : (`Tuple[Tuple]`, *optional*, defaults
    to None): The number of transformer blocks of type `BasicTransformerBlock`, in
    the upsampling blocks of the U-Net. Only relevant if `transformer_layers_per_block`
    is of type `Tuple[Tuple]` and for `~models.unet_2d_blocks.CrossAttnDownBlock2D`,
    `~models.unet_2d_blocks.CrossAttnUpBlock2D`, `~models.unet_2d_blocks.UNetMidBlock2DCrossAttn`.
    encoder_hid_dim (`int`, *optional*, defaults to None): If `encoder_hid_dim_type`
    is defined, `encoder_hidden_states` will be projected from `encoder_hid_dim` dimension
    to `cross_attention_dim`. encoder_hid_dim_type (`str`, *optional*, defaults to
    `None`): If given, the `encoder_hidden_states` and potentially other embeddings
    are down-projected to text embeddings of dimension `cross_attention` according
    to `encoder_hid_dim_type`. attention_head_dim (`int`, *optional*, defaults to
    8): The dimension of the attention heads. num_attention_heads (`int`, *optional*):
    The number of attention heads. If not defined, defaults to `attention_head_dim`
    resnet_time_scale_shift (`str`, *optional*, defaults to `"default"`): Time scale
    shift config for ResNet blocks (see `ResnetBlock2D`). Choose from `default` or
    `scale_shift`. class_embed_type (`str`, *optional*, defaults to `None`): The type
    of class embedding to use which is ultimately summed with the time embeddings.
    Choose from `None`, `"timestep"`, `"identity"`, `"projection"`, or `"simple_projection"`.
    addition_embed_type (`str`, *optional*, defaults to `None`): Configures an optional
    embedding which will be summed with the time embeddings. Choose from `None` or
    â€œtextâ€. â€œtextâ€ will use the `TextTimeEmbedding` layer. addition_time_embed_dim:
    (`int`, *optional*, defaults to `None`): Dimension for the timestep embeddings.
    num_class_embeds (`int`, *optional*, defaults to `None`): Input dimension of the
    learnable embedding matrix to be projected to `time_embed_dim`, when performing
    class conditioning with `class_embed_type` equal to `None`. time_embedding_type
    (`str`, *optional*, defaults to `positional`): The type of position embedding
    to use for timesteps. Choose from `positional` or `fourier`. time_embedding_dim
    (`int`, *optional*, defaults to `None`): An optional override for the dimension
    of the projected time embedding. time_embedding_act_fn (`str`, *optional*, defaults
    to `None`): Optional activation function to use only once on the time embeddings
    before they are passed to the rest of the UNet. Choose from `silu`, `mish`, `gelu`,
    and `swish`. timestep_post_act (`str`, *optional*, defaults to `None`): The second
    activation function to use in timestep embedding. Choose from `silu`, `mish` and
    `gelu`. time_cond_proj_dim (`int`, *optional*, defaults to `None`): The dimension
    of `cond_proj` layer in the timestep embedding. conv_in_kernel (`int`, *optional*,
    default to `3`): The kernel size of `conv_in` layer. conv_out_kernel (`int`, *optional*,
    default to `3`): The kernel size of `conv_out` layer. projection_class_embeddings_input_dim
    (`int`, *optional*): The dimension of the `class_labels` input when `class_embed_type="projection"`.
    Required when `class_embed_type="projection"`. class_embeddings_concat (`bool`,
    *optional*, defaults to `False`): Whether to concatenate the time embeddings with
    the class embeddings. mid_block_only_cross_attention (`bool`, *optional*, defaults
    to `None`): Whether to use cross attention with the mid block when using the `UNetMidBlock2DSimpleCrossAttn`.
    If `only_cross_attention` is given as a single boolean and `mid_block_only_cross_attention`
    is `None`, the `only_cross_attention` value is used as the value for `mid_block_only_cross_attention`.
    Default to `False` otherwise.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: reverse_transformer_layers_per_blockï¼šï¼ˆ`Tuple[Tuple]`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸ºNoneï¼‰ï¼šåœ¨U-Netçš„ä¸Šé‡‡æ ·å—ä¸­ï¼Œ`BasicTransformerBlock`ç±»å‹çš„transformerå—çš„æ•°é‡ã€‚ä»…åœ¨`transformer_layers_per_block`ä¸º`Tuple[Tuple]`ç±»å‹ä¸”å¯¹äº`~models.unet_2d_blocks.CrossAttnDownBlock2D`ï¼Œ`~models.unet_2d_blocks.CrossAttnUpBlock2D`ï¼Œ`~models.unet_2d_blocks.UNetMidBlock2DCrossAttn`æ—¶ç›¸å…³ã€‚encoder_hid_dimï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸ºNoneï¼‰ï¼šå¦‚æœå®šä¹‰äº†`encoder_hid_dim_type`ï¼Œåˆ™å°†ä»`encoder_hid_dim`ç»´åº¦æŠ•å½±åˆ°`cross_attention_dim`çš„`encoder_hidden_states`ã€‚encoder_hid_dim_typeï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šå¦‚æœç»™å®šï¼Œå°†æ ¹æ®`encoder_hid_dim_type`å°†`encoder_hidden_states`å’Œå¯èƒ½çš„å…¶ä»–åµŒå…¥å‘ä¸‹æŠ•å½±åˆ°ç»´åº¦ä¸º`cross_attention`çš„æ–‡æœ¬åµŒå…¥ã€‚attention_head_dimï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º8ï¼‰ï¼šæ³¨æ„åŠ›å¤´çš„ç»´åº¦ã€‚num_attention_headsï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼‰ï¼šæ³¨æ„åŠ›å¤´çš„æ•°é‡ã€‚å¦‚æœæœªå®šä¹‰ï¼Œåˆ™é»˜è®¤ä¸º`attention_head_dim`ã€‚resnet_time_scale_shiftï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"default"`ï¼‰ï¼šResNetå—çš„æ—¶é—´å°ºåº¦åç§»é…ç½®ï¼ˆå‚è§`ResnetBlock2D`ï¼‰ã€‚é€‰æ‹©`default`æˆ–`scale_shift`ã€‚class_embed_typeï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šè¦ä½¿ç”¨çš„ç±»åµŒå…¥ç±»å‹ï¼Œæœ€ç»ˆå°†ä¸æ—¶é—´åµŒå…¥ç›¸åŠ ã€‚é€‰æ‹©`None`ã€`"timestep"`ã€`"identity"`ã€`"projection"`æˆ–`"simple_projection"`ã€‚addition_embed_typeï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šé…ç½®ä¸€ä¸ªå¯é€‰çš„åµŒå…¥ï¼Œå°†ä¸æ—¶é—´åµŒå…¥ç›¸åŠ ã€‚é€‰æ‹©`None`æˆ–â€œtextâ€ã€‚â€œtextâ€å°†ä½¿ç”¨`TextTimeEmbedding`å±‚ã€‚addition_time_embed_dimï¼šï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šæ—¶é—´æ­¥åµŒå…¥çš„ç»´åº¦ã€‚num_class_embedsï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šè¦æŠ•å½±åˆ°`time_embed_dim`çš„å¯å­¦ä¹ åµŒå…¥çŸ©é˜µçš„è¾“å…¥ç»´åº¦ï¼Œå½“ä½¿ç”¨`class_embed_type`ç­‰äº`None`è¿›è¡Œç±»åˆ«è°ƒèŠ‚æ—¶ã€‚time_embedding_typeï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`positional`ï¼‰ï¼šç”¨äºæ—¶é—´æ­¥çš„ä½ç½®åµŒå…¥ç±»å‹ã€‚é€‰æ‹©`positional`æˆ–`fourier`ã€‚time_embedding_dimï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šæŠ•å½±æ—¶é—´åµŒå…¥çš„ç»´åº¦çš„å¯é€‰è¦†ç›–ã€‚time_embedding_act_fnï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šä»…åœ¨æ—¶é—´åµŒå…¥ä¼ é€’åˆ°UNetçš„å…¶ä½™éƒ¨åˆ†ä¹‹å‰ä½¿ç”¨çš„å¯é€‰æ¿€æ´»å‡½æ•°ã€‚é€‰æ‹©`silu`ã€`mish`ã€`gelu`å’Œ`swish`ã€‚timestep_post_actï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šåœ¨æ—¶é—´æ­¥åµŒå…¥ä¸­ä½¿ç”¨çš„ç¬¬äºŒä¸ªæ¿€æ´»å‡½æ•°ã€‚é€‰æ‹©`silu`ã€`mish`å’Œ`gelu`ã€‚time_cond_proj_dimï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šæ—¶é—´æ­¥åµŒå…¥ä¸­`cond_proj`å±‚çš„ç»´åº¦ã€‚conv_in_kernelï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`3`ï¼‰ï¼š`conv_in`å±‚çš„å†…æ ¸å¤§å°ã€‚conv_out_kernelï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`3`ï¼‰ï¼š`conv_out`å±‚çš„å†…æ ¸å¤§å°ã€‚projection_class_embeddings_input_dimï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼‰ï¼šå½“`class_embed_type="projection"`æ—¶ï¼Œ`class_labels`è¾“å…¥çš„ç»´åº¦ã€‚åœ¨`class_embed_type="projection"`æ—¶éœ€è¦ã€‚class_embeddings_concatï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰ï¼šæ˜¯å¦å°†æ—¶é—´åµŒå…¥ä¸ç±»åµŒå…¥è¿æ¥èµ·æ¥ã€‚mid_block_only_cross_attentionï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`ï¼‰ï¼šåœ¨ä½¿ç”¨`UNetMidBlock2DSimpleCrossAttn`æ—¶æ˜¯å¦åœ¨ä¸­é—´å—ä¸­ä½¿ç”¨äº¤å‰æ³¨æ„åŠ›ã€‚å¦‚æœ`only_cross_attention`ä½œä¸ºå•ä¸ªå¸ƒå°”å€¼ç»™å‡ºä¸”`mid_block_only_cross_attention`ä¸º`None`ï¼Œåˆ™`only_cross_attention`å€¼å°†ç”¨ä½œ`mid_block_only_cross_attention`çš„å€¼ã€‚å¦åˆ™é»˜è®¤ä¸º`False`ã€‚
- en: '#### `disable_freeu`'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `disable_freeu`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L788)'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L788)'
- en: '[PRE1]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Disables the FreeU mechanism.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ç¦ç”¨FreeUæœºåˆ¶ã€‚
- en: '#### `enable_freeu`'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `enable_freeu`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L764)'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L764)'
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Parameters
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`s1` (`float`) â€” Scaling factor for stage 1 to attenuate the contributions
    of the skip features. This is done to mitigate the â€œoversmoothing effectâ€ in the
    enhanced denoising process.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s1` (`float`) â€” é˜¶æ®µ1çš„ç¼©æ”¾å› å­ï¼Œç”¨äºå‡å¼±è·³è·ƒç‰¹å¾çš„è´¡çŒ®ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å‡è½»å¢å¼ºå»å™ªè¿‡ç¨‹ä¸­çš„â€œè¿‡åº¦å¹³æ»‘æ•ˆåº”â€ã€‚'
- en: '`s2` (`float`) â€” Scaling factor for stage 2 to attenuate the contributions
    of the skip features. This is done to mitigate the â€œoversmoothing effectâ€ in the
    enhanced denoising process.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`s2` (`float`) â€” é˜¶æ®µ2çš„ç¼©æ”¾å› å­ï¼Œç”¨äºå‡å¼±è·³è·ƒç‰¹å¾çš„è´¡çŒ®ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å‡è½»å¢å¼ºå»å™ªè¿‡ç¨‹ä¸­çš„â€œè¿‡åº¦å¹³æ»‘æ•ˆåº”â€ã€‚'
- en: '`b1` (`float`) â€” Scaling factor for stage 1 to amplify the contributions of
    backbone features.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`b1` (`float`) â€” é˜¶æ®µ1çš„ç¼©æ”¾å› å­ï¼Œç”¨äºæ”¾å¤§ä¸»å¹²ç‰¹å¾çš„è´¡çŒ®ã€‚'
- en: '`b2` (`float`) â€” Scaling factor for stage 2 to amplify the contributions of
    backbone features.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`b2` (`float`) â€” é˜¶æ®µ2çš„ç¼©æ”¾å› å­ï¼Œç”¨äºæ”¾å¤§ä¸»å¹²ç‰¹å¾çš„è´¡çŒ®ã€‚'
- en: Enables the FreeU mechanism from [https://arxiv.org/abs/2309.11497](https://arxiv.org/abs/2309.11497).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨æ¥è‡ª[https://arxiv.org/abs/2309.11497](https://arxiv.org/abs/2309.11497)çš„FreeUæœºåˆ¶ã€‚
- en: The suffixes after the scaling factors represent the stage blocks where they
    are being applied.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼©æ”¾å› å­åç¼€è¡¨ç¤ºå®ƒä»¬è¢«åº”ç”¨çš„é˜¶æ®µå—ã€‚
- en: Please refer to the [official repository](https://github.com/ChenyangSi/FreeU)
    for combinations of values that are known to work well for different pipelines
    such as Stable Diffusion v1, v2, and Stable Diffusion XL.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·å‚è€ƒ[å®˜æ–¹å­˜å‚¨åº“](https://github.com/ChenyangSi/FreeU)ä»¥è·å–å·²çŸ¥é€‚ç”¨äºä¸åŒæµæ°´çº¿ï¼ˆå¦‚Stable Diffusion
    v1ã€v2å’ŒStable Diffusion XLï¼‰çš„å€¼ç»„åˆã€‚
- en: '#### `forward`'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `forward`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L843)'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L843)'
- en: '[PRE3]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`torch.FloatTensor`) â€” The noisy input tensor with the following
    shape `(batch, channel, height, width)`.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample` (`torch.FloatTensor`) â€” å…·æœ‰ä»¥ä¸‹å½¢çŠ¶çš„å˜ˆæ‚è¾“å…¥å¼ é‡`(batch, channel, height, width)`ã€‚'
- en: '`timestep` (`torch.FloatTensor` or `float` or `int`) â€” The number of timesteps
    to denoise an input.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestep` (`torch.FloatTensor`æˆ–`float`æˆ–`int`) â€” å¯¹è¾“å…¥è¿›è¡Œå»å™ªçš„æ—¶é—´æ­¥æ•°ã€‚'
- en: '`encoder_hidden_states` (`torch.FloatTensor`) â€” The encoder hidden states with
    shape `(batch, sequence_length, feature_dim)`.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states` (`torch.FloatTensor`) â€” å…·æœ‰å½¢çŠ¶`(batch, sequence_length,
    feature_dim)`çš„ç¼–ç å™¨éšè—çŠ¶æ€ã€‚'
- en: '`class_labels` (`torch.Tensor`, *optional*, defaults to `None`) â€” Optional
    class labels for conditioning. Their embeddings will be summed with the timestep
    embeddings. timestep_cond â€” (`torch.Tensor`, *optional*, defaults to `None`):
    Conditional embeddings for timestep. If provided, the embeddings will be summed
    with the samples passed through the `self.time_embedding` layer to obtain the
    timestep embeddings.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`class_labels` (`torch.Tensor`, *å¯é€‰*, é»˜è®¤ä¸º `None`) â€” ç”¨äºæ¡ä»¶åŒ–çš„å¯é€‰ç±»æ ‡ç­¾ã€‚å®ƒä»¬çš„åµŒå…¥å°†ä¸æ—¶é—´æ­¥åµŒå…¥ç›¸åŠ ã€‚timestep_cond
    â€” (`torch.Tensor`, *å¯é€‰*, é»˜è®¤ä¸º `None`): æ—¶é—´æ­¥çš„æ¡ä»¶åµŒå…¥ã€‚å¦‚æœæä¾›ï¼Œè¿™äº›åµŒå…¥å°†ä¸é€šè¿‡`self.time_embedding`å±‚ä¼ é€’çš„æ ·æœ¬ç›¸åŠ ï¼Œä»¥è·å¾—æ—¶é—´æ­¥åµŒå…¥ã€‚'
- en: '`attention_mask` (`torch.Tensor`, *optional*, defaults to `None`) â€” An attention
    mask of shape `(batch, key_tokens)` is applied to `encoder_hidden_states`. If
    `1` the mask is kept, otherwise if `0` it is discarded. Mask will be converted
    into a bias, which adds large negative values to the attention scores corresponding
    to â€œdiscardâ€ tokens.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attention_mask` (`torch.Tensor`, *å¯é€‰*, é»˜è®¤ä¸º `None`) â€” å½¢çŠ¶ä¸º`(batch, key_tokens)`çš„æ³¨æ„åŠ›æ©ç è¢«åº”ç”¨äº`encoder_hidden_states`ã€‚å¦‚æœä¸º`1`ï¼Œåˆ™ä¿ç•™æ©ç ï¼Œå¦åˆ™å¦‚æœä¸º`0`ï¼Œåˆ™ä¸¢å¼ƒæ©ç ã€‚æ©ç å°†è¢«è½¬æ¢ä¸ºåç½®ï¼Œè¯¥åç½®ä¼šå‘â€œä¸¢å¼ƒâ€æ ‡è®°å¯¹åº”çš„æ³¨æ„åŠ›åˆ†æ•°æ·»åŠ å¤§çš„è´Ÿå€¼ã€‚'
- en: '`cross_attention_kwargs` (`dict`, *optional*) â€” A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).
    added_cond_kwargs â€” (`dict`, *optional*): A kwargs dictionary containing additional
    embeddings that if specified are added to the embeddings that are passed along
    to the UNet blocks. down_block_additional_residuals â€” (`tuple` of `torch.Tensor`,
    *optional*): A tuple of tensors that if specified are added to the residuals of
    down unet blocks. mid_block_additional_residual â€” (`torch.Tensor`, *optional*):
    A tensor that if specified is added to the residual of the middle unet block.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *å¯é€‰*) â€” ä¸€ä¸ªkwargså­—å…¸ï¼Œå¦‚æœæŒ‡å®šï¼Œåˆ™å°†ä¼ é€’ç»™`AttentionProcessor`ï¼Œå¦‚[diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)ä¸­çš„`self.processor`ä¸­å®šä¹‰çš„é‚£æ ·ã€‚added_cond_kwargs
    â€” (`dict`, *å¯é€‰*): ä¸€ä¸ªkwargså­—å…¸ï¼ŒåŒ…å«é¢å¤–çš„åµŒå…¥ï¼Œå¦‚æœæŒ‡å®šï¼Œåˆ™å°†æ·»åŠ åˆ°ä¼ é€’ç»™UNetå—çš„åµŒå…¥ä¸­ã€‚down_block_additional_residuals
    â€” (`torch.Tensor`çš„å…ƒç»„ï¼Œ*å¯é€‰*): ä¸€ä¸ªå¼ é‡çš„å…ƒç»„ï¼Œå¦‚æœæŒ‡å®šï¼Œåˆ™å°†æ·»åŠ åˆ°down unetå—çš„æ®‹å·®ä¸­ã€‚mid_block_additional_residual
    â€” (`torch.Tensor`, *å¯é€‰*): ä¸€ä¸ªå¼ é‡ï¼Œå¦‚æœæŒ‡å®šï¼Œåˆ™å°†æ·»åŠ åˆ°ä¸­é—´unetå—çš„æ®‹å·®ä¸­ã€‚'
- en: '`encoder_attention_mask` (`torch.Tensor`) â€” A cross-attention mask of shape
    `(batch, sequence_length)` is applied to `encoder_hidden_states`. If `True` the
    mask is kept, otherwise if `False` it is discarded. Mask will be converted into
    a bias, which adds large negative values to the attention scores corresponding
    to â€œdiscardâ€ tokens.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_attention_mask` (`torch.Tensor`) â€” å½¢çŠ¶ä¸º`(batch, sequence_length)`çš„äº¤å‰æ³¨æ„åŠ›æ©ç è¢«åº”ç”¨äº`encoder_hidden_states`ã€‚å¦‚æœä¸º`True`ï¼Œåˆ™ä¿ç•™æ©ç ï¼Œå¦åˆ™å¦‚æœä¸º`False`ï¼Œåˆ™ä¸¢å¼ƒæ©ç ã€‚æ©ç å°†è¢«è½¬æ¢ä¸ºåç½®ï¼Œè¯¥åç½®ä¼šå‘â€œä¸¢å¼ƒâ€æ ‡è®°å¯¹åº”çš„æ³¨æ„åŠ›åˆ†æ•°æ·»åŠ å¤§çš„è´Ÿå€¼ã€‚'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) â€” Whether or not to
    return a [UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)
    instead of a plain tuple.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º `True`) â€” æ˜¯å¦è¿”å›ä¸€ä¸ª[UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)è€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„å…ƒç»„ã€‚'
- en: '`cross_attention_kwargs` (`dict`, *optional*) â€” A kwargs dictionary that if
    specified is passed along to the `AttnProcessor`. added_cond_kwargs â€” (`dict`,
    *optional*): A kwargs dictionary containin additional embeddings that if specified
    are added to the embeddings that are passed along to the UNet blocks.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs`ï¼ˆ`dict`ï¼Œ*å¯é€‰*ï¼‰â€”å¦‚æœæŒ‡å®šï¼Œå°†ä¼ é€’ç»™`AttnProcessor`çš„kwargså­—å…¸ã€‚added_cond_kwargs
    â€”ï¼ˆ`dict`ï¼Œ*å¯é€‰*ï¼‰ï¼šåŒ…å«é¢å¤–åµŒå…¥çš„kwargså­—å…¸ï¼Œå¦‚æœæŒ‡å®šï¼Œåˆ™å°†æ·»åŠ åˆ°ä¼ é€’ç»™UNetå—çš„åµŒå…¥ä¸­ã€‚'
- en: '`down_block_additional_residuals` (`tuple` of `torch.Tensor`, *optional*) â€”
    additional residuals to be added to UNet long skip connections from down blocks
    to up blocks for example from ControlNet side model(s)'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`down_block_additional_residuals`ï¼ˆ`torch.Tensor`çš„`tuple`ï¼Œ*å¯é€‰*ï¼‰â€”è¦æ·»åŠ åˆ°UNeté•¿è·³è¿æ¥çš„é¢å¤–æ®‹å·®ï¼Œä¾‹å¦‚æ¥è‡ªControlNetä¾§æ¨¡å‹'
- en: '`mid_block_additional_residual` (`torch.Tensor`, *optional*) â€” additional residual
    to be added to UNet mid block output, for example from ControlNet side model'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mid_block_additional_residual`ï¼ˆ`torch.Tensor`ï¼Œ*å¯é€‰*ï¼‰â€”è¦æ·»åŠ åˆ°UNetä¸­é—´å—è¾“å‡ºçš„é¢å¤–æ®‹å·®ï¼Œä¾‹å¦‚æ¥è‡ªControlNetä¾§æ¨¡å‹'
- en: '`down_intrablock_additional_residuals` (`tuple` of `torch.Tensor`, *optional*)
    â€” additional residuals to be added within UNet down blocks, for example from T2I-Adapter
    side model(s)'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`down_intrablock_additional_residuals`ï¼ˆ`torch.Tensor`çš„`tuple`ï¼Œ*å¯é€‰*ï¼‰â€”è¦åœ¨UNetä¸‹å—å†…æ·»åŠ çš„é¢å¤–æ®‹å·®ï¼Œä¾‹å¦‚æ¥è‡ªT2I-Adapterä¾§æ¨¡å‹'
- en: Returns
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '[UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)
    or `tuple`'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)æˆ–`tuple`'
- en: If `return_dict` is True, an [UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)
    is returned, otherwise a `tuple` is returned where the first element is the sample
    tensor.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ`return_dict`ä¸ºTrueï¼Œåˆ™è¿”å›ä¸€ä¸ª[UNet2DConditionOutput](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput)ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ª`tuple`ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ·æœ¬å¼ é‡ã€‚
- en: The [UNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel)
    forward method.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel)çš„å‰å‘æ–¹æ³•ã€‚'
- en: '#### `fuse_qkv_projections`'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `fuse_qkv_projections`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L796)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L796)'
- en: '[PRE4]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Enables fused QKV projections. For self-attention modules, all projection matrices
    (i.e., query, key, value) are fused. For cross-attention modules, key and value
    projection matrices are fused.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨èåˆçš„QKVæŠ•å½±ã€‚å¯¹äºè‡ªæ³¨æ„åŠ›æ¨¡å—ï¼Œæ‰€æœ‰æŠ•å½±çŸ©é˜µï¼ˆå³æŸ¥è¯¢ã€é”®ã€å€¼ï¼‰éƒ½è¢«èåˆã€‚å¯¹äºäº¤å‰æ³¨æ„åŠ›æ¨¡å—ï¼Œé”®å’Œå€¼æŠ•å½±çŸ©é˜µè¢«èåˆã€‚
- en: This API is ğŸ§ª experimental.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤APIä¸ºğŸ§ªå®éªŒæ€§è´¨ã€‚
- en: '#### `set_attention_slice`'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_attention_slice`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L695)'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L695)'
- en: '[PRE5]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Parameters
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`slice_size` (`str` or `int` or `list(int)`, *optional*, defaults to `"auto"`)
    â€” When `"auto"`, input to the attention heads is halved, so attention is computed
    in two steps. If `"max"`, maximum amount of memory is saved by running only one
    slice at a time. If a number is provided, uses as many slices as `attention_head_dim
    // slice_size`. In this case, `attention_head_dim` must be a multiple of `slice_size`.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`slice_size`ï¼ˆ`str`æˆ–`int`æˆ–`list(int)`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"auto"`ï¼‰â€”å½“ä¸º`"auto"`æ—¶ï¼Œæ³¨æ„åŠ›å¤´çš„è¾“å…¥å‡åŠï¼Œå› æ­¤æ³¨æ„åŠ›åœ¨ä¸¤ä¸ªæ­¥éª¤ä¸­è®¡ç®—ã€‚å¦‚æœä¸º`"max"`ï¼Œé€šè¿‡ä¸€æ¬¡åªè¿è¡Œä¸€ä¸ªåˆ‡ç‰‡æ¥èŠ‚çœæœ€å¤§å†…å­˜ã€‚å¦‚æœæä¾›äº†ä¸€ä¸ªæ•°å­—ï¼Œåˆ™ä½¿ç”¨`attention_head_dim
    // slice_size`ä¸ªåˆ‡ç‰‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`attention_head_dim`å¿…é¡»æ˜¯`slice_size`çš„å€æ•°ã€‚'
- en: Enable sliced attention computation.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨åˆ‡ç‰‡æ³¨æ„åŠ›è®¡ç®—ã€‚
- en: When this option is enabled, the attention module splits the input tensor in
    slices to compute attention in several steps. This is useful for saving some memory
    in exchange for a small decrease in speed.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œæ³¨æ„åŠ›æ¨¡å—å°†è¾“å…¥å¼ é‡åˆ†ç‰‡ä»¥åœ¨å¤šä¸ªæ­¥éª¤ä¸­è®¡ç®—æ³¨æ„åŠ›ã€‚è¿™å¯¹äºåœ¨èŠ‚çœä¸€äº›å†…å­˜çš„åŒæ—¶æ¢å–ä¸€ç‚¹é€Ÿåº¦ä¸‹é™å¾ˆæœ‰ç”¨ã€‚
- en: '#### `set_attn_processor`'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_attn_processor`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L646)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L646)'
- en: '[PRE6]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Parameters
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`processor` (`dict` of `AttentionProcessor` or only `AttentionProcessor`) â€”
    The instantiated processor class or a dictionary of processor classes that will
    be set as the processor for **all** `Attention` layers.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`processor`ï¼ˆ`AttentionProcessor`çš„`dict`æˆ–ä»…`AttentionProcessor`ï¼‰â€”å·²å®ä¾‹åŒ–çš„å¤„ç†å™¨ç±»æˆ–å¤„ç†å™¨ç±»çš„å­—å…¸ï¼Œå°†è¢«è®¾ç½®ä¸º**æ‰€æœ‰**`Attention`å±‚çš„å¤„ç†å™¨ã€‚'
- en: If `processor` is a dict, the key needs to define the path to the corresponding
    cross attention processor. This is strongly recommended when setting trainable
    attention processors.
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ`processor`æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œåˆ™é”®éœ€è¦å®šä¹‰ç›¸åº”äº¤å‰æ³¨æ„åŠ›å¤„ç†å™¨çš„è·¯å¾„ã€‚åœ¨è®¾ç½®å¯è®­ç»ƒçš„æ³¨æ„åŠ›å¤„ç†å™¨æ—¶ï¼Œå¼ºçƒˆå»ºè®®è¿™æ ·åšã€‚
- en: Sets the attention processor to use to compute attention.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½®ç”¨äºè®¡ç®—æ³¨æ„åŠ›çš„æ³¨æ„åŠ›å¤„ç†å™¨ã€‚
- en: '#### `set_default_attn_processor`'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_default_attn_processor`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L680)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L680)'
- en: '[PRE7]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Disables custom attention processors and sets the default attention implementation.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: ç¦ç”¨è‡ªå®šä¹‰æ³¨æ„åŠ›å¤„ç†å™¨å¹¶è®¾ç½®é»˜è®¤çš„æ³¨æ„åŠ›å®ç°ã€‚
- en: '#### `unfuse_qkv_projections`'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `unfuse_qkv_projections`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L819)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L819)'
- en: '[PRE8]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Disables the fused QKV projection if enabled.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: ç¦ç”¨äº†èåˆçš„QKVæŠ•å½±ï¼ˆå¦‚æœå·²å¯ç”¨ï¼‰ã€‚
- en: This API is ğŸ§ª experimental.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤APIä¸ºğŸ§ªå®éªŒæ€§è´¨ã€‚
- en: '#### `unload_lora`'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `unload_lora`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L832)'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L832)'
- en: '[PRE9]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Unloads LoRA weights.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: å¸è½½LoRAæƒé‡ã€‚
- en: UNet2DConditionOutput
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: UNet2DConditionOutput
- en: '### `class diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput`'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.models.unets.unet_2d_condition.UNet2DConditionOutput`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L58)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition.py#L58)'
- en: '[PRE10]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Parameters
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)`) â€” The hidden states output conditioned on `encoder_hidden_states` input.
    Output of last layer of model.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`)
    â€” åœ¨`encoder_hidden_states`è¾“å…¥ä¸Šæ¡ä»¶åŒ–çš„éšè—çŠ¶æ€è¾“å‡ºã€‚æ¨¡å‹çš„æœ€åä¸€å±‚çš„è¾“å‡ºã€‚'
- en: The output of [UNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[UNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.UNet2DConditionModel)çš„è¾“å‡ºã€‚'
- en: FlaxUNet2DConditionModel
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlaxUNet2DConditionModel
- en: '### `class diffusers.FlaxUNet2DConditionModel`'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.FlaxUNet2DConditionModel`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition_flax.py#L48)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition_flax.py#L48)'
- en: '[PRE11]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Parameters
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample_size` (`int`, *optional*) â€” The size of the input sample.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample_size` (`int`, *å¯é€‰*) â€” è¾“å…¥æ ·æœ¬çš„å¤§å°ã€‚'
- en: '`in_channels` (`int`, *optional*, defaults to 4) â€” The number of channels in
    the input sample.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`in_channels` (`int`, *å¯é€‰*, é»˜è®¤ä¸º4) â€” è¾“å…¥æ ·æœ¬ä¸­çš„é€šé“æ•°ã€‚'
- en: '`out_channels` (`int`, *optional*, defaults to 4) â€” The number of channels
    in the output.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`out_channels` (`int`, *å¯é€‰*, é»˜è®¤ä¸º4) â€” è¾“å‡ºä¸­çš„é€šé“æ•°ã€‚'
- en: '`down_block_types` (`Tuple[str]`, *optional*, defaults to `("FlaxCrossAttnDownBlock2D",
    "FlaxCrossAttnDownBlock2D", "FlaxCrossAttnDownBlock2D", "FlaxDownBlock2D")`) â€”
    The tuple of downsample blocks to use.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`down_block_types` (`Tuple[str]`, *å¯é€‰*, é»˜è®¤ä¸º`("FlaxCrossAttnDownBlock2D", "FlaxCrossAttnDownBlock2D",
    "FlaxCrossAttnDownBlock2D", "FlaxDownBlock2D")`) â€” è¦ä½¿ç”¨çš„ä¸‹é‡‡æ ·å—çš„å…ƒç»„ã€‚'
- en: '`up_block_types` (`Tuple[str]`, *optional*, defaults to `("FlaxUpBlock2D",
    "FlaxCrossAttnUpBlock2D", "FlaxCrossAttnUpBlock2D", "FlaxCrossAttnUpBlock2D")`)
    â€” The tuple of upsample blocks to use.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`up_block_types` (`Tuple[str]`, *å¯é€‰*, é»˜è®¤ä¸º`("FlaxUpBlock2D", "FlaxCrossAttnUpBlock2D",
    "FlaxCrossAttnUpBlock2D", "FlaxCrossAttnUpBlock2D")`) â€” è¦ä½¿ç”¨çš„ä¸Šé‡‡æ ·å—çš„å…ƒç»„ã€‚'
- en: '`block_out_channels` (`Tuple[int]`, *optional*, defaults to `(320, 640, 1280,
    1280)`) â€” The tuple of output channels for each block.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`block_out_channels` (`Tuple[int]`, *å¯é€‰*, é»˜è®¤ä¸º`(320, 640, 1280, 1280)`) â€” æ¯ä¸ªå—çš„è¾“å‡ºé€šé“çš„å…ƒç»„ã€‚'
- en: '`layers_per_block` (`int`, *optional*, defaults to 2) â€” The number of layers
    per block.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`layers_per_block` (`int`, *å¯é€‰*, é»˜è®¤ä¸º2) â€” æ¯ä¸ªå—çš„å±‚æ•°ã€‚'
- en: '`attention_head_dim` (`int` or `Tuple[int]`, *optional*, defaults to 8) â€” The
    dimension of the attention heads.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attention_head_dim` (`int`æˆ–`Tuple[int]`, *å¯é€‰*, é»˜è®¤ä¸º8) â€” æ³¨æ„åŠ›å¤´çš„ç»´åº¦ã€‚'
- en: '`num_attention_heads` (`int` or `Tuple[int]`, *optional*) â€” The number of attention
    heads.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_attention_heads` (`int`æˆ–`Tuple[int]`, *å¯é€‰*) â€” æ³¨æ„åŠ›å¤´çš„æ•°é‡ã€‚'
- en: '`cross_attention_dim` (`int`, *optional*, defaults to 768) â€” The dimension
    of the cross attention features.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_dim` (`int`, *å¯é€‰*, é»˜è®¤ä¸º768) â€” äº¤å‰æ³¨æ„åŠ›ç‰¹å¾çš„ç»´åº¦ã€‚'
- en: '`dropout` (`float`, *optional*, defaults to 0) â€” Dropout probability for down,
    up and bottleneck blocks.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dropout` (`float`, *å¯é€‰*, é»˜è®¤ä¸º0) â€” ä¸‹é‡‡æ ·ã€ä¸Šé‡‡æ ·å’Œç“¶é¢ˆå—çš„ä¸¢å¼ƒæ¦‚ç‡ã€‚'
- en: '`flip_sin_to_cos` (`bool`, *optional*, defaults to `True`) â€” Whether to flip
    the sin to cos in the time embedding.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`flip_sin_to_cos` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º`True`) â€” æ˜¯å¦åœ¨æ—¶é—´åµŒå…¥ä¸­å°†sinç¿»è½¬ä¸ºcosã€‚'
- en: '`freq_shift` (`int`, *optional*, defaults to 0) â€” The frequency shift to apply
    to the time embedding.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`freq_shift` (`int`, *å¯é€‰*, é»˜è®¤ä¸º0) â€” åº”ç”¨äºæ—¶é—´åµŒå…¥çš„é¢‘ç‡åç§»ã€‚'
- en: '`use_memory_efficient_attention` (`bool`, *optional*, defaults to `False`)
    â€” Enable memory efficient attention as described [here](https://arxiv.org/abs/2112.05682).'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`use_memory_efficient_attention` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º`False`) â€” å¯ç”¨å†…å­˜é«˜æ•ˆçš„æ³¨æ„åŠ›ï¼Œå¦‚[æ­¤å¤„](https://arxiv.org/abs/2112.05682)æ‰€è¿°ã€‚'
- en: '`split_head_dim` (`bool`, *optional*, defaults to `False`) â€” Whether to split
    the head dimension into a new axis for the self-attention computation. In most
    cases, enabling this flag should speed up the computation for Stable Diffusion
    2.x and Stable Diffusion XL.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`split_head_dim` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º`False`) â€” æ˜¯å¦å°†å¤´ç»´åº¦æ‹†åˆ†ä¸ºæ–°è½´ä»¥è¿›è¡Œè‡ªæ³¨æ„åŠ›è®¡ç®—ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ç”¨æ­¤æ ‡å¿—åº”è¯¥åŠ é€ŸStable
    Diffusion 2.xå’ŒStable Diffusion XLçš„è®¡ç®—ã€‚'
- en: A conditional 2D UNet model that takes a noisy sample, conditional state, and
    a timestep and returns a sample shaped output.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæœ‰æ¡ä»¶çš„2D UNetæ¨¡å‹ï¼Œæ¥å—ä¸€ä¸ªå˜ˆæ‚çš„æ ·æœ¬ã€æ¡ä»¶çŠ¶æ€å’Œä¸€ä¸ªæ—¶é—´æ­¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå½¢çŠ¶ä¸ºæ ·æœ¬çš„è¾“å‡ºã€‚
- en: This model inherits from [FlaxModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.FlaxModelMixin).
    Check the superclass documentation for itâ€™s generic methods implemented for all
    models (such as downloading or saving).
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æ¨¡å‹ç»§æ‰¿è‡ª[FlaxModelMixin](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.FlaxModelMixin)ã€‚æŸ¥çœ‹è¶…ç±»æ–‡æ¡£ä»¥äº†è§£ä¸ºæ‰€æœ‰æ¨¡å‹å®ç°çš„é€šç”¨æ–¹æ³•ï¼ˆå¦‚ä¸‹è½½æˆ–ä¿å­˜ï¼‰ã€‚
- en: This model is also a Flax Linen [flax.linen.Module](https://flax.readthedocs.io/en/latest/flax.linen.html#module)
    subclass. Use it as a regular Flax Linen module and refer to the Flax documentation
    for all matters related to its general usage and behavior.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æ¨¡å‹ä¹Ÿæ˜¯Flax Linen [flax.linen.Module](https://flax.readthedocs.io/en/latest/flax.linen.html#module)çš„å­ç±»ã€‚å°†å…¶ç”¨ä½œå¸¸è§„çš„Flax
    Linenæ¨¡å—ï¼Œå¹¶å‚è€ƒFlaxæ–‡æ¡£ä»¥äº†è§£ä¸å…¶ä¸€èˆ¬ä½¿ç”¨å’Œè¡Œä¸ºç›¸å…³çš„æ‰€æœ‰äº‹é¡¹ã€‚
- en: 'Inherent JAX features such as the following are supported:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: æ”¯æŒè¯¸å¦‚ä»¥ä¸‹çš„å†…åœ¨JAXç‰¹æ€§ï¼š
- en: '[Just-In-Time (JIT) compilation](https://jax.readthedocs.io/en/latest/jax.html#just-in-time-compilation-jit)'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å³æ—¶ï¼ˆJITï¼‰ç¼–è¯‘](https://jax.readthedocs.io/en/latest/jax.html#just-in-time-compilation-jit)'
- en: '[Automatic Differentiation](https://jax.readthedocs.io/en/latest/jax.html#automatic-differentiation)'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[è‡ªåŠ¨å¾®åˆ†](https://jax.readthedocs.io/en/latest/jax.html#automatic-differentiation)'
- en: '[Vectorization](https://jax.readthedocs.io/en/latest/jax.html#vectorization-vmap)'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å‘é‡åŒ–](https://jax.readthedocs.io/en/latest/jax.html#vectorization-vmap)'
- en: '[Parallelization](https://jax.readthedocs.io/en/latest/jax.html#parallelization-pmap)'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å¹¶è¡ŒåŒ–](https://jax.readthedocs.io/en/latest/jax.html#parallelization-pmap)'
- en: FlaxUNet2DConditionOutput
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: FlaxUNet2DConditionOutput
- en: '### `class diffusers.models.unets.unet_2d_condition_flax.FlaxUNet2DConditionOutput`'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.models.unets.unet_2d_condition_flax.FlaxUNet2DConditionOutput`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition_flax.py#L35)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/models/unets/unet_2d_condition_flax.py#L35)'
- en: '[PRE12]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Parameters
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`jnp.ndarray` of shape `(batch_size, num_channels, height, width)`)
    â€” The hidden states output conditioned on `encoder_hidden_states` input. Output
    of last layer of model.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`jnp.ndarray`ï¼‰- åœ¨`encoder_hidden_states`è¾“å…¥æ¡ä»¶ä¸‹è¾“å‡ºçš„éšè—çŠ¶æ€ã€‚æ¨¡å‹çš„æœ€åä¸€å±‚çš„è¾“å‡ºã€‚'
- en: The output of [FlaxUNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.FlaxUNet2DConditionModel).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '[FlaxUNet2DConditionModel](/docs/diffusers/v0.26.3/en/api/models/unet2d-cond#diffusers.FlaxUNet2DConditionModel)çš„è¾“å‡ºã€‚'
- en: '#### `replace`'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `replace`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/flax/struct.py#L111)'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/flax/struct.py#L111)'
- en: '[PRE13]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: â€œReturns a new object replacing the specified fields with new values.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: â€œè¿”å›ä¸€ä¸ªç”¨æ–°å€¼æ›¿æ¢æŒ‡å®šå­—æ®µçš„æ–°å¯¹è±¡ã€‚
