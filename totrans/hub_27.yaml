- en: Gated datasets
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Original text: [https://huggingface.co/docs/hub/datasets-gated](https://huggingface.co/docs/hub/datasets-gated)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 
    
    
    
    
    
    
    
    
    
    
    
  prefs: []
  type: TYPE_NORMAL
- en: To give more control over how datasets are used, the Hub allows datasets authors
    to enable **access requests** for their datasets. Users must agree to share their
    contact information (username and email address) with the datasets authors to
    access the datasets files when enabled. Datasets authors can configure this request
    with additional fields. A dataset with access requests enabled is called a **gated
    dataset**. Access requests are always granted to individual users rather than
    to entire organizations. A common use case of gated datasets is to provide access
    to early research datasets before the wider release.
  prefs: []
  type: TYPE_NORMAL
- en: Manage gated datasets as a dataset author
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To enable access requests, go to the dataset settings page. By default, the
    dataset is not gated. Click on **Enable Access request** in the top-right corner.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8b51f89329266b62fd72bdb72d9395fd.png) ![](../Images/120fbd70f1a99e7a7961cec6f977e549.png)'
  prefs: []
  type: TYPE_IMG
- en: By default, access to the dataset is automatically granted to the user when
    requesting it. This is referred to as **automatic approval**. In this mode, any
    user can access your dataset once they’ve shared their personal information with
    you.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/fecc327e50429c1862a85875b44cb27f.png) ![](../Images/416dd49a6e8e6459a07d654c70637b26.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you want to manually approve which users can access your dataset, you must
    set it to **manual approval**. When this is the case, you will notice more options:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Add access** allows you to search for a user and grant them access even if
    they did not request it.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Notification frequency** lets you configure when to get notified if new users
    request access. It can be set to once a day or real-time. By default, an email
    is sent to your primary email address. You can set a different email address in
    the **Notifications email** field. For datasets hosted under an organization,
    emails are sent to the first 5 admins of the organization.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/453673d7f66c9c5a2cabb301b382db79.png) ![](../Images/b07df5dc3e8bb8c167aed6870c4690e5.png)'
  prefs: []
  type: TYPE_IMG
- en: Review access requests
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Once access requests are enabled, you have full control of who can access your
    dataset or not, whether the approval mode is manual or automatic. You can review
    and manage requests either from the UI or via the API.
  prefs: []
  type: TYPE_NORMAL
- en: From the UI
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'You can review who has access to your gated dataset from its settings page
    by clicking on the **Review access requests** button. This will open a modal with
    3 lists of users:'
  prefs: []
  type: TYPE_NORMAL
- en: '**pending**: the list of users waiting for approval to access your dataset.
    This list is empty unless you’ve selected **manual approval**. You can either
    **Accept** or **Reject** the demand. If the demand is rejected, the user cannot
    access your dataset and cannot request access again.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**accepted**: the complete list of users with access to your dataset. You can
    choose to **Reject** access at any time for any user, whether the approval mode
    is manual or automatic. You can also **Cancel** the approval, which will move
    the user to the *pending* list.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**rejected**: the list of users you’ve manually rejected. Those users cannot
    access your datasets. If they go to your dataset repository, they will see a message
    *Your request to access this repo has been rejected by the repo’s authors*.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](../Images/681d1799a60d11eb0c9414b52ff458da.png) ![](../Images/12696c5879bd12585050822ee74ca791.png)'
  prefs: []
  type: TYPE_IMG
- en: Via the API
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: You can automate the approval of access requests by using the API. You must
    pass a `token` with `write` access to the gated repository. To generate a token,
    go to [your user settings](https://huggingface.co/settings/tokens).
  prefs: []
  type: TYPE_NORMAL
- en: '| Method | URI | Description | Headers | Payload |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| `GET` | `/api/datasets/{repo_id}/user-access-request/pending` | Retrieve
    the list of pending requests. | `{"authorization": "Bearer $token"}` |  |'
  prefs: []
  type: TYPE_TB
- en: '| `GET` | `/api/datasets/{repo_id}/user-access-request/accepted` | Retrieve
    the list of accepted requests. | `{"authorization": "Bearer $token"}` |  |'
  prefs: []
  type: TYPE_TB
- en: '| `GET` | `/api/datasets/{repo_id}/user-access-request/rejected` | Retrieve
    the list of rejected requests. | `{"authorization": "Bearer $token"}` |  |'
  prefs: []
  type: TYPE_TB
- en: '| `POST` | `/api/datasets/{repo_id}/user-access-request/handle` | Change the
    status of a given access request to `status`. | `{"authorization": "Bearer $token"}`
    | `{"status": "accepted"/"rejected"/"pending", "user": "username"}` |'
  prefs: []
  type: TYPE_TB
- en: '| `POST` | `/api/datasets/{repo_id}/user-access-request/grant` | Allow a specific
    user to access your repo. | `{"authorization": "Bearer $token"}` | `{"user": "username"}`
    |'
  prefs: []
  type: TYPE_TB
- en: The base URL for the HTTP endpoints above is `https://huggingface.co`.
  prefs: []
  type: TYPE_NORMAL
- en: '**NEW!** Those endpoints are now officially supported in our Python client
    `huggingface_hub`. List the access requests to your dataset with [`list_pending_access_requests`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.list_pending_access_requests),
    [`list_accepted_access_requests`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.list_accepted_access_requests)
    and [`list_rejected_access_requests`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.list_rejected_access_requests).
    You can also accept, cancel and reject access requests with [`accept_access_request`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.accept_access_request),
    [`cancel_access_request`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.cancel_access_request),
    [`reject_access_request`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.reject_access_request).
    Finally, you can grant access to a user with [`grant_access`](https://huggingface.co/docs/huggingface_hub/main/en/package_reference/hf_api#huggingface_hub.HfApi.grant_access).'
  prefs: []
  type: TYPE_NORMAL
- en: Download access report
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'You can download a report of all access requests for a gated datasets with
    the **download user access report** button. Click on it to download a json file
    with a list of users. For each entry, you have:'
  prefs: []
  type: TYPE_NORMAL
- en: '**user**: the user id. Example: *julien-c*.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**fullname**: name of the user on the Hub. Example: *Julien Chaumond*.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**status**: status of the request. Either `"pending"`, `"accepted"` or `"rejected"`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**email**: email of the user.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**time**: datetime when the user initially made the request.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Customize requested information
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: By default, users landing on your gated dataset will be asked to share their
    contact information (email and username) by clicking the **Agree and send request
    to access repo** button.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0f7d25e8938d6652e3711c0dedf5cc0a.png) ![](../Images/0973311c0458cc641660edb0a07af6e9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you want to request more user information to provide access, you can configure
    additional fields. This information will be accessible from the **Settings** tab.
    To do so, add an `extra_gated_fields` property to your [dataset card metadata](./datasets-cards#dataset-card-metadata)
    containing a list of key/value pairs. The *key* is the name of the field and *value*
    its type or an object with a `type` field. The list of field types is:'
  prefs: []
  type: TYPE_NORMAL
- en: '`text`: a single-line text field.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`checkbox`: a checkbox field.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`date_picker`: a date picker field.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`country`: a country dropdown. The list of countries is based on the [ISO 3166-1
    alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) standard.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`select`: a dropdown with a list of options. The list of options is defined
    in the `options` field. Example: `options: ["option 1", "option 2", {label: "option3",
    value: "opt3"}]`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Finally, you can also personalize the message displayed to the user with the
    `extra_gated_prompt` extra field.
  prefs: []
  type: TYPE_NORMAL
- en: Here is an example of customized request form where the user is asked to provide
    their company name and country and acknowledge that the dataset is for non-commercial
    use only.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'In some cases, you might also want to modify the text in the gate heading and
    the text in the button. For those use cases, you can modify `extra_gated_heading`
    and `extra_gated_button_content` like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Access gated datasets as a user
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: As a user, if you want to use a gated dataset, you will need to request access
    to it. This means that you must be logged in to a Hugging Face user account.
  prefs: []
  type: TYPE_NORMAL
- en: 'Requesting access can only be done from your browser. Go to the dataset on
    the Hub and you will be prompted to share your information:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/0f7d25e8938d6652e3711c0dedf5cc0a.png) ![](../Images/0973311c0458cc641660edb0a07af6e9.png)'
  prefs: []
  type: TYPE_IMG
- en: By clicking on **Agree**, you agree to share your username and email address
    with the dataset authors. In some cases, additional fields might be requested.
    To help the dataset authors decide whether to grant you access, try to fill out
    the form as completely as possible.
  prefs: []
  type: TYPE_NORMAL
- en: Once the access request is sent, there are two possibilities. If the approval
    mechanism is automatic, you immediately get access to the dataset files. Otherwise,
    the requests have to be approved manually by the authors, which can take more
    time.
  prefs: []
  type: TYPE_NORMAL
- en: The dataset authors have complete control over dataset access. In particular,
    they can decide at any time to block your access to the dataset without prior
    notice, regardless of approval mechanism or if your request has already been approved.
  prefs: []
  type: TYPE_NORMAL
- en: Download files
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To download files from a gated dataset you’ll need to be authenticated. In
    the browser, this is automatic as long as you are logged in with your account.
    If you are using a script, you will need to provide a [user token](./security-tokens).
    In the Hugging Face Python ecosystem (`transformers`, `diffusers`, `datasets`,
    etc.), you can login your machine using the [`huggingface_hub`](https://huggingface.co/docs/huggingface_hub/index)
    library and running in your terminal:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Alternatively, you can programmatically login using `login()` in a notebook
    or a script:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: You can also provide the `token` parameter to most loading methods in the libraries
    (`from_pretrained`, `hf_hub_download`, `load_dataset`, etc.), directly from your
    scripts.
  prefs: []
  type: TYPE_NORMAL
- en: For more details about how to login, check out the [login guide](https://huggingface.co/docs/huggingface_hub/quick-start#login).
  prefs: []
  type: TYPE_NORMAL
