# å›¾åƒå¤„ç†å™¨çš„å®ç”¨å·¥å…·

> åŸæ–‡ï¼š[https://huggingface.co/docs/transformers/v4.37.2/en/internal/image_processing_utils](https://huggingface.co/docs/transformers/v4.37.2/en/internal/image_processing_utils)

æ­¤é¡µé¢åˆ—å‡ºäº†å›¾åƒå¤„ç†å™¨ä½¿ç”¨çš„æ‰€æœ‰å®ç”¨å‡½æ•°ï¼Œä¸»è¦æ˜¯ç”¨äºå¤„ç†å›¾åƒçš„åŠŸèƒ½è½¬æ¢ã€‚

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›åªæœ‰åœ¨æ‚¨ç ”ç©¶åº“ä¸­å›¾åƒå¤„ç†å™¨çš„ä»£ç æ—¶æ‰æœ‰ç”¨ã€‚

## å›¾åƒè½¬æ¢

#### `transformers.image_transforms.center_crop`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L407)

```py
( image: ndarray size: Tuple data_format: Union = None input_data_format: Union = None return_numpy: Optional = None ) â†’ export const metadata = 'undefined';np.ndarray
```

å‚æ•°

+   `image`ï¼ˆ`np.ndarray`ï¼‰â€”è¦è£å‰ªçš„å›¾åƒã€‚

+   `size`ï¼ˆ`Tuple[int, int]`ï¼‰â€”è£å‰ªå›¾åƒçš„ç›®æ ‡å°ºå¯¸ã€‚

+   `data_format`ï¼ˆ`str`æˆ–`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€”è¾“å‡ºå›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š

    +   `"channels_first"`æˆ–`ChannelDimension.FIRST`ï¼šå›¾åƒä»¥ï¼ˆnum_channelsï¼Œheightï¼Œwidthï¼‰æ ¼å¼ã€‚

    +   `"channels_last"`æˆ–`ChannelDimension.LAST`ï¼šå›¾åƒä»¥ï¼ˆheightï¼Œwidthï¼Œnum_channelsï¼‰æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨è¾“å…¥å›¾åƒçš„æ¨æ–­æ ¼å¼ã€‚

+   `input_data_format`ï¼ˆ`str`æˆ–`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€”è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š

    +   `"channels_first"`æˆ–`ChannelDimension.FIRST`ï¼šå›¾åƒä»¥ï¼ˆnum_channelsï¼Œheightï¼Œwidthï¼‰æ ¼å¼ã€‚

    +   `"channels_last"`æˆ–`ChannelDimension.LAST`ï¼šå›¾åƒä»¥ï¼ˆheightï¼Œwidthï¼Œnum_channelsï¼‰æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨è¾“å…¥å›¾åƒçš„æ¨æ–­æ ¼å¼ã€‚

+   `return_numpy`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€”æ˜¯å¦å°†è£å‰ªåçš„å›¾åƒä½œä¸ºnumpyæ•°ç»„è¿”å›ã€‚ç”¨äºä¸å…ˆå‰çš„ImageFeatureExtractionMixinæ–¹æ³•å‘åå…¼å®¹ã€‚

    +   æœªè®¾ç½®ï¼šå°†è¿”å›ä¸è¾“å…¥å›¾åƒç›¸åŒç±»å‹ã€‚

    +   `True`ï¼šå°†è¿”å›ä¸€ä¸ªnumpyæ•°ç»„ã€‚

    +   `False`ï¼šå°†è¿”å›ä¸€ä¸ª`PIL.Image.Image`å¯¹è±¡ã€‚

è¿”å›

`np.ndarray`

è£å‰ªåçš„å›¾åƒã€‚

ä½¿ç”¨ä¸­å¿ƒè£å‰ªå°†`image`è£å‰ªåˆ°æŒ‡å®šçš„`size`ã€‚è¯·æ³¨æ„ï¼Œå¦‚æœå›¾åƒå¤ªå°è€Œæ— æ³•è£å‰ªåˆ°ç»™å®šçš„å°ºå¯¸ï¼Œå°†è¿›è¡Œå¡«å……ï¼ˆå› æ­¤è¿”å›çš„ç»“æœå§‹ç»ˆä¸º`size`çš„å¤§å°ï¼‰ã€‚

#### `transformers.image_transforms.center_to_corners_format`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L537)

```py
( bboxes_center: TensorType )
```

å°†è¾¹ç•Œæ¡†ä»ä¸­å¿ƒæ ¼å¼è½¬æ¢ä¸ºè§’è½æ ¼å¼ã€‚

ä¸­å¿ƒæ ¼å¼ï¼šåŒ…å«æ¡†çš„ä¸­å¿ƒåæ ‡åŠå…¶å®½åº¦ã€é«˜åº¦å°ºå¯¸ï¼ˆcenter_xï¼Œcenter_yï¼Œwidthï¼Œheightï¼‰è§’è½æ ¼å¼ï¼šåŒ…å«æ¡†çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡ï¼ˆtop_left_xï¼Œtop_left_yï¼Œbottom_right_xï¼Œbottom_right_yï¼‰

#### `transformers.image_transforms.corners_to_center_format`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L597)

```py
( bboxes_corners: TensorType )
```

å°†è¾¹ç•Œæ¡†ä»è§’è½æ ¼å¼è½¬æ¢ä¸ºä¸­å¿ƒæ ¼å¼ã€‚

è§’è½æ ¼å¼ï¼šåŒ…å«æ¡†çš„å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡ï¼ˆtop_left_xï¼Œtop_left_yï¼Œbottom_right_xï¼Œbottom_right_yï¼‰ä¸­å¿ƒæ ¼å¼ï¼šåŒ…å«æ¡†çš„ä¸­å¿ƒåæ ‡åŠå…¶å®½åº¦ã€é«˜åº¦å°ºå¯¸ï¼ˆcenter_xï¼Œcenter_yï¼Œwidthï¼Œheightï¼‰

#### `transformers.image_transforms.id_to_rgb`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L631)

```py
( id_map )
```

å°†å”¯ä¸€IDè½¬æ¢ä¸ºRGBé¢œè‰²ã€‚

#### `transformers.image_transforms.normalize`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L347)

```py
( image: ndarray mean: Union std: Union data_format: Optional = None input_data_format: Union = None )
```

å‚æ•°

+   `image`ï¼ˆ`np.ndarray`ï¼‰â€”è¦å½’ä¸€åŒ–çš„å›¾åƒã€‚

+   `mean`ï¼ˆ`float`æˆ–`Iterable[float]`ï¼‰â€”ç”¨äºå½’ä¸€åŒ–çš„å‡å€¼ã€‚

+   `std`ï¼ˆ`float`æˆ–`Iterable[float]`ï¼‰â€”ç”¨äºå½’ä¸€åŒ–çš„æ ‡å‡†å·®ã€‚

+   `data_format`ï¼ˆ`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€”è¾“å‡ºå›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥æ¨æ–­çš„æ ¼å¼ã€‚

+   `input_data_format`ï¼ˆ`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€” è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥ä¸­æ¨æ–­çš„æ ¼å¼ã€‚

ä½¿ç”¨ç”±`mean`å’Œ`std`æŒ‡å®šçš„å‡å€¼å’Œæ ‡å‡†å·®å¯¹`image`è¿›è¡Œå½’ä¸€åŒ–ã€‚

å›¾åƒ=ï¼ˆå›¾åƒ-å¹³å‡å€¼ï¼‰/æ ‡å‡†å·®

#### `transformers.image_transforms.pad`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L661)

```py
( image: ndarray padding: Union mode: PaddingMode = <PaddingMode.CONSTANT: 'constant'> constant_values: Union = 0.0 data_format: Union = None input_data_format: Union = None ) â†’ export const metadata = 'undefined';np.ndarray
```

å‚æ•°

+   `image`ï¼ˆ`np.ndarray`ï¼‰â€” è¦å¡«å……çš„å›¾åƒã€‚

+   `padding`ï¼ˆ`int`æˆ–`Tuple[int, int]`æˆ–`Iterable[Tuple[int, int]]`ï¼‰â€” è¦åº”ç”¨åˆ°é«˜åº¦ã€å®½åº¦è½´è¾¹ç¼˜çš„å¡«å……ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§æ ¼å¼ä¹‹ä¸€ï¼š

    +   `ï¼ˆï¼ˆbefore_heightï¼Œafter_heightï¼‰ï¼Œï¼ˆbefore_widthï¼Œafter_widthï¼‰ï¼‰`æ¯ä¸ªè½´çš„å”¯ä¸€å¡«å……å®½åº¦ã€‚

    +   `ï¼ˆï¼ˆbeforeï¼Œafterï¼‰ï¼Œï¼‰`äº§ç”Ÿç›¸åŒçš„é«˜åº¦å’Œå®½åº¦çš„å‰åå¡«å……ã€‚

    +   `ï¼ˆå¡«å……ï¼Œï¼‰`æˆ–intæ˜¯æ‰€æœ‰è½´çš„å®½åº¦çš„å¿«æ·æ–¹å¼ä¸ºbefore = after = padã€‚

+   `mode`ï¼ˆ`PaddingMode`ï¼‰â€” è¦ä½¿ç”¨çš„å¡«å……æ¨¡å¼ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š

    +   `â€œå¸¸æ•°â€`ï¼šç”¨å¸¸æ•°å€¼å¡«å……ã€‚

    +   `â€œåå°„â€`ï¼šç”¨æ²¿æ¯ä¸ªè½´çš„å‘é‡çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå€¼çš„é•œåƒå¡«å……ã€‚

    +   `â€œå¤åˆ¶â€`ï¼šç”¨æ²¿æ¯ä¸ªè½´çš„æ•°ç»„è¾¹ç¼˜çš„æœ€åä¸€ä¸ªå€¼çš„å¤åˆ¶å¡«å……ã€‚

    +   `â€œå¯¹ç§°â€`ï¼šç”¨æ²¿æ•°ç»„è¾¹ç¼˜é•œåƒçš„å‘é‡çš„åå°„å¡«å……ã€‚

+   `constant_values`ï¼ˆ`float`æˆ–`Iterable[float]`ï¼Œ*å¯é€‰*ï¼‰â€” å¦‚æœ`mode`ä¸º``"constant"``ï¼Œåˆ™ç”¨äºå¡«å……çš„å€¼ã€‚

+   `data_format`ï¼ˆ`str`æˆ–`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€” è¾“å‡ºå›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š

    +   ``"channels_first"``æˆ–`ChannelDimension.FIRST`ï¼šå›¾åƒä»¥ï¼ˆé€šé“æ•°ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰æ ¼å¼ã€‚

    +   ``"channels_last"``æˆ–`ChannelDimension.LAST`ï¼šå›¾åƒä»¥ï¼ˆé«˜åº¦ï¼Œå®½åº¦ï¼Œé€šé“æ•°ï¼‰æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä¸è¾“å…¥å›¾åƒç›¸åŒçš„æ ¼å¼ã€‚

+   `input_data_format`ï¼ˆ`str`æˆ–`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€” è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š

    +   ``"channels_first"``æˆ–`ChannelDimension.FIRST`ï¼šå›¾åƒä»¥ï¼ˆé€šé“æ•°ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼‰æ ¼å¼ã€‚

    +   ``"channels_last"``æˆ–`ChannelDimension.LAST`ï¼šå›¾åƒä»¥ï¼ˆé«˜åº¦ï¼Œå®½åº¦ï¼Œé€šé“æ•°ï¼‰æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥å›¾åƒæ¨æ–­çš„æ ¼å¼ã€‚

è¿”å›

`np.ndarray`

å¡«å……åçš„å›¾åƒã€‚

ç”¨æŒ‡å®šçš„ï¼ˆé«˜åº¦ï¼Œå®½åº¦ï¼‰`å¡«å……`å’Œ`æ¨¡å¼`å¡«å……`å›¾åƒ`ã€‚

#### `transformers.image_transforms.rgb_to_id`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L620)

```py
( color )
```

å°†RGBé¢œè‰²è½¬æ¢ä¸ºå”¯ä¸€IDã€‚

#### `transformers.image_transforms.rescale`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L92)

```py
( image: ndarray scale: float data_format: Optional = None dtype: dtype = <class 'numpy.float32'> input_data_format: Union = None ) â†’ export const metadata = 'undefined';np.ndarray
```

å‚æ•°

+   `image`ï¼ˆ`np.ndarray`ï¼‰â€” è¦é‡æ–°ç¼©æ”¾çš„å›¾åƒã€‚

+   `scale`ï¼ˆ`float`ï¼‰â€” ç”¨äºé‡æ–°ç¼©æ”¾å›¾åƒçš„æ¯”ä¾‹ã€‚

+   `data_format`ï¼ˆ`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€” å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªæä¾›ï¼Œå°†ä¸è¾“å…¥å›¾åƒç›¸åŒã€‚

+   `dtype`ï¼ˆ`np.dtype`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`np.float32`ï¼‰â€” è¾“å‡ºå›¾åƒçš„æ•°æ®ç±»å‹ã€‚é»˜è®¤ä¸º`np.float32`ã€‚ç”¨äºä¸ç‰¹å¾æå–å™¨çš„å‘åå…¼å®¹æ€§ã€‚

+   `input_data_format`ï¼ˆ`ChannelDimension`ï¼Œ*å¯é€‰*ï¼‰â€” è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªæä¾›ï¼Œå°†ä»è¾“å…¥å›¾åƒä¸­æ¨æ–­ã€‚

è¿”å›

`np.ndarray`

é‡æ–°ç¼©æ”¾åçš„å›¾åƒã€‚

é€šè¿‡`scale`é‡æ–°ç¼©æ”¾`å›¾åƒ`ã€‚

#### `transformers.image_transforms.resize`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L276)

```py
( image: ndarray size: Tuple resample: PILImageResampling = None reducing_gap: Optional = None data_format: Optional = None return_numpy: bool = True input_data_format: Union = None ) â†’ export const metadata = 'undefined';np.ndarray
```

å‚æ•°

+   `image`ï¼ˆ`np.ndarray`ï¼‰â€” è¦è°ƒæ•´å¤§å°çš„å›¾åƒã€‚

+   `size`ï¼ˆ`Tuple[int, int]`ï¼‰â€” ç”¨äºè°ƒæ•´å›¾åƒå¤§å°çš„å°ºå¯¸ã€‚

+   `resample`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`PILImageResampling.BILINEAR`ï¼‰â€” ç”¨äºé‡é‡‡æ ·çš„æ»¤æ³¢å™¨ã€‚

+   `reducing_gap`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼‰â€” é€šè¿‡åœ¨ä¸¤ä¸ªæ­¥éª¤ä¸­è°ƒæ•´å›¾åƒå¤§å°æ¥åº”ç”¨ä¼˜åŒ–ã€‚`reducing_gap`è¶Šå¤§ï¼Œç»“æœè¶Šæ¥è¿‘å…¬å¹³é‡é‡‡æ ·ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç›¸åº”çš„Pillowæ–‡æ¡£ã€‚

+   `data_format` (`ChannelDimension`, *å¯é€‰*) â€” è¾“å‡ºå›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥æ¨æ–­å‡ºçš„æ ¼å¼ã€‚

+   `return_numpy` (`bool`, *å¯é€‰*, é»˜è®¤ä¸º`True`) â€” æ˜¯å¦å°†è°ƒæ•´å¤§å°åçš„å›¾åƒä½œä¸ºnumpyæ•°ç»„è¿”å›ã€‚å¦‚æœä¸ºFalseï¼Œåˆ™è¿”å›ä¸€ä¸ª`PIL.Image.Image`å¯¹è±¡ã€‚

+   `input_data_format` (`ChannelDimension`, *å¯é€‰*) â€” è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥æ¨æ–­å‡ºçš„æ ¼å¼ã€‚

è¿”å›

`np.ndarray`

è°ƒæ•´å¤§å°åçš„å›¾åƒã€‚

ä½¿ç”¨PILåº“å°†`image`è°ƒæ•´ä¸ºç”±`size`æŒ‡å®šçš„`(height, width)`å¤§å°ã€‚

#### `transformers.image_transforms.to_pil_image`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_transforms.py#L157)

```py
( image: Union do_rescale: Optional = None input_data_format: Union = None ) â†’ export const metadata = 'undefined';PIL.Image.Image
```

å‚æ•°

+   `image` (`PIL.Image.Image`æˆ–`numpy.ndarray`æˆ–`torch.Tensor`æˆ–`tf.Tensor`) â€” è¦è½¬æ¢ä¸º`PIL.Image`æ ¼å¼çš„å›¾åƒã€‚

+   `do_rescale` (`bool`, *å¯é€‰*) â€” æ˜¯å¦åº”ç”¨ç¼©æ”¾å› å­ï¼ˆä½¿åƒç´ å€¼åœ¨0å’Œ255ä¹‹é—´ä¸ºæ•´æ•°ï¼‰ã€‚å¦‚æœå›¾åƒç±»å‹æ˜¯æµ®ç‚¹ç±»å‹ï¼Œå¹¶ä¸”è½¬æ¢ä¸º`int`ä¼šå¯¼è‡´ç²¾åº¦æŸå¤±ï¼Œåˆ™é»˜è®¤ä¸º`True`ï¼Œå¦åˆ™ä¸º`False`ã€‚

+   `input_data_format` (`ChannelDimension`, *å¯é€‰*) â€” è¾“å…¥å›¾åƒçš„é€šé“ç»´åº¦æ ¼å¼ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä»è¾“å…¥æ¨æ–­å‡ºçš„æ ¼å¼ã€‚

è¿”å›

`PIL.Image.Image`

è½¬æ¢åçš„å›¾åƒã€‚

å°†`image`è½¬æ¢ä¸ºPILå›¾åƒã€‚å¯é€‰åœ°é‡æ–°ç¼©æ”¾å®ƒï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†é€šé“ç»´åº¦æ”¾å›ä½œä¸ºæœ€åä¸€ä¸ªè½´ã€‚

## ImageProcessingMixin

### `class transformers.ImageProcessingMixin`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L68)

```py
( **kwargs )
```

è¿™æ˜¯ä¸€ä¸ªç”¨äºä¸ºé¡ºåºå’Œå›¾åƒç‰¹å¾æå–å™¨æä¾›ä¿å­˜/åŠ è½½åŠŸèƒ½çš„å›¾åƒå¤„ç†å™¨mixinã€‚

#### `fetch_images`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L523)

```py
( image_url_or_urls: Union )
```

å°†å•ä¸ªæˆ–ä¸€ç»„urlè½¬æ¢ä¸ºç›¸åº”çš„`PIL.Image`å¯¹è±¡ã€‚

å¦‚æœä¼ é€’å•ä¸ªurlï¼Œåˆ™è¿”å›å€¼å°†æ˜¯å•ä¸ªå¯¹è±¡ã€‚å¦‚æœä¼ é€’åˆ—è¡¨ï¼Œåˆ™è¿”å›å¯¹è±¡åˆ—è¡¨ã€‚

#### `from_dict`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L386)

```py
( image_processor_dict: Dict **kwargs ) â†’ export const metadata = 'undefined';ImageProcessingMixin
```

å‚æ•°

+   `image_processor_dict` (`Dict[str, Any]`) â€” å°†ç”¨äºå®ä¾‹åŒ–å›¾åƒå¤„ç†å™¨å¯¹è±¡çš„å­—å…¸ã€‚å¯ä»¥é€šè¿‡åˆ©ç”¨[ to_dict() ](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin.to_dict)æ–¹æ³•ä»é¢„è®­ç»ƒæ£€æŸ¥ç‚¹ä¸­æ£€ç´¢è¿™æ ·çš„å­—å…¸ã€‚

+   `kwargs` (`Dict[str, Any]`) â€” ç”¨äºåˆå§‹åŒ–å›¾åƒå¤„ç†å™¨å¯¹è±¡çš„å…¶ä»–å‚æ•°ã€‚

è¿”å›

[ImageProcessingMixin](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin)

ä»è¿™äº›å‚æ•°å®ä¾‹åŒ–çš„å›¾åƒå¤„ç†å™¨å¯¹è±¡ã€‚

ä»Pythonå‚æ•°å­—å…¸ä¸­å®ä¾‹åŒ–ä¸€ç§ç±»å‹çš„[ImageProcessingMixin](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin)ã€‚

#### `from_json_file`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L443)

```py
( json_file: Union ) â†’ export const metadata = 'undefined';A image processor of type ImageProcessingMixin
```

å‚æ•°

+   `json_file` (`str`æˆ–`os.PathLike`) â€” åŒ…å«å‚æ•°çš„JSONæ–‡ä»¶çš„è·¯å¾„ã€‚

è¿”å›

ç±»å‹ä¸º[ImageProcessingMixin](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin)çš„å›¾åƒå¤„ç†å™¨ã€‚

ä»è¯¥JSONæ–‡ä»¶å®ä¾‹åŒ–çš„å›¾åƒå¤„ç†å™¨å¯¹è±¡ã€‚

ä»å‚æ•°JSONæ–‡ä»¶çš„è·¯å¾„å®ä¾‹åŒ–ç±»å‹ä¸º[ImageProcessingMixin](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin)çš„å›¾åƒå¤„ç†å™¨ã€‚

#### `from_pretrained`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L95)

```py
( pretrained_model_name_or_path: Union cache_dir: Union = None force_download: bool = False local_files_only: bool = False token: Union = None revision: str = 'main' **kwargs )
```

å‚æ•°

+   `pretrained_model_name_or_path` (`str`æˆ–`os.PathLike`) â€” è¿™å¯ä»¥æ˜¯ï¼š

    +   ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé¢„è®­ç»ƒå›¾åƒå¤„ç†å™¨çš„*æ¨¡å‹ID*ï¼Œæ‰˜ç®¡åœ¨huggingface.coä¸Šçš„æ¨¡å‹å­˜å‚¨åº“å†…ã€‚æœ‰æ•ˆçš„æ¨¡å‹IDå¯ä»¥ä½äºæ ¹çº§åˆ«ï¼Œå¦‚`bert-base-uncased`ï¼Œæˆ–è€…åœ¨ç”¨æˆ·æˆ–ç»„ç»‡åç§°ä¸‹å‘½åç©ºé—´åŒ–ï¼Œå¦‚`dbmdz/bert-base-german-cased`ã€‚

    +   ä¸€ä¸ªåŒ…å«ä½¿ç”¨[save_pretrained()](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin.save_pretrained)æ–¹æ³•ä¿å­˜çš„å›¾åƒå¤„ç†å™¨æ–‡ä»¶çš„*ç›®å½•*è·¯å¾„ï¼Œä¾‹å¦‚ï¼Œ`./my_model_directory/`ã€‚

    +   ä¿å­˜çš„å›¾åƒå¤„ç†å™¨JSON *æ–‡ä»¶*çš„è·¯å¾„æˆ–URLï¼Œä¾‹å¦‚ï¼Œ`./my_model_directory/preprocessor_config.json`ã€‚

+   `cache_dir`ï¼ˆ`str`æˆ–`os.PathLike`ï¼Œ*å¯é€‰*ï¼‰â€” å¦‚æœä¸åº”ä½¿ç”¨æ ‡å‡†ç¼“å­˜ï¼Œåˆ™åº”å°†ä¸‹è½½çš„é¢„è®­ç»ƒæ¨¡å‹å›¾åƒå¤„ç†å™¨ç¼“å­˜åœ¨å…¶ä¸­çš„ç›®å½•è·¯å¾„ã€‚

+   `force_download`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦å¼ºåˆ¶ï¼ˆé‡æ–°ï¼‰ä¸‹è½½å›¾åƒå¤„ç†å™¨æ–‡ä»¶å¹¶è¦†ç›–ç¼“å­˜ç‰ˆæœ¬ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚

+   `resume_download`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦åˆ é™¤æ¥æ”¶ä¸å®Œæ•´çš„æ–‡ä»¶ã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„æ–‡ä»¶ï¼Œå°è¯•æ¢å¤ä¸‹è½½ã€‚

+   `proxies`ï¼ˆ`Dict[str, str]`ï¼Œ*å¯é€‰*ï¼‰â€” è¦ä½¿ç”¨çš„ä»£ç†æœåŠ¡å™¨å­—å…¸ï¼ŒæŒ‰åè®®æˆ–ç«¯ç‚¹åˆ†ç±»ï¼Œä¾‹å¦‚ï¼Œ`{'http': 'foo.bar:3128', 'http://hostname': 'foo.bar:4012'}`ã€‚ä»£ç†å°†åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šä½¿ç”¨ã€‚

+   `token`ï¼ˆ`str`æˆ–`bool`ï¼Œ*å¯é€‰*ï¼‰â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶çš„HTTP beareræˆæƒçš„ä»¤ç‰Œã€‚å¦‚æœä¸º`True`ï¼Œæˆ–æœªæŒ‡å®šï¼Œå°†ä½¿ç”¨è¿è¡Œ`huggingface-cli login`æ—¶ç”Ÿæˆçš„ä»¤ç‰Œï¼ˆå­˜å‚¨åœ¨`~/.huggingface`ï¼‰ã€‚

+   `revision`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"main"`ï¼‰â€” è¦ä½¿ç”¨çš„ç‰¹å®šæ¨¡å‹ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥æ˜¯åˆ†æ”¯åç§°ã€æ ‡ç­¾åç§°æˆ–æäº¤IDï¼Œå› ä¸ºæˆ‘ä»¬åœ¨huggingface.coä¸Šä½¿ç”¨åŸºäºgitçš„ç³»ç»Ÿå­˜å‚¨æ¨¡å‹å’Œå…¶ä»–å·¥ä»¶ï¼Œæ‰€ä»¥`revision`å¯ä»¥æ˜¯gitå…è®¸çš„ä»»ä½•æ ‡è¯†ç¬¦ã€‚

ä»å›¾åƒå¤„ç†å™¨å®ä¾‹åŒ–ç±»å‹[ImageProcessingMixin](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin)ã€‚

ç¤ºä¾‹ï¼š

```py
# We can't instantiate directly the base class *ImageProcessingMixin* so let's show the examples on a
# derived class: *CLIPImageProcessor*
image_processor = CLIPImageProcessor.from_pretrained(
    "openai/clip-vit-base-patch32"
)  # Download image_processing_config from huggingface.co and cache.
image_processor = CLIPImageProcessor.from_pretrained(
    "./test/saved_model/"
)  # E.g. image processor (or model) was saved using *save_pretrained('./test/saved_model/')*
image_processor = CLIPImageProcessor.from_pretrained("./test/saved_model/preprocessor_config.json")
image_processor = CLIPImageProcessor.from_pretrained(
    "openai/clip-vit-base-patch32", do_normalize=False, foo=False
)
assert image_processor.do_normalize is False
image_processor, unused_kwargs = CLIPImageProcessor.from_pretrained(
    "openai/clip-vit-base-patch32", do_normalize=False, foo=False, return_unused_kwargs=True
)
assert image_processor.do_normalize is False
assert unused_kwargs == {"foo": False}
```

#### `get_image_processor_dict`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L271)

```py
( pretrained_model_name_or_path: Union **kwargs ) â†’ export const metadata = 'undefined';Tuple[Dict, Dict]
```

å‚æ•°

+   `pretrained_model_name_or_path`ï¼ˆ`str`æˆ–`os.PathLike`ï¼‰â€” æˆ‘ä»¬æƒ³è¦å‚æ•°å­—å…¸çš„é¢„è®­ç»ƒæ£€æŸ¥ç‚¹çš„æ ‡è¯†ç¬¦ã€‚

+   `subfolder`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`""`ï¼‰â€” å¦‚æœç›¸å…³æ–‡ä»¶ä½äºhuggingface.coä¸Šæ¨¡å‹å­˜å‚¨åº“çš„å­æ–‡ä»¶å¤¹ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„æŒ‡å®šæ–‡ä»¶å¤¹åç§°ã€‚

è¿”å›

`Tuple[Dict, Dict]`

å°†ç”¨äºå®ä¾‹åŒ–å›¾åƒå¤„ç†å™¨å¯¹è±¡çš„å­—å…¸ã€‚

ä»`pretrained_model_name_or_path`è§£æä¸ºå‚æ•°å­—å…¸ï¼Œç”¨äºå®ä¾‹åŒ–ç±»å‹ä¸º`~image_processor_utils.ImageProcessingMixin`çš„å›¾åƒå¤„ç†å™¨ï¼Œä½¿ç”¨`from_dict`ã€‚

#### `push_to_hub`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/utils/hub.py#L755)

```py
( repo_id: str use_temp_dir: Optional = None commit_message: Optional = None private: Optional = None token: Union = None max_shard_size: Union = '5GB' create_pr: bool = False safe_serialization: bool = True revision: str = None commit_description: str = None tags: Optional = None **deprecated_kwargs )
```

å‚æ•°

+   `repo_id`ï¼ˆ`str`ï¼‰â€” æ‚¨è¦æ¨é€å›¾åƒå¤„ç†å™¨çš„å­˜å‚¨åº“åç§°ã€‚åœ¨æ¨é€åˆ°ç»™å®šç»„ç»‡æ—¶ï¼Œåº”åŒ…å«æ‚¨çš„ç»„ç»‡åç§°ã€‚

+   `use_temp_dir`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€” æ˜¯å¦ä½¿ç”¨ä¸´æ—¶ç›®å½•æ¥å­˜å‚¨åœ¨æ¨é€åˆ°Hubä¹‹å‰ä¿å­˜çš„æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰åä¸º`repo_id`çš„ç›®å½•ï¼Œåˆ™é»˜è®¤ä¸º`True`ï¼Œå¦åˆ™ä¸º`False`ã€‚

+   `commit_message`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼‰â€” æ¨é€æ—¶è¦æäº¤çš„æ¶ˆæ¯ã€‚é»˜è®¤ä¸º`"Upload image processor"`ã€‚

+   `private`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€” åˆ›å»ºçš„å­˜å‚¨åº“æ˜¯å¦åº”ä¸ºç§æœ‰ã€‚

+   `token`ï¼ˆ`bool`æˆ–`str`ï¼Œ*å¯é€‰*ï¼‰â€” ç”¨ä½œè¿œç¨‹æ–‡ä»¶çš„HTTP beareræˆæƒçš„ä»¤ç‰Œã€‚å¦‚æœ`repo_url`æœªæŒ‡å®šï¼Œå°†é»˜è®¤ä¸º`True`ã€‚

+   `max_shard_size`ï¼ˆ`int`æˆ–`str`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"5GB"`ï¼‰â€” ä»…é€‚ç”¨äºæ¨¡å‹ã€‚åœ¨åˆ†ç‰‡ä¹‹å‰çš„æ£€æŸ¥ç‚¹çš„æœ€å¤§å¤§å°ã€‚ç„¶åï¼Œæ£€æŸ¥ç‚¹å°†åˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡çš„å¤§å°éƒ½å°äºæ­¤å¤§å°ã€‚å¦‚æœè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ï¼Œéœ€è¦æ˜¯æ•°å­—åè·Ÿä¸€ä¸ªå•ä½ï¼ˆå¦‚`"5MB"`ï¼‰ã€‚æˆ‘ä»¬å°†å…¶é»˜è®¤è®¾ç½®ä¸º`"5GB"`ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥åœ¨å…è´¹çš„Google Colabå®ä¾‹ä¸Šè½»æ¾åŠ è½½æ¨¡å‹ï¼Œè€Œä¸ä¼šå‡ºç°CPU OOMé—®é¢˜ã€‚

+   `create_pr`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸Šä¼ æ–‡ä»¶çš„PRæˆ–ç›´æ¥æäº¤ã€‚

+   `safe_serialization`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`True`ï¼‰â€” æ˜¯å¦å°†æ¨¡å‹æƒé‡è½¬æ¢ä¸ºsafetensorsæ ¼å¼ä»¥è¿›è¡Œæ›´å®‰å…¨çš„åºåˆ—åŒ–ã€‚

+   `revision`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼‰â€” è¦æ¨é€ä¸Šä¼ æ–‡ä»¶çš„åˆ†æ”¯ã€‚

+   `commit_description`ï¼ˆ`str`ï¼Œ*å¯é€‰*ï¼‰â€” å°†è¦åˆ›å»ºçš„æäº¤çš„æè¿°

+   `tags`ï¼ˆ`List[str]`ï¼Œ*å¯é€‰*ï¼‰â€” è¦åœ¨Hubä¸Šæ¨é€çš„æ ‡ç­¾åˆ—è¡¨ã€‚

å°†å›¾åƒå¤„ç†å™¨æ–‡ä»¶ä¸Šä¼ åˆ°ğŸ¤—æ¨¡å‹ä¸­å¿ƒã€‚

ç¤ºä¾‹ï¼š

```py
from transformers import AutoImageProcessor

image processor = AutoImageProcessor.from_pretrained("bert-base-cased")

# Push the image processor to your namespace with the name "my-finetuned-bert".
image processor.push_to_hub("my-finetuned-bert")

# Push the image processor to an organization with the name "my-finetuned-bert".
image processor.push_to_hub("huggingface/my-finetuned-bert")
```

#### `register_for_auto_class`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L497)

```py
( auto_class = 'AutoImageProcessor' )
```

å‚æ•°

+   `auto_class`ï¼ˆ`str`æˆ–`type`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`"AutoImageProcessor" `ï¼‰â€” è¦å°†æ­¤æ–°å›¾åƒå¤„ç†å™¨æ³¨å†Œåˆ°çš„è‡ªåŠ¨ç±»ã€‚

å°†æ­¤ç±»æ³¨å†Œåˆ°ç»™å®šçš„autoç±»ã€‚è¿™ä»…åº”ç”¨äºè‡ªå®šä¹‰å›¾åƒå¤„ç†å™¨ï¼Œå› ä¸ºåº“ä¸­çš„å¤„ç†å™¨å·²ç»ä¸`AutoImageProcessor`æ˜ å°„ã€‚

æ­¤APIæ˜¯å®éªŒæ€§çš„ï¼Œå¯èƒ½åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­æœ‰ä¸€äº›è½»å¾®çš„ç ´åæ€§æ›´æ”¹ã€‚

#### `save_pretrained`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L210)

```py
( save_directory: Union push_to_hub: bool = False **kwargs )
```

å‚æ•°

+   `save_directory`ï¼ˆ`str`æˆ–`os.PathLike`ï¼‰â€” å°†ä¿å­˜å›¾åƒå¤„ç†å™¨JSONæ–‡ä»¶çš„ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºï¼‰ã€‚

+   `push_to_hub`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦åœ¨ä¿å­˜åå°†æ¨¡å‹æ¨é€åˆ°Hugging Faceæ¨¡å‹ä¸­å¿ƒã€‚æ‚¨å¯ä»¥ä½¿ç”¨`repo_id`æŒ‡å®šè¦æ¨é€åˆ°çš„å­˜å‚¨åº“ï¼ˆå°†é»˜è®¤ä¸ºæ‚¨çš„å‘½åç©ºé—´ä¸­`save_directory`çš„åç§°ï¼‰ã€‚

+   `kwargs`ï¼ˆ`Dict[str, Any]`ï¼Œ*å¯é€‰*ï¼‰â€” ä¼ é€’ç»™[push_to_hub()](/docs/transformers/v4.37.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.push_to_hub)æ–¹æ³•çš„é¢å¤–å…³é”®å­—å‚æ•°ã€‚

å°†å›¾åƒå¤„ç†å™¨å¯¹è±¡ä¿å­˜åˆ°ç›®å½•`save_directory`ä¸­ï¼Œä»¥ä¾¿å¯ä»¥ä½¿ç”¨[from_pretrained()](/docs/transformers/v4.37.2/en/internal/image_processing_utils#transformers.ImageProcessingMixin.from_pretrained)ç±»æ–¹æ³•é‡æ–°åŠ è½½ã€‚

#### `to_dict`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L431)

```py
( ) â†’ export const metadata = 'undefined';Dict[str, Any]
```

è¿”å›

`Dict[str, Any]`

åŒ…å«æ­¤å›¾åƒå¤„ç†å™¨å®ä¾‹çš„æ‰€æœ‰å±æ€§çš„å­—å…¸ã€‚

å°†æ­¤å®ä¾‹åºåˆ—åŒ–ä¸ºPythonå­—å…¸ã€‚

#### `to_json_file`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L483)

```py
( json_file_path: Union )
```

å‚æ•°

+   `json_file_path`ï¼ˆ`str`æˆ–`os.PathLike`ï¼‰â€” ä¿å­˜æ­¤image_processorå®ä¾‹å‚æ•°çš„JSONæ–‡ä»¶è·¯å¾„ã€‚

å°†æ­¤å®ä¾‹ä¿å­˜åˆ°JSONæ–‡ä»¶ä¸­ã€‚

#### `to_json_string`

[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/image_processing_utils.py#L462)

```py
( ) â†’ export const metadata = 'undefined';str
```

è¿”å›

`str`

åŒ…å«æ„æˆæ­¤feature_extractorå®ä¾‹çš„æ‰€æœ‰å±æ€§çš„å­—ç¬¦ä¸²ï¼Œä»¥JSONæ ¼å¼å‘ˆç°ã€‚

å°†æ­¤å®ä¾‹åºåˆ—åŒ–ä¸ºJSONå­—ç¬¦ä¸²ã€‚
