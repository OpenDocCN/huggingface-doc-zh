["```py\nfrom transformers import BarkModel\nimport torch\n\ndevice = \"cuda\" if torch.cuda.is_available() else \"cpu\"\nmodel = BarkModel.from_pretrained(\"suno/bark-small\", torch_dtype=torch.float16).to(device)\n```", "```py\nmodel.enable_cpu_offload()\n```", "```py\nmodel =  model.to_bettertransformer()\n```", "```py\npip install -U flash-attn --no-build-isolation\n```", "```py\nmodel = BarkModel.from_pretrained(\"suno/bark-small\", torch_dtype=torch.float16, attn_implementation=\"flash_attention_2\").to(device)\n```", "```py\nfrom transformers import BarkModel\nimport torch\n\ndevice = \"cuda\" if torch.cuda.is_available() else \"cpu\"\n\n# load in fp16 and use Flash Attention 2\nmodel = BarkModel.from_pretrained(\"suno/bark-small\", torch_dtype=torch.float16, attn_implementation=\"flash_attention_2\").to(device)\n\n# enable CPU offload\nmodel.enable_cpu_offload()\n```", "```py\n>>> from transformers import AutoProcessor, BarkModel\n\n>>> processor = AutoProcessor.from_pretrained(\"suno/bark\")\n>>> model = BarkModel.from_pretrained(\"suno/bark\")\n\n>>> voice_preset = \"v2/en_speaker_6\"\n\n>>> inputs = processor(\"Hello, my dog is cute\", voice_preset=voice_preset)\n\n>>> audio_array = model.generate(**inputs)\n>>> audio_array = audio_array.cpu().numpy().squeeze()\n```", "```py\n>>> # Multilingual speech - simplified Chinese\n>>> inputs = processor(\"\u60ca\u4eba\u7684\uff01\u6211\u4f1a\u8bf4\u4e2d\u6587\")\n\n>>> # Multilingual speech - French - let's use a voice_preset as well\n>>> inputs = processor(\"Incroyable! Je peux g\u00e9n\u00e9rer du son.\", voice_preset=\"fr_speaker_5\")\n\n>>> # Bark can also generate music. You can help it out by adding music notes around your lyrics.\n>>> inputs = processor(\"\u266a Hello, my dog is cute \u266a\")\n\n>>> audio_array = model.generate(**inputs)\n>>> audio_array = audio_array.cpu().numpy().squeeze()\n```", "```py\n>>> # Adding non-speech cues to the input text\n>>> inputs = processor(\"Hello uh ... [clears throat], my dog is cute [laughter]\")\n\n>>> audio_array = model.generate(**inputs)\n>>> audio_array = audio_array.cpu().numpy().squeeze()\n```", "```py\n>>> from scipy.io.wavfile import write as write_wav\n\n>>> # save audio to disk, but first take the sample rate from the model config\n>>> sample_rate = model.generation_config.sample_rate\n>>> write_wav(\"bark_generation.wav\", sample_rate, audio_array)\n```", "```py\n>>> from transformers import AutoProcessor, BarkModel\n\n>>> processor = AutoProcessor.from_pretrained(\"suno/bark-small\")\n>>> model = BarkModel.from_pretrained(\"suno/bark-small\")\n\n>>> # To add a voice preset, you can pass `voice_preset` to `BarkProcessor.__call__(...)`\n>>> voice_preset = \"v2/en_speaker_6\"\n\n>>> inputs = processor(\"Hello, my dog is cute, I need him in my life\", voice_preset=voice_preset)\n\n>>> audio_array = model.generate(**inputs, semantic_max_new_tokens=100)\n>>> audio_array = audio_array.cpu().numpy().squeeze()\n```", "```py\n>>> from transformers import BarkCoarseConfig, BarkCoarseModel\n\n>>> # Initializing a Bark sub-module style configuration\n>>> configuration = BarkCoarseConfig()\n\n>>> # Initializing a model (with random weights) from the suno/bark style configuration\n>>> model = BarkCoarseModel(configuration)\n\n>>> # Accessing the model configuration\n>>> configuration = model.config\n```", "```py\n>>> from transformers import BarkFineConfig, BarkFineModel\n\n>>> # Initializing a Bark sub-module style configuration\n>>> configuration = BarkFineConfig()\n\n>>> # Initializing a model (with random weights) from the suno/bark style configuration\n>>> model = BarkFineModel(configuration)\n\n>>> # Accessing the model configuration\n>>> configuration = model.config\n```", "```py\n>>> from transformers import BarkSemanticConfig, BarkSemanticModel\n\n>>> # Initializing a Bark sub-module style configuration\n>>> configuration = BarkSemanticConfig()\n\n>>> # Initializing a model (with random weights) from the suno/bark style configuration\n>>> model = BarkSemanticModel(configuration)\n\n>>> # Accessing the model configuration\n>>> configuration = model.config\n```"]