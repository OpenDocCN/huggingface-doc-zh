- en: Cache management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: åŽŸæ–‡ï¼š[https://huggingface.co/docs/datasets/cache](https://huggingface.co/docs/datasets/cache)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link href="/docs/datasets/v2.17.0/en/_app/immutable/assets/0.e3b0c442.css"
    rel="modulepreload"> <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/entry/start.146395b0.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/scheduler.bdbef820.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/singletons.98dc5b8b.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/index.8a885b74.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/paths.a483fec8.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/entry/app.e612c4fb.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/index.c0aea24a.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/nodes/0.5e8dbda6.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/each.e59479a4.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/nodes/14.b87a982f.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/Tip.31005f7d.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/CodeBlock.6ccca92e.js">
    <link rel="modulepreload" href="/docs/datasets/v2.17.0/en/_app/immutable/chunks/Heading.2eb892cb.js">
  prefs: []
  type: TYPE_NORMAL
- en: When you download a dataset, the processing scripts and data are stored locally
    on your computer. The cache allows ðŸ¤— Datasets to avoid re-downloading or processing
    the entire dataset every time you use it.
  prefs: []
  type: TYPE_NORMAL
- en: 'This guide will show you how to:'
  prefs: []
  type: TYPE_NORMAL
- en: Change the cache directory.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Control how a dataset is loaded from the cache.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Clean up cache files in the directory.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enable or disable caching.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Cache directory
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The default cache directory is `~/.cache/huggingface/datasets`. Change the
    cache location by setting the shell environment variable, `HF_DATASETS_CACHE`
    to another directory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'When you load a dataset, you also have the option to change where the data
    is cached. Change the `cache_dir` parameter to the path you want:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Similarly, you can change where a metric is cached with the `cache_dir` parameter:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Download mode
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'After you download a dataset, control how it is loaded by [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    with the `download_mode` parameter. By default, ðŸ¤— Datasets will reuse a dataset
    if it exists. But if you need the original dataset without any processing functions
    applied, re-download the files as shown below:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Refer to [DownloadMode](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DownloadMode)
    for a full list of download modes.
  prefs: []
  type: TYPE_NORMAL
- en: Cache files
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Clean up the cache files in the directory with [Dataset.cleanup_cache_files()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.cleanup_cache_files):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Enable or disable caching
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'If youâ€™re using a cached file locally, it will automatically reload the dataset
    with any previous transforms you applied to the dataset. Disable this behavior
    by setting the argument `load_from_cache_file=False` in [Dataset.map()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Dataset.map):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: In the example above, ðŸ¤— Datasets will execute the function `add_prefix` over
    the entire dataset again instead of loading the dataset from its previous state.
  prefs: []
  type: TYPE_NORMAL
- en: 'Disable caching on a global scale with [disable_caching()](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.disable_caching):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: When you disable caching, ðŸ¤— Datasets will no longer reload cached files when
    applying transforms to datasets. Any transform you apply on your dataset will
    be need to be reapplied.
  prefs: []
  type: TYPE_NORMAL
- en: If you want to reuse a dataset from scratch, try setting the `download_mode`
    parameter in [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    instead.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can also avoid caching your metric entirely, and keep it in CPU memory
    instead:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: Keeping the predictions in-memory is not possible in a distributed setting since
    the CPU memory spaces of the various processes are not shared.
  prefs: []
  type: TYPE_NORMAL
- en: Improve performance
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Disabling the cache and copying the dataset in-memory will speed up dataset
    operations. There are two options for copying the dataset in-memory:'
  prefs: []
  type: TYPE_NORMAL
- en: Set `datasets.config.IN_MEMORY_MAX_SIZE` to a nonzero value (in bytes) that
    fits in your RAM memory.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Set the environment variable `HF_DATASETS_IN_MEMORY_MAX_SIZE` to a nonzero value.
    Note that the first method takes higher precedence.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
