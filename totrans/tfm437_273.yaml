- en: Mask2Former
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Mask2Former
- en: 'Original text: [https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mask2former](https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mask2former)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡é“¾æ¥ï¼š[https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mask2former](https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mask2former)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¦‚è§ˆ
- en: The Mask2Former model was proposed in [Masked-attention Mask Transformer for
    Universal Image Segmentation](https://arxiv.org/abs/2112.01527) by Bowen Cheng,
    Ishan Misra, Alexander G. Schwing, Alexander Kirillov, Rohit Girdhar. Mask2Former
    is a unified framework for panoptic, instance and semantic segmentation and features
    significant performance and efficiency improvements over [MaskFormer](maskformer).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Mask2Formeræ¨¡å‹æ˜¯ç”±Bowen Chengã€Ishan Misraã€Alexander G. Schwingã€Alexander Kirillovã€Rohit
    Girdharåœ¨[Masked-attention Mask Transformer for Universal Image Segmentation](https://arxiv.org/abs/2112.01527)ä¸­æå‡ºçš„ã€‚Mask2Formeræ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å…¨æ™¯ã€å®ä¾‹å’Œè¯­ä¹‰åˆ†å‰²æ¡†æ¶ï¼Œç›¸æ¯”äº[MaskFormer](maskformer)å…·æœ‰æ˜¾è‘—çš„æ€§èƒ½å’Œæ•ˆç‡æ”¹è¿›ã€‚
- en: 'The abstract from the paper is the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥è‡ªè®ºæ–‡çš„æ‘˜è¦å¦‚ä¸‹ï¼š
- en: '*Image segmentation groups pixels with different semantics, e.g., category
    or instance membership. Each choice of semantics defines a task. While only the
    semantics of each task differ, current research focuses on designing specialized
    architectures for each task. We present Masked-attention Mask Transformer (Mask2Former),
    a new architecture capable of addressing any image segmentation task (panoptic,
    instance or semantic). Its key components include masked attention, which extracts
    localized features by constraining cross-attention within predicted mask regions.
    In addition to reducing the research effort by at least three times, it outperforms
    the best specialized architectures by a significant margin on four popular datasets.
    Most notably, Mask2Former sets a new state-of-the-art for panoptic segmentation
    (57.8 PQ on COCO), instance segmentation (50.1 AP on COCO) and semantic segmentation
    (57.7 mIoU on ADE20K).*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*å›¾åƒåˆ†å‰²å°†å…·æœ‰ä¸åŒè¯­ä¹‰çš„åƒç´ åˆ†ç»„ï¼Œä¾‹å¦‚ç±»åˆ«æˆ–å®ä¾‹æˆå‘˜èµ„æ ¼ã€‚æ¯ç§è¯­ä¹‰é€‰æ‹©å®šä¹‰äº†ä¸€ä¸ªä»»åŠ¡ã€‚è™½ç„¶æ¯ä¸ªä»»åŠ¡çš„è¯­ä¹‰ä¸åŒï¼Œä½†å½“å‰çš„ç ”ç©¶é‡ç‚¹æ˜¯ä¸ºæ¯ä¸ªä»»åŠ¡è®¾è®¡ä¸“é—¨çš„æ¶æ„ã€‚æˆ‘ä»¬æå‡ºäº†Masked-attention
    Mask Transformerï¼ˆMask2Formerï¼‰ï¼Œè¿™æ˜¯ä¸€ç§æ–°çš„æ¶æ„ï¼Œèƒ½å¤Ÿå¤„ç†ä»»ä½•å›¾åƒåˆ†å‰²ä»»åŠ¡ï¼ˆå…¨æ™¯ã€å®ä¾‹æˆ–è¯­ä¹‰ï¼‰ã€‚å…¶å…³é”®ç»„ä»¶åŒ…æ‹¬æ©ç æ³¨æ„åŠ›ï¼Œé€šè¿‡é™åˆ¶åœ¨é¢„æµ‹æ©ç åŒºåŸŸå†…çš„äº¤å‰æ³¨æ„åŠ›æ¥æå–å±€éƒ¨ç‰¹å¾ã€‚é™¤äº†å°†ç ”ç©¶å·¥ä½œé‡è‡³å°‘å‡å°‘ä¸‰å€å¤–ï¼Œå®ƒåœ¨å››ä¸ªæµè¡Œæ•°æ®é›†ä¸Šçš„è¡¨ç°æ˜æ˜¾ä¼˜äºæœ€ä½³ä¸“é—¨æ¶æ„ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒMask2Formeråœ¨å…¨æ™¯åˆ†å‰²ï¼ˆCOCOä¸Šçš„57.8
    PQï¼‰ã€å®ä¾‹åˆ†å‰²ï¼ˆCOCOä¸Šçš„50.1 APï¼‰å’Œè¯­ä¹‰åˆ†å‰²ï¼ˆADE20Kä¸Šçš„57.7 mIoUï¼‰æ–¹é¢å–å¾—äº†æ–°çš„æœ€å…ˆè¿›æ°´å¹³ã€‚*'
- en: '![drawing](../Images/5ce83994aad79cfa0f1a7945fa6a424d.png) Mask2Former architecture.
    Taken from the [original paper.](https://arxiv.org/abs/2112.01527)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![å›¾ç¤º](../Images/5ce83994aad79cfa0f1a7945fa6a424d.png) Mask2Formeræ¶æ„ã€‚å–è‡ª[åŸå§‹è®ºæ–‡](https://arxiv.org/abs/2112.01527)ã€‚'
- en: This model was contributed by [Shivalika Singh](https://huggingface.co/shivi)
    and [Alara Dirik](https://huggingface.co/adirik). The original code can be found
    [here](https://github.com/facebookresearch/Mask2Former).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ¨¡å‹ç”±[Shivalika Singh](https://huggingface.co/shivi)å’Œ[Alara Dirik](https://huggingface.co/adirik)è´¡çŒ®ã€‚åŸå§‹ä»£ç å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/facebookresearch/Mask2Former)æ‰¾åˆ°ã€‚
- en: Usage tips
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æç¤º
- en: Mask2Former uses the same preprocessing and postprocessing steps as [MaskFormer](maskformer).
    Use [Mask2FormerImageProcessor](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor)
    or [AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor)
    to prepare images and optional targets for the model.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Mask2Formerä½¿ç”¨ä¸[MaskFormer](maskformer)ç›¸åŒçš„é¢„å¤„ç†å’Œåå¤„ç†æ­¥éª¤ã€‚ä½¿ç”¨[Mask2FormerImageProcessor](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor)æˆ–[AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor)æ¥ä¸ºæ¨¡å‹å‡†å¤‡å›¾åƒå’Œå¯é€‰ç›®æ ‡ã€‚
- en: To get the final segmentation, depending on the task, you can call [post_process_semantic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_semantic_segmentation)
    or [post_process_instance_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_instance_segmentation)
    or [post_process_panoptic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_panoptic_segmentation).
    All three tasks can be solved using [Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation)
    output, panoptic segmentation accepts an optional `label_ids_to_fuse` argument
    to fuse instances of the target object/s (e.g. sky) together.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¦è·å¾—æœ€ç»ˆçš„åˆ†å‰²ç»“æœï¼Œå–å†³äºä»»åŠ¡ï¼Œæ‚¨å¯ä»¥è°ƒç”¨[post_process_semantic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_semantic_segmentation)æˆ–[post_process_instance_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_instance_segmentation)æˆ–[post_process_panoptic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_panoptic_segmentation)ã€‚æ‰€æœ‰è¿™ä¸‰ä¸ªä»»åŠ¡éƒ½å¯ä»¥ä½¿ç”¨[Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation)çš„è¾“å‡ºæ¥è§£å†³ï¼Œå…¨æ™¯åˆ†å‰²æ¥å—ä¸€ä¸ªå¯é€‰çš„`label_ids_to_fuse`å‚æ•°ï¼Œä»¥å°†ç›®æ ‡å¯¹è±¡ï¼ˆä¾‹å¦‚å¤©ç©ºï¼‰çš„å®ä¾‹åˆå¹¶åœ¨ä¸€èµ·ã€‚
- en: Resources
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: èµ„æº
- en: A list of official Hugging Face and community (indicated by ğŸŒ) resources to
    help you get started with Mask2Former.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç³»åˆ—å®˜æ–¹Hugging Faceå’Œç¤¾åŒºï¼ˆç”±ğŸŒè¡¨ç¤ºï¼‰èµ„æºï¼Œå¯å¸®åŠ©æ‚¨å¼€å§‹ä½¿ç”¨Mask2Formerã€‚
- en: Demo notebooks regarding inference + fine-tuning Mask2Former on custom data
    can be found [here](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/Mask2Former).
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å…³äºåœ¨è‡ªå®šä¹‰æ•°æ®ä¸Šè¿›è¡Œæ¨ç†+å¾®è°ƒMask2Formerçš„æ¼”ç¤ºç¬”è®°æœ¬å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/NielsRogge/Transformers-Tutorials/tree/master/Mask2Former)æ‰¾åˆ°ã€‚
- en: If youâ€™re interested in submitting a resource to be included here, please feel
    free to open a Pull Request and we will review it. The resource should ideally
    demonstrate something new instead of duplicating an existing resource.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æœ‰å…´è¶£æäº¤èµ„æºä»¥åŒ…å«åœ¨è¿™é‡Œï¼Œè¯·éšæ—¶æ‰“å¼€ä¸€ä¸ªPull Requestï¼Œæˆ‘ä»¬å°†è¿›è¡Œå®¡æ ¸ã€‚èµ„æºåº”è¯¥ç†æƒ³åœ°å±•ç¤ºä¸€äº›æ–°ä¸œè¥¿ï¼Œè€Œä¸æ˜¯é‡å¤ç°æœ‰èµ„æºã€‚
- en: Mask2FormerConfig
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Mask2FormerConfig
- en: '### `class transformers.Mask2FormerConfig`'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.Mask2FormerConfig`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/configuration_mask2former.py#L33)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/configuration_mask2former.py#L33)'
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Parameters
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`backbone_config` (`PretrainedConfig` or `dict`, *optional*, defaults to `SwinConfig()`)
    â€” The configuration of the backbone model. If unset, the configuration corresponding
    to `swin-base-patch4-window12-384` will be used.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`backbone_config` (`PretrainedConfig` or `dict`, *optional*, defaults to `SwinConfig()`)
    â€” ä¸»å¹²æ¨¡å‹çš„é…ç½®ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨ä¸`swin-base-patch4-window12-384`å¯¹åº”çš„é…ç½®ã€‚'
- en: '`feature_size` (`int`, *optional*, defaults to 256) â€” The features (channels)
    of the resulting feature maps.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`feature_size` (`int`, *optional*, defaults to 256) â€” ç»“æœç‰¹å¾å›¾çš„ç‰¹å¾ï¼ˆé€šé“ï¼‰ã€‚'
- en: '`mask_feature_size` (`int`, *optional*, defaults to 256) â€” The masksâ€™ features
    size, this value will also be used to specify the Feature Pyramid Network featuresâ€™
    size.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mask_feature_size` (`int`, *optional*, defaults to 256) â€” æ©ç çš„ç‰¹å¾å¤§å°ï¼Œæ­¤å€¼è¿˜å°†ç”¨äºæŒ‡å®šç‰¹å¾é‡‘å­—å¡”ç½‘ç»œç‰¹å¾çš„å¤§å°ã€‚'
- en: '`hidden_dim` (`int`, *optional*, defaults to 256) â€” Dimensionality of the encoder
    layers.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`hidden_dim` (`int`, *optional*, defaults to 256) â€” ç¼–ç å™¨å±‚çš„ç»´åº¦ã€‚'
- en: '`encoder_feedforward_dim` (`int`, *optional*, defaults to 1024) â€” Dimension
    of feedforward network for deformable detr encoder used as part of pixel decoder.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_feedforward_dim` (`int`, *optional*, defaults to 1024) â€” ç”¨ä½œåƒç´ è§£ç å™¨ä¸€éƒ¨åˆ†çš„å¯å˜å½¢detrç¼–ç å™¨çš„å‰é¦ˆç½‘ç»œç»´åº¦ã€‚'
- en: '`encoder_layers` (`int`, *optional*, defaults to 6) â€” Number of layers in the
    deformable detr encoder used as part of pixel decoder.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_layers` (`int`, *optional*, defaults to 6) â€” ç”¨ä½œåƒç´ è§£ç å™¨ä¸€éƒ¨åˆ†çš„å¯å˜å½¢detrç¼–ç å™¨ä¸­çš„å±‚æ•°ã€‚'
- en: '`decoder_layers` (`int`, *optional*, defaults to 10) â€” Number of layers in
    the Transformer decoder.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`decoder_layers` (`int`, *optional*, defaults to 10) â€” å˜å‹å™¨è§£ç å™¨ä¸­çš„å±‚æ•°ã€‚'
- en: '`num_attention_heads` (`int`, *optional*, defaults to 8) â€” Number of attention
    heads for each attention layer.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_attention_heads` (`int`, *optional*, defaults to 8) â€” æ¯ä¸ªæ³¨æ„åŠ›å±‚çš„æ³¨æ„åŠ›å¤´æ•°ã€‚'
- en: '`dropout` (`float`, *optional*, defaults to 0.1) â€” The dropout probability
    for all fully connected layers in the embeddings, encoder.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dropout` (`float`, *optional*, defaults to 0.1) â€” åµŒå…¥å±‚ã€ç¼–ç å™¨ä¸­æ‰€æœ‰å…¨è¿æ¥å±‚çš„ä¸¢å¤±æ¦‚ç‡ã€‚'
- en: '`dim_feedforward` (`int`, *optional*, defaults to 2048) â€” Feature dimension
    in feedforward network for transformer decoder.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dim_feedforward` (`int`, *optional*, defaults to 2048) â€” å˜å‹å™¨è§£ç å™¨ä¸­å‰é¦ˆç½‘ç»œçš„ç‰¹å¾ç»´åº¦ã€‚'
- en: '`pre_norm` (`bool`, *optional*, defaults to `False`) â€” Whether to use pre-LayerNorm
    or not for transformer decoder.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pre_norm` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦åœ¨å˜å‹å™¨è§£ç å™¨ä¸­ä½¿ç”¨é¢„LayerNormã€‚'
- en: '`enforce_input_projection` (`bool`, *optional*, defaults to `False`) â€” Whether
    to add an input projection 1x1 convolution even if the input channels and hidden
    dim are identical in the Transformer decoder.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`enforce_input_projection` (`bool`, *optional*, defaults to `False`) â€” æ˜¯å¦åœ¨Transformerè§£ç å™¨ä¸­æ·»åŠ ä¸€ä¸ªè¾“å…¥æŠ•å½±1x1å·ç§¯ï¼Œå³ä½¿è¾“å…¥é€šé“å’Œéšè—ç»´åº¦ç›¸åŒã€‚'
- en: '`common_stride` (`int`, *optional*, defaults to 4) â€” Parameter used for determining
    number of FPN levels used as part of pixel decoder.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`common_stride` (`int`, *optional*, defaults to 4) â€” ç”¨äºç¡®å®šä½œä¸ºåƒç´ è§£ç å™¨ä¸€éƒ¨åˆ†ä½¿ç”¨çš„FPNçº§åˆ«æ•°çš„å‚æ•°ã€‚'
- en: '`ignore_value` (`int`, *optional*, defaults to 255) â€” Category id to be ignored
    during training.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ignore_value` (`int`, *optional*, defaults to 255) â€” è®­ç»ƒè¿‡ç¨‹ä¸­è¦å¿½ç•¥çš„ç±»åˆ«IDã€‚'
- en: '`num_queries` (`int`, *optional*, defaults to 100) â€” Number of queries for
    the decoder.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_queries` (`int`, *optional*, defaults to 100) â€” è§£ç å™¨çš„æŸ¥è¯¢æ¬¡æ•°ã€‚'
- en: '`no_object_weight` (`int`, *optional*, defaults to 0.1) â€” The weight to apply
    to the null (no object) class.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`no_object_weight` (`int`, *optional*, defaults to 0.1) â€” ç”¨äºç©ºï¼ˆæ— å¯¹è±¡ï¼‰ç±»çš„æƒé‡ã€‚'
- en: '`class_weight` (`int`, *optional*, defaults to 2.0) â€” The weight for the cross
    entropy loss.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`class_weight` (`int`, *optional*, defaults to 2.0) â€” äº¤å‰ç†µæŸå¤±çš„æƒé‡ã€‚'
- en: '`mask_weight` (`int`, *optional*, defaults to 5.0) â€” The weight for the mask
    loss.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mask_weight` (`int`, *optional*, defaults to 5.0) â€” æ©ç æŸå¤±çš„æƒé‡ã€‚'
- en: '`dice_weight` (`int`, *optional*, defaults to 5.0) â€” The weight for the dice
    loss.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dice_weight` (`int`, *optional*, defaults to 5.0) â€” diceæŸå¤±çš„æƒé‡ã€‚'
- en: '`train_num_points` (`str` or `function`, *optional*, defaults to 12544) â€” Number
    of points used for sampling during loss calculation.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`train_num_points` (`str` or `function`, *optional*, defaults to 12544) â€” åœ¨æŸå¤±è®¡ç®—è¿‡ç¨‹ä¸­ç”¨äºé‡‡æ ·çš„ç‚¹æ•°ã€‚'
- en: '`oversample_ratio` (`float`, *optional*, defaults to 3.0) â€” Oversampling parameter
    used for calculating no. of sampled points'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`oversample_ratio` (`float`, *optional*, defaults to 3.0) â€” ç”¨äºè®¡ç®—é‡‡æ ·ç‚¹æ•°çš„è¿‡é‡‡æ ·å‚æ•°ã€‚'
- en: '`importance_sample_ratio` (`float`, *optional*, defaults to 0.75) â€” Ratio of
    points that are sampled via importance sampling.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`importance_sample_ratio` (`float`, *optional*, defaults to 0.75) â€” é€šè¿‡é‡è¦æ€§é‡‡æ ·æŠ½æ ·çš„ç‚¹æ¯”ä¾‹ã€‚'
- en: '`init_std` (`float`, *optional*, defaults to 0.02) â€” The standard deviation
    of the truncated_normal_initializer for initializing all weight matrices.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`init_std` (`float`, *optional*, defaults to 0.02) â€” ç”¨äºåˆå§‹åŒ–æ‰€æœ‰æƒé‡çŸ©é˜µçš„æˆªæ–­æ­£æ€åˆå§‹åŒ–å™¨çš„æ ‡å‡†å·®ã€‚'
- en: '`init_xavier_std` (`float`, *optional*, defaults to 1.0) â€” The scaling factor
    used for the Xavier initialization gain in the HM Attention map module.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`init_xavier_std` (`float`, *optional*, defaults to 1.0) â€” ç”¨äºHMæ³¨æ„åŠ›å›¾æ¨¡å—ä¸­Xavieråˆå§‹åŒ–å¢ç›Šçš„ç¼©æ”¾å› å­ã€‚'
- en: '`use_auxiliary_loss` (`boolean``, *optional*, defaults to` True`) -- If` TrueMask2FormerForUniversalSegmentationOutput`
    will contain the auxiliary losses computed using the logits from each decoderâ€™s
    stage.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`use_auxiliary_loss` (`boolean``, *optional*, defaults to` True`) -- å¦‚æœ`True`ï¼Œ`Mask2FormerForUniversalSegmentationOutput`å°†åŒ…å«ä½¿ç”¨æ¯ä¸ªè§£ç å™¨é˜¶æ®µçš„logitsè®¡ç®—çš„è¾…åŠ©æŸå¤±ã€‚'
- en: '`feature_strides` (`List[int]`, *optional*, defaults to `[4, 8, 16, 32]`) â€”
    Feature strides corresponding to features generated from backbone network.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`feature_strides` (`List[int]`, *optional*, defaults to `[4, 8, 16, 32]`) â€”
    ä¸ä¸»å¹²ç½‘ç»œç”Ÿæˆçš„ç‰¹å¾å¯¹åº”çš„ç‰¹å¾æ­¥å¹…ã€‚'
- en: '`output_auxiliary_logits` (`bool`, *optional*) â€” Should the model output its
    `auxiliary_logits` or not.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_auxiliary_logits` (`bool`, *optional*) â€” æ¨¡å‹æ˜¯å¦è¾“å‡ºå…¶`auxiliary_logits`ã€‚'
- en: This is the configuration class to store the configuration of a [Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel).
    It is used to instantiate a Mask2Former model according to the specified arguments,
    defining the model architecture. Instantiating a configuration with the defaults
    will yield a similar configuration to that of the Mask2Former [facebook/mask2former-swin-small-coco-instance](https://huggingface.co/facebook/mask2former-swin-small-coco-instance)
    architecture.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨äºå­˜å‚¨[Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel)çš„é…ç½®ã€‚æ ¹æ®æŒ‡å®šçš„å‚æ•°å®ä¾‹åŒ–ä¸€ä¸ªMask2Formeræ¨¡å‹ï¼Œå®šä¹‰æ¨¡å‹æ¶æ„ã€‚ä½¿ç”¨é»˜è®¤å€¼å®ä¾‹åŒ–é…ç½®å°†äº§ç”Ÿç±»ä¼¼äºMask2Former
    [facebook/mask2former-swin-small-coco-instance](https://huggingface.co/facebook/mask2former-swin-small-coco-instance)æ¶æ„çš„é…ç½®ã€‚
- en: Configuration objects inherit from [PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig)
    and can be used to control the model outputs. Read the documentation from [PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig)
    for more information.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: é…ç½®å¯¹è±¡ç»§æ‰¿è‡ª[PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig)ï¼Œå¯ç”¨äºæ§åˆ¶æ¨¡å‹è¾“å‡ºã€‚é˜…è¯»[PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig)çš„æ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚
- en: Currently, Mask2Former only supports the [Swin Transformer](swin) as backbone.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼ŒMask2Formerä»…æ”¯æŒ[Swin Transformer](swin)ä½œä¸ºéª¨å¹²ç½‘ç»œã€‚
- en: 'Examples:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE1]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '#### `from_backbone_config`'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `from_backbone_config`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/configuration_mask2former.py#L218)'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/configuration_mask2former.py#L218)'
- en: '[PRE2]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Parameters
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`backbone_config` ([PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig))
    â€” The backbone configuration.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`backbone_config`ï¼ˆ[PretrainedConfig](/docs/transformers/v4.37.2/en/main_classes/configuration#transformers.PretrainedConfig)ï¼‰
    â€” éª¨å¹²é…ç½®ã€‚'
- en: Returns
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)'
- en: An instance of a configuration object
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªé…ç½®å¯¹è±¡çš„å®ä¾‹
- en: Instantiate a [Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)
    (or a derived class) from a pre-trained backbone model configuration.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ä»é¢„è®­ç»ƒçš„éª¨å¹²æ¨¡å‹é…ç½®å®ä¾‹åŒ–ä¸€ä¸ª[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)ï¼ˆæˆ–æ´¾ç”Ÿç±»ï¼‰ã€‚
- en: MaskFormer specific outputs
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: MaskFormerç‰¹å®šè¾“å‡º
- en: '### `class transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput`'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L145)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L145)'
- en: '[PRE3]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`encoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size, num_channels,
    height, width)`, *optional*) â€” Last hidden states (final feature map) of the last
    stage of the encoder model (backbone). Returned when `output_hidden_states=True`
    is passed.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`ï¼Œ*optional*) â€” ç¼–ç å™¨æ¨¡å‹ï¼ˆéª¨å¹²ï¼‰æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*) â€” Tuple of
    `torch.FloatTensor` (one for the output of the embeddings + one for the output
    of each stage) of shape `(batch_size, num_channels, height, width)`. Hidden-states
    (also called feature maps) of the encoder model at the output of each stage. Returned
    when `output_hidden_states=True` is passed.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*) â€” ç¼–ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰çš„å…ƒç»„ï¼Œå½¢çŠ¶ä¸º`(batch_size,
    num_channels, height, width)`ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size,
    num_channels, height, width)`, *optional*) â€” Last hidden states (final feature
    map) of the last stage of the pixel decoder model.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`ï¼Œ*optional*) â€” åƒç´ è§£ç å™¨æ¨¡å‹æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, , *optional*, returned
    when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the pixel decoder model at the output
    of each stage. Returned when `output_hidden_states=True` is passed.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, å½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›)
    â€” åƒç´ è§£ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰çš„å…ƒç»„ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” Final
    output of the transformer decoder `(batch_size, sequence_length, hidden_size)`.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” å˜å‹å™¨è§£ç å™¨çš„æœ€ç»ˆè¾“å‡º`(batch_size,
    sequence_length, hidden_size)`ã€‚'
- en: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, sequence_length, hidden_size)`.
    Hidden-states (also called feature maps) of the transformer decoder at the output
    of each stage. Returned when `output_hidden_states=True` is passed.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*)
    â€” å˜å‹å™¨è§£ç å™¨åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰çš„å…ƒç»„ï¼Œå½¢çŠ¶ä¸º`(batch_size, sequence_length, hidden_size)`ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`transformer_decoder_intermediate_states` (`tuple(torch.FloatTensor)` of shape
    `(num_queries, 1, hidden_size)`) â€” Intermediate decoder activations, i.e. the
    output of each decoder layer, each of them gone through a layernorm.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_intermediate_states` (`tuple(torch.FloatTensor)`ï¼Œå½¢çŠ¶ä¸º`(num_queries,
    1, hidden_size)`) â€” ä¸­é—´è§£ç å™¨æ¿€æ´»ï¼Œå³æ¯ä¸ªè§£ç å™¨å±‚çš„è¾“å‡ºï¼Œæ¯ä¸ªéƒ½ç»è¿‡äº†layernormã€‚'
- en: '`masks_queries_logits` (`tuple(torch.FloatTensor)` of shape `(batch_size, num_queries,
    height, width)`) â€” Mask Predictions from each layer in the transformer decoder.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`masks_queries_logits` (`tuple(torch.FloatTensor)`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_queries,
    height, width)`) â€” transformerè§£ç å™¨ä¸­æ¯å±‚çš„æ©ç é¢„æµ‹ã€‚'
- en: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *optional*, returned when
    `output_attentions=True` is passed) â€” Tuple of `tuple(torch.FloatTensor)` (one
    for each layer) of shape `(batch_size, num_heads, sequence_length, sequence_length)`.
    Self attentions weights from transformer decoder.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attentions` (`tuple(tuple(torch.FloatTensor))`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_attentions=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, num_heads, sequence_length, sequence_length)`çš„å…ƒç»„çš„å…ƒç»„ã€‚transformerè§£ç å™¨çš„è‡ªæ³¨æ„åŠ›æƒé‡ã€‚'
- en: Class for outputs of [Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel).
    This class returns all the needed hidden states to compute the logits.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨äº[Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel)çš„è¾“å‡ºç±»ã€‚è¯¥ç±»è¿”å›è®¡ç®—logitsæ‰€éœ€çš„æ‰€æœ‰éšè—çŠ¶æ€ã€‚
- en: '### `class transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput`'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L191)'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L191)'
- en: '[PRE4]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Parameters
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`loss` (`torch.Tensor`, *optional*) â€” The computed loss, returned when labels
    are present.'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`loss` (`torch.Tensor`ï¼Œ*å¯é€‰*) â€” è®¡ç®—å¾—åˆ°çš„æŸå¤±ï¼Œåœ¨å­˜åœ¨æ ‡ç­¾æ—¶è¿”å›ã€‚'
- en: '`class_queries_logits` (`torch.FloatTensor`) â€” A tensor of shape `(batch_size,
    num_queries, num_labels + 1)` representing the proposed classes for each query.
    Note the `+ 1` is needed because we incorporate the null class.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`class_queries_logits` (`torch.FloatTensor`) â€” ä¸€ä¸ªå½¢çŠ¶ä¸º`(batch_size, num_queries,
    num_labels + 1)`çš„å¼ é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ¥è¯¢çš„æè®®ç±»åˆ«ã€‚è¯·æ³¨æ„ï¼Œ`+ 1`æ˜¯å› ä¸ºæˆ‘ä»¬åŒ…å«äº†ç©ºç±»åˆ«ã€‚'
- en: '`masks_queries_logits` (`torch.FloatTensor`) â€” A tensor of shape `(batch_size,
    num_queries, height, width)` representing the proposed masks for each query.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`masks_queries_logits` (`torch.FloatTensor`) â€” ä¸€ä¸ªå½¢çŠ¶ä¸º`(batch_size, num_queries,
    height, width)`çš„å¼ é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ¥è¯¢çš„æè®®æ©ç ã€‚'
- en: '`auxiliary_logits` (`List[Dict(str, torch.FloatTensor)]`, *optional*) â€” List
    of class and mask predictions from each layer of the transformer decoder.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary_logits` (`List[Dict(str, torch.FloatTensor)]`ï¼Œ*å¯é€‰*) â€” transformerè§£ç å™¨æ¯å±‚çš„ç±»åˆ«å’Œæ©ç é¢„æµ‹çš„åˆ—è¡¨ã€‚'
- en: '`encoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size, num_channels,
    height, width)`) â€” Last hidden states (final feature map) of the last stage of
    the encoder model (backbone).'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`) â€” ç¼–ç å™¨æ¨¡å‹ï¼ˆéª¨å¹²ï¼‰æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, returned when
    `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the encoder model at the output of
    each stage.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„å…ƒç»„çš„`torch.FloatTensor`ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º
    + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚ç¼–ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size,
    num_channels, height, width)`) â€” Last hidden states (final feature map) of the
    last stage of the pixel decoder model.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`) â€” åƒç´ è§£ç å™¨æ¨¡å‹æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, returned
    when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the pixel decoder model at the output
    of each stage.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„å…ƒç»„çš„`torch.FloatTensor`ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º
    + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚åƒç´ è§£ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” Final
    output of the transformer decoder `(batch_size, sequence_length, hidden_size)`.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” transformerè§£ç å™¨çš„æœ€ç»ˆè¾“å‡º`(batch_size,
    sequence_length, hidden_size)`ã€‚'
- en: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*,
    returned when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, sequence_length, hidden_size)`.
    Hidden-states (also called feature maps) of the transformer decoder at the output
    of each stage.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, sequence_length, hidden_size)`çš„å…ƒç»„çš„`torch.FloatTensor`ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º
    + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚transformerè§£ç å™¨åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *optional*, returned when
    `output_attentions=True` is passed or when `config.output_attentions=True`) â€”
    Tuple of `tuple(torch.FloatTensor)` (one for each layer) of shape `(batch_size,
    num_heads, sequence_length, sequence_length)`. Self and Cross Attentions weights
    from transformer decoder.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *å¯é€‰*, å½“ä¼ é€’`output_attentions=True`æˆ–`config.output_attentions=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, num_heads, sequence_length, sequence_length)`çš„å…ƒç»„çš„å…ƒç»„ã€‚æ¥è‡ªtransformerè§£ç å™¨çš„è‡ªæ³¨æ„åŠ›å’Œäº¤å‰æ³¨æ„åŠ›æƒé‡ã€‚'
- en: Class for outputs of `Mask2FormerForUniversalSegmentationOutput`.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '`Mask2FormerForUniversalSegmentationOutput`çš„è¾“å‡ºç±»ã€‚'
- en: This output can be directly passed to [post_process_semantic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_semantic_segmentation)
    or [post_process_instance_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_instance_segmentation)
    or [post_process_panoptic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_panoptic_segmentation)
    to compute final segmentation maps. Please, see [`~Mask2FormerImageProcessor]
    for details regarding usage.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¾“å‡ºå¯ä»¥ç›´æ¥ä¼ é€’ç»™[post_process_semantic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_semantic_segmentation)æˆ–[post_process_instance_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_instance_segmentation)æˆ–[post_process_panoptic_segmentation()](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerImageProcessor.post_process_panoptic_segmentation)æ¥è®¡ç®—æœ€ç»ˆçš„åˆ†å‰²åœ°å›¾ã€‚è¯·å‚é˜…[`~Mask2FormerImageProcessor]ä»¥è·å–æœ‰å…³ç”¨æ³•çš„è¯¦ç»†ä¿¡æ¯ã€‚
- en: Mask2FormerModel
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Mask2FormerModel
- en: '### `class transformers.Mask2FormerModel`'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.Mask2FormerModel`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2189)'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2189)'
- en: '[PRE5]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Parameters
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`config` ([Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig))
    â€” Model configuration class with all the parameters of the model. Initializing
    with a config file does not load the weights associated with the model, only the
    configuration. Check out the [from_pretrained()](/docs/transformers/v4.37.2/en/main_classes/model#transformers.PreTrainedModel.from_pretrained)
    method to load the model weights.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config`ï¼ˆ[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)ï¼‰â€”
    å…·æœ‰æ¨¡å‹æ‰€æœ‰å‚æ•°çš„æ¨¡å‹é…ç½®ç±»ã€‚ä½¿ç”¨é…ç½®æ–‡ä»¶åˆå§‹åŒ–ä¸ä¼šåŠ è½½ä¸æ¨¡å‹ç›¸å…³çš„æƒé‡ï¼ŒåªåŠ è½½é…ç½®ã€‚æŸ¥çœ‹[from_pretrained()](/docs/transformers/v4.37.2/en/main_classes/model#transformers.PreTrainedModel.from_pretrained)æ–¹æ³•ä»¥åŠ è½½æ¨¡å‹æƒé‡ã€‚'
- en: The bare Mask2Former Model outputting raw hidden-states without any specific
    head on top. This model is a PyTorch [torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module)
    sub-class. Use it as a regular PyTorch Module and refer to the PyTorch documentation
    for all matter related to general usage and behavior.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: è£¸çš„Mask2Formeræ¨¡å‹è¾“å‡ºåŸå§‹éšè—çŠ¶æ€ï¼Œæ²¡æœ‰ç‰¹å®šçš„å¤´éƒ¨ã€‚è¿™ä¸ªæ¨¡å‹æ˜¯PyTorch [torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module)å­ç±»ã€‚å°†å…¶ç”¨ä½œå¸¸è§„PyTorchæ¨¡å—ï¼Œå¹¶å‚è€ƒPyTorchæ–‡æ¡£ä»¥è·å–æœ‰å…³ä¸€èˆ¬ç”¨æ³•å’Œè¡Œä¸ºçš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯ã€‚
- en: '#### `forward`'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `forward`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2203)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2203)'
- en: '[PRE6]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Parameters
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`pixel_values` (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)`) â€” Pixel values. Pixel values can be obtained using [AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor).
    See `AutoImageProcessor.preprocess` for details.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_values`ï¼ˆ`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`ï¼‰â€”
    åƒç´ å€¼ã€‚åƒç´ å€¼å¯ä»¥ä½¿ç”¨[AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor)è·å–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…`AutoImageProcessor.preprocess`ã€‚'
- en: '`pixel_mask` (`torch.LongTensor` of shape `(batch_size, height, width)`, *optional*)
    â€” Mask to avoid performing attention on padding pixel values. Mask values selected
    in `[0, 1]`:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_mask`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, height, width)`çš„`torch.LongTensor`ï¼Œ*å¯é€‰*ï¼‰â€” ç”¨äºé¿å…åœ¨å¡«å……åƒç´ å€¼ä¸Šæ‰§è¡Œæ³¨æ„åŠ›çš„æ©ç ã€‚æ©ç å€¼é€‰æ‹©åœ¨`[0,
    1]`ä¸­ï¼š'
- en: 1 for pixels that are real (i.e. `not masked`),
  id: totrans-107
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1è¡¨ç¤ºçœŸå®åƒç´ ï¼ˆå³`æœªæ©ç `ï¼‰ï¼Œ
- en: 0 for pixels that are padding (i.e. `masked`).
  id: totrans-108
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 0è¡¨ç¤ºå¡«å……åƒç´ ï¼ˆå³`æ©ç `ï¼‰ã€‚
- en: '[What are attention masks?](../glossary#attention-mask)'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æ©ç ï¼Ÿ](../glossary#attention-mask)'
- en: '`output_hidden_states` (`bool`, *optional*) â€” Whether or not to return the
    hidden states of all layers. See `hidden_states` under returned tensors for more
    detail.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_hidden_states`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€” æ˜¯å¦è¿”å›æ‰€æœ‰å±‚çš„éšè—çŠ¶æ€ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¿”å›å¼ é‡ä¸‹çš„`hidden_states`ã€‚'
- en: '`output_attentions` (`bool`, *optional*) â€” Whether or not to return the attentions
    tensors of Detrâ€™s decoder attention layers.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_attentions`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€” æ˜¯å¦è¿”å›Detrè§£ç å™¨æ³¨æ„åŠ›å±‚çš„æ³¨æ„åŠ›å¼ é‡ã€‚'
- en: '`return_dict` (`bool`, *optional*) â€” Whether or not to return a `~Mask2FormerModelOutput`
    instead of a plain tuple.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict`ï¼ˆ`bool`ï¼Œ*å¯é€‰*ï¼‰â€” æ˜¯å¦è¿”å›`~Mask2FormerModelOutput`è€Œä¸æ˜¯æ™®é€šå…ƒç»„ã€‚'
- en: Returns
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '[transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput)
    or `tuple(torch.FloatTensor)`'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '[transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput)æˆ–`tuple(torch.FloatTensor)`'
- en: A [transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput)
    or a tuple of `torch.FloatTensor` (if `return_dict=False` is passed or when `config.return_dict=False`)
    comprising various elements depending on the configuration ([Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig))
    and inputs.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª[transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerModelOutput)æˆ–ä¸€ä¸ª`torch.FloatTensor`å…ƒç»„ï¼ˆå¦‚æœä¼ é€’`return_dict=False`æˆ–å½“`config.return_dict=False`æ—¶ï¼‰åŒ…å«æ ¹æ®é…ç½®ï¼ˆ[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)ï¼‰å’Œè¾“å…¥çš„å„ç§å…ƒç´ ã€‚
- en: '`encoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size, num_channels,
    height, width)`, *optional*) â€” Last hidden states (final feature map) of the last
    stage of the encoder model (backbone). Returned when `output_hidden_states=True`
    is passed.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_last_hidden_state`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`ï¼Œ*å¯é€‰*ï¼‰â€”
    ç¼–ç å™¨æ¨¡å‹ï¼ˆéª¨å¹²ï¼‰æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*) â€” Tuple of
    `torch.FloatTensor` (one for the output of the embeddings + one for the output
    of each stage) of shape `(batch_size, num_channels, height, width)`. Hidden-states
    (also called feature maps) of the encoder model at the output of each stage. Returned
    when `output_hidden_states=True` is passed.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states`ï¼ˆ`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼‰â€” å½¢çŠ¶ä¸º`(batch_size,
    num_channels, height, width)`çš„`torch.FloatTensor`å…ƒç»„ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚ç¼–ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size,
    num_channels, height, width)`, *optional*) â€” Last hidden states (final feature
    map) of the last stage of the pixel decoder model.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_last_hidden_state`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`ï¼Œ*å¯é€‰*ï¼‰â€”
    åƒç´ è§£ç å™¨æ¨¡å‹æœ€åé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, , *optional*, returned
    when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the pixel decoder model at the output
    of each stage. Returned when `output_hidden_states=True` is passed.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_hidden_states`ï¼ˆ`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›ï¼‰â€”
    å½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`å…ƒç»„ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º
    + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚åƒç´ è§£ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” Final
    output of the transformer decoder `(batch_size, sequence_length, hidden_size)`.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_last_hidden_state`ï¼ˆ`tuple(torch.FloatTensor)`ï¼‰â€” å˜å‹å™¨è§£ç å™¨çš„æœ€ç»ˆè¾“å‡º`(batch_size,
    sequence_length, hidden_size)`ã€‚'
- en: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, sequence_length, hidden_size)`.
    Hidden-states (also called feature maps) of the transformer decoder at the output
    of each stage. Returned when `output_hidden_states=True` is passed.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_hidden_states`ï¼ˆ`tuple(torch.FloatTensor)`ï¼Œ*å¯é€‰*ï¼‰â€” å½¢çŠ¶ä¸º`(batch_size,
    sequence_length, hidden_size)`çš„`torch.FloatTensor`å…ƒç»„ï¼ˆä¸€ä¸ªç”¨äºåµŒå…¥çš„è¾“å‡º + ä¸€ä¸ªç”¨äºæ¯ä¸ªé˜¶æ®µçš„è¾“å‡ºï¼‰ã€‚å˜å‹å™¨è§£ç å™¨åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚å½“ä¼ é€’`output_hidden_states=True`æ—¶è¿”å›ã€‚'
- en: '`transformer_decoder_intermediate_states` (`tuple(torch.FloatTensor)` of shape
    `(num_queries, 1, hidden_size)`) â€” Intermediate decoder activations, i.e. the
    output of each decoder layer, each of them gone through a layernorm.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_intermediate_states`ï¼ˆå½¢çŠ¶ä¸º`(num_queries, 1, hidden_size)`çš„`tuple(torch.FloatTensor)`)
    â€” ä¸­é—´è§£ç å™¨æ¿€æ´»ï¼Œå³æ¯ä¸ªè§£ç å™¨å±‚çš„è¾“å‡ºï¼Œæ¯ä¸ªéƒ½ç»è¿‡äº†ä¸€ä¸ªlayernormã€‚'
- en: '`masks_queries_logits` (`tuple(torch.FloatTensor)` of shape `(batch_size, num_queries,
    height, width)`) Mask Predictions from each layer in the transformer decoder.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`masks_queries_logits`ï¼ˆå½¢çŠ¶ä¸º`(batch_size, num_queries, height, width)`çš„`tuple(torch.FloatTensor)`)
    â€” å˜å‹å™¨è§£ç å™¨ä¸­æ¯ä¸ªå±‚çš„æ©ç é¢„æµ‹ã€‚'
- en: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *optional*, returned when
    `output_attentions=True` is passed) â€” Tuple of `tuple(torch.FloatTensor)` (one
    for each layer) of shape `(batch_size, num_heads, sequence_length, sequence_length)`.
    Self attentions weights from transformer decoder.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attentions`ï¼ˆ`tuple(tuple(torch.FloatTensor))`ï¼Œ*å¯é€‰*ï¼Œå½“ä¼ é€’`output_attentions=True`æ—¶è¿”å›ï¼‰â€”
    å½¢çŠ¶ä¸º`(batch_size, num_heads, sequence_length, sequence_length)`çš„`tuple(torch.FloatTensor)`å…ƒç»„ï¼ˆæ¯ä¸ªå±‚ä¸€ä¸ªï¼‰ã€‚æ¥è‡ªå˜å‹å™¨è§£ç å™¨çš„è‡ªæ³¨æ„æƒé‡ã€‚'
- en: '`Mask2FormerModelOutput`'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '`Mask2FormerModelOutput`'
- en: The [Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel)
    forward method, overrides the `__call__` special method.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '[Mask2FormerModel](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerModel)çš„å‰å‘æ–¹æ³•ï¼Œè¦†ç›–äº†`__call__`ç‰¹æ®Šæ–¹æ³•ã€‚'
- en: Although the recipe for forward pass needs to be defined within this function,
    one should call the `Module` instance afterwards instead of this since the former
    takes care of running the pre and post processing steps while the latter silently
    ignores them.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶å‰å‘ä¼ é€’çš„æ­¥éª¤éœ€è¦åœ¨è¿™ä¸ªå‡½æ•°å†…å®šä¹‰ï¼Œä½†åº”è¯¥åœ¨æ­¤ä¹‹åè°ƒç”¨`Module`å®ä¾‹ï¼Œè€Œä¸æ˜¯åœ¨æ­¤å¤„è°ƒç”¨ï¼Œå› ä¸ºå‰è€…è´Ÿè´£è¿è¡Œé¢„å¤„ç†å’Œåå¤„ç†æ­¥éª¤ï¼Œè€Œåè€…ä¼šé»˜é»˜åœ°å¿½ç•¥å®ƒä»¬ã€‚
- en: 'Examples:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE7]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Mask2FormerForUniversalSegmentation
  id: totrans-130
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Mask2FormerForUniversalSegmentation
- en: '### `class transformers.Mask2FormerForUniversalSegmentation`'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.Mask2FormerForUniversalSegmentation`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2293)'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2293)'
- en: '[PRE8]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Parameters
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`config` ([Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig))
    â€” Model configuration class with all the parameters of the model. Initializing
    with a config file does not load the weights associated with the model, only the
    configuration. Check out the [from_pretrained()](/docs/transformers/v4.37.2/en/main_classes/model#transformers.PreTrainedModel.from_pretrained)
    method to load the model weights.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config`ï¼ˆ[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)ï¼‰â€”
    å…·æœ‰æ¨¡å‹æ‰€æœ‰å‚æ•°çš„æ¨¡å‹é…ç½®ç±»ã€‚ä½¿ç”¨é…ç½®æ–‡ä»¶åˆå§‹åŒ–ä¸ä¼šåŠ è½½ä¸æ¨¡å‹ç›¸å…³çš„æƒé‡ï¼ŒåªåŠ è½½é…ç½®ã€‚æŸ¥çœ‹[from_pretrained()](/docs/transformers/v4.37.2/en/main_classes/model#transformers.PreTrainedModel.from_pretrained)æ–¹æ³•ä»¥åŠ è½½æ¨¡å‹æƒé‡ã€‚'
- en: The Mask2Former Model with heads on top for instance/semantic/panoptic segmentation.
    This model is a PyTorch [torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module)
    sub-class. Use it as a regular PyTorch Module and refer to the PyTorch documentation
    for all matter related to general usage and behavior.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: Mask2Formeræ¨¡å‹åœ¨é¡¶éƒ¨å…·æœ‰ç”¨äºå®ä¾‹/è¯­ä¹‰/å…¨æ™¯åˆ†å‰²çš„å¤´ã€‚è¿™ä¸ªæ¨¡å‹æ˜¯PyTorchçš„[torch.nn.Module](https://pytorch.org/docs/stable/nn.html#torch.nn.Module)å­ç±»ã€‚å°†å…¶ç”¨ä½œå¸¸è§„çš„PyTorchæ¨¡å—ï¼Œå¹¶å‚è€ƒPyTorchæ–‡æ¡£ä»¥è·å–ä¸ä¸€èˆ¬ç”¨æ³•å’Œè¡Œä¸ºç›¸å…³çš„æ‰€æœ‰å†…å®¹ã€‚
- en: '#### `forward`'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `forward`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2350)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/modeling_mask2former.py#L2350)'
- en: '[PRE9]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Parameters
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`pixel_values` (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)`) â€” Pixel values. Pixel values can be obtained using [AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor).
    See `AutoImageProcessor.preprocess` for details.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_values` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels, height,
    width)`) â€” åƒç´ å€¼ã€‚å¯ä»¥ä½¿ç”¨[AutoImageProcessor](/docs/transformers/v4.37.2/en/model_doc/auto#transformers.AutoImageProcessor)è·å–åƒç´ å€¼ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…`AutoImageProcessor.preprocess`ã€‚'
- en: '`pixel_mask` (`torch.LongTensor` of shape `(batch_size, height, width)`, *optional*)
    â€” Mask to avoid performing attention on padding pixel values. Mask values selected
    in `[0, 1]`:'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_mask` (`torch.LongTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, height, width)`ï¼Œ*optional*)
    â€” é¿å…åœ¨å¡«å……åƒç´ å€¼ä¸Šæ‰§è¡Œæ³¨æ„åŠ›çš„æ©ç ã€‚é€‰æ‹©çš„æ©ç å€¼åœ¨`[0, 1]`ä¸­ï¼š'
- en: 1 for pixels that are real (i.e. `not masked`),
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯¹äºçœŸå®åƒç´ ä¸º1ï¼ˆå³`not masked`ï¼‰ï¼Œ
- en: 0 for pixels that are padding (i.e. `masked`).
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯¹äºå¡«å……åƒç´ ä¸º0ï¼ˆå³`masked`ï¼‰ã€‚
- en: '[What are attention masks?](../glossary#attention-mask)'
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[ä»€ä¹ˆæ˜¯æ³¨æ„åŠ›æ©ç ï¼Ÿ](../glossary#attention-mask)'
- en: '`output_hidden_states` (`bool`, *optional*) â€” Whether or not to return the
    hidden states of all layers. See `hidden_states` under returned tensors for more
    detail.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_hidden_states` (`bool`, *optional*) â€” æ˜¯å¦è¿”å›æ‰€æœ‰å±‚çš„éšè—çŠ¶æ€ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¿”å›å¼ é‡ä¸‹çš„`hidden_states`ã€‚'
- en: '`output_attentions` (`bool`, *optional*) â€” Whether or not to return the attentions
    tensors of Detrâ€™s decoder attention layers.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_attentions` (`bool`, *optional*) â€” æ˜¯å¦è¿”å›Detrè§£ç å™¨æ³¨æ„åŠ›å±‚çš„æ³¨æ„åŠ›å¼ é‡ã€‚'
- en: '`return_dict` (`bool`, *optional*) â€” Whether or not to return a `~Mask2FormerModelOutput`
    instead of a plain tuple.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *optional*) â€” æ˜¯å¦è¿”å›`~Mask2FormerModelOutput`è€Œä¸æ˜¯æ™®é€šå…ƒç»„ã€‚'
- en: '`mask_labels` (`List[torch.Tensor]`, *optional*) â€” List of mask labels of shape
    `(num_labels, height, width)` to be fed to a model'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mask_labels` (`List[torch.Tensor]`, *optional*) â€” å½¢çŠ¶ä¸º`(num_labels, height,
    width)`çš„æ©ç æ ‡ç­¾åˆ—è¡¨ï¼Œç”¨äºé¦ˆé€åˆ°æ¨¡å‹ã€‚'
- en: '`class_labels` (`List[torch.LongTensor]`, *optional*) â€” list of target class
    labels of shape `(num_labels, height, width)` to be fed to a model. They identify
    the labels of `mask_labels`, e.g. the label of `mask_labels[i][j]` if `class_labels[i][j]`.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`class_labels` (`List[torch.LongTensor]`, *optional*) â€” å½¢çŠ¶ä¸º`(num_labels, height,
    width)`çš„ç›®æ ‡ç±»åˆ«æ ‡ç­¾åˆ—è¡¨ï¼Œç”¨äºé¦ˆé€åˆ°æ¨¡å‹ã€‚å®ƒä»¬æ ‡è¯†`mask_labels`çš„æ ‡ç­¾ï¼Œä¾‹å¦‚ï¼Œå¦‚æœ`class_labels[i][j]`çš„æ ‡ç­¾æ˜¯`mask_labels[i][j]`ã€‚ '
- en: Returns
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '[transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput)
    or `tuple(torch.FloatTensor)`'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '[transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput)æˆ–`tuple(torch.FloatTensor)`'
- en: A [transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput)
    or a tuple of `torch.FloatTensor` (if `return_dict=False` is passed or when `config.return_dict=False`)
    comprising various elements depending on the configuration ([Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig))
    and inputs.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª[transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.models.mask2former.modeling_mask2former.Mask2FormerForUniversalSegmentationOutput)æˆ–ä¸€ä¸ª`torch.FloatTensor`å…ƒç»„ï¼ˆå¦‚æœä¼ é€’äº†`return_dict=False`æˆ–`config.return_dict=False`æ—¶ï¼‰åŒ…å«å„ç§å…ƒç´ ï¼Œè¿™å–å†³äºé…ç½®ï¼ˆ[Mask2FormerConfig](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerConfig)ï¼‰å’Œè¾“å…¥ã€‚
- en: '`loss` (`torch.Tensor`, *optional*) â€” The computed loss, returned when labels
    are present.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`loss` (`torch.Tensor`, *optional*) â€” è®¡ç®—çš„æŸå¤±ï¼Œåœ¨å­˜åœ¨æ ‡ç­¾æ—¶è¿”å›ã€‚'
- en: '`class_queries_logits` (`torch.FloatTensor`) â€” A tensor of shape `(batch_size,
    num_queries, num_labels + 1)` representing the proposed classes for each query.
    Note the `+ 1` is needed because we incorporate the null class.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`class_queries_logits` (`torch.FloatTensor`) â€” å½¢çŠ¶ä¸º`(batch_size, num_queries,
    num_labels + 1)`çš„å¼ é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ¥è¯¢çš„æè®®ç±»åˆ«ã€‚è¯·æ³¨æ„ï¼Œ`+ 1`æ˜¯å› ä¸ºæˆ‘ä»¬åŒ…å«äº†ç©ºç±»ã€‚'
- en: '`masks_queries_logits` (`torch.FloatTensor`) â€” A tensor of shape `(batch_size,
    num_queries, height, width)` representing the proposed masks for each query.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`masks_queries_logits` (`torch.FloatTensor`) â€” å½¢çŠ¶ä¸º`(batch_size, num_queries,
    height, width)`çš„å¼ é‡ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ¥è¯¢çš„æè®®æ©ç ã€‚'
- en: '`auxiliary_logits` (`List[Dict(str, torch.FloatTensor)]`, *optional*) â€” List
    of class and mask predictions from each layer of the transformer decoder.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auxiliary_logits` (`List[Dict(str, torch.FloatTensor)]`, *optional*) â€” æ¥è‡ªå˜å‹å™¨è§£ç å™¨æ¯ä¸€å±‚çš„ç±»åˆ«å’Œæ©ç é¢„æµ‹çš„åˆ—è¡¨ã€‚'
- en: '`encoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size, num_channels,
    height, width)`) â€” Last hidden states (final feature map) of the last stage of
    the encoder model (backbone).'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`) â€” ç¼–ç å™¨æ¨¡å‹ï¼ˆéª¨å¹²ï¼‰æœ€åä¸€ä¸ªé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, returned when
    `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the encoder model at the output of
    each stage.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, å½“ä¼ é€’`output_hidden_states=True`æˆ–`config.output_hidden_states=True`æ—¶è¿”å›)
    â€” å½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`å…ƒç»„ã€‚ç¼–ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor` of shape `(batch_size,
    num_channels, height, width)`) â€” Last hidden states (final feature map) of the
    last stage of the pixel decoder model.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_last_hidden_state` (`torch.FloatTensor`ï¼Œå½¢çŠ¶ä¸º`(batch_size, num_channels,
    height, width)`) â€” åƒç´ è§£ç å™¨æ¨¡å‹æœ€åä¸€ä¸ªé˜¶æ®µçš„æœ€åéšè—çŠ¶æ€ï¼ˆæœ€ç»ˆç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*, returned
    when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, num_channels, height, width)`.
    Hidden-states (also called feature maps) of the pixel decoder model at the output
    of each stage.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pixel_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *å¯é€‰*ï¼Œå½“ä¼ é€’ `output_hidden_states=True`
    æˆ– `config.output_hidden_states=True` æ—¶è¿”å›) â€” å½¢çŠ¶ä¸º `(batch_size, num_channels, height,
    width)` çš„ `torch.FloatTensor` å…ƒç»„ã€‚åƒç´ è§£ç å™¨æ¨¡å‹åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” Final
    output of the transformer decoder `(batch_size, sequence_length, hidden_size)`.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_last_hidden_state` (`tuple(torch.FloatTensor)`) â€” å˜æ¢å™¨è§£ç å™¨çš„æœ€ç»ˆè¾“å‡º
    `(batch_size, sequence_length, hidden_size)`ã€‚'
- en: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *optional*,
    returned when `output_hidden_states=True` is passed or when `config.output_hidden_states=True`)
    â€” Tuple of `torch.FloatTensor` (one for the output of the embeddings + one for
    the output of each stage) of shape `(batch_size, sequence_length, hidden_size)`.
    Hidden-states (also called feature maps) of the transformer decoder at the output
    of each stage.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`transformer_decoder_hidden_states` (`tuple(torch.FloatTensor)`, *å¯é€‰*ï¼Œå½“ä¼ é€’ `output_hidden_states=True`
    æˆ– `config.output_hidden_states=True` æ—¶è¿”å›) â€” å½¢çŠ¶ä¸º `(batch_size, sequence_length,
    hidden_size)` çš„ `torch.FloatTensor` å…ƒç»„ã€‚å˜æ¢å™¨è§£ç å™¨åœ¨æ¯ä¸ªé˜¶æ®µè¾“å‡ºçš„éšè—çŠ¶æ€ï¼ˆä¹Ÿç§°ä¸ºç‰¹å¾å›¾ï¼‰ã€‚'
- en: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *optional*, returned when
    `output_attentions=True` is passed or when `config.output_attentions=True`) â€”
    Tuple of `tuple(torch.FloatTensor)` (one for each layer) of shape `(batch_size,
    num_heads, sequence_length, sequence_length)`. Self and Cross Attentions weights
    from transformer decoder.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`attentions` (`tuple(tuple(torch.FloatTensor))`, *å¯é€‰*ï¼Œå½“ä¼ é€’ `output_attentions=True`
    æˆ– `config.output_attentions=True` æ—¶è¿”å›) â€” å½¢çŠ¶ä¸º `(batch_size, num_heads, sequence_length,
    sequence_length)` çš„ `tuple(torch.FloatTensor)` å…ƒç»„ã€‚å˜æ¢å™¨è§£ç å™¨çš„è‡ªæ³¨æ„åŠ›å’Œäº¤å‰æ³¨æ„åŠ›æƒé‡ã€‚'
- en: '`Mask2FormerUniversalSegmentationOutput`'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '`Mask2FormerUniversalSegmentationOutput`'
- en: The [Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation)
    forward method, overrides the `__call__` special method.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '[Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation)
    çš„å‰å‘æ–¹æ³•ï¼Œè¦†ç›– `__call__` ç‰¹æ®Šæ–¹æ³•ã€‚'
- en: Although the recipe for forward pass needs to be defined within this function,
    one should call the `Module` instance afterwards instead of this since the former
    takes care of running the pre and post processing steps while the latter silently
    ignores them.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: è™½ç„¶å‰å‘ä¼ é€’çš„æ­¥éª¤éœ€è¦åœ¨æ­¤å‡½æ•°å†…å®šä¹‰ï¼Œä½†åº”è¯¥åœ¨æ­¤ä¹‹åè°ƒç”¨ `Module` å®ä¾‹ï¼Œè€Œä¸æ˜¯åœ¨æ­¤å¤„è°ƒç”¨ï¼Œå› ä¸ºå‰è€…è´Ÿè´£è¿è¡Œé¢„å¤„ç†å’Œåå¤„ç†æ­¥éª¤ï¼Œè€Œåè€…ä¼šé»˜é»˜åœ°å¿½ç•¥å®ƒä»¬ã€‚
- en: 'Examples:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: 'Instance segmentation example:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: å®ä¾‹åˆ†å‰²ç¤ºä¾‹ï¼š
- en: '[PRE10]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Semantic segmentation example:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: è¯­ä¹‰åˆ†å‰²ç¤ºä¾‹ï¼š
- en: '[PRE11]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Panoptic segmentation example:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: å…¨æ™¯åˆ†å‰²ç¤ºä¾‹ï¼š
- en: '[PRE12]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Mask2FormerImageProcessor
  id: totrans-175
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Mask2FormerImageProcessor
- en: '### `class transformers.Mask2FormerImageProcessor`'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.Mask2FormerImageProcessor`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L345)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L345)'
- en: '[PRE13]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Parameters
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`do_resize` (`bool`, *optional*, defaults to `True`) â€” Whether to resize the
    input to a certain `size`.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_resize` (`bool`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `True`) â€” æ˜¯å¦å°†è¾“å…¥è°ƒæ•´å¤§å°åˆ°ç‰¹å®šçš„ `size`ã€‚'
- en: '`size` (`int`, *optional*, defaults to 800) â€” Resize the input to the given
    size. Only has an effect if `do_resize` is set to `True`. If size is a sequence
    like `(width, height)`, output size will be matched to this. If size is an int,
    smaller edge of the image will be matched to this number. i.e, if `height > width`,
    then image will be rescaled to `(size * height / width, size)`.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`size` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º800) â€” è°ƒæ•´è¾“å…¥å¤§å°ä¸ºç»™å®šå¤§å°ã€‚ä»…åœ¨ `do_resize` è®¾ç½®ä¸º `True` æ—¶æœ‰æ•ˆã€‚å¦‚æœ
    size æ˜¯ä¸€ä¸ªç±»ä¼¼ `(width, height)` çš„åºåˆ—ï¼Œè¾“å‡ºå¤§å°å°†åŒ¹é…åˆ°è¿™ä¸ªå¤§å°ã€‚å¦‚æœ size æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå›¾åƒçš„è¾ƒå°è¾¹å°†åŒ¹é…åˆ°è¿™ä¸ªæ•°å­—ã€‚å³ï¼Œå¦‚æœ
    `height > width`ï¼Œé‚£ä¹ˆå›¾åƒå°†è¢«é‡æ–°ç¼©æ”¾ä¸º `(size * height / width, size)`ã€‚'
- en: '`size_divisor` (`int`, *optional*, defaults to 32) â€” Some backbones need images
    divisible by a certain number. If not passed, it defaults to the value used in
    Swin Transformer.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`size_divisor` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º32) â€” ä¸€äº›ä¸»å¹²ç½‘ç»œéœ€è¦å¯è¢«æŸä¸ªæ•°å­—æ•´é™¤çš„å›¾åƒã€‚å¦‚æœæœªä¼ é€’ï¼Œåˆ™é»˜è®¤ä¸º Swin Transformer
    ä¸­ä½¿ç”¨çš„å€¼ã€‚'
- en: '`resample` (`int`, *optional*, defaults to `Resampling.BILINEAR`) â€” An optional
    resampling filter. This can be one of `PIL.Image.Resampling.NEAREST`, `PIL.Image.Resampling.BOX`,
    `PIL.Image.Resampling.BILINEAR`, `PIL.Image.Resampling.HAMMING`, `PIL.Image.Resampling.BICUBIC`
    or `PIL.Image.Resampling.LANCZOS`. Only has an effect if `do_resize` is set to
    `True`.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`resample` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `Resampling.BILINEAR`) â€” å¯é€‰çš„é‡é‡‡æ ·æ»¤æ³¢å™¨ã€‚å¯ä»¥æ˜¯ `PIL.Image.Resampling.NEAREST`ã€`PIL.Image.Resampling.BOX`ã€`PIL.Image.Resampling.BILINEAR`ã€`PIL.Image.Resampling.HAMMING`ã€`PIL.Image.Resampling.BICUBIC`
    æˆ– `PIL.Image.Resampling.LANCZOS` ä¸­çš„ä¸€ä¸ªã€‚ä»…åœ¨ `do_resize` è®¾ç½®ä¸º `True` æ—¶æœ‰æ•ˆã€‚'
- en: '`do_rescale` (`bool`, *optional*, defaults to `True`) â€” Whether to rescale
    the input to a certain `scale`.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_rescale` (`bool`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `True`) â€” æ˜¯å¦å°†è¾“å…¥é‡æ–°ç¼©æ”¾åˆ°ç‰¹å®šçš„ `scale`ã€‚'
- en: '`rescale_factor` (`float`, *optional*, defaults to `1/ 255`) â€” Rescale the
    input by the given factor. Only has an effect if `do_rescale` is set to `True`.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rescale_factor` (`float`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `1/255`) â€” é€šè¿‡ç»™å®šå› å­é‡æ–°ç¼©æ”¾è¾“å…¥ã€‚ä»…åœ¨ `do_rescale`
    è®¾ç½®ä¸º `True` æ—¶æœ‰æ•ˆã€‚'
- en: '`do_normalize` (`bool`, *optional*, defaults to `True`) â€” Whether or not to
    normalize the input with mean and standard deviation.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_normalize` (`bool`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `True`) â€” æ˜¯å¦å¯¹è¾“å…¥è¿›è¡Œå‡å€¼å’Œæ ‡å‡†å·®å½’ä¸€åŒ–ã€‚'
- en: '`image_mean` (`int`, *optional*, defaults to `[0.485, 0.456, 0.406]`) â€” The
    sequence of means for each channel, to be used when normalizing images. Defaults
    to the ImageNet mean.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image_mean` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `[0.485, 0.456, 0.406]`) â€” æ¯ä¸ªé€šé“çš„å‡å€¼åºåˆ—ï¼Œç”¨äºå½’ä¸€åŒ–å›¾åƒã€‚é»˜è®¤ä¸º
    ImageNet å‡å€¼ã€‚'
- en: '`image_std` (`int`, *optional*, defaults to `[0.229, 0.224, 0.225]`) â€” The
    sequence of standard deviations for each channel, to be used when normalizing
    images. Defaults to the ImageNet std.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image_std` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º `[0.229, 0.224, 0.225]`) â€” æ¯ä¸ªé€šé“çš„æ ‡å‡†å·®åºåˆ—ï¼Œç”¨äºå½’ä¸€åŒ–å›¾åƒã€‚é»˜è®¤ä¸º
    ImageNet æ ‡å‡†å·®ã€‚'
- en: '`ignore_index` (`int`, *optional*) â€” Label to be assigned to background pixels
    in segmentation maps. If provided, segmentation map pixels denoted with 0 (background)
    will be replaced with `ignore_index`.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`reduce_labels` (`bool`, *optional*, defaults to `False`) â€” Whether or not
    to decrement all label values of segmentation maps by 1\. Usually used for datasets
    where 0 is used for background, and background itself is not included in all classes
    of a dataset (e.g. ADE20k). The background label will be replaced by `ignore_index`.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Constructs a Mask2Former image processor. The image processor can be used to
    prepare image(s) and optional targets for the model.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
- en: This image processor inherits from `BaseImageProcessor` which contains most
    of the main methods. Users should refer to this superclass for more information
    regarding those methods.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
- en: '#### `preprocess`'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L670)'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '#### `encode_inputs`'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L858)'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Parameters
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
- en: '`pixel_values_list` (`List[ImageInput]`) â€” List of images (pixel values) to
    be padded. Each image should be a tensor of shape `(channels, height, width)`.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`segmentation_maps` (`ImageInput`, *optional*) â€” The corresponding semantic
    segmentation maps with the pixel-wise annotations.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '(`bool`, *optional*, defaults to `True`): Whether or not to pad images up to
    the largest image in a batch and create a pixel mask.'
  id: totrans-202
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 'If left to the default, will return a pixel mask that is:'
  id: totrans-203
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: 1 for pixels that are real (i.e. `not masked`),
  id: totrans-204
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 0 for pixels that are padding (i.e. `masked`).
  id: totrans-205
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`instance_id_to_semantic_id` (`List[Dict[int, int]]` or `Dict[int, int]`, *optional*)
    â€” A mapping between object instance ids and class ids. If passed, `segmentation_maps`
    is treated as an instance segmentation map where each pixel represents an instance
    id. Can be provided as a single dictionary with a global/dataset-level mapping
    or as a list of dictionaries (one per image), to map instance ids in each image
    separately.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`return_tensors` (`str` or [TensorType](/docs/transformers/v4.37.2/en/internal/file_utils#transformers.TensorType),
    *optional*) â€” If set, will return tensors instead of NumPy arrays. If set to `''pt''`,
    return PyTorch `torch.Tensor` objects.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`input_data_format` (`ChannelDimension` or `str`, *optional*) â€” The channel
    dimension format of the input image. If not provided, it will be inferred.'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Returns
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
- en: '[BatchFeature](/docs/transformers/v4.37.2/en/main_classes/feature_extractor#transformers.BatchFeature)'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
- en: 'A [BatchFeature](/docs/transformers/v4.37.2/en/main_classes/feature_extractor#transformers.BatchFeature)
    with the following fields:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
- en: '`pixel_values` â€” Pixel values to be fed to a model.'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`pixel_mask` â€” Pixel mask to be fed to a model (when `=True` or if `pixel_mask`
    is in `self.model_input_names`).'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`mask_labels` â€” Optional list of mask labels of shape `(labels, height, width)`
    to be fed to a model (when `annotations` are provided).'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`class_labels` â€” Optional list of class labels of shape `(labels)` to be fed
    to a model (when `annotations` are provided). They identify the labels of `mask_labels`,
    e.g. the label of `mask_labels[i][j]` if `class_labels[i][j]`.'
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Pad images up to the largest image in a batch and create a corresponding `pixel_mask`.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: Mask2Former addresses semantic segmentation with a mask classification paradigm,
    thus input segmentation maps will be converted to lists of binary masks and their
    respective labels. Letâ€™s see an example, assuming `segmentation_maps = [[2,6,7,9]]`,
    the output will contain `mask_labels = [[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]`
    (four binary masks) and `class_labels = [2,6,7,9]`, the labels for each mask.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
- en: '#### `post_process_semantic_segmentation`'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L961)'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Parameters
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
- en: '`outputs` ([Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation))
    â€” Raw outputs of the model.'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`target_sizes` (`List[Tuple[int, int]]`, *optional*) â€” List of length (batch_size),
    where each list item (`Tuple[int, int]]`) corresponds to the requested final size
    (height, width) of each prediction. If left to None, predictions will not be resized.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Returns
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
- en: '`List[torch.Tensor]`'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
- en: A list of length `batch_size`, where each item is a semantic segmentation map
    of shape (height, width) corresponding to the target_sizes entry (if `target_sizes`
    is specified). Each entry of each `torch.Tensor` correspond to a semantic class
    id.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
- en: Converts the output of [Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation)
    into semantic segmentation maps. Only supports PyTorch.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
- en: '#### `post_process_instance_segmentation`'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L1016)'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Parameters
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
- en: '`outputs` ([Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation))
    â€” Raw outputs of the model.'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`threshold` (`float`, *optional*, defaults to 0.5) â€” The probability score
    threshold to keep predicted instance masks.'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`mask_threshold` (`float`, *optional*, defaults to 0.5) â€” Threshold to use
    when turning the predicted masks into binary values.'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`overlap_mask_area_threshold` (`float`, *optional*, defaults to 0.8) â€” The
    overlap mask area threshold to merge or discard small disconnected parts within
    each binary instance mask.'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`target_sizes` (`List[Tuple]`, *optional*) â€” List of length (batch_size), where
    each list item (`Tuple[int, int]]`) corresponds to the requested final size (height,
    width) of each prediction. If left to None, predictions will not be resized.'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`return_coco_annotation` (`bool`, *optional*, defaults to `False`) â€” If set
    to `True`, segmentation maps are returned in COCO run-length encoding (RLE) format.'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`return_binary_maps` (`bool`, *optional*, defaults to `False`) â€” If set to
    `True`, segmentation maps are returned as a concatenated tensor of binary segmentation
    maps (one per detected instance).'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Returns
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
- en: '`List[Dict]`'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
- en: 'A list of dictionaries, one per image, each dictionary containing two keys:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
- en: '`segmentation` â€” A tensor of shape `(height, width)` where each pixel represents
    a `segment_id` or `List[List]` run-length encoding (RLE) of the segmentation map
    if return_coco_annotation is set to `True`. Set to `None` if no mask if found
    above `threshold`.'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`segments_info` â€” A dictionary that contains additional information on each
    segment.'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`id` â€” An integer representing the `segment_id`.'
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`label_id` â€” An integer representing the label / semantic class id corresponding
    to `segment_id`.'
  id: totrans-245
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`score` â€” Prediction score of segment with `segment_id`.'
  id: totrans-246
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Converts the output of `Mask2FormerForUniversalSegmentationOutput` into instance
    segmentation predictions. Only supports PyTorch.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
- en: '#### `post_process_panoptic_segmentation`'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/models/mask2former/image_processing_mask2former.py#L1135)'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Parameters
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
- en: '`outputs` (`Mask2FormerForUniversalSegmentationOutput`) â€” The outputs from
    [Mask2FormerForUniversalSegmentation](/docs/transformers/v4.37.2/en/model_doc/mask2former#transformers.Mask2FormerForUniversalSegmentation).'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`threshold` (`float`, *optional*, defaults to 0.5) â€” The probability score
    threshold to keep predicted instance masks.'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`mask_threshold` (`float`, *optional*, defaults to 0.5) â€” Threshold to use
    when turning the predicted masks into binary values.'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`overlap_mask_area_threshold` (`float`, *optional*, defaults to 0.8) â€” The
    overlap mask area threshold to merge or discard small disconnected parts within
    each binary instance mask.'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`label_ids_to_fuse` (`Set[int]`, *optional*) â€” The labels in this state will
    have all their instances be fused together. For instance we could say there can
    only be one sky in an image, but several persons, so the label ID for sky would
    be in that set, but not the one for person.'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`target_sizes` (`List[Tuple]`, *optional*) â€” List of length (batch_size), where
    each list item (`Tuple[int, int]]`) corresponds to the requested final size (height,
    width) of each prediction in batch. If left to None, predictions will not be resized.'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Returns
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
- en: '`List[Dict]`'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
- en: 'A list of dictionaries, one per image, each dictionary containing two keys:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
- en: '`segmentation` â€” a tensor of shape `(height, width)` where each pixel represents
    a `segment_id`, set to `None` if no mask if found above `threshold`. If `target_sizes`
    is specified, segmentation is resized to the corresponding `target_sizes` entry.'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`segments_info` â€” A dictionary that contains additional information on each
    segment.'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`id` â€” an integer representing the `segment_id`.'
  id: totrans-263
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`label_id` â€” An integer representing the label / semantic class id corresponding
    to `segment_id`.'
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`was_fused` â€” a boolean, `True` if `label_id` was in `label_ids_to_fuse`, `False`
    otherwise. Multiple instances of the same class / label were fused and assigned
    a single `segment_id`.'
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`score` â€” Prediction score of segment with `segment_id`.'
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Converts the output of `Mask2FormerForUniversalSegmentationOutput` into image
    panoptic segmentation predictions. Only supports PyTorch.
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
