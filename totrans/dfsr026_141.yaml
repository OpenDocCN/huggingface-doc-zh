- en: DeepFloyd IF
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DeepFloyd IF
- en: 'Original text: [https://huggingface.co/docs/diffusers/api/pipelines/deepfloyd_if](https://huggingface.co/docs/diffusers/api/pipelines/deepfloyd_if)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原始文本：[https://huggingface.co/docs/diffusers/api/pipelines/deepfloyd_if](https://huggingface.co/docs/diffusers/api/pipelines/deepfloyd_if)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概述
- en: 'DeepFloyd IF is a novel state-of-the-art open-source text-to-image model with
    a high degree of photorealism and language understanding. The model is a modular
    composed of a frozen text encoder and three cascaded pixel diffusion modules:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: DeepFloyd IF是一种新颖的最先进的开源文本到图像模型，具有高度的逼真度和语言理解能力。该模型是一个模块化的，由一个冻结的文本编码器和三个级联的像素扩散模块组成：
- en: 'Stage 1: a base model that generates 64x64 px image based on text prompt,'
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阶段1：基于文本提示生成64x64像素图像的基础模型，
- en: 'Stage 2: a 64x64 px => 256x256 px super-resolution model, and'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阶段2：一个64x64像素=>256x256像素超分辨率模型，
- en: 'Stage 3: a 256x256 px => 1024x1024 px super-resolution model Stage 1 and Stage
    2 utilize a frozen text encoder based on the T5 transformer to extract text embeddings,
    which are then fed into a UNet architecture enhanced with cross-attention and
    attention pooling. Stage 3 is [Stability AI’s x4 Upscaling model](https://huggingface.co/stabilityai/stable-diffusion-x4-upscaler).
    The result is a highly efficient model that outperforms current state-of-the-art
    models, achieving a zero-shot FID score of 6.66 on the COCO dataset. Our work
    underscores the potential of larger UNet architectures in the first stage of cascaded
    diffusion models and depicts a promising future for text-to-image synthesis.'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阶段3：一个256x256像素=>1024x1024像素超分辨率模型。阶段1和阶段2利用基于T5变压器的冻结文本编码器来提取文本嵌入，然后将其馈送到增强了交叉注意力和注意力池化的UNet架构中。阶段3是[Stability
    AI的x4放大模型](https://huggingface.co/stabilityai/stable-diffusion-x4-upscaler)。结果是一个高效的模型，优于当前最先进的模型，实现了在COCO数据集上的零样本FID分数为6.66。我们的工作强调了级联扩散模型中更大的UNet架构在第一阶段的潜力，并描绘了文本到图像合成的光明未来。
- en: Usage
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用法
- en: 'Before you can use IF, you need to accept its usage conditions. To do so:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用IF之前，您需要接受其使用条件。要这样做：
- en: Make sure to have a [Hugging Face account](https://huggingface.co/join) and
    be logged in.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保拥有[Hugging Face账户](https://huggingface.co/join)并已登录。
- en: Accept the license on the model card of [DeepFloyd/IF-I-XL-v1.0](https://huggingface.co/DeepFloyd/IF-I-XL-v1.0).
    Accepting the license on the stage I model card will auto accept for the other
    IF models.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[DeepFloyd/IF-I-XL-v1.0](https://huggingface.co/DeepFloyd/IF-I-XL-v1.0)模型卡上接受许可。在阶段I模型卡上接受许可将自动接受其他IF模型的许可。
- en: 'Make sure to login locally. Install `huggingface_hub`:'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保在本地登录。安装`huggingface_hub`：
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'run the login function in a Python shell:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在Python shell中运行登录函数：
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: and enter your [Hugging Face Hub access token](https://huggingface.co/docs/hub/security-tokens#what-are-user-access-tokens).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 并输入您的[Hugging Face Hub访问令牌](https://huggingface.co/docs/hub/security-tokens#what-are-user-access-tokens)。
- en: 'Next we install `diffusers` and dependencies:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来安装`diffusers`和依赖项：
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The following sections give more in-detail examples of how to use IF. Specifically:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分提供了更详细的IF使用示例。具体来说：
- en: '[Text-to-Image Generation](#text-to-image-generation)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本到图像生成
- en: '[Image-to-Image Generation](#text-guided-image-to-image-generation)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[图像到图像生成](#text-guided-image-to-image-generation)'
- en: '[Inpainting](#text-guided-inpainting-generation)'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[修复](#text-guided-inpainting-generation)'
- en: '[Reusing model weights](#converting-between-different-pipelines)'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[重用模型权重](#converting-between-different-pipelines)'
- en: '[Speed optimization](#optimizing-for-speed)'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[速度优化](#optimizing-for-speed)'
- en: '[Memory optimization](#optimizing-for-memory)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[内存优化](#optimizing-for-memory)'
- en: '**Available checkpoints**'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**可用的检查点**'
- en: '*Stage-1*'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*阶段-1*'
- en: '[DeepFloyd/IF-I-XL-v1.0](https://huggingface.co/DeepFloyd/IF-I-XL-v1.0)'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DeepFloyd/IF-I-XL-v1.0](https://huggingface.co/DeepFloyd/IF-I-XL-v1.0)'
- en: '[DeepFloyd/IF-I-L-v1.0](https://huggingface.co/DeepFloyd/IF-I-L-v1.0)'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DeepFloyd/IF-I-L-v1.0](https://huggingface.co/DeepFloyd/IF-I-L-v1.0)'
- en: '[DeepFloyd/IF-I-M-v1.0](https://huggingface.co/DeepFloyd/IF-I-M-v1.0)'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DeepFloyd/IF-I-M-v1.0](https://huggingface.co/DeepFloyd/IF-I-M-v1.0)'
- en: '*Stage-2*'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*阶段-2*'
- en: '[DeepFloyd/IF-II-L-v1.0](https://huggingface.co/DeepFloyd/IF-II-L-v1.0)'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DeepFloyd/IF-II-L-v1.0](https://huggingface.co/DeepFloyd/IF-II-L-v1.0)'
- en: '[DeepFloyd/IF-II-M-v1.0](https://huggingface.co/DeepFloyd/IF-II-M-v1.0)'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DeepFloyd/IF-II-M-v1.0](https://huggingface.co/DeepFloyd/IF-II-M-v1.0)'
- en: '*Stage-3*'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*阶段-3*'
- en: '[stabilityai/stable-diffusion-x4-upscaler](https://huggingface.co/stabilityai/stable-diffusion-x4-upscaler)'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[stabilityai/stable-diffusion-x4-upscaler](https://huggingface.co/stabilityai/stable-diffusion-x4-upscaler)'
- en: '**Google Colab** [![Open In Colab](../Images/7e2db436150c38a00650f96925aa5581.png)](https://colab.research.google.com/github/huggingface/notebooks/blob/main/diffusers/deepfloyd_if_free_tier_google_colab.ipynb)'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**Google Colab** [![在Colab中打开](../Images/7e2db436150c38a00650f96925aa5581.png)](https://colab.research.google.com/github/huggingface/notebooks/blob/main/diffusers/deepfloyd_if_free_tier_google_colab.ipynb)'
- en: Text-to-Image Generation
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文本到图像生成
- en: By default diffusers makes use of [model cpu offloading](../../optimization/memory#model-offloading)
    to run the whole IF pipeline with as little as 14 GB of VRAM.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，diffusers利用[model cpu offloading](../../optimization/memory#model-offloading)来运行整个IF管道，只需14GB的VRAM。
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Text Guided Image-to-Image Generation
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文本引导的图像到图像生成
- en: The same IF model weights can be used for text-guided image-to-image translation
    or image variation. In this case just make sure to load the weights using the
    [IFImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFImg2ImgPipeline)
    and [IFImg2ImgSuperResolutionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFImg2ImgSuperResolutionPipeline)
    pipelines.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 相同的IF模型权重可以用于文本引导的图像到图像翻译或图像变化。在这种情况下，请确保使用[IFImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFImg2ImgPipeline)和[IFImg2ImgSuperResolutionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFImg2ImgSuperResolutionPipeline)管道加载权重。
- en: '**Note**: You can also directly move the weights of the text-to-image pipelines
    to the image-to-image pipelines without loading them twice by making use of the
    [components](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline.components)
    argument as explained [here](#converting-between-different-pipelines).'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：您还可以通过使用[components](/docs/diffusers/v0.26.3/en/api/pipelines/overview#diffusers.DiffusionPipeline.components)参数直接将文本到图像管道的权重移动到图像到图像管道，而无需加载两次，如[此处](#converting-between-different-pipelines)所述。'
- en: '[PRE4]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Text Guided Inpainting Generation
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文本引导修补生成
- en: The same IF model weights can be used for text-guided image-to-image translation
    or image variation. In this case just make sure to load the weights using the
    [IFInpaintingPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFInpaintingPipeline)
    and [IFInpaintingSuperResolutionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFInpaintingSuperResolutionPipeline)
    pipelines.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 相同的IF模型权重可用于文本引导的图像到图像翻译或图像变化。在这种情况下，请确保使用[IFInpaintingPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFInpaintingPipeline)和[IFInpaintingSuperResolutionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/deepfloyd_if#diffusers.IFInpaintingSuperResolutionPipeline)管道加载权重。
- en: '**Note**: You can also directly move the weights of the text-to-image pipelines
    to the image-to-image pipelines without loading them twice by making use of the
    `~DiffusionPipeline.components()` function as explained [here](#converting-between-different-pipelines).'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：您还可以通过使用`~DiffusionPipeline.components()`函数将文本到图像管道的权重直接移至图像到图像管道，而无需加载两次，具体方法请参见[此处](#converting-between-different-pipelines)。'
- en: '[PRE5]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Converting between different pipelines
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在不同管道之间转换
- en: In addition to being loaded with `from_pretrained`, Pipelines can also be loaded
    directly from each other.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用`from_pretrained`加载外，管道还可以直接从彼此加载。
- en: '[PRE6]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Optimizing for speed
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 速度优化
- en: The simplest optimization to run IF faster is to move all model components to
    the GPU.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 使IF更快的最简单优化方法是将所有模型组件移至GPU。
- en: '[PRE7]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: You can also run the diffusion process for a shorter number of timesteps.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以将扩散过程运行更短的时间步数。
- en: 'This can either be done with the `num_inference_steps` argument:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以使用`num_inference_steps`参数完成：
- en: '[PRE8]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Or with the `timesteps` argument:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 要么使用`timesteps`参数：
- en: '[PRE9]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: When doing image variation or inpainting, you can also decrease the number of
    timesteps with the strength argument. The strength argument is the amount of noise
    to add to the input image which also determines how many steps to run in the denoising
    process. A smaller number will vary the image less but run faster.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行图像变化或修补时，您还可以通过强度参数减少时间步数。强度参数是要添加到输入图像中的噪声量，也决定了去噪过程中要运行多少步骤。较小的数字将使图像变化较小，但运行速度更快。
- en: '[PRE10]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: You can also use [`torch.compile`](../../optimization/torch2.0). Note that we
    have not exhaustively tested `torch.compile` with IF and it might not give expected
    results.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以使用[`torch.compile`](../../optimization/torch2.0)。请注意，我们尚未对`torch.compile`与IF进行全面测试，可能无法产生预期的结果。
- en: '[PRE11]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Optimizing for memory
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 内存优化
- en: When optimizing for GPU memory, we can use the standard diffusers CPU offloading
    APIs.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在优化GPU内存时，我们可以使用标准的扩散CPU卸载API。
- en: Either the model based CPU offloading,
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 要么基于模型的CPU卸载，
- en: '[PRE12]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: or the more aggressive layer based CPU offloading.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 或更激进的基于层的CPU卸载。
- en: '[PRE13]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Additionally, T5 can be loaded in 8bit precision
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，T5可以以8位精度加载
- en: '[PRE14]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: For CPU RAM constrained machines like Google Colab free tier where we can’t
    load all model components to the CPU at once, we can manually only load the pipeline
    with the text encoder or UNet when the respective model components are needed.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 对于CPU RAM受限的机器，如Google Colab免费层，我们无法一次性将所有模型组件加载到CPU中，因此在需要时可以手动仅加载具有文本编码器或UNet的管道。
- en: '[PRE15]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Available Pipelines:'
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可用管道：
- en: '| Pipeline | Tasks | Colab |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| 管道 | 任务 | Colab |'
- en: '| --- | --- | :-: |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | :-: |'
- en: '| [pipeline_if.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py)
    | *Text-to-Image Generation* | - |'
  id: totrans-76
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py)
    | *文本到图像生成* | - |'
- en: '| [pipeline_if_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py)
    | *Text-to-Image Generation* | - |'
  id: totrans-77
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py)
    | *文本到图像生成* | - |'
- en: '| [pipeline_if_img2img.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py)
    | *Image-to-Image Generation* | - |'
  id: totrans-78
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if_img2img.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py)
    | *图像到图像生成* | - |'
- en: '| [pipeline_if_img2img_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py)
    | *Image-to-Image Generation* | - |'
  id: totrans-79
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if_img2img_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py)
    | *图像到图像生成* | - |'
- en: '| [pipeline_if_inpainting.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py)
    | *Image-to-Image Generation* | - |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if_inpainting.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py)
    | *图像到图像生成* | - |'
- en: '| [pipeline_if_inpainting_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py)
    | *Image-to-Image Generation* | - |'
  id: totrans-81
  prefs: []
  type: TYPE_TB
  zh: '| [pipeline_if_inpainting_superresolution.py](https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py)
    | *图像到图像生成* | - |'
- en: IFPipeline
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFPipeline
- en: '### `class diffusers.IFPipeline`'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L88)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L88)'
- en: '[PRE16]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '#### `__call__`'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L555)'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L555)'
- en: '[PRE17]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Parameters
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt`（`str`或`List[str]`，*可选*）—用于指导图像生成的提示或提示。如果未定义，则必须传递`prompt_embeds`。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 100) — The number of
    denoising steps. More denoising steps usually lead to a higher quality image at
    the expense of slower inference.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps`（`int`，*可选*，默认为100）—去噪步骤的数量。更多的去噪步骤通常会导致更高质量的图像，但会降低推理速度。'
- en: '`timesteps` (`List[int]`, *optional*) — Custom timesteps to use for the denoising
    process. If not defined, equal spaced `num_inference_steps` timesteps are used.
    Must be in descending order.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *optional*) — 用于去噪过程的自定义时间步。如果未定义，将使用等间距的 `num_inference_steps`
    时间步。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 7.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *optional*, defaults to 7.0) — 在 [Classifier-Free
    Diffusion Guidance](https://arxiv.org/abs/2207.12598) 中定义的指导比例。`guidance_scale`
    定义为 [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf) 中方程式 2 的 `w`。通过设置 `guidance_scale
    > 1` 启用指导比例。更高的指导比例鼓励生成与文本 `prompt` 密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` or `List[str]`, *optional*) — 不指导图像生成的提示或提示。如果未定义，则必须传递
    `negative_prompt_embeds`。不使用指导时将被忽略（即如果 `guidance_scale` 小于 `1` 则被忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — 每个提示生成的图像数量。'
- en: '`height` (`int`, *optional*, defaults to self.unet.config.sample_size) — The
    height in pixels of the generated image.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`height` (`int`, *optional*, defaults to self.unet.config.sample_size) — 生成图像的像素高度。'
- en: '`width` (`int`, *optional*, defaults to self.unet.config.sample_size) — The
    width in pixels of the generated image.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`width` (`int`, *optional*, defaults to self.unet.config.sample_size) — 生成图像的像素宽度。'
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta` (`float`, *optional*, defaults to 0.0) — 对应于 DDIM 论文中的参数 eta (η)：[https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502)。仅适用于
    [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)，对其他情况将被忽略。'
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — 一个或多个
    [torch 生成器](https://pytorch.org/docs/stable/generated/torch.Generator.html)，用于使生成过程确定性。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `prompt` 输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `negative_prompt` 输入参数生成负提示嵌入。'
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_type` (`str`, *optional*, defaults to `"pil"`) — 生成图像的输出格式。选择 `PIL.Image.Image`
    或 `np.array` 之间的格式。'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *optional*, defaults to `True`) — 是否返回 `~pipelines.stable_diffusion.IFPipelineOutput`
    而不是普通元组。'
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback` (`Callable`, *optional*) — 在推理过程中每 `callback_steps` 步调用的函数。该函数将使用以下参数调用：`callback(step:
    int, timestep: int, latents: torch.FloatTensor)`。'
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback_steps` (`int`, *optional*, defaults to 1) — `callback` 函数将被调用的频率。如果未指定，将在每一步调用回调函数。'
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (`bool`, *optional*, defaults to `True`) — 在创建嵌入之前是否清理标题。需要安装
    `beautifulsoup4` 和 `ftfy`。如果未安装依赖项，将从原始提示创建嵌入。'
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *optional*) — 如果指定，将传递给 `AttentionProcessor`
    中的 `self.processor` 中定义的 kwargs 字典，详情请参阅 [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)。'
- en: Returns
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 返回
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput` 或 `tuple`'
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 `return_dict` 为 True，则返回 `~pipelines.stable_diffusion.IFPipelineOutput`，否则返回一个
    `tuple`。当返回一个元组时，第一个元素是生成的图像列表，第二个元素是一个列表，表示相应生成的图像是否可能代表“不适宜工作”（nsfw）或带水印的内容，根据
    `safety_checker`。
- en: Function invoked when calling the pipeline for generation.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 调用管道生成时调用的函数。
- en: 'Examples:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '示例:'
- en: '[PRE18]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '#### `encode_prompt`'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `encode_prompt`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L173)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if.py#L173)'
- en: '[PRE19]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Parameters
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *可选*) — 要编码的提示'
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_classifier_free_guidance` (`bool`, *可选*, 默认为 `True`) — 是否使用无分类器指导。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *可选*, 默认为 1) — 每个提示应生成的图像数量。设备 — (`torch.device`,
    *可选*): 放置生成的嵌入的 torch 设备'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *可选*) — 不指导图像生成的提示。如果未定义，则必须传递 `negative_prompt_embeds`。如果未定义，则必须传递
    `negative_prompt_embeds`。如果不使用指导（即如果 `guidance_scale` 小于 `1`，则忽略）。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `prompt` 输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `negative_prompt` 输入参数生成 `negative_prompt_embeds`。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (布尔值，默认为 `False`) — 如果为 `True`，则函数将在编码之前对提供的标题进行预处理和清理。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
- en: IFSuperResolutionPipeline
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFSuperResolutionPipeline
- en: '### `class diffusers.IFSuperResolutionPipeline`'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFSuperResolutionPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py#L73)'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py#L73)'
- en: '[PRE20]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '#### `__call__`'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py#L622)'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py#L622)'
- en: '[PRE21]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Parameters
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *可选*) — 指导图像生成的提示。如果未定义，则必须传递 `prompt_embeds`。'
- en: '`height` (`int`, *optional*, defaults to None) — The height in pixels of the
    generated image.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`height` (`int`, *可选*, 默认为 None) — 生成图像的像素高度。'
- en: '`width` (`int`, *optional*, defaults to None) — The width in pixels of the
    generated image.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`width` (`int`, *可选*, 默认为 None) — 生成图像的像素宽度。'
- en: '`image` (`PIL.Image.Image`, `np.ndarray`, `torch.FloatTensor`) — The image
    to be upscaled.'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image` (`PIL.Image.Image`, `np.ndarray`, `torch.FloatTensor`) — 要放大的图像。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 50) — The number of denoising
    steps. More denoising steps usually lead to a higher quality image at the expense
    of slower inference.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps` (`int`, *可选*, 默认为 50) — 降噪步骤的数量。更多的降噪步骤通常会导致更高质量的图像，但会降低推理速度。'
- en: '`timesteps` (`List[int]`, *optional*, defaults to None) — Custom timesteps
    to use for the denoising process. If not defined, equal spaced `num_inference_steps`
    timesteps are used. Must be in descending order.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *可选*, 默认为 None) — 用于去噪过程的自定义时间步。如果未定义，则使用等间距的 `num_inference_steps`
    时间步。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 4.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *可选*, 默认为 4.0) — 在[Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598)中定义的指导比例。`guidance_scale`
    在[Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf)的方程式 2 中定义为 `w`。通过设置 `guidance_scale
    > 1` 来启用指导比例。更高的指导比例鼓励生成与文本 `prompt` 密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *可选*) — 不指导图像生成的提示。如果未定义，则必须传递 `negative_prompt_embeds`。如果不使用指导（即如果
    `guidance_scale` 小于 `1`，则忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`noise_level` (`int`, *optional*, defaults to 250) — The amount of noise to
    add to the upscaled image. Must be in the range `[0, 1000)`'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Returns
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: Function invoked when calling the pipeline for generation.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: 'Examples:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '#### `encode_prompt`'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_superresolution.py#L307)'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  id: totrans-162
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: Parameters
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `prompt` 输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `negative_prompt` 输入参数生成 negative_prompt_embeds。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (bool, 默认为 `False`) — 如果为 `True`，函数将在编码之前预处理和清理提供的标题。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
- en: IFImg2ImgPipeline
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFImg2ImgPipeline
- en: '### `class diffusers.IFImg2ImgPipeline`'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFImg2ImgPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L112)'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L112)'
- en: '[PRE24]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '#### `__call__`'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L667)'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L667)'
- en: '[PRE25]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Parameters
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *optional*) — 用于引导图像生成的提示或提示。如果未定义，则必须传递 `prompt_embeds`。'
- en: '`image` (`torch.FloatTensor` or `PIL.Image.Image`) — `Image`, or tensor representing
    an image batch, that will be used as the starting point for the process.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image` (`torch.FloatTensor` 或 `PIL.Image.Image`) — 将用作过程起点的 `Image`，或表示图像批次的张量。'
- en: '`strength` (`float`, *optional*, defaults to 0.7) — Conceptually, indicates
    how much to transform the reference `image`. Must be between 0 and 1\. `image`
    will be used as a starting point, adding more noise to it the larger the `strength`.
    The number of denoising steps depends on the amount of noise initially added.
    When `strength` is 1, added noise will be maximum and the denoising process will
    run for the full number of iterations specified in `num_inference_steps`. A value
    of 1, therefore, essentially ignores `image`.'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`strength` (`float`, *optional*, 默认为0.7) — 在概念上，指示要转换参考 `image` 的程度。必须介于0和1之间。`image`
    将被用作起点，添加的噪声越大，`strength` 越大。去噪步骤的数量取决于最初添加的噪声量。当 `strength` 为1时，添加的噪声将达到最大值，并且去噪过程将运行指定的
    `num_inference_steps` 次迭代。因此，值为1基本上忽略了 `image`。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 80) — The number of denoising
    steps. More denoising steps usually lead to a higher quality image at the expense
    of slower inference.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps` (`int`, *optional*, 默认为80) — 去噪步骤的数量。更多的去噪步骤通常会导致更高质量的图像，但会降低推理速度。'
- en: '`timesteps` (`List[int]`, *optional*) — Custom timesteps to use for the denoising
    process. If not defined, equal spaced `num_inference_steps` timesteps are used.
    Must be in descending order.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *optional*) — 用于去噪过程的自定义时间步。如果未定义，则使用等间距的 `num_inference_steps`
    个时间步。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 10.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *optional*, 默认为10.0) — 在[无分类器扩散引导](https://arxiv.org/abs/2207.12598)中定义的引导比例。`guidance_scale`
    定义为[Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf)中方程式2中的 `w`。通过设置 `guidance_scale
    > 1` 来启用引导比例。更高的引导比例鼓励生成与文本 `prompt` 密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *optional*) — 不用于引导图像生成的提示或提示。如果未定义，则必须传递
    `negative_prompt_embeds`。如果不使用引导（即如果 `guidance_scale` 小于 `1`，则忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *optional*, 默认为1) — 每个提示生成的图像数量。'
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta` (`float`, *optional*, 默认为0.0) — 对应于DDIM论文中的参数 eta (η)：[https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502)。仅适用于[schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)，对其他情况将被忽略。'
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator` (`torch.Generator` 或 `List[torch.Generator]`, *optional*) — 一个或多个[torch生成器](https://pytorch.org/docs/stable/generated/torch.Generator.html)，使生成过程确定性。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从
    `prompt` 输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的负面文本嵌入。可以用来轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_type` (`str`, *optional*, 默认为`"pil"`) — 生成图像的输出格式。在[PIL](https://pillow.readthedocs.io/en/stable/)之间选择：`PIL.Image.Image`或`np.array`。'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *optional*, 默认为`True`) — 是否返回`~pipelines.stable_diffusion.IFPipelineOutput`而不是普通元组。'
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback` (`Callable`, *optional*) — 在推理过程中每`callback_steps`步调用的函数。该函数将使用以下参数调用：`callback(step:
    int, timestep: int, latents: torch.FloatTensor)`。'
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback_steps` (`int`, *optional*，默认为1) — 调用`callback`函数的频率。如果未指定，将在每一步调用回调函数。'
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (`bool`, *optional*, 默认为`True`) — 在创建嵌入之前是否清理标题。需要安装`beautifulsoup4`和`ftfy`。如果未安装依赖项，将从原始提示创建嵌入。'
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *optional*) — 如果指定，将传递给`AttentionProcessor`的kwargs字典，如在[diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)中定义。'
- en: Returns
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 返回
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput`或`tuple`'
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 如果`return_dict`为True，则为`~pipelines.stable_diffusion.IFPipelineOutput`，否则为元组。返回元组时，第一个元素是生成的图像列表，第二个元素是一个`bool`列表，表示相应生成的图像是否可能代表“不适宜工作”(nsfw)或带有水印的内容，根据`safety_checker`。
- en: Function invoked when calling the pipeline for generation.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在生成时调用管道时调用的函数。
- en: 'Examples:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE26]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '#### `encode_prompt`'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `encode_prompt`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L198)'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img.py#L198)'
- en: '[PRE27]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Parameters
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str`或`List[str]`, *optional*) — 要编码的提示'
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_classifier_free_guidance` (`bool`, *optional*, 默认为`True`) — 是否使用分类器自由指导'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *optional*, 默认为1) — 每个提示生成的图像数量。设备 — (`torch.device`,
    *optional*): 放置生成的嵌入的torch设备'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str`或`List[str]`, *optional*) — 不指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。而不是。如果未定义，则必须传递`negative_prompt_embeds`。而不是。在不使用指导时被忽略(即，如果`guidance_scale`小于`1`，则被忽略)。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的文本嵌入。可以用来轻松调整文本输入，例如提示加权。如果未提供，将从`prompt`输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的负面文本嵌入。可以用来轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (bool，默认为`False`) — 如果为`True`，则在编码之前对提供的标题进行预处理和清理。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
- en: IFImg2ImgSuperResolutionPipeline
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFImg2ImgSuperResolutionPipeline
- en: '### `class diffusers.IFImg2ImgSuperResolutionPipeline`'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFImg2ImgSuperResolutionPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L115)'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L115)'
- en: '[PRE28]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '#### `__call__`'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L750)'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L750)'
- en: '[PRE29]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: Parameters
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`image` (`torch.FloatTensor` or `PIL.Image.Image`) — `Image`, or tensor representing
    an image batch, that will be used as the starting point for the process.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image` (`torch.FloatTensor` 或 `PIL.Image.Image`) — 作为过程起点使用的`Image`或表示图像批次的张量。'
- en: '`original_image` (`torch.FloatTensor` or `PIL.Image.Image`) — The original
    image that `image` was varied from.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`original_image` (`torch.FloatTensor` 或 `PIL.Image.Image`) — `image`变化的原始图像。'
- en: '`strength` (`float`, *optional*, defaults to 0.8) — Conceptually, indicates
    how much to transform the reference `image`. Must be between 0 and 1\. `image`
    will be used as a starting point, adding more noise to it the larger the `strength`.
    The number of denoising steps depends on the amount of noise initially added.
    When `strength` is 1, added noise will be maximum and the denoising process will
    run for the full number of iterations specified in `num_inference_steps`. A value
    of 1, therefore, essentially ignores `image`.'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`strength` (`float`, *可选*, 默认为 0.8) — 在概念上，指示要转换参考`image`的程度。必须在0和1之间。`image`将被用作起点，添加更多的噪音，`strength`越大。去噪步数取决于最初添加的噪音量。当`strength`为1时，添加的噪音将达到最大，并且去噪过程将运行指定的`num_inference_steps`的全部迭代次数。因此，值为1基本上忽略了`image`。'
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *可选*) — 用于引导图像生成的提示。如果未定义，则必须传递`prompt_embeds`。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 50) — The number of denoising
    steps. More denoising steps usually lead to a higher quality image at the expense
    of slower inference.'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps` (`int`, *可选*, 默认为 50) — 去噪步数。更多的去噪步通常会导致图像质量更高，但推理速度较慢。'
- en: '`timesteps` (`List[int]`, *optional*) — Custom timesteps to use for the denoising
    process. If not defined, equal spaced `num_inference_steps` timesteps are used.
    Must be in descending order.'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *可选*) — 用于去噪过程的自定义时间步。如果未定义，则使用等间距的`num_inference_steps`时间步。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 4.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *可选*, 默认为 4.0) — 在[Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598)中定义的引导比例。`guidance_scale`被定义为[Imagen
    Paper](https://arxiv.org/pdf/2205.11487.pdf)中方程2的`w`。通过设置`guidance_scale > 1`启用引导比例。更高的引导比例鼓励生成与文本`prompt`密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *可选*) — 不用来引导图像生成的提示。如果未定义，则必须传递`negative_prompt_embeds`。在不使用引导时被忽略（即如果`guidance_scale`小于`1`，则被忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *可选*, 默认为 1) — 每个提示生成的图像数量。'
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta` (`float`, *可选*, 默认为 0.0) — 对应于DDIM论文中的参数eta（η）：[https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502)。仅适用于[schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)，对其他情况将被忽略。'
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator` (`torch.Generator` 或 `List[torch.Generator]`, *可选*) — 一个或多个[torch生成器](https://pytorch.org/docs/stable/generated/torch.Generator.html)，使生成过程确定性。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，文本嵌入将从`prompt`输入参数生成。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_type` (`str`, *可选*, 默认为`"pil"`) — 生成图像的输出格式。在[PIL](https://pillow.readthedocs.io/en/stable/)中选择：`PIL.Image.Image`或`np.array`。'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *可选*, 默认为`True`) — 是否返回`~pipelines.stable_diffusion.IFPipelineOutput`而不是普通元组。'
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback` (`Callable`, *可选*) — 在推理过程中每`callback_steps`步调用的函数。该函数将使用以下参数调用：`callback(step:
    int, timestep: int, latents: torch.FloatTensor)`。'
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback_steps` (`int`, *可选*, 默认为1) — `callback`函数将被调用的频率。如果未指定，将在每一步调用回调。'
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *可选*) — 如果指定，将传递给`AttentionProcessor`的kwargs字典，如在[diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)中的`self.processor`中定义。'
- en: '`noise_level` (`int`, *optional*, defaults to 250) — The amount of noise to
    add to the upscaled image. Must be in the range `[0, 1000)`'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`noise_level` (`int`, *可选*, 默认为250) — 添加到放大图像中的噪声量。必须在范围`[0, 1000)`内'
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (`bool`, *可选*, 默认为`True`) — 在创建嵌入之前是否清理标题。需要安装`beautifulsoup4`和`ftfy`。如果未安装依赖项，嵌入将从原始提示创建。'
- en: Returns
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 返回
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput` 或 `tuple`'
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput` 如果`return_dict`为True，否则为一个`tuple`。当返回一个元组时，第一个元素是生成的图像列表，第二个元素是一个`bool`列表，表示相应生成的图像是否可能代表“不安全的工作”（nsfw）或带水印的内容，根据`safety_checker`。'
- en: Function invoked when calling the pipeline for generation.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 调用生成管道时调用的函数。
- en: 'Examples:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE30]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '#### `encode_prompt`'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `encode_prompt`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L349)'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_img2img_superresolution.py#L349)'
- en: '[PRE31]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Parameters
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *可选*) — 要编码的提示'
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_classifier_free_guidance` (`bool`, *可选*, 默认为`True`) — 是否使用无分类器指导'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *可选*, 默认为1) — 每个提示应生成的图像数量 设备 — (`torch.device`,
    *可选*): 放置生成的嵌入的torch设备'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *可选*) — 不指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。而不是。当不使用指导时被忽略（即，如果`guidance_scale`小于`1`，则被忽略）。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，文本嵌入将从`prompt`输入参数生成。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的负面文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption` (bool, 默认为`False`) — 如果为`True`，则函数将在编码之前预处理和清理提供的标题。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
- en: IFInpaintingPipeline
  id: totrans-262
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFInpaintingPipeline
- en: '### `class diffusers.IFInpaintingPipeline`'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFInpaintingPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L115)'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L115)'
- en: '[PRE32]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '#### `__call__`'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L760)'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L760)'
- en: '[PRE33]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Parameters
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str` 或 `List[str]`, *可选*) — 用于指导图像生成的提示或提示。如果未定义，则必须传递`prompt_embeds`。而不是。'
- en: '`image` (`torch.FloatTensor` or `PIL.Image.Image`) — `Image`, or tensor representing
    an image batch, that will be used as the starting point for the process.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image` (`torch.FloatTensor` 或 `PIL.Image.Image`) — 用作过程起点的`Image`或表示图像批次的张量。'
- en: '`mask_image` (`PIL.Image.Image`) — `Image`, or tensor representing an image
    batch, to mask `image`. White pixels in the mask will be repainted, while black
    pixels will be preserved. If `mask_image` is a PIL image, it will be converted
    to a single channel (luminance) before use. If it’s a tensor, it should contain
    one color channel (L) instead of 3, so the expected shape would be `(B, H, W,
    1)`.'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mask_image` (`PIL.Image.Image`) — 用于遮罩`image`的`Image`或表示图像批次的张量。遮罩中的白色像素将被重新绘制，而黑色像素将被保留。如果`mask_image`是PIL图像，它将在使用之前转换为单通道（亮度）。如果是张量，则应包含一个颜色通道（L）而不是3，因此预期形状将是`(B,
    H, W, 1)`。'
- en: '`strength` (`float`, *optional*, defaults to 1.0) — Conceptually, indicates
    how much to transform the reference `image`. Must be between 0 and 1\. `image`
    will be used as a starting point, adding more noise to it the larger the `strength`.
    The number of denoising steps depends on the amount of noise initially added.
    When `strength` is 1, added noise will be maximum and the denoising process will
    run for the full number of iterations specified in `num_inference_steps`. A value
    of 1, therefore, essentially ignores `image`.'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`strength` (`float`, *可选*, 默认为1.0) — 在概念上，指示要转换参考`image`的程度。必须介于0和1之间。`image`将被用作起点，添加的噪声越大，`strength`越大。降噪步骤的数量取决于最初添加的噪声量。当`strength`为1时，添加的噪声将达到最大值，并且降噪过程将运行指定的`num_inference_steps`次迭代。因此，值为1基本上忽略了`image`。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 50) — The number of denoising
    steps. More denoising steps usually lead to a higher quality image at the expense
    of slower inference.'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps` (`int`, *可选*, 默认为50) — 降噪步骤的数量。更多的降噪步骤通常会导致图像质量更高，但推理速度较慢。'
- en: '`timesteps` (`List[int]`, *optional*) — Custom timesteps to use for the denoising
    process. If not defined, equal spaced `num_inference_steps` timesteps are used.
    Must be in descending order.'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *可选*) — 用于去噪过程的自定义时间步长。如果未定义，则使用等间距的`num_inference_steps`时间步长。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 7.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *可选*, 默认为7.0) — 在[Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598)中定义的指导比例。`guidance_scale`被定义为[Imagen
    Paper](https://arxiv.org/pdf/2205.11487.pdf)中方程式2的`w`。通过设置`guidance_scale > 1`启用指导比例。更高的指导比例鼓励生成与文本`prompt`密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str` 或 `List[str]`, *可选*) — 不用于指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。如果不使用指导（即，如果`guidance_scale`小于`1`，则将被忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *可选*, 默认为1) — 每个提示生成的图像数量。'
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta` (`float`, *可选*, 默认为0.0) — 对应于DDIM论文中的参数eta（η）：[https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502)。仅适用于[schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)，对其他情况将被忽略。'
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator` (`torch.Generator` 或 `List[torch.Generator]`, *可选*) — 一个或多个[torch生成器](https://pytorch.org/docs/stable/generated/torch.Generator.html)列表，用于使生成过程确定性。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如权重提示。如果未提供，文本嵌入将从`prompt`输入参数生成。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *可选*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如权重提示。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_type` (`str`, *可选*, 默认为`"pil"`) — 生成图像的输出格式。可选择[PIL](https://pillow.readthedocs.io/en/stable/)：`PIL.Image.Image`
    或 `np.array`。'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *可选*, 默认为`True`) — 是否返回`~pipelines.stable_diffusion.IFPipelineOutput`而不是普通元组。'
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback` (`Callable`, *可选*) — 推理过程中每`callback_steps`步调用的函数。该函数将使用以下参数调用：`callback(step:
    int, timestep: int, latents: torch.FloatTensor)`。'
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback_steps` (`int`, *可选*, 默认为1) — `callback`函数将被调用的频率。如果未指定，将在每一步调用回调。'
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption`（`bool`，*可选*，默认为`True`）- 在创建嵌入之前是否清理标题。需要安装`beautifulsoup4`和`ftfy`。如果未安装依赖项，将从原始提示创建嵌入。'
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs`（`dict`，*可选*）- 如果指定，将传递给`AttentionProcessor`的kwargs字典，如在[diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)中的`self.processor`中定义。'
- en: Returns
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 返回
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput`或`tuple`'
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput`如果`return_dict`为`True`，否则为`tuple`。当返回一个元组时，第一个元素是生成的图像列表，第二个元素是一个`bool`列表，表示相应生成的图像是否可能代表“不适宜工作”（nsfw）或带水印的内容，根据`safety_checker`。'
- en: Function invoked when calling the pipeline for generation.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 调用生成管道时调用的函数。
- en: 'Examples:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE34]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: '#### `encode_prompt`'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `encode_prompt`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L201)'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting.py#L201)'
- en: '[PRE35]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: Parameters
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-299
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt`（`str`或`List[str]`，*可选*）- 要编码的提示'
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_classifier_free_guidance`（`bool`，*可选*，默认为`True`）- 是否使用分类器自由指导'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt`（`int`，*可选*，默认为1）- 每个提示生成的图像数量设备-（`torch.device`，*可选*）：将生成的嵌入放置在的torch设备'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt`（`str`或`List[str]`，*可选*）- 不指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。而不是。如果未定义，则必须传递`negative_prompt_embeds`。而不是。在不使用指导时被忽略（即，如果`guidance_scale`小于`1`，则被忽略）。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-303
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds`（`torch.FloatTensor`，*可选*）- 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，文本嵌入将从`prompt`输入参数生成。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-304
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds`（`torch.FloatTensor`，*可选*）- 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成negative_prompt_embeds。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption`（布尔值，默认为`False`）- 如果为`True`，则函数将在编码之前对提供的标题进行预处理和清理。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
- en: IFInpaintingSuperResolutionPipeline
  id: totrans-307
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: IFInpaintingSuperResolutionPipeline
- en: '### `class diffusers.IFInpaintingSuperResolutionPipeline`'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.IFInpaintingSuperResolutionPipeline`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L117)'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L117)'
- en: '[PRE36]'
  id: totrans-310
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '#### `__call__`'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `__call__`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L838)'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L838)'
- en: '[PRE37]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: Parameters
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`image` (`torch.FloatTensor` or `PIL.Image.Image`) — `Image`, or tensor representing
    an image batch, that will be used as the starting point for the process.'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image`（`torch.FloatTensor`或`PIL.Image.Image`）- 将用作过程的起点的`Image`或表示图像批次的张量。'
- en: '`original_image` (`torch.FloatTensor` or `PIL.Image.Image`) — The original
    image that `image` was varied from.'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`original_image`（`torch.FloatTensor`或`PIL.Image.Image`）- `image`变化的原始图像。'
- en: '`mask_image` (`PIL.Image.Image`) — `Image`, or tensor representing an image
    batch, to mask `image`. White pixels in the mask will be repainted, while black
    pixels will be preserved. If `mask_image` is a PIL image, it will be converted
    to a single channel (luminance) before use. If it’s a tensor, it should contain
    one color channel (L) instead of 3, so the expected shape would be `(B, H, W,
    1)`.'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`mask_image`（`PIL.Image.Image`）- 要遮罩`image`的`Image`或表示图像批次的张量。掩码中的白色像素将被重新绘制，而黑色像素将被保留。如果`mask_image`是PIL图像，则在使用之前将其转换为单通道（亮度）。如果是张量，则应包含一个颜色通道（L）而不是3，因此预期形状将是`(B,
    H, W, 1)`。'
- en: '`strength` (`float`, *optional*, defaults to 0.8) — Conceptually, indicates
    how much to transform the reference `image`. Must be between 0 and 1\. `image`
    will be used as a starting point, adding more noise to it the larger the `strength`.
    The number of denoising steps depends on the amount of noise initially added.
    When `strength` is 1, added noise will be maximum and the denoising process will
    run for the full number of iterations specified in `num_inference_steps`. A value
    of 1, therefore, essentially ignores `image`.'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`strength` (`float`, *optional*, defaults to 0.8) — 概念上，指示了要如何转换参考`image`的程度。必须在0和1之间。`image`将被用作起点，随着`strength`的增加，将会向其添加更多噪音。去噪步骤的数量取决于最初添加的噪音量。当`strength`为1时，添加的噪音将达到最大值，并且去噪过程将在`num_inference_steps`中指定的迭代次数内运行。因此，值为1基本上忽略了`image`。'
- en: '`prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts to guide
    the image generation. If not defined, one has to pass `prompt_embeds`. instead.'
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt` (`str`或`List[str]`, *optional*) — 指导图像生成的提示或提示。如果未定义，则必须传递`prompt_embeds`。'
- en: '`num_inference_steps` (`int`, *optional*, defaults to 100) — The number of
    denoising steps. More denoising steps usually lead to a higher quality image at
    the expense of slower inference.'
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps` (`int`, *optional*, defaults to 100) — 去噪步骤的数量。更多的去噪步骤通常会导致更高质量的图像，但会降低推理速度。'
- en: '`timesteps` (`List[int]`, *optional*) — Custom timesteps to use for the denoising
    process. If not defined, equal spaced `num_inference_steps` timesteps are used.
    Must be in descending order.'
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timesteps` (`List[int]`, *optional*) — 用于去噪过程的自定义时间步。如果未定义，则使用等间距的`num_inference_steps`时间步。必须按降序排列。'
- en: '`guidance_scale` (`float`, *optional*, defaults to 4.0) — Guidance scale as
    defined in [Classifier-Free Diffusion Guidance](https://arxiv.org/abs/2207.12598).
    `guidance_scale` is defined as `w` of equation 2\. of [Imagen Paper](https://arxiv.org/pdf/2205.11487.pdf).
    Guidance scale is enabled by setting `guidance_scale > 1`. Higher guidance scale
    encourages to generate images that are closely linked to the text `prompt`, usually
    at the expense of lower image quality.'
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`guidance_scale` (`float`, *optional*, defaults to 4.0) — 在[无分类器扩散引导](https://arxiv.org/abs/2207.12598)中定义的引导比例。`guidance_scale`被定义为[Imagen
    Paper](https://arxiv.org/pdf/2205.11487.pdf)中方程式2的`w`。通过设置`guidance_scale > 1`来启用引导比例。更高的引导比例鼓励生成与文本`prompt`密切相关的图像，通常以降低图像质量为代价。'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`
    instead. Ignored when not using guidance (i.e., ignored if `guidance_scale` is
    less than `1`).'
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt` (`str`或`List[str]`, *optional*) — 不指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。如果不使用引导（即，如果`guidance_scale`小于`1`，则将被忽略）。'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — The number of
    images to generate per prompt.'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — 每个提示生成的图像数量。'
- en: '`eta` (`float`, *optional*, defaults to 0.0) — Corresponds to parameter eta
    (η) in the DDIM paper: [https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502).
    Only applies to [schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler),
    will be ignored for others.'
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta` (`float`, *optional*, defaults to 0.0) — 对应于DDIM论文中的参数eta (η)：[https://arxiv.org/abs/2010.02502](https://arxiv.org/abs/2010.02502)。仅适用于[schedulers.DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)，对其他情况将被忽略。'
- en: '`generator` (`torch.Generator` or `List[torch.Generator]`, *optional*) — One
    or a list of [torch generator(s)](https://pytorch.org/docs/stable/generated/torch.Generator.html)
    to make generation deterministic.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator` (`torch.Generator`或`List[torch.Generator]`, *optional*) — 一个或多个[torch生成器](https://pytorch.org/docs/stable/generated/torch.Generator.html)，用于使生成过程确定性。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从`prompt`输入参数生成文本嵌入。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — 预生成的负文本嵌入。可用于轻松调整文本输入，例如提示加权。如果未提供，将从`negative_prompt`输入参数生成负提示嵌入。'
- en: '`output_type` (`str`, *optional*, defaults to `"pil"`) — The output format
    of the generate image. Choose between [PIL](https://pillow.readthedocs.io/en/stable/):
    `PIL.Image.Image` or `np.array`.'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`output_type` (`str`, *optional*, defaults to `"pil"`) — 生成图像的输出格式。选择[PIL](https://pillow.readthedocs.io/en/stable/)之间的：`PIL.Image.Image`或`np.array`。'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) — Whether or not to
    return a `~pipelines.stable_diffusion.IFPipelineOutput` instead of a plain tuple.'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`, *optional*, defaults to `True`) — 是否返回`~pipelines.stable_diffusion.IFPipelineOutput`而不是普通元组。'
- en: '`callback` (`Callable`, *optional*) — A function that will be called every
    `callback_steps` steps during inference. The function will be called with the
    following arguments: `callback(step: int, timestep: int, latents: torch.FloatTensor)`.'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback` (`Callable`, *optional*) — 一个在推理过程中每`callback_steps`步调用的函数。该函数将使用以下参数调用：`callback(step:
    int, timestep: int, latents: torch.FloatTensor)`。'
- en: '`callback_steps` (`int`, *optional*, defaults to 1) — The frequency at which
    the `callback` function will be called. If not specified, the callback will be
    called at every step.'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`callback_steps` (`int`, *optional*, defaults to 1) — `callback`函数将被调用的频率。如果未指定，将在每一步调用回调。'
- en: '`cross_attention_kwargs` (`dict`, *optional*) — A kwargs dictionary that if
    specified is passed along to the `AttentionProcessor` as defined under `self.processor`
    in [diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py).'
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cross_attention_kwargs` (`dict`, *optional*) — 如果指定，将传递给`AttentionProcessor`的kwargs字典，如[diffusers.models.attention_processor](https://github.com/huggingface/diffusers/blob/main/src/diffusers/models/attention_processor.py)中的`self.processor`中定义的那样。'
- en: '`noise_level` (`int`, *optional*, defaults to 0) — The amount of noise to add
    to the upscaled image. Must be in the range `[0, 1000)`'
  id: totrans-334
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`noise_level`（`int`，*可选*，默认为0）— 添加到放大图像的噪声量。必须在范围`[0, 1000)`内'
- en: '`clean_caption` (`bool`, *optional*, defaults to `True`) — Whether or not to
    clean the caption before creating embeddings. Requires `beautifulsoup4` and `ftfy`
    to be installed. If the dependencies are not installed, the embeddings will be
    created from the raw prompt.'
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption`（`bool`，*可选*，默认为`True`）— 在创建嵌入之前是否清除标题。需要安装`beautifulsoup4`和`ftfy`。如果未安装依赖项，则将从原始提示创建嵌入。'
- en: Returns
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 返回
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` or `tuple`'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput`或`tuple`'
- en: '`~pipelines.stable_diffusion.IFPipelineOutput` if `return_dict` is True, otherwise
    a `tuple. When returning a tuple, the first element is a list with the generated
    images, and the second element is a list of` bool`s denoting whether the corresponding
    generated image likely represents "not-safe-for-work" (nsfw) or watermarked content,
    according to the` safety_checker`.'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: '`~pipelines.stable_diffusion.IFPipelineOutput`如果`return_dict`为True，否则为`tuple`。当返回一个元组时，第一个元素是生成的图像列表，第二个元素是一个`bool`列表，表示相应生成的图像是否可能代表“不适宜工作”（nsfw）或带有水印的内容，根据`safety_checker`。'
- en: Function invoked when calling the pipeline for generation.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 调用管道生成时调用的函数。
- en: 'Examples:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE38]'
  id: totrans-341
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '#### `encode_prompt`'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `encode_prompt`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L351)'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/pipelines/deepfloyd_if/pipeline_if_inpainting_superresolution.py#L351)'
- en: '[PRE39]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Parameters
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`prompt` (`str` or `List[str]`, *optional*) — prompt to be encoded'
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt`（`str`或`List[str]`，*可选*）— 要编码的提示'
- en: '`do_classifier_free_guidance` (`bool`, *optional*, defaults to `True`) — whether
    to use classifier free guidance or not'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`do_classifier_free_guidance`（`bool`，*可选*，默认为`True`）— 是否使用分类器自由指导'
- en: '`num_images_per_prompt` (`int`, *optional*, defaults to 1) — number of images
    that should be generated per prompt device — (`torch.device`, *optional*): torch
    device to place the resulting embeddings on'
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_images_per_prompt`（`int`，*可选*，默认为1）— 每个提示生成的图像数量设备 —（`torch.device`，*可选*）：将生成的嵌入放置在的torch设备上'
- en: '`negative_prompt` (`str` or `List[str]`, *optional*) — The prompt or prompts
    not to guide the image generation. If not defined, one has to pass `negative_prompt_embeds`.
    instead. If not defined, one has to pass `negative_prompt_embeds`. instead. Ignored
    when not using guidance (i.e., ignored if `guidance_scale` is less than `1`).'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt`（`str`或`List[str]`，*可选*）— 不指导图像生成的提示或提示。如果未定义，则必须传递`negative_prompt_embeds`。而不是。当不使用指导时被忽略（即，如果`guidance_scale`小于`1`，则被忽略）。'
- en: '`prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated text embeddings.
    Can be used to easily tweak text inputs, *e.g.* prompt weighting. If not provided,
    text embeddings will be generated from `prompt` input argument.'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_embeds`（`torch.FloatTensor`，*可选*）— 预生成的文本嵌入。可用于轻松调整文本输入，*例如*提示加权。如果未提供，文本嵌入将从`prompt`输入参数生成。'
- en: '`negative_prompt_embeds` (`torch.FloatTensor`, *optional*) — Pre-generated
    negative text embeddings. Can be used to easily tweak text inputs, *e.g.* prompt
    weighting. If not provided, negative_prompt_embeds will be generated from `negative_prompt`
    input argument.'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`negative_prompt_embeds`（`torch.FloatTensor`，*可选*）— 预生成的负文本嵌入。可用于轻松调整文本输入，*例如*提示加权。如果未提供，将从`negative_prompt`输入参数生成`negative_prompt_embeds`。'
- en: '`clean_caption` (bool, defaults to `False`) — If `True`, the function will
    preprocess and clean the provided caption before encoding.'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clean_caption`（布尔值，默认为`False`）— 如果为`True`，则函数将在编码之前对提供的标题进行预处理和清理。'
- en: Encodes the prompt into text encoder hidden states.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 将提示编码为文本编码器隐藏状态。
