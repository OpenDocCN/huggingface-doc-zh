# æ„å»ºæ‚¨çš„å­˜å‚¨åº“

> åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/datasets/repository_structure](https://huggingface.co/docs/datasets/repository_structure)

è¦æ‰˜ç®¡å’Œå…±äº«æ‚¨çš„æ•°æ®é›†ï¼Œè¯·åœ¨Hugging Face Hubä¸Šåˆ›å»ºä¸€ä¸ªæ•°æ®é›†å­˜å‚¨åº“å¹¶ä¸Šä¼ æ‚¨çš„æ•°æ®æ–‡ä»¶ã€‚

æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨ä¸Šä¼ æ—¶æ„å»ºæ•°æ®é›†å­˜å‚¨åº“ã€‚å…·æœ‰æ”¯æŒçš„ç»“æ„å’Œæ–‡ä»¶æ ¼å¼ï¼ˆ`.txt`ã€`.csv`ã€`.parquet`ã€`.jsonl`ã€`.mp3`ã€`.jpg`ã€`.zip`ç­‰ï¼‰çš„æ•°æ®é›†å°†è‡ªåŠ¨åŠ è½½ï¼Œå¹¶ä¸”åœ¨Hubä¸Šçš„æ•°æ®é›†é¡µé¢ä¸Šå°†æœ‰ä¸€ä¸ªæ•°æ®é›†æŸ¥çœ‹å™¨ã€‚

## ä¸»è¦ç”¨ä¾‹

æœ€ç®€å•çš„æ•°æ®é›†ç»“æ„æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼š`train.csv`å’Œ`test.csv`ï¼ˆè¿™é€‚ç”¨äºä»»ä½•æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼‰ã€‚

æ‚¨çš„å­˜å‚¨åº“è¿˜å°†åŒ…å«ä¸€ä¸ª`README.md`æ–‡ä»¶ï¼Œæ˜¾ç¤ºåœ¨æ•°æ®é›†é¡µé¢ä¸Šçš„[æ•°æ®é›†å¡ç‰‡](dataset_card)ã€‚

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â”œâ”€â”€ train.csv
â””â”€â”€ test.csv
```

åœ¨è¿™ç§ç®€å•æƒ…å†µä¸‹ï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªåŒ…å«`train.csv`ä¸­ç¤ºä¾‹çš„`train`æ‹†åˆ†å’Œä¸€ä¸ªåŒ…å«`test.csv`ä¸­ç¤ºä¾‹çš„`test`æ‹†åˆ†çš„æ•°æ®é›†ã€‚

## åœ¨YAMLä¸­å®šä¹‰æ‚¨çš„æ‹†åˆ†å’Œå­é›†

## æ‹†åˆ†

å¦‚æœæ‚¨æœ‰å¤šä¸ªæ–‡ä»¶å¹¶ä¸”æƒ³è¦å®šä¹‰å“ªä¸ªæ–‡ä»¶æ”¾å…¥å“ªä¸ªæ‹†åˆ†ï¼Œå¯ä»¥åœ¨README.mdé¡¶éƒ¨ä½¿ç”¨YAMLçš„`configs`å­—æ®µã€‚

ä¾‹å¦‚ï¼Œç»™å®šè¿™æ ·ä¸€ä¸ªå­˜å‚¨åº“ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â”œâ”€â”€ data.csv
â””â”€â”€ holdout.csv
```

æ‚¨å¯ä»¥é€šè¿‡åœ¨README.mdé¡¶éƒ¨çš„YAMLå—ä¸­æ·»åŠ `configs`å­—æ®µæ¥å®šä¹‰æ‚¨çš„æ‹†åˆ†ï¼š

```py
---
configs:
- config_name: default
  data_files:
  - split: train
    path: "data.csv"
  - split: test
    path: "holdout.csv"
---
```

æ‚¨å¯ä»¥ä½¿ç”¨è·¯å¾„åˆ—è¡¨é€‰æ‹©æ¯ä¸ªæ‹†åˆ†çš„å¤šä¸ªæ–‡ä»¶ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ abc.csv
â”‚   â””â”€â”€ def.csv
â””â”€â”€ holdout/
    â””â”€â”€ ghi.csv
```

```py
---
configs:
- config_name: default
  data_files:
  - split: train
    path:
    - "data/abc.csv"
    - "data/def.csv"
  - split: test
    path: "holdout/ghi.csv"
---
```

æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æ¨¡å¼è‡ªåŠ¨åˆ—å‡ºæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼š

```py
---
configs:
- config_name: default
  data_files:
  - split: train
    path: "data/*.csv"
  - split: test
    path: "holdout/*.csv"
---
```

è¯·æ³¨æ„ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªé…ç½®ï¼Œ`config_name`å­—æ®µä¹Ÿæ˜¯å¿…éœ€çš„ã€‚

## é…ç½®

æ‚¨çš„æ•°æ®é›†å¯èƒ½æœ‰å‡ ä¸ªæ‚¨å¸Œæœ›èƒ½å¤Ÿå•ç‹¬åŠ è½½çš„æ•°æ®å­é›†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åœ¨YAMLçš„`configs`å­—æ®µä¸­å®šä¹‰ä¸€ä¸ªé…ç½®åˆ—è¡¨ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â”œâ”€â”€ main_data.csv
â””â”€â”€ additional_data.csv
```

```py
---
configs:
- config_name: main_data
  data_files: "main_data.csv"
- config_name: additional_data
  data_files: "additional_data.csv"
---
```

æ¯ä¸ªé…ç½®éƒ½å•ç‹¬æ˜¾ç¤ºåœ¨Hugging Face Hubä¸Šï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å°†å…¶åç§°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’æ¥åŠ è½½ï¼š

```py
from datasets import load_dataset

main_data = load_dataset("my_dataset_repository", "main_data")
additional_data = load_dataset("my_dataset_repository", "additional_data")
```

## æ„å»ºå™¨å‚æ•°

ä¸ä»…å¯ä»¥é€šè¿‡YAMLä¼ é€’`data_files`ï¼Œè¿˜å¯ä»¥é€šè¿‡YAMLä¼ é€’å…¶ä»–ç‰¹å®šäºæ„å»ºå™¨çš„å‚æ•°ï¼Œä»è€Œåœ¨åŠ è½½æ•°æ®æ—¶æä¾›æ›´å¤šçµæ´»æ€§è€Œä¸éœ€è¦ä»»ä½•è‡ªå®šä¹‰ä»£ç ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰åœ¨å“ªä¸ªé…ç½®ä¸­ä½¿ç”¨å“ªä¸ªåˆ†éš”ç¬¦åŠ è½½æ‚¨çš„`csv`æ–‡ä»¶ï¼š

```py
---
configs:
- config_name: tab
  data_files: "main_data.csv"
  sep: "\t"
- config_name: comma
  data_files: "additional_data.csv"
  sep: ","
---
```

å‚è€ƒ[ç‰¹å®šæ„å»ºå™¨æ–‡æ¡£](./package_reference/builder_classes)ä»¥æŸ¥çœ‹å®ƒä»¬å…·æœ‰å“ªäº›é…ç½®å‚æ•°ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨`default: true`æ¥è®¾ç½®é»˜è®¤é…ç½®ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è®¾ç½®äº†ï¼Œæ‚¨å¯ä»¥è¿è¡Œ`main_data = load_dataset("my_dataset_repository")`

```py
- config_name: main_data
  data_files: "main_data.csv"
  default: true
```

## è‡ªåŠ¨æ‹†åˆ†æ£€æµ‹

å¦‚æœæ²¡æœ‰æä¾›YAMLï¼ŒğŸ¤— æ•°æ®é›†å°†æœç´¢æ•°æ®é›†å­˜å‚¨åº“ä¸­çš„æŸäº›æ¨¡å¼ï¼Œä»¥è‡ªåŠ¨æ¨æ–­æ•°æ®é›†æ‹†åˆ†ã€‚è¿™äº›æ¨¡å¼æœ‰ä¸€å®šçš„é¡ºåºï¼Œä»è‡ªå®šä¹‰æ–‡ä»¶åæ‹†åˆ†æ ¼å¼å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä»»ä½•æ¨¡å¼ï¼Œåˆ™å°†æ‰€æœ‰æ–‡ä»¶è§†ä¸ºå•ä¸ªæ‹†åˆ†ã€‚

### ç›®å½•åç§°

æ‚¨çš„æ•°æ®æ–‡ä»¶ä¹Ÿå¯ä»¥æ”¾ç½®åœ¨åä¸º`train`ã€`test`å’Œ`validation`çš„ä¸åŒç›®å½•ä¸­ï¼Œæ¯ä¸ªç›®å½•åŒ…å«è¯¥æ‹†åˆ†çš„æ•°æ®æ–‡ä»¶ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ train/
    â”‚   â””â”€â”€ bees.csv
    â”œâ”€â”€ test/
    â”‚   â””â”€â”€ more_bees.csv
    â””â”€â”€ validation/
        â””â”€â”€ even_more_bees.csv
```

### æ–‡ä»¶åæ‹†åˆ†

å¦‚æœæ‚¨æ²¡æœ‰ä»»ä½•éä¼ ç»Ÿæ‹†åˆ†ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°†æ‹†åˆ†åç§°æ”¾åœ¨æ•°æ®æ–‡ä»¶çš„ä»»ä½•ä½ç½®ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ¨æ–­ã€‚å”¯ä¸€çš„è§„åˆ™æ˜¯æ‹†åˆ†åç§°å¿…é¡»ç”±éå•è¯å­—ç¬¦åˆ†éš”ï¼Œä¾‹å¦‚ï¼Œ`test-file.csv`è€Œä¸æ˜¯`testfile.csv`ã€‚æ”¯æŒçš„åˆ†éš”ç¬¦åŒ…æ‹¬ä¸‹åˆ’çº¿ã€ç ´æŠ˜å·ã€ç©ºæ ¼ã€ç‚¹å’Œæ•°å­—ã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹æ–‡ä»¶åéƒ½æ˜¯å¯æ¥å—çš„ï¼š

+   è®­ç»ƒæ‹†åˆ†ï¼š`train.csv`ã€`my_train_file.csv`ã€`train1.csv`

+   éªŒè¯æ‹†åˆ†ï¼š`validation.csv`ã€`my_validation_file.csv`ã€`validation1.csv`

+   æµ‹è¯•æ‹†åˆ†ï¼š`test.csv`ã€`my_test_file.csv`ã€`test1.csv`

è¿™æ˜¯ä¸€ä¸ªæ‰€æœ‰æ–‡ä»¶éƒ½æ”¾ç½®åœ¨åä¸º`data`çš„ç›®å½•ä¸­çš„ç¤ºä¾‹ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ train.csv
    â”œâ”€â”€ test.csv
    â””â”€â”€ validation.csv
```

### è‡ªå®šä¹‰æ–‡ä»¶åæ‹†åˆ†

å¦‚æœæ‚¨çš„æ•°æ®é›†æ‹†åˆ†å…·æœ‰é`train`ã€`test`æˆ–`validation`çš„è‡ªå®šä¹‰åç§°ï¼Œåˆ™å¯ä»¥å°†æ•°æ®æ–‡ä»¶å‘½åä¸º`data/<split_name>-xxxxx-of-xxxxx.csv`ã€‚

è¿™æ˜¯ä¸€ä¸ªå…·æœ‰ä¸‰ä¸ªæ‹†åˆ†`train`ã€`test`å’Œ`random`çš„ç¤ºä¾‹ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ train-00000-of-00003.csv
    â”œâ”€â”€ train-00001-of-00003.csv
    â”œâ”€â”€ train-00002-of-00003.csv
    â”œâ”€â”€ test-00000-of-00001.csv
    â”œâ”€â”€ random-00000-of-00003.csv
    â”œâ”€â”€ random-00001-of-00003.csv
    â””â”€â”€ random-00002-of-00003.csv
```

### å•ä¸ªæ‹†åˆ†

å½“ğŸ¤—æ•°æ®é›†æ‰¾ä¸åˆ°ä»¥ä¸Šä»»ä½•æ¨¡å¼æ—¶ï¼Œå®ƒå°†æŠŠæ‰€æœ‰æ–‡ä»¶è§†ä¸ºå•ä¸ªè®­ç»ƒæ‹†åˆ†ã€‚å¦‚æœæ‚¨çš„æ•°æ®é›†æ‹†åˆ†åŠ è½½ä¸ç¬¦åˆé¢„æœŸï¼Œå¯èƒ½æ˜¯ç”±äºä¸æ­£ç¡®çš„æ¨¡å¼ã€‚

### æ‹†åˆ†åç§°å…³é”®å­—

æœ‰å‡ ç§å‘½åæ‹†åˆ†çš„æ–¹æ³•ã€‚éªŒè¯æ‹†åˆ†æœ‰æ—¶ç§°ä¸ºâ€œdevâ€ï¼Œæµ‹è¯•æ‹†åˆ†å¯èƒ½è¢«ç§°ä¸ºâ€œevalâ€ã€‚è¿™äº›å…¶ä»–æ‹†åˆ†åç§°ä¹Ÿå—æ”¯æŒï¼Œä»¥ä¸‹å…³é”®å­—æ˜¯ç­‰æ•ˆçš„ï¼š

+   trainï¼Œtraining

+   éªŒè¯ï¼Œæœ‰æ•ˆï¼Œvalï¼Œdev

+   æµ‹è¯•ï¼Œæµ‹è¯•ï¼Œè¯„ä¼°ï¼Œè¯„ä¼°

ä»¥ä¸‹ç»“æ„æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å­˜å‚¨åº“ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ training.csv
    â”œâ”€â”€ eval.csv
    â””â”€â”€ valid.csv
```

### æ¯ä¸ªæ‹†åˆ†å¤šä¸ªæ–‡ä»¶

å¦‚æœæ‚¨çš„æŸä¸ªæ‹†åˆ†åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼ŒğŸ¤—æ•°æ®é›†ä»ç„¶å¯ä»¥æ¨æ–­å‡ºå®ƒæ˜¯æ¥è‡ªæ–‡ä»¶åçš„è®­ç»ƒï¼ŒéªŒè¯å’Œæµ‹è¯•æ‹†åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„è®­ç»ƒå’Œæµ‹è¯•æ‹†åˆ†è·¨è¶Šå¤šä¸ªæ–‡ä»¶ï¼š

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â”œâ”€â”€ train_0.csv
â”œâ”€â”€ train_1.csv
â”œâ”€â”€ train_2.csv
â”œâ”€â”€ train_3.csv
â”œâ”€â”€ test_0.csv
â””â”€â”€ test_1.csv
```

ç¡®ä¿æ‚¨çš„`train`é›†çš„æ‰€æœ‰æ–‡ä»¶åç§°ä¸­éƒ½æœ‰*train*ï¼ˆæµ‹è¯•å’ŒéªŒè¯ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚å³ä½¿æ‚¨åœ¨æ–‡ä»¶åä¸­æ·»åŠ äº†å‰ç¼€æˆ–åç¼€ä»¥`train`ï¼ˆä¾‹å¦‚`my_train_file_00001.csv`ï¼‰ï¼ŒğŸ¤—æ•°æ®é›†ä»ç„¶å¯ä»¥æ¨æ–­å‡ºé€‚å½“çš„æ‹†åˆ†ã€‚

ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæ‚¨è¿˜å¯ä»¥å°†æ•°æ®æ–‡ä»¶æ”¾å…¥ä¸åŒçš„ç›®å½•ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‹†åˆ†åç§°æ˜¯ä»ç›®å½•åç§°æ¨æ–­å‡ºæ¥çš„ã€‚

```py
my_dataset_repository/
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ train/
    â”‚   â”œâ”€â”€ shard_0.csv
    â”‚   â”œâ”€â”€ shard_1.csv
    â”‚   â”œâ”€â”€ shard_2.csv
    â”‚   â””â”€â”€ shard_3.csv
    â””â”€â”€ test/
        â”œâ”€â”€ shard_0.csv
        â””â”€â”€ shard_1.csv
```

ä¸ºäº†æ›´çµæ´»åœ°åŠ è½½å’Œç”Ÿæˆæ•°æ®é›†ï¼Œæ‚¨è¿˜å¯ä»¥ç¼–å†™ä¸€ä¸ª[æ•°æ®é›†åŠ è½½è„šæœ¬]ï¼ˆ./dataset_scriptï¼‰ã€‚
