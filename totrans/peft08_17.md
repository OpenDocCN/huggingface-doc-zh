# æ··åˆé€‚é…å™¨ç±»å‹

> åŸæ–‡é“¾æ¥: [https://huggingface.co/docs/peft/developer_guides/mixed_models](https://huggingface.co/docs/peft/developer_guides/mixed_models)

é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨ğŸ¤— PEFTä¸­æ— æ³•æ··åˆä¸åŒç±»å‹çš„é€‚é…å™¨ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªä¸åŒLoRAé€‚é…å™¨çš„PEFTæ¨¡å‹ï¼ˆå¯ä»¥å…·æœ‰ä¸åŒçš„é…ç½®é€‰é¡¹ï¼‰ï¼Œä½†æ— æ³•ç»„åˆLoRAå’ŒLoHaé€‚é…å™¨ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨[PeftMixedModel](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftMixedModel)ï¼Œåªè¦é€‚é…å™¨ç±»å‹å…¼å®¹ï¼Œå°±å¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚å…è®¸æ··åˆé€‚é…å™¨ç±»å‹çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç»“åˆæ¨ç†çš„è®­ç»ƒé€‚é…å™¨ã€‚è™½ç„¶å¯ä»¥è®­ç»ƒæ··åˆé€‚é…å™¨æ¨¡å‹ï¼Œä½†å°šæœªç»è¿‡æµ‹è¯•ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚

è¦å°†ä¸åŒç±»å‹çš„é€‚é…å™¨åŠ è½½åˆ°PEFTæ¨¡å‹ä¸­ï¼Œè¯·ä½¿ç”¨[PeftMixedModel](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftMixedModel)è€Œä¸æ˜¯[PeftModel](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftModel)ï¼š

```py
from peft import PeftMixedModel

base_model = ...  # load the base model, e.g. from transformers
# load first adapter, which will be called "default"
peft_model = PeftMixedModel.from_pretrained(base_model, <path_to_adapter1>)
peft_model.load_adapter(<path_to_adapter2>, adapter_name="other")
peft_model.set_adapter(["default", "other"])
```

å¿…é¡»ä½¿ç”¨[set_adapter()](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftMixedModel.set_adapter)æ–¹æ³•æ¥æ¿€æ´»ä¸¤ä¸ªé€‚é…å™¨ï¼Œå¦åˆ™åªæœ‰ç¬¬ä¸€ä¸ªé€‚é…å™¨ä¼šå¤„äºæ´»åŠ¨çŠ¶æ€ã€‚æ‚¨å¯ä»¥é€šè¿‡åå¤è°ƒç”¨[add_adapter()](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftModel.add_adapter)æ¥ç»§ç»­æ·»åŠ æ›´å¤šé€‚é…å™¨ã€‚

[PeftMixedModel](/docs/peft/v0.8.2/en/package_reference/peft_model#peft.PeftMixedModel)ä¸æ”¯æŒä¿å­˜å’ŒåŠ è½½æ··åˆé€‚é…å™¨ã€‚é€‚é…å™¨åº”è¯¥å·²ç»è®­ç»ƒå¥½ï¼ŒåŠ è½½æ¨¡å‹éœ€è¦æ¯æ¬¡è¿è¡Œä¸€ä¸ªè„šæœ¬ã€‚

## æç¤º

+   å¹¶éæ‰€æœ‰é€‚é…å™¨ç±»å‹éƒ½å¯ä»¥ç»„åˆã€‚è¯·å‚é˜…[`peft.tuners.mixed.COMPATIBLE_TUNER_TYPES`](https://github.com/huggingface/peft/blob/1c1c7fdaa6e6abaa53939b865dee1eded82ad032/src/peft/tuners/mixed/model.py#L35)ä»¥è·å–å…¼å®¹ç±»å‹çš„åˆ—è¡¨ã€‚å¦‚æœå°è¯•ç»„åˆä¸å…¼å®¹çš„é€‚é…å™¨ç±»å‹ï¼Œå°†ä¼šå¼•å‘é”™è¯¯ã€‚

+   å¯ä»¥æ··åˆå¤šä¸ªç›¸åŒç±»å‹çš„é€‚é…å™¨ï¼Œè¿™å¯¹äºå°†å…·æœ‰éå¸¸ä¸åŒé…ç½®çš„é€‚é…å™¨ç»„åˆåœ¨ä¸€èµ·éå¸¸æœ‰ç”¨ã€‚

+   å¦‚æœè¦ç»„åˆè®¸å¤šä¸åŒçš„é€‚é…å™¨ï¼Œæœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä¾æ¬¡æ·»åŠ ç›¸åŒç±»å‹çš„é€‚é…å™¨ã€‚ä¾‹å¦‚ï¼ŒæŒ‰ç…§LoRA1ã€LoRA2ã€LoHa1ã€LoHa2çš„é¡ºåºæ·»åŠ ï¼Œè€Œä¸æ˜¯LoRA1ã€LoHa1ã€LoRA2å’ŒLoHa2ã€‚è™½ç„¶é¡ºåºå¯èƒ½ä¼šå½±å“è¾“å‡ºï¼Œä½†å¹¶æ²¡æœ‰å›ºå®šçš„*æœ€ä½³*é¡ºåºï¼Œå› æ­¤æœ€å¥½é€‰æ‹©æœ€å¿«çš„é¡ºåºã€‚
