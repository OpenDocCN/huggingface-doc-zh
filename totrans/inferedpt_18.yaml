- en: Create custom Inference Handler
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºè‡ªå®šä¹‰æ¨ç†å¤„ç†ç¨‹åº
- en: 'Original text: [https://huggingface.co/docs/inference-endpoints/guides/custom_handler](https://huggingface.co/docs/inference-endpoints/guides/custom_handler)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://huggingface.co/docs/inference-endpoints/guides/custom_handler](https://huggingface.co/docs/inference-endpoints/guides/custom_handler)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Hugging Face Endpoints supports all of the Transformers and Sentence-Transformers
    tasks and can support custom tasks, including custom pre- & post-processing. The
    customization can be done through a [handler.py](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)
    file in your model repository on the Hugging Face Hub.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Hugging Face Endpointsæ”¯æŒæ‰€æœ‰Transformerså’ŒSentence-Transformersä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒè‡ªå®šä¹‰ä»»åŠ¡ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰é¢„å¤„ç†å’Œåå¤„ç†ã€‚å®šåˆ¶å¯ä»¥é€šè¿‡Hugging
    Face Hubä¸Šæ¨¡å‹å­˜å‚¨åº“ä¸­çš„[handler.py](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)æ–‡ä»¶å®Œæˆã€‚
- en: The [handler.py](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)
    needs to implement the [EndpointHandler](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)
    class with a `__init__` and a `__call__` method.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[handler.py](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)éœ€è¦å®ç°[EndpointHandler](https://huggingface.co/philschmid/distilbert-onnx-banking77/blob/main/handler.py)ç±»ï¼Œå…¶ä¸­åŒ…å«`__init__`å’Œ`__call__`æ–¹æ³•ã€‚'
- en: If you want to use custom dependencies, e.g. [optimum](https://raw.githubusercontent.com/huggingface/optimum),
    the dependencies must be listed in a `requirements.txt` as described above in
    â€œadd custom dependencies.â€
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æƒ³ä½¿ç”¨è‡ªå®šä¹‰ä¾èµ–é¡¹ï¼Œä¾‹å¦‚[optimum](https://raw.githubusercontent.com/huggingface/optimum)ï¼Œåˆ™è¿™äº›ä¾èµ–é¡¹å¿…é¡»åœ¨`requirements.txt`ä¸­åˆ—å‡ºï¼Œå¦‚ä¸Šè¿°â€œæ·»åŠ è‡ªå®šä¹‰ä¾èµ–é¡¹â€ä¸­æ‰€è¿°ã€‚
- en: Custom Handler Examples
  id: totrans-6
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è‡ªå®šä¹‰å¤„ç†ç¨‹åºç¤ºä¾‹
- en: There are already several public examples on the [Hugging Face Hub](https://huggingface.co/models?other=endpoints-template)
    where you can take insipiration or directly use them. The repositories are tagged
    with `endpoints-template` and can be found under this [link](https://huggingface.co/models?other=endpoints-template).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨[Hugging Face Hub](https://huggingface.co/models?other=endpoints-template)ä¸Šå·²ç»æœ‰å‡ ä¸ªå…¬å…±ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥ä»ä¸­è·å–çµæ„Ÿæˆ–ç›´æ¥ä½¿ç”¨ã€‚è¿™äº›å­˜å‚¨åº“å¸¦æœ‰`endpoints-template`æ ‡ç­¾ï¼Œå¯ä»¥åœ¨æ­¤[é“¾æ¥](https://huggingface.co/models?other=endpoints-template)ä¸‹æ‰¾åˆ°ã€‚
- en: 'Included examples are for:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: åŒ…å«çš„ç¤ºä¾‹æœ‰ï¼š
- en: '[Optimum and ONNX Runtime](https://huggingface.co/philschmid/distilbert-onnx-banking77)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Optimumå’ŒONNX Runtime](https://huggingface.co/philschmid/distilbert-onnx-banking77)'
- en: '[Image Embeddings with BLIP](https://huggingface.co/florentgbelidji/blip_image_embeddings)'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[BLIPå›¾åƒåµŒå…¥](https://huggingface.co/florentgbelidji/blip_image_embeddings)'
- en: '[TrOCR for OCR Detection](https://huggingface.co/philschmid/trocr-base-printed)'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[TrOCRç”¨äºOCRæ£€æµ‹](https://huggingface.co/philschmid/trocr-base-printed)'
- en: '[Optimized Sentence Transformers with Optimum](https://huggingface.co/philschmid/all-MiniLM-L6-v2-optimum-embeddings)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ä¼˜åŒ–çš„å¥å­è½¬æ¢å™¨ä¸Optimum](https://huggingface.co/philschmid/all-MiniLM-L6-v2-optimum-embeddings)'
- en: '[Pyannote Speaker diarization](https://huggingface.co/philschmid/pyannote-speaker-diarization-endpoint)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Pyannoteè¯´è¯äººåˆ†å‰²](https://huggingface.co/philschmid/pyannote-speaker-diarization-endpoint)'
- en: '[LayoutLM](https://huggingface.co/philschmid/layoutlm-funsd)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[LayoutLM](https://huggingface.co/philschmid/layoutlm-funsd)'
- en: '[Flair NER](https://huggingface.co/philschmid/flair-ner-english-ontonotes-large)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Flair NER](https://huggingface.co/philschmid/flair-ner-english-ontonotes-large)'
- en: '[GPT-J 6B Single GPU](https://huggingface.co/philschmid/gpt-j-6B-fp16-sharded)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[GPT-J 6Bå•GPU](https://huggingface.co/philschmid/gpt-j-6B-fp16-sharded)'
- en: '[Donut Document understanding](https://huggingface.co/philschmid/donut-base-finetuned-cord-v2)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Donutæ–‡æ¡£ç†è§£](https://huggingface.co/philschmid/donut-base-finetuned-cord-v2)'
- en: '[SetFit classifier](https://huggingface.co/philschmid/setfit-ag-news-endpoint)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[SetFitåˆ†ç±»å™¨](https://huggingface.co/philschmid/setfit-ag-news-endpoint)'
- en: Tutorial
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ•™ç¨‹
- en: Before creating a Custom Handler, you need a Hugging Face Model repository with
    your model weights and an Access Token with *WRITE* access to the repository.
    To find, create and manage Access Tokens, click [here](https://huggingface.co/settings/tokens).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆ›å»ºè‡ªå®šä¹‰å¤„ç†ç¨‹åºä¹‹å‰ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªå¸¦æœ‰æ¨¡å‹æƒé‡çš„Hugging Faceæ¨¡å‹å­˜å‚¨åº“ï¼Œå¹¶ä¸”éœ€è¦ä¸€ä¸ªå…·æœ‰å¯¹å­˜å‚¨åº“çš„*å†™*è®¿é—®æƒé™çš„è®¿é—®ä»¤ç‰Œã€‚è¦æŸ¥æ‰¾ã€åˆ›å»ºå’Œç®¡ç†è®¿é—®ä»¤ç‰Œï¼Œè¯·å•å‡»[æ­¤å¤„](https://huggingface.co/settings/tokens)ã€‚
- en: If you want to write a Custom Handler for an existing model from the community,
    you can use the [repo_duplicator](https://huggingface.co/spaces/osanseviero/repo_duplicator)
    to create a repository fork.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æƒ³ä¸ºç¤¾åŒºä¸­ç°æœ‰æ¨¡å‹ç¼–å†™è‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨[repo_duplicator](https://huggingface.co/spaces/osanseviero/repo_duplicator)åˆ›å»ºå­˜å‚¨åº“åˆ†æ”¯ã€‚
- en: The code can also be found in this [Notebook](https://colab.research.google.com/drive/1hANJeRa1PK1gZaUorobnQGu4bFj4_4Rf?usp=sharing).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: ä»£ç ä¹Ÿå¯ä»¥åœ¨æ­¤[ç¬”è®°æœ¬](https://colab.research.google.com/drive/1hANJeRa1PK1gZaUorobnQGu4bFj4_4Rf?usp=sharing)ä¸­æ‰¾åˆ°ã€‚
- en: 'You can also search for already existing Custom Handlers here: [https://huggingface.co/models?other=endpoints-template](https://huggingface.co/models?other=endpoints-template)'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨è¿˜å¯ä»¥åœ¨æ­¤å¤„æœç´¢å·²å­˜åœ¨çš„è‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼š[https://huggingface.co/models?other=endpoints-template](https://huggingface.co/models?other=endpoints-template)
- en: 1\. Set up Development Environment
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 1. è®¾ç½®å¼€å‘ç¯å¢ƒ
- en: The easiest way to develop our custom handler is to set up a local development
    environment, to implement, test, and iterate there, and then deploy it as an Inference
    Endpoint. The first step is to install all required development dependencies.
    *needed to create the custom handler, not needed for inference*
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å‘è‡ªå®šä¹‰å¤„ç†ç¨‹åºçš„æœ€ç®€å•æ–¹æ³•æ˜¯è®¾ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œè¿›è¡Œå®ç°ã€æµ‹è¯•å’Œè¿­ä»£ï¼Œç„¶åå°†å…¶éƒ¨ç½²ä¸ºæ¨ç†ç«¯ç‚¹ã€‚ç¬¬ä¸€æ­¥æ˜¯å®‰è£…æ‰€æœ‰å¿…éœ€çš„å¼€å‘ä¾èµ–é¡¹ã€‚*ç”¨äºåˆ›å»ºè‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼Œä¸ç”¨äºæ¨ç†*
- en: '[PRE0]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: After we have installed our libraries we will clone our repository to our development
    environment.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: å®‰è£…å®Œåº“åï¼Œæˆ‘ä»¬å°†å…‹éš†æˆ‘ä»¬çš„å­˜å‚¨åº“åˆ°å¼€å‘ç¯å¢ƒä¸­ã€‚
- en: We will use [philschmid/distilbert-base-uncased-emotion](https://huggingface.co/philschmid/distilbert-base-uncased-emotion)
    during the tutorial.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†åœ¨æ•™ç¨‹ä¸­ä½¿ç”¨[philschmid/distilbert-base-uncased-emotion](https://huggingface.co/philschmid/distilbert-base-uncased-emotion)ã€‚
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: To be able to push our CP later you need to login into our HF account. This
    can be done by using the `huggingface-cli`.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: è¦èƒ½å¤Ÿç¨åæ¨é€æˆ‘ä»¬çš„CPï¼Œæ‚¨éœ€è¦ç™»å½•åˆ°æˆ‘ä»¬çš„HFå¸æˆ·ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨`huggingface-cli`æ¥å®Œæˆã€‚
- en: '*Note: Make sure to configure git config as well.*'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ³¨æ„ï¼šç¡®ä¿é…ç½®git configã€‚*'
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 2\. Create EndpointHandler (CP)
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 2. åˆ›å»ºEndpointHandlerï¼ˆCPï¼‰
- en: After we have set up our environment, we can start creating your custom handler.
    The custom handler is a Python class (`EndpointHandler`) inside a `handler.py`
    file in our repository. The `EndpointHandler` needs to implement an `__init__`
    and a `__call__` method.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è®¾ç½®ç¯å¢ƒåï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹åˆ›å»ºæ‚¨çš„è‡ªå®šä¹‰å¤„ç†ç¨‹åºã€‚è‡ªå®šä¹‰å¤„ç†ç¨‹åºæ˜¯å­˜å‚¨åº“ä¸­çš„`handler.py`æ–‡ä»¶ä¸­çš„Pythonç±»ï¼ˆ`EndpointHandler`ï¼‰ã€‚`EndpointHandler`éœ€è¦å®ç°ä¸€ä¸ª`__init__`å’Œä¸€ä¸ª`__call__`æ–¹æ³•ã€‚
- en: The `__init__` method will be called when starting the Endpoint and will receive
    1 argument, a string with the path to your model weights. This allows you to load
    your model correctly.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`__init__`æ–¹æ³•å°†åœ¨å¯åŠ¨ç«¯ç‚¹æ—¶è°ƒç”¨ï¼Œå¹¶æ¥æ”¶1ä¸ªå‚æ•°ï¼Œä¸€ä¸ªå¸¦æœ‰æ¨¡å‹æƒé‡è·¯å¾„çš„å­—ç¬¦ä¸²ã€‚è¿™ä½¿æ‚¨å¯ä»¥æ­£ç¡®åŠ è½½æ‚¨çš„æ¨¡å‹ã€‚'
- en: The `__call__` method will be called on every request and receive a dictionary
    with your request body as a python dictionary. It will always contain the `inputs`
    key.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`__call__`æ–¹æ³•å°†åœ¨æ¯ä¸ªè¯·æ±‚ä¸Šè°ƒç”¨ï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªåŒ…å«æ‚¨çš„è¯·æ±‚æ­£æ–‡çš„å­—å…¸ä½œä¸ºPythonå­—å…¸ã€‚å®ƒå°†å§‹ç»ˆåŒ…å«`inputs`é”®ã€‚'
- en: The first step is to create our `handler.py` in the local clone of our repository.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥æ˜¯åœ¨å­˜å‚¨åº“çš„æœ¬åœ°å…‹éš†ä¸­åˆ›å»ºæˆ‘ä»¬çš„`handler.py`ã€‚
- en: '[PRE3]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In there, you define your `EndpointHandler` class with the `__init__` and `__call__`
    method.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å…¶ä¸­ï¼Œæ‚¨å®šä¹‰æ‚¨çš„`EndpointHandler`ç±»ä¸`__init__`å’Œ`__call__`æ–¹æ³•ã€‚
- en: '[PRE4]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 3\. Customize EndpointHandler
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3\. è‡ªå®šä¹‰EndpointHandler
- en: Now, you can add all of the custom logic you want to use during initialization
    or inference to your CP. You can already find multiple [Custom Handler on the
    Hub](https://huggingface.co/models?other=endpoints-template) if you need some
    inspiration. In our example, we will add a custom condition based on additional
    payload information.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæ‚¨å¯ä»¥å°†æ‚¨æƒ³è¦åœ¨åˆå§‹åŒ–æˆ–æ¨ç†æœŸé—´ä½¿ç”¨çš„æ‰€æœ‰è‡ªå®šä¹‰é€»è¾‘æ·»åŠ åˆ°æ‚¨çš„CPä¸­ã€‚å¦‚æœéœ€è¦ä¸€äº›çµæ„Ÿï¼Œæ‚¨å¯ä»¥åœ¨Hubä¸Šæ‰¾åˆ°å¤šä¸ª[è‡ªå®šä¹‰å¤„ç†ç¨‹åº](https://huggingface.co/models?other=endpoints-template)ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®é¢å¤–çš„è´Ÿè½½ä¿¡æ¯æ·»åŠ è‡ªå®šä¹‰æ¡ä»¶ã€‚
- en: '*The model we are using in the tutorial is fine-tuned to detect emotions. We
    will add an additional payload field for the date, and will use an external package
    to check if it is a holiday, to add a condition so that when the input date is
    a holiday, the model returns â€œhappyâ€ - since everyone is happy when there are
    holidays* ğŸŒ´ğŸ‰ğŸ˜†'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '*æˆ‘ä»¬åœ¨æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ¨¡å‹ç»è¿‡å¾®è°ƒä»¥æ£€æµ‹æƒ…ç»ªã€‚æˆ‘ä»¬å°†ä¸ºæ—¥æœŸæ·»åŠ ä¸€ä¸ªé¢å¤–çš„è´Ÿè½½å­—æ®µï¼Œå¹¶ä½¿ç”¨å¤–éƒ¨åŒ…æ¥æ£€æŸ¥æ˜¯å¦æ˜¯å‡æœŸï¼Œä»¥æ·»åŠ ä¸€ä¸ªæ¡ä»¶ï¼Œå³å½“è¾“å…¥æ—¥æœŸæ˜¯å‡æœŸæ—¶ï¼Œæ¨¡å‹è¿”å›â€œå¿«ä¹â€
    - å› ä¸ºæ¯ä¸ªäººåœ¨å‡æœŸæ—¶éƒ½å¾ˆå¿«ä¹* ğŸŒ´ğŸ‰ğŸ˜†'
- en: First, we need to create a new `requirements.txt` and add our [holiday detection
    package](https://pypi.org/project/holidays/) and make sure we have it installed
    in our development environment as well.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„`requirements.txt`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ æˆ‘ä»¬çš„[å‡æœŸæ£€æµ‹åŒ…](https://pypi.org/project/holidays/)ï¼Œç¡®ä¿æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä¸­ä¹Ÿå·²å®‰è£…ã€‚
- en: '[PRE5]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Next, we have to adjust our `handler.py` and `EndpointHandler` to match our
    condition.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»è°ƒæ•´æˆ‘ä»¬çš„`handler.py`å’Œ`EndpointHandler`ä»¥åŒ¹é…æˆ‘ä»¬çš„æ¡ä»¶ã€‚
- en: '[PRE6]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 4\. Test EndpointHandler
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 4\. æµ‹è¯•EndpointHandler
- en: To test our EndpointHandler, we can simplify import, initialize and test it.
    Therefore we only need to prepare a sample payload.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æµ‹è¯•æˆ‘ä»¬çš„EndpointHandlerï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–å¯¼å…¥ï¼Œåˆå§‹åŒ–å’Œæµ‹è¯•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦å‡†å¤‡ä¸€ä¸ªç¤ºä¾‹è´Ÿè½½ã€‚
- en: '[PRE7]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: It works!!!! ğŸ‰
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: æˆåŠŸäº†ï¼ï¼ï¼ğŸ‰
- en: '*Note: If you are using a notebook you might have to restart your kernel when
    you make changes to the handler.py since it is not automatically re-imported.*'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ³¨æ„ï¼šå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç¬”è®°æœ¬ï¼Œåœ¨å¯¹`handler.py`è¿›è¡Œæ›´æ”¹æ—¶ï¼Œå¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨å†…æ ¸ï¼Œå› ä¸ºå®ƒä¸ä¼šè‡ªåŠ¨é‡æ–°å¯¼å…¥ã€‚*'
- en: 5\. Push the Custom Handler to your repository
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 5\. å°†è‡ªå®šä¹‰å¤„ç†ç¨‹åºæ¨é€åˆ°æ‚¨çš„å­˜å‚¨åº“
- en: After you have successfully tested your handler locally, you can push it to
    your repository by simply using basic git commands.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬åœ°æˆåŠŸæµ‹è¯•å¤„ç†ç¨‹åºåï¼Œæ‚¨å¯ä»¥é€šè¿‡ç®€å•ä½¿ç”¨åŸºæœ¬çš„gitå‘½ä»¤å°†å…¶æ¨é€åˆ°å­˜å‚¨åº“ã€‚
- en: '[PRE8]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Now, you should see your `handler.py` and `requirements.txt` in your repository
    in the [â€œFiles and versionâ€](https://huggingface.co/philschmid/distilbert-base-uncased-emotion/tree/main)
    tab.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæ‚¨åº”è¯¥åœ¨æ‚¨çš„å­˜å‚¨åº“çš„[â€œæ–‡ä»¶å’Œç‰ˆæœ¬â€](https://huggingface.co/philschmid/distilbert-base-uncased-emotion/tree/main)é€‰é¡¹å¡ä¸­çœ‹åˆ°æ‚¨çš„`handler.py`å’Œ`requirements.txt`ã€‚
- en: 6\. Deploy your Custom Handler as an Inference Endpoint
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 6\. å°†æ‚¨çš„è‡ªå®šä¹‰å¤„ç†ç¨‹åºéƒ¨ç½²ä¸ºæ¨ç†ç«¯ç‚¹
- en: The last step is to deploy your Custom Handler as an Inference Endpoint. You
    can deploy your Custom Handler like you would a regular Inference Endpoint. Add
    your repository, select your cloud and region, your instance and security setting,
    and deploy.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸€æ­¥æ˜¯å°†æ‚¨çš„è‡ªå®šä¹‰å¤„ç†ç¨‹åºéƒ¨ç½²ä¸ºæ¨ç†ç«¯ç‚¹ã€‚æ‚¨å¯ä»¥åƒéƒ¨ç½²å¸¸è§„æ¨ç†ç«¯ç‚¹ä¸€æ ·éƒ¨ç½²æ‚¨çš„è‡ªå®šä¹‰å¤„ç†ç¨‹åºã€‚æ·»åŠ æ‚¨çš„å­˜å‚¨åº“ï¼Œé€‰æ‹©æ‚¨çš„äº‘å’ŒåŒºåŸŸï¼Œæ‚¨çš„å®ä¾‹å’Œå®‰å…¨è®¾ç½®ï¼Œç„¶åéƒ¨ç½²ã€‚
- en: When creating your Endpoint, the Inference Endpoint Service will check for an
    available and valid `handler.py`, and will use it for serving requests no matter
    which â€œTaskâ€ you select.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆ›å»ºç«¯ç‚¹æ—¶ï¼Œæ¨ç†ç«¯ç‚¹æœåŠ¡å°†æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨ä¸”æœ‰æ•ˆçš„`handler.py`ï¼Œå¹¶å°†ç”¨äºä¸ºè¯·æ±‚æä¾›æœåŠ¡ï¼Œæ— è®ºæ‚¨é€‰æ‹©å“ªä¸ªâ€œä»»åŠ¡â€ã€‚
- en: '*Note: In your [Inference Endpoints dashboard](https://ui.endpoints.huggingface.co/),
    the Task for this Endpoint should now be set to Custom*'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ³¨æ„ï¼šåœ¨æ‚¨çš„[æ¨ç†ç«¯ç‚¹ä»ªè¡¨æ¿](https://ui.endpoints.huggingface.co/)ä¸­ï¼Œæ­¤ç«¯ç‚¹çš„ä»»åŠ¡ç°åœ¨åº”è®¾ç½®ä¸ºè‡ªå®šä¹‰*'
