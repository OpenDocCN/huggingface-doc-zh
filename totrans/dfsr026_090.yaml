- en: Habana Gaudi
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Original text: [https://huggingface.co/docs/diffusers/optimization/habana](https://huggingface.co/docs/diffusers/optimization/habana)'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en:  
    
    
    
    
    
    
    
    
    
    
    
  prefs: []
  type: TYPE_NORMAL
- en: 'ðŸ¤— Diffusers is compatible with Habana Gaudi through ðŸ¤— [Optimum](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion).
    Follow the [installation](https://docs.habana.ai/en/latest/Installation_Guide/index.html)
    guide to install the SynapseAI and Gaudi drivers, and then install Optimum Habana:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'To generate images with Stable Diffusion 1 and 2 on Gaudi, you need to instantiate
    two instances:'
  prefs: []
  type: TYPE_NORMAL
- en: '`GaudiStableDiffusionPipeline`, a pipeline for text-to-image generation.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`GaudiDDIMScheduler`, a Gaudi-optimized scheduler.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When you initialize the pipeline, you have to specify `use_habana=True` to deploy
    it on HPUs and to get the fastest possible generation, you should enable **HPU
    graphs** with `use_hpu_graphs=True`.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, specify a `GaudiConfig` which can be downloaded from the [Habana](https://huggingface.co/Habana)
    organization on the Hub.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Now you can call the pipeline to generate images by batches from one or several
    prompts:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: For more information, check out ðŸ¤— Optimum Habanaâ€™s [documentation](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion)
    and the [example](https://github.com/huggingface/optimum-habana/tree/main/examples/stable-diffusion)
    provided in the official GitHub repository.
  prefs: []
  type: TYPE_NORMAL
- en: Benchmark
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We benchmarked Habanaâ€™s first-generation Gaudi and Gaudi2 with the [Habana/stable-diffusion](https://huggingface.co/Habana/stable-diffusion)
    and [Habana/stable-diffusion-2](https://huggingface.co/Habana/stable-diffusion-2)
    Gaudi configurations (mixed precision bf16/fp32) to demonstrate their performance.
  prefs: []
  type: TYPE_NORMAL
- en: 'For [Stable Diffusion v1.5](https://huggingface.co/runwayml/stable-diffusion-v1-5)
    on 512x512 images:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  | Latency (batch size = 1) | Throughput |'
  prefs: []
  type: TYPE_TB
- en: '| --- | :-: | :-: |'
  prefs: []
  type: TYPE_TB
- en: '| first-generation Gaudi | 3.80s | 0.308 images/s (batch size = 8) |'
  prefs: []
  type: TYPE_TB
- en: '| Gaudi2 | 1.33s | 1.081 images/s (batch size = 8) |'
  prefs: []
  type: TYPE_TB
- en: 'For [Stable Diffusion v2.1](https://huggingface.co/stabilityai/stable-diffusion-2-1)
    on 768x768 images:'
  prefs: []
  type: TYPE_NORMAL
- en: '|  | Latency (batch size = 1) | Throughput |'
  prefs: []
  type: TYPE_TB
- en: '| --- | :-: | :-: |'
  prefs: []
  type: TYPE_TB
- en: '| first-generation Gaudi | 10.2s | 0.108 images/s (batch size = 4) |'
  prefs: []
  type: TYPE_TB
- en: '| Gaudi2 | 3.17s | 0.379 images/s (batch size = 8) |'
  prefs: []
  type: TYPE_TB
