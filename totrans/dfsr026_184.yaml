- en: Schedulers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://huggingface.co/docs/diffusers/api/schedulers/overview](https://huggingface.co/docs/diffusers/api/schedulers/overview)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: <link href="/docs/diffusers/v0.26.3/en/_app/immutable/assets/0.e3b0c442.css"
    rel="modulepreload"> <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/entry/start.99629b4a.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/scheduler.182ea377.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/singletons.fade7992.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/index.1f6d62f6.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/paths.108a236d.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/entry/app.2b3eaeb0.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/index.abf12888.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/nodes/0.3862a335.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/each.e59479a4.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/nodes/104.f750dd99.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/Tip.230e2334.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/Docstring.93f6f462.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/globals.7f7f1b26.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/Heading.16916d63.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/CodeBlock.57fe6e13.js">
    <link rel="modulepreload" href="/docs/diffusers/v0.26.3/en/_app/immutable/chunks/ExampleCodeBlock.658f5cd6.js">
  prefs: []
  type: TYPE_NORMAL
- en: 🤗 Diffusers provides many scheduler functions for the diffusion process. A scheduler
    takes a model’s output (the sample which the diffusion process is iterating on)
    and a timestep to return a denoised sample. The timestep is important because
    it dictates where in the diffusion process the step is; data is generated by iterating
    forward *n* timesteps and inference occurs by propagating backward through the
    timesteps. Based on the timestep, a scheduler may be *discrete* in which case
    the timestep is an `int` or *continuous* in which case the timestep is a `float`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Depending on the context, a scheduler defines how to iteratively add noise
    to an image or how to update a sample based on a model’s output:'
  prefs: []
  type: TYPE_NORMAL
- en: during *training*, a scheduler adds noise (there are different algorithms for
    how to add noise) to a sample to train a diffusion model
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: during *inference*, a scheduler defines how to update a sample based on a pretrained
    model’s output
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Many schedulers are implemented from the [k-diffusion](https://github.com/crowsonkb/k-diffusion)
    library by [Katherine Crowson](https://github.com/crowsonkb/), and they’re also
    widely used in A1111\. To help you map the schedulers from k-diffusion and A1111
    to the schedulers in 🤗 Diffusers, take a look at the table below:'
  prefs: []
  type: TYPE_NORMAL
- en: '| A1111/k-diffusion | 🤗 Diffusers | Usage |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M Karras | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `use_karras_sigmas=True` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M SDE | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `algorithm_type="sde-dpmsolver++"` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M SDE Karras | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `use_karras_sigmas=True` and `algorithm_type="sde-dpmsolver++"` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2S a | N/A | very similar to `DPMSolverSinglestepScheduler` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2S a Karras | N/A | very similar to `DPMSolverSinglestepScheduler(use_karras_sigmas=True,
    ...)` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ SDE | [DPMSolverSinglestepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/singlestep_dpm_solver#diffusers.DPMSolverSinglestepScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| DPM++ SDE Karras | [DPMSolverSinglestepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/singlestep_dpm_solver#diffusers.DPMSolverSinglestepScheduler)
    | init with `use_karras_sigmas=True` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM2 | [KDPM2DiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete#diffusers.KDPM2DiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| DPM2 Karras | [KDPM2DiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete#diffusers.KDPM2DiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM2 a | [KDPM2AncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete_ancestral#diffusers.KDPM2AncestralDiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| DPM2 a Karras | [KDPM2AncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete_ancestral#diffusers.KDPM2AncestralDiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  prefs: []
  type: TYPE_TB
- en: '| DPM adaptive | N/A |  |'
  prefs: []
  type: TYPE_TB
- en: '| DPM fast | N/A |  |'
  prefs: []
  type: TYPE_TB
- en: '| Euler | [EulerDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/euler#diffusers.EulerDiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| Euler a | [EulerAncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/euler_ancestral#diffusers.EulerAncestralDiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| Heun | [HeunDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/heun#diffusers.HeunDiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| LMS | [LMSDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/lms_discrete#diffusers.LMSDiscreteScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| LMS Karras | [LMSDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/lms_discrete#diffusers.LMSDiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  prefs: []
  type: TYPE_TB
- en: '| N/A | [DEISMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/deis#diffusers.DEISMultistepScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: '| N/A | [UniPCMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/unipc#diffusers.UniPCMultistepScheduler)
    |  |'
  prefs: []
  type: TYPE_TB
- en: All schedulers are built from the base [SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)
    class which implements low level utilities shared by all schedulers.
  prefs: []
  type: TYPE_NORMAL
- en: SchedulerMixin
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### class diffusers.SchedulerMixin'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L64)'
  prefs: []
  type: TYPE_NORMAL
- en: ( )
  prefs: []
  type: TYPE_NORMAL
- en: Base class for all schedulers.
  prefs: []
  type: TYPE_NORMAL
- en: '[SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)
    contains common functions shared by all schedulers such as general loading and
    saving functionalities.'
  prefs: []
  type: TYPE_NORMAL
- en: '[ConfigMixin](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin)
    takes care of storing the configuration attributes (like `num_train_timesteps`)
    that are passed to the scheduler’s `__init__` function, and the attributes can
    be accessed by `scheduler.config.num_train_timesteps`.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Class attributes:'
  prefs: []
  type: TYPE_NORMAL
- en: '**_compatibles** (`List[str]`) — A list of scheduler classes that are compatible
    with the parent scheduler class. Use [from_config()](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin.from_config)
    to load a different compatible scheduler class (should be overridden by parent
    class).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '#### from_pretrained'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L84)'
  prefs: []
  type: TYPE_NORMAL
- en: '( pretrained_model_name_or_path: Union = None subfolder: Optional = None return_unused_kwargs
    = False **kwargs )'
  prefs: []
  type: TYPE_NORMAL
- en: Parameters
  prefs: []
  type: TYPE_NORMAL
- en: '**pretrained_model_name_or_path** (`str` or `os.PathLike`, *optional*) — Can
    be either:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A string, the *model id* (for example `google/ddpm-celebahq-256`) of a pretrained
    model hosted on the Hub.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: A path to a *directory* (for example `./my_model_directory`) containing the
    scheduler configuration saved with [save_pretrained()](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin.save_pretrained).
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '**subfolder** (`str`, *optional*) — The subfolder location of a model file
    within a larger model repository on the Hub or locally.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**return_unused_kwargs** (`bool`, *optional*, defaults to `False`) — Whether
    kwargs that are not consumed by the Python class should be returned or not.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**cache_dir** (`Union[str, os.PathLike]`, *optional*) — Path to a directory
    where a downloaded pretrained model configuration is cached if the standard cache
    is not used.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**force_download** (`bool`, *optional*, defaults to `False`) — Whether or not
    to force the (re-)download of the model weights and configuration files, overriding
    the cached versions if they exist.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**resume_download** (`bool`, *optional*, defaults to `False`) — Whether or
    not to resume downloading the model weights and configuration files. If set to
    `False`, any incompletely downloaded files are deleted.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**proxies** (`Dict[str, str]`, *optional*) — A dictionary of proxy servers
    to use by protocol or endpoint, for example, `{''http'': ''foo.bar:3128'', ''http://hostname'':
    ''foo.bar:4012''}`. The proxies are used on each request.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**output_loading_info(`bool`,** *optional*, defaults to `False`) — Whether
    or not to also return a dictionary containing missing keys, unexpected keys and
    error messages.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**local_files_only(`bool`,** *optional*, defaults to `False`) — Whether to
    only load local model weights and configuration files or not. If set to `True`,
    the model won’t be downloaded from the Hub.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**token** (`str` or *bool*, *optional*) — The token to use as HTTP bearer authorization
    for remote files. If `True`, the token generated from `diffusers-cli login` (stored
    in `~/.huggingface`) is used.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**revision** (`str`, *optional*, defaults to `"main"`) — The specific model
    version to use. It can be a branch name, a tag name, a commit id, or any identifier
    allowed by Git.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Instantiate a scheduler from a pre-defined JSON configuration file in a local
    directory or Hub repository.
  prefs: []
  type: TYPE_NORMAL
- en: To use private or [gated models](https://huggingface.co/docs/hub/models-gated#gated-models),
    log-in with `huggingface-cli login`. You can also activate the special [“offline-mode”](https://huggingface.co/diffusers/installation.html#offline-mode)
    to use this method in a firewalled environment.
  prefs: []
  type: TYPE_NORMAL
- en: '#### save_pretrained'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L151)'
  prefs: []
  type: TYPE_NORMAL
- en: '( save_directory: Union push_to_hub: bool = False **kwargs )'
  prefs: []
  type: TYPE_NORMAL
- en: Parameters
  prefs: []
  type: TYPE_NORMAL
- en: '**save_directory** (`str` or `os.PathLike`) — Directory where the configuration
    JSON file will be saved (will be created if it does not exist).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**push_to_hub** (`bool`, *optional*, defaults to `False`) — Whether or not
    to push your model to the Hugging Face Hub after saving it. You can specify the
    repository you want to push to with `repo_id` (will default to the name of `save_directory`
    in your namespace).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**kwargs** (`Dict[str, Any]`, *optional*) — Additional keyword arguments passed
    along to the [push_to_hub()](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.utils.PushToHubMixin.push_to_hub)
    method.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Save a scheduler configuration object to a directory so that it can be reloaded
    using the [from_pretrained()](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin.from_pretrained)
    class method.
  prefs: []
  type: TYPE_NORMAL
- en: SchedulerOutput
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### class diffusers.schedulers.scheduling_utils.SchedulerOutput'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L50)'
  prefs: []
  type: TYPE_NORMAL
- en: '( prev_sample: FloatTensor )'
  prefs: []
  type: TYPE_NORMAL
- en: Parameters
  prefs: []
  type: TYPE_NORMAL
- en: '**prev_sample** (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)` for images) — Computed sample `(x_{t-1})` of previous timestep. `prev_sample`
    should be used as next model input in the denoising loop.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Base class for the output of a scheduler’s `step` function.
  prefs: []
  type: TYPE_NORMAL
- en: KarrasDiffusionSchedulers
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`KarrasDiffusionSchedulers` are a broad generalization of schedulers in 🤗 Diffusers.
    The schedulers in this class are distinguished at a high level by their noise
    sampling strategy, the type of network and scaling, the training strategy, and
    how the loss is weighed.'
  prefs: []
  type: TYPE_NORMAL
- en: The different schedulers in this class, depending on the ordinary differential
    equations (ODE) solver type, fall into the above taxonomy and provide a good abstraction
    for the design of the main schedulers implemented in 🤗 Diffusers. The schedulers
    in this class are given [here](https://github.com/huggingface/diffusers/blob/a69754bb879ed55b9b6dc9dd0b3cf4fa4124c765/src/diffusers/schedulers/scheduling_utils.py#L32).
  prefs: []
  type: TYPE_NORMAL
- en: PushToHubMixin
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### class diffusers.utils.PushToHubMixin'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L351)'
  prefs: []
  type: TYPE_NORMAL
- en: ( )
  prefs: []
  type: TYPE_NORMAL
- en: A Mixin to push a model, scheduler, or pipeline to the Hugging Face Hub.
  prefs: []
  type: TYPE_NORMAL
- en: '#### push_to_hub'
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L380)'
  prefs: []
  type: TYPE_NORMAL
- en: '( repo_id: str commit_message: Optional = None private: Optional = None token:
    Optional = None create_pr: bool = False safe_serialization: bool = True variant:
    Optional = None )'
  prefs: []
  type: TYPE_NORMAL
- en: Parameters
  prefs: []
  type: TYPE_NORMAL
- en: '**repo_id** (`str`) — The name of the repository you want to push your model,
    scheduler, or pipeline files to. It should contain your organization name when
    pushing to an organization. `repo_id` can also be a path to a local directory.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**commit_message** (`str`, *optional*) — Message to commit while pushing. Default
    to `"Upload {object}"`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**private** (`bool`, *optional*) — Whether or not the repository created should
    be private.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**token** (`str`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. The token generated when running `huggingface-cli login` (stored
    in `~/.huggingface`).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**create_pr** (`bool`, *optional*, defaults to `False`) — Whether or not to
    create a PR with the uploaded files or directly commit.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**safe_serialization** (`bool`, *optional*, defaults to `True`) — Whether or
    not to convert the model weights to the `safetensors` format.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**variant** (`str`, *optional*) — If specified, weights are saved in the format
    `pytorch_model.<variant>.bin`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Upload model, scheduler, or pipeline files to the 🤗 Hugging Face Hub.
  prefs: []
  type: TYPE_NORMAL
- en: 'Examples:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
