- en: Schedulers
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Original text: [https://huggingface.co/docs/diffusers/api/schedulers/overview](https://huggingface.co/docs/diffusers/api/schedulers/overview)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: ü§ó Diffusers provides many scheduler functions for the diffusion process. A scheduler
    takes a model‚Äôs output (the sample which the diffusion process is iterating on)
    and a timestep to return a denoised sample. The timestep is important because
    it dictates where in the diffusion process the step is; data is generated by iterating
    forward *n* timesteps and inference occurs by propagating backward through the
    timesteps. Based on the timestep, a scheduler may be *discrete* in which case
    the timestep is an `int` or *continuous* in which case the timestep is a `float`.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: 'Depending on the context, a scheduler defines how to iteratively add noise
    to an image or how to update a sample based on a model‚Äôs output:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: during *training*, a scheduler adds noise (there are different algorithms for
    how to add noise) to a sample to train a diffusion model
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: during *inference*, a scheduler defines how to update a sample based on a pretrained
    model‚Äôs output
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Many schedulers are implemented from the [k-diffusion](https://github.com/crowsonkb/k-diffusion)
    library by [Katherine Crowson](https://github.com/crowsonkb/), and they‚Äôre also
    widely used in A1111\. To help you map the schedulers from k-diffusion and A1111
    to the schedulers in ü§ó Diffusers, take a look at the table below:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
- en: '| A1111/k-diffusion | ü§ó Diffusers | Usage |'
  id: totrans-8
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    |  |'
  id: totrans-10
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M Karras | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `use_karras_sigmas=True` |'
  id: totrans-11
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M SDE | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `algorithm_type="sde-dpmsolver++"` |'
  id: totrans-12
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2M SDE Karras | [DPMSolverMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/multistep_dpm_solver#diffusers.DPMSolverMultistepScheduler)
    | init with `use_karras_sigmas=True` and `algorithm_type="sde-dpmsolver++"` |'
  id: totrans-13
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2S a | N/A | very similar to `DPMSolverSinglestepScheduler` |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
- en: '| DPM++ 2S a Karras | N/A | very similar to `DPMSolverSinglestepScheduler(use_karras_sigmas=True,
    ...)` |'
  id: totrans-15
  prefs: []
  type: TYPE_TB
- en: '| DPM++ SDE | [DPMSolverSinglestepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/singlestep_dpm_solver#diffusers.DPMSolverSinglestepScheduler)
    |  |'
  id: totrans-16
  prefs: []
  type: TYPE_TB
- en: '| DPM++ SDE Karras | [DPMSolverSinglestepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/singlestep_dpm_solver#diffusers.DPMSolverSinglestepScheduler)
    | init with `use_karras_sigmas=True` |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
- en: '| DPM2 | [KDPM2DiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete#diffusers.KDPM2DiscreteScheduler)
    |  |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
- en: '| DPM2 Karras | [KDPM2DiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete#diffusers.KDPM2DiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
- en: '| DPM2 a | [KDPM2AncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete_ancestral#diffusers.KDPM2AncestralDiscreteScheduler)
    |  |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
- en: '| DPM2 a Karras | [KDPM2AncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/dpm_discrete_ancestral#diffusers.KDPM2AncestralDiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
- en: '| DPM adaptive | N/A |  |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
- en: '| DPM fast | N/A |  |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
- en: '| Euler | [EulerDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/euler#diffusers.EulerDiscreteScheduler)
    |  |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
- en: '| Euler a | [EulerAncestralDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/euler_ancestral#diffusers.EulerAncestralDiscreteScheduler)
    |  |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
- en: '| Heun | [HeunDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/heun#diffusers.HeunDiscreteScheduler)
    |  |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
- en: '| LMS | [LMSDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/lms_discrete#diffusers.LMSDiscreteScheduler)
    |  |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
- en: '| LMS Karras | [LMSDiscreteScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/lms_discrete#diffusers.LMSDiscreteScheduler)
    | init with `use_karras_sigmas=True` |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
- en: '| N/A | [DEISMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/deis#diffusers.DEISMultistepScheduler)
    |  |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
- en: '| N/A | [UniPCMultistepScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/unipc#diffusers.UniPCMultistepScheduler)
    |  |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
- en: All schedulers are built from the base [SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)
    class which implements low level utilities shared by all schedulers.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: SchedulerMixin
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### `class diffusers.SchedulerMixin`'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L64)'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Base class for all schedulers.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '[SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)
    contains common functions shared by all schedulers such as general loading and
    saving functionalities.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
- en: '[ConfigMixin](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin)
    takes care of storing the configuration attributes (like `num_train_timesteps`)
    that are passed to the scheduler‚Äôs `__init__` function, and the attributes can
    be accessed by `scheduler.config.num_train_timesteps`.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 'Class attributes:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '`_compatibles` (`List[str]`) ‚Äî A list of scheduler classes that are compatible
    with the parent scheduler class. Use [from_config()](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin.from_config)
    to load a different compatible scheduler class (should be overridden by parent
    class).'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '#### `from_pretrained`'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L84)'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Parameters
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: '`pretrained_model_name_or_path` (`str` or `os.PathLike`, *optional*) ‚Äî Can
    be either:'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A string, the *model id* (for example `google/ddpm-celebahq-256`) of a pretrained
    model hosted on the Hub.
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: A path to a *directory* (for example `./my_model_directory`) containing the
    scheduler configuration saved with [save_pretrained()](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin.save_pretrained).
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`subfolder` (`str`, *optional*) ‚Äî The subfolder location of a model file within
    a larger model repository on the Hub or locally.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`return_unused_kwargs` (`bool`, *optional*, defaults to `False`) ‚Äî Whether
    kwargs that are not consumed by the Python class should be returned or not.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`cache_dir` (`Union[str, os.PathLike]`, *optional*) ‚Äî Path to a directory where
    a downloaded pretrained model configuration is cached if the standard cache is
    not used.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`force_download` (`bool`, *optional*, defaults to `False`) ‚Äî Whether or not
    to force the (re-)download of the model weights and configuration files, overriding
    the cached versions if they exist.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`resume_download` (`bool`, *optional*, defaults to `False`) ‚Äî Whether or not
    to resume downloading the model weights and configuration files. If set to `False`,
    any incompletely downloaded files are deleted.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`proxies` (`Dict[str, str]`, *optional*) ‚Äî A dictionary of proxy servers to
    use by protocol or endpoint, for example, `{''http'': ''foo.bar:3128'', ''http://hostname'':
    ''foo.bar:4012''}`. The proxies are used on each request.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`output_loading_info(bool,` *optional*, defaults to `False`) ‚Äî Whether or not
    to also return a dictionary containing missing keys, unexpected keys and error
    messages.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`local_files_only(bool,` *optional*, defaults to `False`) ‚Äî Whether to only
    load local model weights and configuration files or not. If set to `True`, the
    model won‚Äôt be downloaded from the Hub.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`token` (`str` or *bool*, *optional*) ‚Äî The token to use as HTTP bearer authorization
    for remote files. If `True`, the token generated from `diffusers-cli login` (stored
    in `~/.huggingface`) is used.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`revision` (`str`, *optional*, defaults to `"main"`) ‚Äî The specific model version
    to use. It can be a branch name, a tag name, a commit id, or any identifier allowed
    by Git.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Instantiate a scheduler from a pre-defined JSON configuration file in a local
    directory or Hub repository.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
- en: To use private or [gated models](https://huggingface.co/docs/hub/models-gated#gated-models),
    log-in with `huggingface-cli login`. You can also activate the special [‚Äúoffline-mode‚Äù](https://huggingface.co/diffusers/installation.html#offline-mode)
    to use this method in a firewalled environment.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
- en: '#### `save_pretrained`'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L151)'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Parameters
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
- en: '`save_directory` (`str` or `os.PathLike`) ‚Äî Directory where the configuration
    JSON file will be saved (will be created if it does not exist).'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`push_to_hub` (`bool`, *optional*, defaults to `False`) ‚Äî Whether or not to
    push your model to the Hugging Face Hub after saving it. You can specify the repository
    you want to push to with `repo_id` (will default to the name of `save_directory`
    in your namespace).'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`kwargs` (`Dict[str, Any]`, *optional*) ‚Äî Additional keyword arguments passed
    along to the [push_to_hub()](/docs/diffusers/v0.26.3/en/api/models/overview#diffusers.utils.PushToHubMixin.push_to_hub)
    method.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Save a scheduler configuration object to a directory so that it can be reloaded
    using the [from_pretrained()](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin.from_pretrained)
    class method.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: SchedulerOutput
  id: totrans-68
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### `class diffusers.schedulers.scheduling_utils.SchedulerOutput`'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_utils.py#L50)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
- en: '`prev_sample` (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)` for images) ‚Äî Computed sample `(x_{t-1})` of previous timestep. `prev_sample`
    should be used as next model input in the denoising loop.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Base class for the output of a scheduler‚Äôs `step` function.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
- en: KarrasDiffusionSchedulers
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`KarrasDiffusionSchedulers` are a broad generalization of schedulers in ü§ó Diffusers.
    The schedulers in this class are distinguished at a high level by their noise
    sampling strategy, the type of network and scaling, the training strategy, and
    how the loss is weighed.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
- en: The different schedulers in this class, depending on the ordinary differential
    equations (ODE) solver type, fall into the above taxonomy and provide a good abstraction
    for the design of the main schedulers implemented in ü§ó Diffusers. The schedulers
    in this class are given [here](https://github.com/huggingface/diffusers/blob/a69754bb879ed55b9b6dc9dd0b3cf4fa4124c765/src/diffusers/schedulers/scheduling_utils.py#L32).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
- en: PushToHubMixin
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '### `class diffusers.utils.PushToHubMixin`'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L351)'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: A Mixin to push a model, scheduler, or pipeline to the Hugging Face Hub.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: '#### `push_to_hub`'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/utils/hub_utils.py#L380)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Parameters
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: '`repo_id` (`str`) ‚Äî The name of the repository you want to push your model,
    scheduler, or pipeline files to. It should contain your organization name when
    pushing to an organization. `repo_id` can also be a path to a local directory.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`commit_message` (`str`, *optional*) ‚Äî Message to commit while pushing. Default
    to `"Upload {object}"`.'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`private` (`bool`, *optional*) ‚Äî Whether or not the repository created should
    be private.'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`token` (`str`, *optional*) ‚Äî The token to use as HTTP bearer authorization
    for remote files. The token generated when running `huggingface-cli login` (stored
    in `~/.huggingface`).'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`create_pr` (`bool`, *optional*, defaults to `False`) ‚Äî Whether or not to create
    a PR with the uploaded files or directly commit.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`safe_serialization` (`bool`, *optional*, defaults to `True`) ‚Äî Whether or
    not to convert the model weights to the `safetensors` format.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`variant` (`str`, *optional*) ‚Äî If specified, weights are saved in the format
    `pytorch_model.<variant>.bin`.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Upload model, scheduler, or pipeline files to the ü§ó Hugging Face Hub.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Â∞ÜÊ®°Âûã„ÄÅË∞ÉÂ∫¶Âô®ÊàñÊµÅÊ∞¥Á∫øÊñá‰ª∂‰∏ä‰º†Âà∞ü§ó Hugging Face Hub„ÄÇ
- en: 'Examples:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: Á§∫‰æãÔºö
- en: '[PRE6]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
