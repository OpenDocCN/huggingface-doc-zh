# ä½¿ç”¨CLIå…±äº«æ•°æ®é›†

> åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/datasets/share](https://huggingface.co/docs/datasets/share)

åœ¨Hugging Faceï¼Œæˆ‘ä»¬çš„ä½¿å‘½æ˜¯ä½¿ä¼˜ç§€çš„æœºå™¨å­¦ä¹ æ°‘ä¸»åŒ–ï¼Œæˆ‘ä»¬ç›¸ä¿¡å¼€æºçš„ä»·å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è®¾è®¡äº†ğŸ¤—æ•°æ®é›†ï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½å¯ä»¥ä¸æ›´å¹¿æ³›çš„MLç¤¾åŒºå…±äº«æ•°æ®é›†ã€‚ç›®å‰åœ¨Hugging Face Hubä¸Šæœ‰è¶…è¿‡100ç§è¯­è¨€çš„æ•°åƒä¸ªæ•°æ®é›†ï¼ŒHugging Faceå›¢é˜Ÿå§‹ç»ˆæ¬¢è¿æ–°çš„è´¡çŒ®ï¼

æ•°æ®é›†å­˜å‚¨åº“æä¾›åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼š

+   å…è´¹æ•°æ®é›†æ‰˜ç®¡

+   æ•°æ®é›†ç‰ˆæœ¬æ§åˆ¶

+   æäº¤å†å²å’Œå·®å¼‚

+   ç”¨äºå‘ç°çš„å…ƒæ•°æ®

+   ç”¨äºæ–‡æ¡£ã€è®¸å¯ã€é™åˆ¶ç­‰çš„æ•°æ®é›†å¡ç‰‡

+   [æ•°æ®é›†æŸ¥çœ‹å™¨](../hub/datasets-viewer)

æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å…±äº«ä¸€ä¸ªæ•°æ®é›†æ–‡ä»¶å¤¹æˆ–å­˜å‚¨åº“ï¼Œä»»ä½•äººéƒ½å¯ä»¥è½»æ¾è®¿é—®ã€‚

## æ·»åŠ ä¸€ä¸ªæ•°æ®é›†

æ‚¨å¯ä»¥é€šè¿‡Hugging Face Hubä¸Šçš„æ•°æ®é›†å­˜å‚¨åº“ä¸ç¤¾åŒºå…±äº«æ‚¨çš„æ•°æ®é›†ã€‚å¦‚æœæ‚¨æƒ³æ§åˆ¶è°å¯ä»¥è®¿é—®æ•°æ®é›†ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç§æœ‰æ•°æ®é›†ã€‚

åœ¨æ•°æ®é›†å­˜å‚¨åº“ä¸­ï¼Œæ‚¨å¯ä»¥æ‰˜ç®¡æ‰€æœ‰æ•°æ®æ–‡ä»¶ï¼Œå¹¶[é…ç½®æ‚¨çš„æ•°æ®é›†](./repository_structure#define-your-splits-in-yaml)ä»¥å®šä¹‰å“ªä¸ªæ–‡ä»¶å±äºå“ªä¸ªæ‹†åˆ†ã€‚æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼šCSVã€TSVã€JSONã€JSONè¡Œã€æ–‡æœ¬ã€Parquetã€Arrowã€SQLiteã€WebDatasetã€‚è¿˜æ”¯æŒè®¸å¤šç§å‹ç¼©æ–‡ä»¶ç±»å‹ï¼šGZã€BZ2ã€LZ4ã€LZMAæˆ–ZSTDã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„æ•°æ®é›†å¯ä»¥ç”±`.json.gz`æ–‡ä»¶ç»„æˆã€‚

å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨çš„æ•°æ®é›†ä¸æ˜¯æ”¯æŒçš„æ ¼å¼ï¼Œæˆ–è€…æ‚¨æƒ³è¦æ›´å¤šæ§åˆ¶æ•°æ®é›†çš„åŠ è½½æ–¹å¼ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„æ•°æ®é›†è„šæœ¬ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨åŠ è½½è„šæœ¬å®šä¹‰çš„æ•°æ®é›†å¯èƒ½æ— æ³•ä½¿ç”¨ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°æ®é›†æŸ¥çœ‹å™¨ã€‚ç”¨æˆ·è¿˜å¿…é¡»ä¼ é€’`trust_remote_code=True`æ¥åŠ è½½æ•°æ®é›†ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œé€šå¸¸å»ºè®®æ•°æ®é›†ä¸è¦ä¾èµ–åŠ è½½è„šæœ¬ï¼Œä»¥ä¾¿ä»Hubçš„æ‰€æœ‰åŠŸèƒ½ä¸­å—ç›Šã€‚

ä»HubåŠ è½½æ•°æ®é›†æ—¶ï¼Œæ‰€æœ‰æ”¯æŒæ ¼å¼çš„æ–‡ä»¶éƒ½ä¼šè¢«åŠ è½½ï¼Œéµå¾ª[å­˜å‚¨åº“ç»“æ„](./repository_structure)ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰æ•°æ®é›†è„šæœ¬ï¼Œå®ƒå°†è¢«ä¸‹è½½å¹¶æ‰§è¡Œä»¥ä¸‹è½½å’Œå‡†å¤‡æ•°æ®é›†ã€‚

æœ‰å…³å¦‚ä½•ä»HubåŠ è½½æ•°æ®é›†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[ä»HubåŠ è½½æ•°æ®é›†](./load_hub)æ•™ç¨‹ã€‚

### åˆ›å»ºå­˜å‚¨åº“

å¦‚æœæ‚¨è¿˜æ²¡æœ‰åœ¨[hf.co](https://huggingface.co/join)ä¸Šåˆ›å»ºå¸æˆ·ï¼Œå…±äº«ç¤¾åŒºæ•°æ®é›†å°†éœ€è¦æ‚¨åˆ›å»ºä¸€ä¸ªã€‚æ‚¨å¯ä»¥ç›´æ¥ä»Hugging Face Hubä¸Šçš„å¸æˆ·åˆ›å»ºä¸€ä¸ª[æ–°æ•°æ®é›†å­˜å‚¨åº“](https://huggingface.co/login?next=%2Fnew-dataset)ï¼Œä½†æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä»ç»ˆç«¯ä¸Šä¼ æ•°æ®é›†ã€‚

1.  ç¡®ä¿æ‚¨åœ¨å®‰è£…Datasetsçš„è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```py
huggingface-cli login
```

1.  ä½¿ç”¨æ‚¨çš„Hugging Face Hubå‡­æ®ç™»å½•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®é›†å­˜å‚¨åº“ï¼š

```py
huggingface-cli repo create my-cool-dataset --type dataset
```

æ·»åŠ `-organization`æ ‡å¿—ä»¥åœ¨ç‰¹å®šç»„ç»‡ä¸‹åˆ›å»ºå­˜å‚¨åº“ï¼š

```py
huggingface-cli repo create my-cool-dataset --type dataset --organization your-org-name
```

## å‡†å¤‡æ‚¨çš„æ–‡ä»¶

æ£€æŸ¥æ‚¨çš„ç›®å½•ï¼Œç¡®ä¿æ‚¨è¦ä¸Šä¼ çš„æ–‡ä»¶åªæœ‰ï¼š

+   æ•°æ®é›†çš„æ•°æ®æ–‡ä»¶

+   æ•°æ®é›†å¡ç‰‡`README.md`

+   ï¼ˆå¯é€‰ï¼‰`your_dataset_name.py`æ˜¯æ‚¨çš„æ•°æ®é›†åŠ è½½è„šæœ¬ï¼ˆå¦‚æœæ‚¨çš„æ•°æ®æ–‡ä»¶å·²ç»æ˜¯æ”¯æŒçš„æ ¼å¼csv/jsonl/json/parquet/txtï¼Œåˆ™å¯é€‰ï¼‰ã€‚è¦åˆ›å»ºæ•°æ®é›†è„šæœ¬ï¼Œè¯·å‚é˜…[æ•°æ®é›†è„šæœ¬](dataset_script)é¡µé¢ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨åŠ è½½è„šæœ¬å®šä¹‰çš„æ•°æ®é›†å¯èƒ½æ— æ³•ä½¿ç”¨ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°æ®é›†æŸ¥çœ‹å™¨ã€‚ç”¨æˆ·è¿˜å¿…é¡»ä¼ é€’`trust_remote_code=True`æ¥åŠ è½½æ•°æ®é›†ã€‚å¦‚æœå¯èƒ½çš„è¯ï¼Œé€šå¸¸å»ºè®®æ•°æ®é›†ä¸è¦ä¾èµ–åŠ è½½è„šæœ¬ï¼Œä»¥ä¾¿ä»Hubçš„æ‰€æœ‰åŠŸèƒ½ä¸­å—ç›Šã€‚

## ä¸Šä¼ huggingface-cli

ä½¿ç”¨`huggingface-cli upload`å‘½ä»¤ç›´æ¥ä¸Šä¼ æ–‡ä»¶åˆ°Hubã€‚åœ¨å†…éƒ¨ï¼Œå®ƒä½¿ç”¨äº†åœ¨[ä¸Šä¼ æŒ‡å—](../huggingface_hub/guides/upload)ä¸­æè¿°çš„ç›¸åŒçš„`upload_file`å’Œ`upload_folder`è¾…åŠ©å‡½æ•°ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»æœ€å¸¸è§çš„ç”¨ä¾‹ã€‚è¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨é€‰é¡¹çš„å®Œæ•´åˆ—è¡¨ï¼Œæ‚¨å¯ä»¥è¿è¡Œï¼š

```py
>>> huggingface-cli upload --help
```

æœ‰å…³`huggingface-cli`çš„æ›´ä¸€èˆ¬ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹[CLIæŒ‡å—](../huggingface_hub/guides/cli)ã€‚

### ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹

æ­¤å‘½ä»¤çš„é»˜è®¤ç”¨æ³•æ˜¯ï¼š

```py
# Usage:  huggingface-cli upload [dataset_repo_id] --repo-type=dataset [local_path] [path_in_repo]
```

è¦åœ¨å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸Šä¼ å½“å‰ç›®å½•ï¼Œè¯·ä½¿ç”¨ï¼š

```py
>>> huggingface-cli upload my-cool-dataset --repo-type=dataset . .
https://huggingface.co/datasets/Wauplin/my-cool-dataset/tree/main/
```

å¦‚æœå­˜å‚¨åº“å°šä¸å­˜åœ¨ï¼Œå°†è‡ªåŠ¨åˆ›å»ºå®ƒã€‚

æ‚¨è¿˜å¯ä»¥ä¸Šä¼ ç‰¹å®šæ–‡ä»¶å¤¹ï¼š

```py
>>> huggingface-cli upload my-cool-dataset --repo-type=dataset ./data .
https://huggingface.co/datasetsWauplin/my-cool-dataset/tree/main/
```

æœ€åï¼Œæ‚¨å¯ä»¥å°†æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°å­˜å‚¨åº“çš„ç‰¹å®šç›®çš„åœ°ï¼š

```py
>>> huggingface-cli upload my-cool-dataset --repo-type=dataset ./path/to/curated/data /data/train
https://huggingface.co/datasetsWauplin/my-cool-dataset/tree/main/data/train
```

### ä¸Šä¼ å•ä¸ªæ–‡ä»¶

æ‚¨è¿˜å¯ä»¥é€šè¿‡å°†`local_path`è®¾ç½®ä¸ºæŒ‡å‘è®¡ç®—æœºä¸Šçš„æ–‡ä»¶æ¥ä¸Šä¼ å•ä¸ªæ–‡ä»¶ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œ`path_in_repo`æ˜¯å¯é€‰çš„ï¼Œå°†é»˜è®¤ä¸ºæ‚¨æœ¬åœ°æ–‡ä»¶çš„åç§°ï¼š

```py
>>> huggingface-cli upload Wauplin/my-cool-dataset --repo-type=dataset ./files/train.csv
https://huggingface.co/datasetsWauplin/my-cool-dataset/blob/main/train.csv
```

å¦‚æœè¦å°†å•ä¸ªæ–‡ä»¶ä¸Šä¼ åˆ°ç‰¹å®šç›®å½•ï¼Œè¯·ç›¸åº”åœ°è®¾ç½®`path_in_repo`ï¼š

```py
>>> huggingface-cli upload Wauplin/my-cool-dataset --repo-type=dataset ./files/train.csv /data/train.csv
https://huggingface.co/datasetsWauplin/my-cool-dataset/blob/main/data/train.csv
```

### ä¸Šä¼ å¤šä¸ªæ–‡ä»¶

è¦ä¸€æ¬¡ä»æ–‡ä»¶å¤¹ä¸Šä¼ å¤šä¸ªæ–‡ä»¶ï¼Œè€Œä¸ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯·ä½¿ç”¨`--include`å’Œ`--exclude`æ¨¡å¼ã€‚ä¹Ÿå¯ä»¥ä¸`--delete`é€‰é¡¹ç»“åˆä½¿ç”¨ï¼Œä»¥åœ¨ä¸Šä¼ æ–°æ–‡ä»¶çš„åŒæ—¶åˆ é™¤å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åˆ é™¤è¿œç¨‹æ–‡ä»¶å¹¶ä¸Šä¼ æ‰€æœ‰CSVæ–‡ä»¶æ¥åŒæ­¥æœ¬åœ°Spaceï¼š

```py
# Sync local Space with Hub (upload new CSV files, delete removed files)
>>> huggingface-cli upload Wauplin/my-cool-dataset --repo-type=dataset --include="/data/*.csv" --delete="*" --commit-message="Sync local dataset with Hub"
...
```

### ä¸Šä¼ åˆ°ç»„ç»‡

è¦å°†å†…å®¹ä¸Šä¼ åˆ°ç»„ç»‡æ‹¥æœ‰çš„å­˜å‚¨åº“è€Œä¸æ˜¯ä¸ªäººå­˜å‚¨åº“ï¼Œå¿…é¡»åœ¨`repo_id`ä¸­æ˜ç¡®æŒ‡å®šï¼š

```py
>>> huggingface-cli upload MyCoolOrganization/my-cool-dataset --repo-type=dataset . .
https://huggingface.co/datasetsMyCoolOrganization/my-cool-dataset/tree/main/
```

### ä¸Šä¼ åˆ°ç‰¹å®šçš„ä¿®è®¢ç‰ˆæœ¬

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶å°†ä¸Šä¼ åˆ°`main`åˆ†æ”¯ã€‚å¦‚æœè¦å°†æ–‡ä»¶ä¸Šä¼ åˆ°å¦ä¸€ä¸ªåˆ†æ”¯æˆ–å¼•ç”¨ï¼Œè¯·ä½¿ç”¨`--revision`é€‰é¡¹ï¼š

```py
# Upload files to a PR
>>> huggingface-cli upload bigcode/the-stack --repo-type dataset -revision refs/pr/104 . .
...
```

**æ³¨æ„ï¼š**å¦‚æœ`revision`ä¸å­˜åœ¨ä¸”æœªè®¾ç½®`--create-pr`ï¼Œå°†è‡ªåŠ¨ä»`main`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ã€‚

### ä¸Šä¼ å¹¶åˆ›å»ºPR

å¦‚æœæ‚¨æ²¡æœ‰æ¨é€åˆ°å­˜å‚¨åº“çš„æƒé™ï¼Œæ‚¨å¿…é¡»æ‰“å¼€ä¸€ä¸ªPRå¹¶è®©ä½œè€…çŸ¥é“æ‚¨æƒ³è¦è¿›è¡Œçš„æ›´æ”¹ã€‚è¿™å¯ä»¥é€šè¿‡è®¾ç½®`--create-pr`é€‰é¡¹æ¥å®Œæˆï¼š

```py
# Create a PR and upload the files to it
>>> huggingface-cli upload bigcode/the-stack --repo-type dataset --revision refs/pr/104 --create-pr . .
https://huggingface.co/datasets/bigcode/the-stack/blob/refs%2Fpr%2F104/
```

### å®šæœŸé—´éš”ä¸Šä¼ 

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å®šæœŸå‘å­˜å‚¨åº“æ¨é€æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„æ•°æ®é›†éšç€æ—¶é—´çš„æ¨ç§»è€Œå¢é•¿ï¼Œå¹¶ä¸”å¸Œæœ›æ¯10åˆ†é’Ÿä¸Šä¼ ä¸€æ¬¡æ•°æ®æ–‡ä»¶å¤¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`--every`é€‰é¡¹ï¼š

```py
# Upload new logs every 10 minutes
huggingface-cli upload my-cool-dynamic-dataset data/ --every=10
```

### æŒ‡å®šæäº¤æ¶ˆæ¯

ä½¿ç”¨`--commit-message`å’Œ`--commit-description`è®¾ç½®è‡ªå®šä¹‰æ¶ˆæ¯å’Œæè¿°ä»¥æ›¿ä»£é»˜è®¤æ¶ˆæ¯

```py
>>> huggingface-cli upload Wauplin/my-cool-dataset ./data . --repo-type dataset --commit-message="Version 2" --commit-description="Train size: 4321\. Check Dataset Viewer for more details."
...
https://huggingface.co/datasetsWauplin/my-cool-dataset/tree/main
```

### æŒ‡å®šä»¤ç‰Œ

è¦ä¸Šä¼ æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ä»¤ç‰Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨æœ¬åœ°ä¿å­˜çš„ä»¤ç‰Œï¼ˆä½¿ç”¨`huggingface-cli login`ï¼‰ã€‚å¦‚æœè¦æ˜ç¡®è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè¯·ä½¿ç”¨`--token`é€‰é¡¹ï¼š

```py
>>> huggingface-cli upload Wauplin/my-cool-dataset ./data . --token=hf_****
...
https://huggingface.co/datasetsWauplin/my-cool-data/tree/main
```

### å®‰é™æ¨¡å¼

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`huggingface-cli upload`å‘½ä»¤å°†æ˜¯å†—é•¿çš„ã€‚å®ƒå°†æ‰“å°è¯¸å¦‚è­¦å‘Šæ¶ˆæ¯ã€æœ‰å…³ä¸Šä¼ æ–‡ä»¶çš„ä¿¡æ¯å’Œè¿›åº¦æ¡ç­‰è¯¦ç»†ä¿¡æ¯ã€‚å¦‚æœè¦å°†æ‰€æœ‰è¿™äº›ä¿¡æ¯é™éŸ³ï¼Œè¯·ä½¿ç”¨`--quiet`é€‰é¡¹ã€‚åªä¼šæ‰“å°æœ€åä¸€è¡Œï¼ˆå³ä¸Šä¼ æ–‡ä»¶çš„URLï¼‰ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†è¾“å‡ºä¼ é€’ç»™è„šæœ¬ä¸­çš„å¦ä¸€ä¸ªå‘½ä»¤ï¼Œåˆ™è¿™å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚

```py
>>> huggingface-cli upload Wauplin/my-cool-dataset ./data . --quiet
https://huggingface.co/datasets/Wauplin/my-cool-dataset/tree/main
```

## äº«å—ï¼

æ­å–œï¼Œæ‚¨çš„æ•°æ®é›†ç°åœ¨å·²ç»ä¸Šä¼ åˆ°Hugging Face Hubï¼Œä»»ä½•äººéƒ½å¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­åŠ è½½å®ƒï¼ğŸ¥³

```py
dataset = load_dataset("Wauplin/my-cool-dataset")
```

å¦‚æœæ‚¨çš„æ•°æ®é›†å—æ”¯æŒï¼Œè¿˜åº”è¯¥æœ‰ä¸€ä¸ª[æ•°æ®é›†æŸ¥çœ‹å™¨](../hub/datasets-viewer)ä¾›æ‰€æœ‰äººæ¢ç´¢æ•°æ®é›†å†…å®¹ã€‚

æœ€åï¼Œè¯·ä¸è¦å¿˜è®°ä¸°å¯Œæ•°æ®é›†å¡ç‰‡ä»¥è®°å½•æ‚¨çš„æ•°æ®é›†å¹¶ä½¿å…¶å¯å‘ç°ï¼æŸ¥çœ‹[åˆ›å»ºæ•°æ®é›†å¡ç‰‡](dataset_card)æŒ‡å—ä»¥äº†è§£æ›´å¤šã€‚
