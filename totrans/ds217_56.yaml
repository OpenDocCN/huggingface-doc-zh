- en: Build and load
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Original text: [https://huggingface.co/docs/datasets/about_dataset_load](https://huggingface.co/docs/datasets/about_dataset_load)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'Nearly every deep learning workflow begins with loading a dataset, which makes
    it one of the most important steps. With ğŸ¤— Datasets, there are more than 900 datasets
    available to help you get started with your NLP task. All you have to do is call:
    [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    to take your first step. This function is a true workhorse in every sense because
    it builds and loads every dataset you use.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: 'ELI5: load_dataset'
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Letâ€™s begin with a basic Explain Like Iâ€™m Five.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
- en: 'A dataset is a directory that contains:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
- en: Some data files in generic formats (JSON, CSV, Parquet, text, etc.)
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A dataset card named `README.md` that contains documentation about the dataset
    as well as a YAML header to define the datasets tags and configurations
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An optional dataset script if it requires some code to read the data files.
    This is sometimes used to load files of specific formats and structures.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    function fetches the requested dataset locally or from the Hugging Face Hub. The
    Hub is a central repository where all the Hugging Face datasets and models are
    stored.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
- en: 'If the dataset only contains data files, then [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    automatically infers how to load the data files from their extensions (json, csv,
    parquet, txt, etc.). Under the hood, ğŸ¤— Datasets will use an appropriate [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder)
    based on the data files format. There exist one builder per data file format in
    ğŸ¤— Datasets:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.text.Text](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.text.Text)
    for text'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.csv.Csv](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.csv.Csv)
    for CSV and TSV'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.json.Json](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.json.Json)
    for JSON and JSONL'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.parquet.Parquet](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.parquet.Parquet)
    for Parquet'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.arrow.Arrow](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.arrow.Arrow)
    for Arrow (streaming file format)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.sql.Sql](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.sql.Sql)
    for SQL databases'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.imagefolder.ImageFolder](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.imagefolder.ImageFolder)
    for image folders'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[datasets.packaged_modules.audiofolder.AudioFolder](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.packaged_modules.audiofolder.AudioFolder)
    for audio folders'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If the dataset has a dataset script, then it downloads and imports it from the
    Hugging Face Hub. Code in the dataset script defines a custom [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder)
    the dataset information (description, features, URL to the original files, etc.),
    and tells ğŸ¤— Datasets how to generate and display examples from it.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: Read the [Share](./upload_dataset) section to learn more about how to share
    a dataset. This section also provides a step-by-step guide on how to write your
    own dataset loading script!
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
- en: ğŸ¤— Datasets downloads the dataset files from the original URL, generates the
    dataset and caches it in an Arrow table on your drive. If youâ€™ve downloaded the
    dataset before, then ğŸ¤— Datasets will reload it from the cache to save you the
    trouble of downloading it again.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: Now that you have a high-level understanding about how datasets are built, letâ€™s
    take a closer look at the nuts and bolts of how all this works.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
- en: Building a dataset
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'When you load a dataset for the first time, ğŸ¤— Datasets takes the raw data file
    and builds it into a table of rows and typed columns. There are two main classes
    responsible for building a dataset: [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    and [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder).'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bd493a651fa07ec8829a2c0ef2818f43.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
- en: BuilderConfig
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    is the configuration class of [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder).
    The [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    contains the following basic attributes about a dataset:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '| Attribute | Description |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
- en: '| `name` | Short name of the dataset. |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
- en: '| `version` | Dataset version identifier. |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
- en: '| `data_dir` | Stores the path to a local folder containing the data files.
    |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
- en: '| `data_files` | Stores paths to local data files. |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
- en: '| `description` | Description of the dataset. |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
- en: 'If you want to add additional attributes to your dataset such as the class
    labels, you can subclass the base [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    class. There are two ways to populate the attributes of a [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    class or subclass:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: Provide a list of predefined [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    class (or subclass) instances in the datasets `DatasetBuilder.BUILDER_CONFIGS()`
    attribute.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: When you call [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset),
    any keyword arguments that are not specific to the method will be used to set
    the associated attributes of the [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    class. This will override the predefined attributes if a specific configuration
    was selected.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can also set the [DatasetBuilder.BUILDER_CONFIG_CLASS](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    to any custom subclass of [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: DatasetBuilder
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder)
    accesses all the attributes inside [BuilderConfig](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.BuilderConfig)
    to build the actual dataset.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/bb7161ccc3fa095689cfa137b5590ded.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
- en: 'There are three main methods in [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder):'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: '`DatasetBuilder._info()` is in charge of defining the dataset attributes. When
    you call `dataset.info`, ğŸ¤— Datasets returns the information stored here. Likewise,
    the [Features](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Features)
    are also specified here. Remember, the [Features](/docs/datasets/v2.17.0/en/package_reference/main_classes#datasets.Features)
    are like the skeleton of the dataset. It provides the names and types of each
    column.'
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '`DatasetBuilder._split_generator` downloads or retrieves the requested data
    files, organizes them into splits, and defines specific arguments for the generation
    process. This method has a [DownloadManager](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DownloadManager)
    that downloads files or fetches them from your local filesystem. Within the [DownloadManager](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DownloadManager),
    there is a [DownloadManager.download_and_extract()](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DownloadManager.download_and_extract)
    method that accepts a dictionary of URLs to the original data files, and downloads
    the requested files. Accepted inputs include: a single URL or path, or a list/dictionary
    of URLs or paths. Any compressed file types like TAR, GZIP and ZIP archives will
    be automatically extracted.'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once the files are downloaded, [SplitGenerator](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.SplitGenerator)
    organizes them into splits. The [SplitGenerator](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.SplitGenerator)
    contains the name of the split, and any keyword arguments that are provided to
    the `DatasetBuilder._generate_examples` method. The keyword arguments can be specific
    to each split, and typically comprise at least the local path to the data files
    for each split.
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: '`DatasetBuilder._generate_examples` reads and parses the data files for a split.
    Then it yields dataset examples according to the format specified in the `features`
    from `DatasetBuilder._info()`. The input of `DatasetBuilder._generate_examples`
    is actually the `filepath` provided in the keyword arguments of the last method.'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The dataset is generated with a Python generator, which doesnâ€™t load all the
    data in memory. As a result, the generator can handle large datasets. However,
    before the generated samples are flushed to the dataset file on disk, they are
    stored in an `ArrowWriter` buffer. This means the generated samples are written
    by batch. If your dataset samples consumes a lot of memory (images or videos),
    then make sure to specify a low value for the `DEFAULT_WRITER_BATCH_SIZE` attribute
    in [DatasetBuilder](/docs/datasets/v2.17.0/en/package_reference/builder_classes#datasets.DatasetBuilder).
    We recommend not exceeding a size of 200 MB.
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
- en: Maintaining integrity
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To ensure a dataset is complete, [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    will perform a series of tests on the downloaded files to make sure everything
    is there. This way, you donâ€™t encounter any surprises when your requested dataset
    doesnâ€™t get generated as expected. [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset)
    verifies:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
- en: The number of splits in the generated `DatasetDict`.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The number of samples in each split of the generated `DatasetDict`.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The list of downloaded files.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The SHA256 checksums of the downloaded files (disabled by defaut).
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If the dataset doesnâ€™t pass the verifications, it is likely that the original
    host of the dataset made some changes in the data files.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: If it is your own dataset, youâ€™ll need to recompute the information above and
    update the `README.md` file in your dataset repository. Take a look at this [section](dataset_script#optional-generate-dataset-metadata)
    to learn how to generate and update this metadata.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
- en: In this case, an error is raised to alert that the dataset has changed. To ignore
    the error, one needs to specify `verification_mode="no_checks"` in [load_dataset()](/docs/datasets/v2.17.0/en/package_reference/loading_methods#datasets.load_dataset).
    Anytime you see a verification error, feel free to open a discussion or pull request
    in the corresponding dataset â€œCommunityâ€ tab, so that the integrity checks for
    that dataset are updated.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: Security
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The dataset repositories on the Hub are scanned for malware, see more information
    [here](https://huggingface.co/docs/hub/security#malware-scanning).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Hubä¸Šçš„æ•°æ®é›†å­˜å‚¨åº“ä¼šè¿›è¡Œæ¶æ„è½¯ä»¶æ‰«æï¼Œæ›´å¤šä¿¡æ¯è¯·å‚è§[è¿™é‡Œ](https://huggingface.co/docs/hub/security#malware-scanning)ã€‚
- en: Moreover the datasets without a namespace (originally contributed on our GitHub
    repository) have all been reviewed by our maintainers. The code of these datasets
    is considered **safe**. It concerns datasets that are not under a namespace, e.g.
    â€œsquadâ€ or â€œglueâ€, unlike the other datasets that are named â€œusername/dataset_nameâ€
    or â€œorg/dataset_nameâ€.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œæ²¡æœ‰å‘½åç©ºé—´çš„æ•°æ®é›†ï¼ˆæœ€åˆåœ¨æˆ‘ä»¬çš„GitHubå­˜å‚¨åº“ä¸Šè´¡çŒ®ï¼‰å·²ç»ç”±æˆ‘ä»¬çš„ç»´æŠ¤äººå‘˜è¿›è¡Œäº†å®¡æ ¸ã€‚è¿™äº›æ•°æ®é›†çš„ä»£ç è¢«è®¤ä¸ºæ˜¯**å®‰å…¨**çš„ã€‚è¿™æ¶‰åŠåˆ°æ²¡æœ‰å‘½åç©ºé—´çš„æ•°æ®é›†ï¼Œä¾‹å¦‚â€œsquadâ€æˆ–â€œglueâ€ï¼Œä¸åŒäºå…¶ä»–è¢«å‘½åä¸ºâ€œusername/dataset_nameâ€æˆ–â€œorg/dataset_nameâ€çš„æ•°æ®é›†ã€‚
