# å¯¼å‡ºåˆ° TFLite

> åŸå§‹æ–‡æœ¬ï¼š[`huggingface.co/docs/transformers/v4.37.2/en/tflite`](https://huggingface.co/docs/transformers/v4.37.2/en/tflite)

[TensorFlow Lite](https://www.tensorflow.org/lite/guide) æ˜¯ä¸€ä¸ªè½»é‡çº§æ¡†æ¶ï¼Œç”¨äºåœ¨èµ„æºå—é™çš„è®¾å¤‡ä¸Šéƒ¨ç½²æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä¾‹å¦‚ç§»åŠ¨ç”µè¯ã€åµŒå…¥å¼ç³»ç»Ÿå’Œç‰©è”ç½‘ï¼ˆIoTï¼‰è®¾å¤‡ã€‚TFLite æ—¨åœ¨ä¼˜åŒ–å¹¶åœ¨è¿™äº›è®¡ç®—èƒ½åŠ›ã€å†…å­˜å’ŒåŠŸè€—æœ‰é™çš„è®¾å¤‡ä¸Šé«˜æ•ˆè¿è¡Œæ¨¡å‹ã€‚TensorFlow Lite æ¨¡å‹ä»¥ä¸€ç§ç‰¹æ®Šçš„é«˜æ•ˆå¯ç§»æ¤æ ¼å¼è¡¨ç¤ºï¼Œé€šè¿‡ `.tflite` æ–‡ä»¶æ‰©å±•åè¿›è¡Œè¯†åˆ«ã€‚

ğŸ¤— Optimum æä¾›äº†é€šè¿‡ `exporters.tflite` æ¨¡å—å°† ğŸ¤— Transformers æ¨¡å‹å¯¼å‡ºåˆ° TFLite çš„åŠŸèƒ½ã€‚æœ‰å…³æ”¯æŒçš„æ¨¡å‹æ¶æ„åˆ—è¡¨ï¼Œè¯·å‚è€ƒ [ğŸ¤— Optimum æ–‡æ¡£](https://huggingface.co/docs/optimum/exporters/tflite/overview)ã€‚

è¦å°†æ¨¡å‹å¯¼å‡ºåˆ° TFLiteï¼Œè¯·å®‰è£…æ‰€éœ€çš„ä¾èµ–é¡¹ï¼š

```py
pip install optimum[exporters-tf]
```

è¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‚æ•°ï¼Œè¯·å‚è€ƒ [ğŸ¤— Optimum æ–‡æ¡£](https://huggingface.co/docs/optimum/main/en/exporters/tflite/usage_guides/export_a_model)ï¼Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­æŸ¥çœ‹å¸®åŠ©ï¼š

```py
optimum-cli export tflite --help
```

ä¾‹å¦‚ï¼Œè¦ä» ğŸ¤— Hub å¯¼å‡ºæ¨¡å‹çš„æ£€æŸ¥ç‚¹ï¼Œæ¯”å¦‚ `bert-base-uncased`ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```py
optimum-cli export tflite --model bert-base-uncased --sequence_length 128 bert_tflite/
```

æ‚¨åº”è¯¥çœ‹åˆ°æŒ‡ç¤ºè¿›åº¦å¹¶æ˜¾ç¤ºç»“æœ `model.tflite` ä¿å­˜ä½ç½®çš„æ—¥å¿—ã€‚

```py
Validating TFLite model...
	-[âœ“] TFLite model output names match reference model (logits)
	- Validating TFLite Model output "logits":
		-[âœ“] (1, 128, 30522) matches (1, 128, 30522)
		-[x] values not close enough, max diff: 5.817413330078125e-05 (atol: 1e-05)
The TensorFlow Lite export succeeded with the warning: The maximum absolute difference between the output of the reference model and the TFLite exported model is not within the set tolerance 1e-05:
- logits: max diff = 5.817413330078125e-05.
 The exported model was saved at: bert_tflite
```

ä¸Šé¢çš„ç¤ºä¾‹è¯´æ˜äº†ä» ğŸ¤— Hub å¯¼å‡ºæ£€æŸ¥ç‚¹ã€‚åœ¨å¯¼å‡ºæœ¬åœ°æ¨¡å‹æ—¶ï¼Œé¦–å…ˆç¡®ä¿æ‚¨å°†æ¨¡å‹çš„æƒé‡å’Œåˆ†è¯å™¨æ–‡ä»¶ä¿å­˜åœ¨åŒä¸€ä¸ªç›®å½•ï¼ˆ`local_path`ï¼‰ä¸­ã€‚åœ¨ä½¿ç”¨ CLI æ—¶ï¼Œå°† `local_path` ä¼ é€’ç»™ `model` å‚æ•°ï¼Œè€Œä¸æ˜¯åœ¨ ğŸ¤— Hub ä¸Šçš„æ£€æŸ¥ç‚¹åç§°ã€‚
