# ç¨³å®šæ‰©æ•£ç®¡é“

> åŸå§‹æ–‡æœ¬ï¼š[`huggingface.co/docs/diffusers/api/pipelines/stable_diffusion/overview`](https://huggingface.co/docs/diffusers/api/pipelines/stable_diffusion/overview)

ç¨³å®šæ‰©æ•£æ˜¯ç”±[CompVis](https://github.com/CompVis)ã€[Stability AI](https://stability.ai/)å’Œ[LAION](https://laion.ai/)çš„ç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆåˆ›å»ºçš„æ–‡æœ¬åˆ°å›¾åƒæ½œåœ¨æ‰©æ•£æ¨¡å‹ã€‚æ½œåœ¨æ‰©æ•£å°†æ‰©æ•£è¿‡ç¨‹åº”ç”¨äºè¾ƒä½ç»´åº¦çš„æ½œåœ¨ç©ºé—´ï¼Œä»¥å‡å°‘å†…å­˜å’Œè®¡ç®—å¤æ‚æ€§ã€‚è¿™ç§ç‰¹å®šç±»å‹çš„æ‰©æ•£æ¨¡å‹æ˜¯ç”± Robin Rombachã€Andreas Blattmannã€Dominik Lorenzã€Patrick Esserã€BjÃ¶rn Ommer åœ¨ã€Šä½¿ç”¨æ½œåœ¨æ‰©æ•£æ¨¡å‹è¿›è¡Œé«˜åˆ†è¾¨ç‡å›¾åƒåˆæˆã€‹ä¸­æå‡ºçš„ã€‚

ç¨³å®šæ‰©æ•£æ˜¯åœ¨ LAION-5B æ•°æ®é›†çš„ 512x512 å›¾åƒä¸Šè®­ç»ƒçš„ã€‚è¯¥æ¨¡å‹ä½¿ç”¨å†»ç»“çš„ CLIP ViT-L/14 æ–‡æœ¬ç¼–ç å™¨æ¥æ ¹æ®æ–‡æœ¬æç¤ºå¯¹æ¨¡å‹è¿›è¡Œæ¡ä»¶åŒ–ã€‚è¯¥æ¨¡å‹å…·æœ‰ 860M çš„ UNet å’Œ 123M çš„æ–‡æœ¬ç¼–ç å™¨ï¼Œç›¸å¯¹è½»é‡çº§ï¼Œå¯ä»¥åœ¨æ¶ˆè´¹è€… GPU ä¸Šè¿è¡Œã€‚

æœ‰å…³ç¨³å®šæ‰©æ•£çš„å·¥ä½œåŸç†åŠå…¶ä¸åŸºæœ¬æ½œåœ¨æ‰©æ•£æ¨¡å‹çš„åŒºåˆ«çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ Stability AI çš„[å…¬å‘Š](https://stability.ai/blog/stable-diffusion-announcement)å’Œæˆ‘ä»¬è‡ªå·±çš„[åšå®¢æ–‡ç« ](https://huggingface.co/blog/stable_diffusion#how-does-stable-diffusion-work)ä»¥è·å–æ›´å¤šæŠ€æœ¯ç»†èŠ‚ã€‚

æ‚¨å¯ä»¥åœ¨[CompVis/stable-diffusion](https://github.com/CompVis/stable-diffusion)æ‰¾åˆ°ç¨³å®šæ‰©æ•£ v1.0 çš„åŸå§‹ä»£ç åº“ï¼Œä»¥åŠåœ¨[Stability-AI/stablediffusion](https://github.com/Stability-AI/stablediffusion)æ‰¾åˆ°ç¨³å®šæ‰©æ•£ v2.0 çš„åŸå§‹ä»£ç åº“ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„å„ç§ä»»åŠ¡çš„åŸå§‹è„šæœ¬ã€‚ä¸åŒç¨³å®šæ‰©æ•£ç‰ˆæœ¬å’Œä»»åŠ¡çš„é¢å¤–å®˜æ–¹æ£€æŸ¥ç‚¹å¯ä»¥åœ¨[CompVis](https://huggingface.co/CompVis)ã€[Runway](https://huggingface.co/runwayml)å’Œ[Stability AI](https://huggingface.co/stabilityai) Hub ç»„ç»‡ä¸­æ‰¾åˆ°ã€‚æ¢ç´¢è¿™äº›ç»„ç»‡ï¼Œæ‰¾åˆ°é€‚åˆæ‚¨ç”¨ä¾‹çš„æœ€ä½³æ£€æŸ¥ç‚¹ï¼

ä¸‹è¡¨æ€»ç»“äº†å¯ç”¨çš„ç¨³å®šæ‰©æ•£ç®¡é“ã€å®ƒä»¬æ”¯æŒçš„ä»»åŠ¡ä»¥åŠäº¤äº’å¼æ¼”ç¤ºï¼š

| ç®¡é“ | æ”¯æŒçš„ä»»åŠ¡ | ğŸ¤— ç©ºé—´ |
| --- | --- | --- |
| StableDiffusion | æ–‡æœ¬åˆ°å›¾åƒ | ![](https://huggingface.co/spaces/stabilityai/stable-diffusion) |
| StableDiffusionImg2Img | å›¾åƒåˆ°å›¾åƒ | ![](https://huggingface.co/spaces/huggingface/diffuse-the-rest) |
| StableDiffusionInpaint | è¡¥å…¨ | ![](https://huggingface.co/spaces/runwayml/stable-diffusion-inpainting) |
| StableDiffusionDepth2Img | æ·±åº¦åˆ°å›¾åƒ | ![](https://huggingface.co/spaces/radames/stable-diffusion-depth2img) |
| StableDiffusionImageVariation | å›¾åƒå˜åŒ– | ![](https://huggingface.co/spaces/lambdalabs/stable-diffusion-image-variations) |
| StableDiffusionPipelineSafe | è¿‡æ»¤çš„æ–‡æœ¬åˆ°å›¾åƒ | ![](https://huggingface.co/spaces/AIML-TUDA/unsafe-vs-safe-stable-diffusion) |
| StableDiffusion2 | æ–‡æœ¬åˆ°å›¾åƒã€è¡¥å…¨ã€æ·±åº¦åˆ°å›¾åƒã€è¶…åˆ†è¾¨ç‡ | ![](https://huggingface.co/spaces/stabilityai/stable-diffusion) |
| StableDiffusionXL | æ–‡æœ¬åˆ°å›¾åƒã€å›¾åƒåˆ°å›¾åƒ | ![](https://huggingface.co/spaces/RamAnanth1/stable-diffusion-xl) |
| StableDiffusionLatentUpscale | è¶…åˆ†è¾¨ç‡ | ![](https://huggingface.co/spaces/huggingface-projects/stable-diffusion-latent-upscaler) |
| StableDiffusionUpscale | è¶…åˆ†è¾¨ç‡ |
| StableDiffusionLDM3D | æ–‡æœ¬åˆ° RGBï¼Œæ–‡æœ¬åˆ°æ·±åº¦ï¼Œæ–‡æœ¬åˆ°å…¨æ™¯ | ![](https://huggingface.co/spaces/r23/ldm3d-space) |
| StableDiffusionUpscaleLDM3D | ldm3d è¶…åˆ†è¾¨ç‡ |

## æç¤º

ä¸ºäº†å¸®åŠ©æ‚¨å……åˆ†åˆ©ç”¨ç¨³å®šæ‰©æ•£ç®¡é“ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ”¹å–„æ€§èƒ½å’Œå¯ç”¨æ€§çš„æç¤ºã€‚è¿™äº›æç¤ºé€‚ç”¨äºæ‰€æœ‰ç¨³å®šæ‰©æ•£ç®¡é“ã€‚

### åœ¨é€Ÿåº¦å’Œè´¨é‡ä¹‹é—´è¿›è¡Œæƒè¡¡

StableDiffusionPipeline é»˜è®¤ä½¿ç”¨ PNDMSchedulerï¼Œä½†ğŸ¤— Diffusers æä¾›è®¸å¤šå…¶ä»–è°ƒåº¦å™¨ï¼ˆå…¶ä¸­ä¸€äº›æ›´å¿«æˆ–è¾“å‡ºè´¨é‡æ›´å¥½ï¼‰ï¼Œè¿™äº›è°ƒåº¦å™¨æ˜¯å…¼å®¹çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ä½¿ç”¨ EulerDiscreteScheduler è€Œä¸æ˜¯é»˜è®¤å€¼ï¼š

```py
from diffusers import StableDiffusionPipeline, EulerDiscreteScheduler

pipeline = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v1-4")
pipeline.scheduler = EulerDiscreteScheduler.from_config(pipeline.scheduler.config)

# or
euler_scheduler = EulerDiscreteScheduler.from_pretrained("CompVis/stable-diffusion-v1-4", subfolder="scheduler")
pipeline = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v1-4", scheduler=euler_scheduler)
```

### é‡å¤ä½¿ç”¨ç®¡é“ç»„ä»¶ä»¥èŠ‚çœå†…å­˜

ä¸ºäº†èŠ‚çœå†…å­˜å¹¶åœ¨å¤šä¸ªç®¡é“ä¸­ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶ï¼Œè¯·ä½¿ç”¨`.components`æ–¹æ³•ï¼Œä»¥é¿å…å°†æƒé‡åŠ è½½åˆ° RAM ä¸­è¶…è¿‡ä¸€æ¬¡ã€‚

```py
from diffusers import (
    StableDiffusionPipeline,
    StableDiffusionImg2ImgPipeline,
    StableDiffusionInpaintPipeline,
)

text2img = StableDiffusionPipeline.from_pretrained("CompVis/stable-diffusion-v1-4")
img2img = StableDiffusionImg2ImgPipeline(**text2img.components)
inpaint = StableDiffusionInpaintPipeline(**text2img.components)

# now you can use text2img(...), img2img(...), inpaint(...) just like the call methods of each respective pipeline
```
