# åˆ©ç”¨ pipeline è¿›è¡ŒéŸ³é¢‘åˆ†ç±»

> åŸæ–‡ï¼š[`huggingface.co/learn/audio-course/zh-CN/chapter2/audio_classification_pipeline`](https://huggingface.co/learn/audio-course/zh-CN/chapter2/audio_classification_pipeline)

            

éŸ³é¢‘åˆ†ç±»ä»»åŠ¡éœ€è¦æ ¹æ®éŸ³é¢‘çš„å†…å®¹å¯¹å…¶è¿›è¡Œå•ä¸ªå’Œå¤šä¸ªæ ‡ç­¾çš„è¯†åˆ«ã€‚è¿™äº›æ ‡ç­¾å¯ä»¥ä»£è¡¨ä¸åŒçš„å£°éŸ³ç±»åˆ«ï¼Œå¦‚éŸ³ä¹ã€è¯­éŸ³æˆ–å™ªéŸ³ï¼Œä¹Ÿå¯ä»¥ä»£è¡¨æ›´ç»†åˆ†çš„åˆ†ç±»ï¼Œå¦‚é¸Ÿå«å£°å’Œå¼•æ“å£°ç­‰ã€‚

åœ¨æ·±å…¥äº†è§£éŸ³é¢‘ Transformer çš„ç»†èŠ‚å’Œå¾®è°ƒï¼ˆfine-tuningï¼‰ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ğŸ¤— Transformers å’Œç°æˆçš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œåœ¨å‡ è¡Œä»£ç ä¸­æ„å»ºä¸€ä¸ªéŸ³é¢‘åˆ†ç±»å™¨ã€‚

æˆ‘ä»¬ä½¿ç”¨å’Œå‰å‡ ä¸ªå•å…ƒç›¸åŒçš„[MINDS-14](https://huggingface.co/datasets/PolyAI/minds14) æ•°æ®é›†ã€‚å›å¿†ä¸€ä¸‹ï¼ŒMINDS-14 æ•°æ®é›†çš„å†…å®¹æ˜¯è®¸å¤šä¸åŒè¯­è¨€å’Œæ–¹è¨€çš„ä½¿ç”¨è€…å‘ä¸€ä¸ªç½‘é“¶ç³»ç»Ÿæé—®çš„å½•éŸ³ã€‚å…¶æ ‡ç­¾åŒ…å«äº†`intent_class`ï¼Œè®°å½•äº†è¯¥æ¬¡å¯¹è¯çš„ç›®çš„ã€‚dataset that you have explored

å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆåŠ è½½`en-AU`å­é›†æ¥æµ‹è¯•æˆ‘ä»¬çš„ pipelineï¼Œå°†å…¶ä¸Šé‡‡æ ·è‡³éŸ³é¢‘æ¨¡å‹å¸¸è§çš„ 16 åƒèµ«å…¹é‡‡æ ·ç‡ã€‚

```py
from datasets import load_dataset
from datasets import Audio

minds = load_dataset("PolyAI/minds14", name="en-AU", split="train")
minds = minds.cast_column("audio", Audio(sampling_rate=16_000))
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ğŸ¤— Transformers ä¸­çš„`audio-classification` pipeline æ¥æ„å»ºä¸€ä¸ªå°†éŸ³é¢‘åˆ†å…¥ä¸€ä¸ªç±»åˆ«é›†çš„ä»»åŠ¡ã€‚åœ¨æˆ‘ä»¬çš„è®¾å®šä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå·²ç»é’ˆå¯¹éŸ³é¢‘çš„ç›®çš„åˆ†ç±»åœ¨ MINDS-14 æ•°æ®é›†ä¸Šå¾®è°ƒè¿‡çš„æ¨¡å‹ã€‚è¿æ°”å¥½çš„æ˜¯ï¼Œåœ¨ğŸ¤— Hub ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªè¿™æ ·çš„æ¨¡å‹ï¼è®©æˆ‘ä»¬ä½¿ç”¨`pipeline()`å‡½æ•°æ¥åŠ è½½è¯¥æ¨¡å‹ï¼š

```py
from transformers import pipeline

classifier = pipeline(
    "audio-classification",
    model="anton-l/xtreme_s_xlsr_300m_minds14",
)
```

è¿™ä¸ª pipeline éœ€è¦ä»¥ NumPy æ•°ç»„å½¢å¼è¾“å…¥çš„éŸ³é¢‘æ•°æ®ã€‚å¯¹äºåŸå§‹éŸ³é¢‘æ•°æ®çš„é¢„å¤„ç†æ“ä½œåˆ™å·²ç»åŒ…å«åœ¨äº†è¯¥ pipeline ä¸­ã€‚è®©æˆ‘ä»¬æ‹¿ä¸€ä¸ªæ ·æœ¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š

```py
example = minds[0]
```

å›å¿†ä¸€ä¸‹æ•°æ®é›†çš„ç»“æ„ï¼Œæˆ‘ä»¬çš„åŸå§‹éŸ³é¢‘æ•°æ®æ˜¯ä»¥ NumPy æ•°ç»„çš„å½¢å¼å­˜å‚¨åœ¨`["audio"]["array"]`ä¸­çš„ã€‚æˆ‘ä»¬å°†å…¶ç›´æ¥ä¼ é€’ç»™`classifier`:

```py
classifier(example["audio"]["array"])
```

**è¾“å‡ºï¼š**

```py
[
    {"score": 0.9631525278091431, "label": "pay_bill"},
    {"score": 0.02819698303937912, "label": "freeze"},
    {"score": 0.0032787492964416742, "label": "card_issues"},
    {"score": 0.0019414445850998163, "label": "abroad"},
    {"score": 0.0008378693601116538, "label": "high_value_payment"},
]
```

æ¨¡å‹éå¸¸ç¡®ä¿¡ï¼Œåœ¨è¿™ä¸ªæ ·æœ¬ä¸­ï¼Œé¡¾å®¢çš„ç›®çš„æ˜¯äº†è§£å…³äºè´¦å•çš„ä¿¡æ¯ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥æ ·æœ¬çš„çœŸå®æ ‡ç­¾ï¼š

```py
id2label = minds.features["intent_class"].int2str
id2label(example["intent_class"])
```

**è¾“å‡º**

```py
"pay_bill"
```

å¥½è€¶ï¼æ¨¡å‹é¢„æµ‹æ­£ç¡®ï¼æˆ‘ä»¬å¾ˆå¹¸è¿åœ°æ‰¾åˆ°äº†ä¸€ä¸ªé¢„æµ‹æ ‡ç­¾å’Œæˆ‘ä»¬éœ€è¦çš„æ ‡ç­¾å®Œå…¨ç›¸åŒçš„é¢„è®­ç»ƒæ¨¡å‹ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ‰€æ‰¾çš„é¢„è®­ç»ƒæ¨¡å‹å¯ä»¥é¢„æµ‹çš„æ ‡ç­¾é›†å’Œæˆ‘ä»¬æ‰€éœ€è¦çš„æ ‡ç­¾é›†ä¸ä¼šå®Œå…¨ç›¸åŒã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¯¥é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼ˆfine-tuningï¼‰ï¼Œæ¥å°†å…¶â€œæ ¡å‡†â€åˆ°æˆ‘ä»¬éœ€è¦çš„æ ‡ç­¾é›†ä¸Šã€‚æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„å•å…ƒä¸­ä¼šå­¦åˆ°å¾®è°ƒç›¸å…³çš„çŸ¥è¯†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦ä¸€ä¸ªè¯­éŸ³å¤„ç†ä¸­å¸¸è§çš„ä»»åŠ¡ï¼Œ*è‡ªåŠ¨è¯­éŸ³è¯†åˆ«*ã€‚