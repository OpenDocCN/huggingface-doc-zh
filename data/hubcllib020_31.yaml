- en: Mixins & serialization methods
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 混合和序列化方法
- en: 'Original text: [https://huggingface.co/docs/huggingface_hub/package_reference/mixins](https://huggingface.co/docs/huggingface_hub/package_reference/mixins)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '原始文本: [https://huggingface.co/docs/huggingface_hub/package_reference/mixins](https://huggingface.co/docs/huggingface_hub/package_reference/mixins)'
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Mixins
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 混合
- en: The `huggingface_hub` library offers a range of mixins that can be used as a
    parent class for your objects, in order to provide simple uploading and downloading
    functions. Check out our [integration guide](../guides/integrations) to learn
    how to integrate any ML framework with the Hub.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`huggingface_hub` 库提供了一系列可以用作对象父类的混合，以提供简单的上传和下载功能。查看我们的 [集成指南](../guides/integrations)
    了解如何将任何 ML 框架与 Hub 集成。'
- en: Generic
  id: totrans-5
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通用
- en: '### `class huggingface_hub.ModelHubMixin`'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class huggingface_hub.ModelHubMixin`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L21)'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L21)'
- en: '[PRE0]'
  id: totrans-8
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A generic mixin to integrate ANY machine learning framework with the Hub.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 一个通用的混合，用于将任何机器学习框架与 Hub 集成。
- en: To integrate your framework, your model class must inherit from this class.
    Custom logic for saving/loading models have to be overwritten in `_from_pretrained`
    and `_save_pretrained`. [PyTorchModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.PyTorchModelHubMixin)
    is a good example of mixin integration with the Hub. Check out our [integration
    guide](../guides/integrations) for more instructions.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要集成您的框架，您的模型类必须继承自此类。自定义保存/加载模型的逻辑必须在 `_from_pretrained` 和 `_save_pretrained`
    中进行重写。[PyTorchModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.PyTorchModelHubMixin)
    是与 Hub 集成的混合示例。查看我们的 [集成指南](../guides/integrations) 获取更多说明。
- en: '#### `_save_pretrained`'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `_save_pretrained`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L74)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L74)'
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Parameters
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`save_directory` (`str` or `Path`) — Path to directory in which the model weights
    and configuration will be saved.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`save_directory` (`str` 或 `Path`) — 模型权重和配置将保存在的目录路径。'
- en: Overwrite this method in subclass to define how to save your model. Check out
    our [integration guide](../guides/integrations) for instructions.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在子类中重写此方法以定义如何保存模型。查看我们的 [集成指南](../guides/integrations) 获取说明。
- en: '#### `_from_pretrained`'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '`_from_pretrained`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L169)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L169)'
- en: '[PRE2]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Parameters
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`model_id` (`str`) — ID of the model to load from the Huggingface Hub (e.g.
    `bigscience/bloom`).'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_id` (`str`) — 从 Huggingface Hub 加载的模型的 ID（例如 `bigscience/bloom`）。'
- en: '`revision` (`str`, *optional*) — Revision of the model on the Hub. Can be a
    branch name, a git tag or any commit id. Defaults to the latest commit on `main`
    branch.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`revision` (`str`, *optional*) — Hub 上模型的修订版本。可以是分支名称、git 标签或任何提交 ID。默认为 `main`
    分支上的最新提交。'
- en: '`force_download` (`bool`, *optional*, defaults to `False`) — Whether to force
    (re-)downloading the model weights and configuration files from the Hub, overriding
    the existing cache.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`force_download` (`bool`, *optional*, 默认为 `False`) — 是否强制（重新）从 Hub 下载模型权重和配置文件，覆盖现有缓存。'
- en: '`resume_download` (`bool`, *optional*, defaults to `False`) — Whether to delete
    incompletely received files. Will attempt to resume the download if such a file
    exists.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`resume_download` (`bool`, *optional*, 默认为 `False`) — 是否删除接收不完整的文件。如果存在这样的文件，将尝试恢复下载。'
- en: '`proxies` (`Dict[str, str]`, *optional*) — A dictionary of proxy servers to
    use by protocol or endpoint (e.g., `{''http'': ''foo.bar:3128'', ''http://hostname'':
    ''foo.bar:4012''}`).'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`proxies` (`Dict[str, str]`, *optional*) — 用于按协议或端点使用的代理服务器字典（例如，`{''http'':
    ''foo.bar:3128'', ''http://hostname'': ''foo.bar:4012''}`）。'
- en: '`token` (`str` or `bool`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. By default, it will use the token cached when running `huggingface-cli
    login`.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token` (`str` 或 `bool`, *optional*) — 用作远程文件的 HTTP bearer 授权的令牌。默认情况下，将使用运行
    `huggingface-cli login` 时缓存的令牌。'
- en: '`cache_dir` (`str`, `Path`, *optional*) — Path to the folder where cached files
    are stored.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cache_dir` (`str`, `Path`, *optional*) — 存储缓存文件的文件夹路径。'
- en: '`local_files_only` (`bool`, *optional*, defaults to `False`) — If `True`, avoid
    downloading the file and return the path to the local cached file if it exists.
    model_kwargs — Additional keyword arguments passed along to the [_from_pretrained()](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin._from_pretrained)
    method.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`local_files_only` (`bool`, *optional*, 默认为 `False`) — 如果为 `True`，则避免下载文件，并返回本地缓存文件的路径（如果存在）。model_kwargs
    — 传递给 [_from_pretrained()](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin._from_pretrained)
    方法的额外关键字参数。'
- en: Overwrite this method in subclass to define how to load your model from pretrained.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在子类中重写此方法以定义如何从预训练加载模型。
- en: Use [hf_hub_download()](/docs/huggingface_hub/v0.20.3/en/package_reference/file_download#huggingface_hub.hf_hub_download)
    or [snapshot_download()](/docs/huggingface_hub/v0.20.3/en/package_reference/file_download#huggingface_hub.snapshot_download)
    to download files from the Hub before loading them. Most args taken as input can
    be directly passed to those 2 methods. If needed, you can add more arguments to
    this method using “model_kwargs”. For example `PyTorchModelHubMixin._from_pretrained()`
    takes as input a `map_location` parameter to set on which device the model should
    be loaded.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 [hf_hub_download()](/docs/huggingface_hub/v0.20.3/en/package_reference/file_download#huggingface_hub.hf_hub_download)
    或 [snapshot_download()](/docs/huggingface_hub/v0.20.3/en/package_reference/file_download#huggingface_hub.snapshot_download)
    在加载之前从 Hub 下载文件。大多数输入参数可以直接传递给这两种方法。如果需要，可以使用“model_kwargs”向此方法添加更多参数。例如 `PyTorchModelHubMixin._from_pretrained()`
    接受一个 `map_location` 参数，用于设置模型应加载到哪个设备上。
- en: Check out our [integration guide](../guides/integrations) for more instructions.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 查看我们的 [集成指南](../guides/integrations) 获取更多说明。
- en: '#### `from_pretrained`'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `from_pretrained`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L85)'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L85)'
- en: '[PRE3]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`pretrained_model_name_or_path` (`str`, `Path`) —'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pretrained_model_name_or_path` (`str`, `Path`) —'
- en: Either the `model_id` (string) of a model hosted on the Hub, e.g. `bigscience/bloom`.
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_id` (字符串) — 在 Hub 上托管的模型的 `model_id`，例如 `bigscience/bloom`。'
- en: Or a path to a `directory` containing model weights saved using [save_pretrained](https://huggingface.co/docs/transformers/v4.36.2/en/main_classes/model#transformers.PreTrainedModel.save_pretrained),
    e.g., `../path/to/my_model_directory/`.
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或者是指向包含使用 [save_pretrained](https://huggingface.co/docs/transformers/v4.36.2/en/main_classes/model#transformers.PreTrainedModel.save_pretrained)
    保存的模型权重的 `directory` 的路径，例如 `../path/to/my_model_directory/`。
- en: '`revision` (`str`, *optional*) — Revision of the model on the Hub. Can be a
    branch name, a git tag or any commit id. Defaults to the latest commit on `main`
    branch.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`revision` (`str`, *optional*) — 模型在 Hub 上的修订版本。可以是分支名称、git 标签或任何提交 ID。默认为
    `main` 分支上的最新提交。'
- en: '`force_download` (`bool`, *optional*, defaults to `False`) — Whether to force
    (re-)downloading the model weights and configuration files from the Hub, overriding
    the existing cache.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`force_download` (`bool`, *optional*, 默认为 `False`) — 是否强制（重新）从 Hub 下载模型权重和配置文件，覆盖现有缓存。'
- en: '`resume_download` (`bool`, *optional*, defaults to `False`) — Whether to delete
    incompletely received files. Will attempt to resume the download if such a file
    exists.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`resume_download` (`bool`, *optional*, 默认为 `False`) — 是否删除接收不完整的文件。如果存在这样的文件，将尝试恢复下载。'
- en: '`proxies` (`Dict[str, str]`, *optional*) — A dictionary of proxy servers to
    use by protocol or endpoint, e.g., `{''http'': ''foo.bar:3128'', ''http://hostname'':
    ''foo.bar:4012''}`. The proxies are used on every request.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`proxies` (`Dict[str, str]`, *optional*) — 要在每个请求上使用的代理服务器的协议或端点的字典，例如 `{''http'':
    ''foo.bar:3128'', ''http://hostname'': ''foo.bar:4012''}`。代理将用于每个请求。'
- en: '`token` (`str` or `bool`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. By default, it will use the token cached when running `huggingface-cli
    login`.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token` (`str` 或 `bool`, *optional*) — 用作远程文件的 HTTP bearer 授权的令牌。默认情况下，它将使用运行
    `huggingface-cli login` 时缓存的令牌。'
- en: '`cache_dir` (`str`, `Path`, *optional*) — Path to the folder where cached files
    are stored.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cache_dir` (`str`, `Path`, *optional*) — 存储缓存文件的文件夹路径。'
- en: '`local_files_only` (`bool`, *optional*, defaults to `False`) — If `True`, avoid
    downloading the file and return the path to the local cached file if it exists.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`local_files_only` (`bool`, *optional*, 默认为 `False`) — 如果为 `True`，则避免下载文件并返回本地缓存文件的路径（如果存在）。'
- en: '`model_kwargs` (`Dict`, *optional*) — Additional kwargs to pass to the model
    during initialization.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_kwargs` (`Dict`, *optional*) — 传递给模型在初始化期间的额外 kwargs。'
- en: Download a model from the Huggingface Hub and instantiate it.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Huggingface Hub 下载模型并实例化。
- en: '#### `push_to_hub`'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `push_to_hub`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L218)'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L218)'
- en: '[PRE4]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Parameters
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`repo_id` (`str`) — ID of the repository to push to (example: `"username/my-model"`).'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`repo_id` (`str`) — 要推送到的存储库的 ID（示例："username/my-model"）。'
- en: '`config` (`dict`, *optional*) — Configuration object to be saved alongside
    the model weights.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config` (`dict`, *optional*) — 要与模型权重一起保存的配置对象。'
- en: '`commit_message` (`str`, *optional*) — Message to commit while pushing.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`commit_message` (`str`, *optional*) — 推送时要提交的消息。'
- en: '`private` (`bool`, *optional*, defaults to `False`) — Whether the repository
    created should be private.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`private` (`bool`, *optional*, 默认为 `False`) — 创建的存储库是否应为私有。'
- en: '`api_endpoint` (`str`, *optional*) — The API endpoint to use when pushing the
    model to the hub.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`api_endpoint` (`str`, *optional*) — 推送模型到 Hub 时要使用的 API 端点。'
- en: '`token` (`str`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. By default, it will use the token cached when running `huggingface-cli
    login`.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token` (`str`, *optional*) — 用作远程文件的 HTTP bearer 授权的令牌。默认情况下，它将使用运行 `huggingface-cli
    login` 时缓存的令牌。'
- en: '`branch` (`str`, *optional*) — The git branch on which to push the model. This
    defaults to `"main"`.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`branch` (`str`, *optional*) — 要推送模型的 git 分支。默认为 `"main"`。'
- en: '`create_pr` (`boolean`, *optional*) — Whether or not to create a Pull Request
    from `branch` with that commit. Defaults to `False`.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`create_pr` (`boolean`, *optional*) — 是否从 `branch` 创建一个 Pull Request。默认为 `False`。'
- en: '`allow_patterns` (`List[str]` or `str`, *optional*) — If provided, only files
    matching at least one pattern are pushed.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`allow_patterns` (`List[str]` 或 `str`, *optional*) — 如果提供，只有至少匹配一个模式的文件才会被推送。'
- en: '`ignore_patterns` (`List[str]` or `str`, *optional*) — If provided, files matching
    any of the patterns are not pushed.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ignore_patterns` (`List[str]` 或 `str`, *optional*) — 如果提供，与任何模式匹配的文件将不会被推送。'
- en: '`delete_patterns` (`List[str]` or `str`, *optional*) — If provided, remote
    files matching any of the patterns will be deleted from the repo.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`delete_patterns` (`List[str]` 或 `str`, *optional*) — 如果提供，与任何模式匹配的远程文件将从存储库中删除。'
- en: Upload model checkpoint to the Hub.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 上传模型检查点到 Hub。
- en: Use `allow_patterns` and `ignore_patterns` to precisely filter which files should
    be pushed to the hub. Use `delete_patterns` to delete existing remote files in
    the same commit. See [upload_folder()](/docs/huggingface_hub/v0.20.3/en/package_reference/hf_api#huggingface_hub.HfApi.upload_folder)
    reference for more details.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `allow_patterns` 和 `ignore_patterns` 来精确过滤应推送到 Hub 的文件。使用 `delete_patterns`
    来删除同一提交中的现有远程文件。有关更多详细信息，请参阅 [upload_folder()](/docs/huggingface_hub/v0.20.3/en/package_reference/hf_api#huggingface_hub.HfApi.upload_folder)
    参考。
- en: '#### `save_pretrained`'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `save_pretrained`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L30)'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L30)'
- en: '[PRE5]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Parameters
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`save_directory` (`str` or `Path`) — Path to directory in which the model weights
    and configuration will be saved.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`save_directory` (`str` 或 `Path`) — 将保存模型权重和配置的目录路径。'
- en: '`config` (`dict`, *optional*) — Model configuration specified as a key/value
    dictionary.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config` (`dict`, *optional*) — 指定为键/值字典的模型配置。'
- en: '`push_to_hub` (`bool`, *optional*, defaults to `False`) — Whether or not to
    push your model to the Huggingface Hub after saving it.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`push_to_hub`（`bool`，*可选*，默认为`False`）— 是否在保存后将模型推送到Huggingface Hub。'
- en: '`repo_id` (`str`, *optional*) — ID of your repository on the Hub. Used only
    if `push_to_hub=True`. Will default to the folder name if not provided. kwargs
    — Additional key word arguments passed along to the [push_to_hub()](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin.push_to_hub)
    method.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`repo_id`（`str`，*可选*）— Hub上您的存储库的ID。仅在`push_to_hub=True`时使用。如果未提供，将默认为文件夹名称。kwargs
    — 传递给[push_to_hub()](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin.push_to_hub)方法的其他关键字参数。'
- en: Save weights in local directory.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在本地目录中保存权重。
- en: PyTorch
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PyTorch
- en: '### `class huggingface_hub.PyTorchModelHubMixin`'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class huggingface_hub.PyTorchModelHubMixin`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L290)'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/hub_mixin.py#L290)'
- en: '[PRE6]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Implementation of [ModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin)
    to provide model Hub upload/download capabilities to PyTorch models. The model
    is set in evaluation mode by default using `model.eval()` (dropout modules are
    deactivated). To train the model, you should first set it back in training mode
    with `model.train()`.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 实现了[ModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin)，为PyTorch模型提供模型Hub上传/下载功能。默认情况下，模型处于评估模式，使用`model.eval()`（关闭了dropout模块）。要训练模型，您应该首先使用`model.train()`将其设置回训练模式。
- en: 'Example:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE7]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Keras
  id: totrans-81
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Keras
- en: '### `class huggingface_hub.KerasModelHubMixin`'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class huggingface_hub.KerasModelHubMixin`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L397)'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L397)'
- en: '[PRE8]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Implementation of [ModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin)
    to provide model Hub upload/download capabilities to Keras models.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 实现了[ModelHubMixin](/docs/huggingface_hub/v0.20.3/en/package_reference/mixins#huggingface_hub.ModelHubMixin)，为Keras模型提供模型Hub上传/下载功能。
- en: '[PRE9]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '#### `huggingface_hub.from_pretrained_keras`'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `huggingface_hub.from_pretrained_keras`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L216)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L216)'
- en: '[PRE10]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Parameters
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`pretrained_model_name_or_path` (`str` or `os.PathLike`) — Can be either:'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pretrained_model_name_or_path`（`str`或`os.PathLike`）— 可以是：'
- en: A string, the `model id` of a pretrained model hosted inside a model repo on
    huggingface.co. Valid model ids can be located at the root-level, like `bert-base-uncased`,
    or namespaced under a user or organization name, like `dbmdz/bert-base-german-cased`.
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个字符串，预训练模型的`模型id`，托管在huggingface.co上的模型仓库内。有效的模型id可以位于根级别，如`bert-base-uncased`，或者在用户或组织名称下命名空间，如`dbmdz/bert-base-german-cased`。
- en: 'You can add `revision` by appending `@` at the end of model_id simply like
    this: `dbmdz/bert-base-german-cased@main` Revision is the specific model version
    to use. It can be a branch name, a tag name, or a commit id, since we use a git-based
    system for storing models and other artifacts on huggingface.co, so `revision`
    can be any identifier allowed by git.'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您可以通过简单地在模型id末尾添加`@`来添加`revision`，如此：`dbmdz/bert-base-german-cased@main`。修订版是要使用的特定模型版本。它可以是分支名称、标签名称或提交ID，因为我们在huggingface.co上使用基于git的系统存储模型和其他工件，所以`revision`可以是git允许的任何标识符。
- en: A path to a `directory` containing model weights saved using [save_pretrained](https://huggingface.co/docs/transformers/v4.36.2/en/main_classes/model#transformers.PreTrainedModel.save_pretrained),
    e.g., `./my_model_directory/`.
  id: totrans-94
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个包含使用[save_pretrained](https://huggingface.co/docs/transformers/v4.36.2/en/main_classes/model#transformers.PreTrainedModel.save_pretrained)保存的模型权重的`目录`路径，例如，`./my_model_directory/`。
- en: '`None` if you are both providing the configuration and state dictionary (resp.
    with keyword arguments `config` and `state_dict`).'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您同时提供配置和状态字典（分别使用关键字参数`config`和`state_dict`），则为`None`。
- en: '`force_download` (`bool`, *optional*, defaults to `False`) — Whether to force
    the (re-)download of the model weights and configuration files, overriding the
    cached versions if they exist.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`force_download`（`bool`，*可选*，默认为`False`）— 是否强制下载模型权重和配置文件，覆盖缓存版本（如果存在）。'
- en: '`resume_download` (`bool`, *optional*, defaults to `False`) — Whether to delete
    incompletely received files. Will attempt to resume the download if such a file
    exists.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`resume_download`（`bool`，*可选*，默认为`False`）— 是否删除接收不完整的文件。如果存在这样的文件，将尝试恢复下载。'
- en: '`proxies` (`Dict[str, str]`, *optional*) — A dictionary of proxy servers to
    use by protocol or endpoint, e.g., `{''http'': ''foo.bar:3128'', ''http://hostname'':
    ''foo.bar:4012''}`. The proxies are used on each request.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`proxies`（`Dict[str, str]`，*可选*）— 一个代理服务器字典，按协议或端点使用，例如，`{''http'': ''foo.bar:3128'',
    ''http://hostname'': ''foo.bar:4012''}`。这些代理在每个请求中使用。'
- en: '`token` (`str` or `bool`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. If `True`, will use the token generated when running `transformers-cli
    login` (stored in `~/.huggingface`).'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token`（`str`或`bool`，*可选*）— 用作远程文件HTTP bearer授权的令牌。如果为`True`，将使用运行`transformers-cli
    login`时生成的令牌（存储在`~/.huggingface`）。'
- en: '`cache_dir` (`Union[str, os.PathLike]`, *optional*) — Path to a directory in
    which a downloaded pretrained model configuration should be cached if the standard
    cache should not be used.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cache_dir`（`Union[str, os.PathLike]`，*可选*）— 预训练模型配置应该缓存在其中的目录路径，如果不使用标准缓存。'
- en: '`local_files_only(bool,` *optional*, defaults to `False`) — Whether to only
    look at local files (i.e., do not try to download the model).'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`local_files_only(bool,` *可选*，默认为`False`) — 是否仅查看本地文件（即，不尝试下载模型）。'
- en: '`model_kwargs` (`Dict`, *optional*) — model_kwargs will be passed to the model
    during initialization'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_kwargs`（`Dict`，*可选*）— model_kwargs将在初始化期间传递给模型'
- en: Instantiate a pretrained Keras model from a pre-trained model from the Hub.
    The model is expected to be in `SavedModel` format.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 从Hub中实例化一个预训练的Keras模型。预期模型以`SavedModel`格式存在。
- en: Passing `token=True` is required when you want to use a private model.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 当您想使用私有模型时，需要传递`token=True`。
- en: '#### `huggingface_hub.push_to_hub_keras`'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `huggingface_hub.push_to_hub_keras`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L275)'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L275)'
- en: '[PRE11]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Parameters
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`model` (`Keras.Model`) — The [Keras model](%60https://www.tensorflow.org/api_docs/python/tf/keras/Model%60)
    you’d like to push to the Hub. The model must be compiled and built.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model` (`Keras.Model`) — 您想要推送到Hub的[Keras模型](%60https://www.tensorflow.org/api_docs/python/tf/keras/Model%60)。模型必须已编译和构建。'
- en: '`repo_id` (`str`) — ID of the repository to push to (example: `"username/my-model"`).'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`repo_id` (`str`) — 要推送到的存储库的ID（示例："username/my-model"）。'
- en: '`commit_message` (`str`, *optional*, defaults to “Add Keras model”) — Message
    to commit while pushing.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`commit_message` (`str`, *optional*, defaults to “Add Keras model”) — 推送时要提交的消息。'
- en: '`private` (`bool`, *optional*, defaults to `False`) — Whether the repository
    created should be private.'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`private` (`bool`, *optional*, defaults to `False`) — 是否应该创建私有存储库。'
- en: '`api_endpoint` (`str`, *optional*) — The API endpoint to use when pushing the
    model to the hub.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`api_endpoint` (`str`, *optional*) — 推送模型到Hub时要使用的API端点。'
- en: '`token` (`str`, *optional*) — The token to use as HTTP bearer authorization
    for remote files. If not set, will use the token set when logging in with `huggingface-cli
    login` (stored in `~/.huggingface`).'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token` (`str`, *optional*) — 用作远程文件HTTP bearer授权的令牌。如果未设置，将使用使用`huggingface-cli
    login`登录时设置的令牌（存储在`~/.huggingface`中）。'
- en: '`branch` (`str`, *optional*) — The git branch on which to push the model. This
    defaults to the default branch as specified in your repository, which defaults
    to `"main"`.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`branch` (`str`, *optional*) — 要推送模型的git分支。这默认为存储库中指定的默认分支，即`"main"`。'
- en: '`create_pr` (`boolean`, *optional*) — Whether or not to create a Pull Request
    from `branch` with that commit. Defaults to `False`.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`create_pr` (`boolean`, *optional*) — 是否从`branch`创建一个Pull Request。默认为`False`。'
- en: '`config` (`dict`, *optional*) — Configuration object to be saved alongside
    the model weights.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config` (`dict`, *optional*) — 要与模型权重一起保存的配置对象。'
- en: '`allow_patterns` (`List[str]` or `str`, *optional*) — If provided, only files
    matching at least one pattern are pushed.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`allow_patterns` (`List[str]` or `str`, *optional*) — 如果提供，只有匹配至少一个模式的文件才会被推送。'
- en: '`ignore_patterns` (`List[str]` or `str`, *optional*) — If provided, files matching
    any of the patterns are not pushed.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ignore_patterns` (`List[str]` or `str`, *optional*) — 如果提供，不推送与任何模式匹配的文件。'
- en: '`delete_patterns` (`List[str]` or `str`, *optional*) — If provided, remote
    files matching any of the patterns will be deleted from the repo.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`delete_patterns` (`List[str]` or `str`, *optional*) — 如果提供，与任何模式匹配的远程文件将从存储库中删除。'
- en: '`log_dir` (`str`, *optional*) — TensorBoard logging directory to be pushed.
    The Hub automatically hosts and displays a TensorBoard instance if log files are
    included in the repository.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`log_dir` (`str`, *optional*) — 要推送的TensorBoard日志目录。如果存储库中包含日志文件，则Hub将自动托管和显示TensorBoard实例。'
- en: '`include_optimizer` (`bool`, *optional*, defaults to `False`) — Whether or
    not to include optimizer during serialization.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`include_optimizer` (`bool`, *optional*, defaults to `False`) — 是否在序列化过程中包含优化器。'
- en: '`tags` (Union[`list`, `str`], *optional*) — List of tags that are related to
    model or string of a single tag. See example tags [here](https://github.com/huggingface/hub-docs/blob/main/modelcard.md?plain=1).'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tags` (Union[`list`, `str`], *optional*) — 与模型相关的标签列表或单个标签的字符串。请参见[此处](https://github.com/huggingface/hub-docs/blob/main/modelcard.md?plain=1)的示例标签。'
- en: '`plot_model` (`bool`, *optional*, defaults to `True`) — Setting this to `True`
    will plot the model and put it in the model card. Requires graphviz and pydot
    to be installed.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plot_model` (`bool`, *optional*, defaults to `True`) — 将此设置为`True`将绘制模型并将其放入模型卡中。需要安装graphviz和pydot。'
- en: '`model_save_kwargs(dict,` *optional*) — model_save_kwargs will be passed to
    [`tf.keras.models.save_model()`](https://www.tensorflow.org/api_docs/python/tf/keras/models/save_model).'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_save_kwargs(dict,` *optional*) — model_save_kwargs将传递给[`tf.keras.models.save_model()`](https://www.tensorflow.org/api_docs/python/tf/keras/models/save_model)。'
- en: Upload model checkpoint to the Hub.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 将模型检查点上传到Hub。
- en: Use `allow_patterns` and `ignore_patterns` to precisely filter which files should
    be pushed to the hub. Use `delete_patterns` to delete existing remote files in
    the same commit. See [upload_folder()](/docs/huggingface_hub/v0.20.3/en/package_reference/hf_api#huggingface_hub.HfApi.upload_folder)
    reference for more details.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`allow_patterns`和`ignore_patterns`来精确过滤应推送到Hub的文件。使用`delete_patterns`在同一次提交中删除现有的远程文件。有关更多详细信息，请参阅[upload_folder()](/docs/huggingface_hub/v0.20.3/en/package_reference/hf_api#huggingface_hub.HfApi.upload_folder)参考。
- en: '#### `huggingface_hub.save_pretrained_keras`'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `huggingface_hub.save_pretrained_keras`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L131)'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '[<来源>](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/keras_mixin.py#L131)'
- en: '[PRE12]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Parameters
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`model` (`Keras.Model`) — The [Keras model](https://www.tensorflow.org/api_docs/python/tf/keras/Model)
    you’d like to save. The model must be compiled and built.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model` (`Keras.Model`) — 您想要保存的[Keras模型](https://www.tensorflow.org/api_docs/python/tf/keras/Model)。模型必须已编译和构建。'
- en: '`save_directory` (`str` or `Path`) — Specify directory in which you want to
    save the Keras model.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`save_directory` (`str` or `Path`) — 指定要保存Keras模型的目录。'
- en: '`config` (`dict`, *optional*) — Configuration object to be saved alongside
    the model weights.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config` (`dict`, *optional*) — 要与模型权重一起保存的配置对象。'
- en: '`include_optimizer(bool,` *optional*, defaults to `False`) — Whether or not
    to include optimizer in serialization.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`include_optimizer(bool,` *optional*, defaults to `False`) — 是否在序列化过程中包含优化器。'
- en: '`plot_model` (`bool`, *optional*, defaults to `True`) — Setting this to `True`
    will plot the model and put it in the model card. Requires graphviz and pydot
    to be installed.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`plot_model` (`bool`, *optional*, defaults to `True`) — 将此设置为`True`将绘制模型并将其放入模型卡中。需要安装graphviz和pydot。'
- en: '`tags` (Union[`str`,`list`], *optional*) — List of tags that are related to
    model or string of a single tag. See example tags [here](https://github.com/huggingface/hub-docs/blob/main/modelcard.md?plain=1).'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tags` (Union[`str`,`list`], *optional*) — 与模型相关的标签列表或单个标签的字符串。请参见[此处](https://github.com/huggingface/hub-docs/blob/main/modelcard.md?plain=1)的示例标签。'
- en: '`model_save_kwargs(dict,` *optional*) — model_save_kwargs will be passed to
    [`tf.keras.models.save_model()`](https://www.tensorflow.org/api_docs/python/tf/keras/models/save_model).'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_save_kwargs(dict,` *optional*) — model_save_kwargs将传递给[`tf.keras.models.save_model()`](https://www.tensorflow.org/api_docs/python/tf/keras/models/save_model)。'
- en: Saves a Keras model to save_directory in SavedModel format. Use this if you’re
    using the Functional or Sequential APIs.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 将Keras模型保存到SavedModel格式的save_directory中。如果您使用Functional或Sequential API，则使用此选项。
- en: Fastai
  id: totrans-140
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Fastai
- en: '#### `huggingface_hub.from_pretrained_fastai`'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `huggingface_hub.from_pretrained_fastai`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/fastai_utils.py#L298)'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/fastai_utils.py#L298)'
- en: '[PRE13]'
  id: totrans-143
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Parameters
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`repo_id` (`str`) — The location where the pickled fastai.Learner is. It can
    be either of the two:'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`repo_id` (`str`) — pickled fastai.Learner所在的位置。可以是以下两者之一：'
- en: 'Hosted on the Hugging Face Hub. E.g.: ‘espejelomar/fatai-pet-breeds-classification’
    or ‘distilgpt2’. You can add a `revision` by appending `@` at the end of `repo_id`.
    E.g.: `dbmdz/bert-base-german-cased@main`. Revision is the specific model version
    to use. Since we use a git-based system for storing models and other artifacts
    on the Hugging Face Hub, it can be a branch name, a tag name, or a commit id.'
  id: totrans-146
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 托管在Hugging Face Hub上。例如：'espejelomar/fatai-pet-breeds-classification'或'distilgpt2'。您可以通过在`repo_id`末尾添加`@`来添加`revision`。例如：`dbmdz/bert-base-german-cased@main`。Revision是要使用的特定模型版本。由于我们在Hugging
    Face Hub上使用基于git的系统来存储模型和其他工件，因此它可以是分支名称、标签名称或提交ID。
- en: 'Hosted locally. `repo_id` would be a directory containing the pickle and a
    pyproject.toml indicating the fastai and fastcore versions used to build the `fastai.Learner`.
    E.g.: `./my_model_directory/`.'
  id: totrans-147
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地托管。`repo_id`将是包含pickle文件和指示用于构建`fastai.Learner`的fastai和fastcore版本的pyproject.toml的目录。例如：`./my_model_directory/`。
- en: '`revision` (`str`, *optional*) — Revision at which the repo’s files are downloaded.
    See documentation of `snapshot_download`.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`revision` (`str`, *optional*) — 下载存储库文件的修订版本。请参阅`snapshot_download`的文档。'
- en: Load pretrained fastai model from the Hub or from a local directory.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 从Hub或本地目录加载预训练的fastai模型。
- en: '#### `huggingface_hub.push_to_hub_fastai`'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `huggingface_hub.push_to_hub_fastai`'
- en: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/fastai_utils.py#L343)'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/huggingface_hub/blob/v0.20.3/src/huggingface_hub/fastai_utils.py#L343)'
- en: '[PRE14]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Parameters
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 参数
- en: '`learner` (*Learner*) — The *fastai.Learner’ you’d like to push to the Hub.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`learner` (*Learner*) — 您想要推送到Hub的*fastai.Learner*。'
- en: '`repo_id` (*str*) — The repository id for your model in Hub in the format of
    “namespace/repo_name”. The namespace can be your individual account or an organization
    to which you have write access (for example, ‘stanfordnlp/stanza-de’).'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`repo_id` (*str*) — Hub中您模型的存储库ID的格式为“namespace/repo_name”。命名空间可以是您的个人帐户或您具有写入访问权限的组织（例如，''stanfordnlp/stanza-de''）。'
- en: '`commit_message` (*str`,* optional*) — Message to commit while pushing. Will
    default to `"add model"`.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`commit_message` (*str`,* optional*) — 推送时要提交的消息。默认为`"add model"`。'
- en: '`private` (*bool*, *optional*, defaults to *False*) — Whether or not the repository
    created should be private.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`private` (*bool*, *optional*, 默认为*False*) — 创建的存储库是否应为私有。'
- en: '`token` (*str*, *optional*) — The Hugging Face account token to use as HTTP
    bearer authorization for remote files. If `None`, the token will be asked by a
    prompt.'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`token` (*str*, *optional*) — 用作远程文件的HTTP bearer授权的Hugging Face帐户令牌。如果为`None`，则将通过提示询问令牌。'
- en: '`config` (*dict*, *optional*) — Configuration object to be saved alongside
    the model weights.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`config` (*dict*, *optional*) — 要与模型权重一起保存的配置对象。'
- en: '`branch` (*str*, *optional*) — The git branch on which to push the model. This
    defaults to the default branch as specified in your repository, which defaults
    to *“main”*.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`branch` (*str*, *optional*) — 推送模型的git分支。默认为存储库中指定的默认分支，默认为*“main”*。'
- en: '`create_pr` (*boolean*, *optional*) — Whether or not to create a Pull Request
    from *branch* with that commit. Defaults to *False*.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`create_pr` (*boolean*, *optional*) — 是否从*branch*创建具有该提交的Pull Request。默认为*False*。'
- en: '`api_endpoint` (*str*, *optional*) — The API endpoint to use when pushing the
    model to the hub.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`api_endpoint` (*str*, *optional*) — 用于将模型推送到hub时使用的API端点。'
- en: '`allow_patterns` (*List[str]* or *str*, *optional*) — If provided, only files
    matching at least one pattern are pushed.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`allow_patterns` (*List[str]* or *str*, *optional*) — 如果提供，只有至少匹配一个模式的文件才会被推送。'
- en: '`ignore_patterns` (*List[str]* or *str*, *optional*) — If provided, files matching
    any of the patterns are not pushed.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ignore_patterns` (*List[str]* or *str*, *optional*) — 如果提供，与任何模式匹配的文件将不会被推送。'
- en: '`delete_patterns` (*List[str]* or *str*, *optional*) — If provided, remote
    files matching any of the patterns will be deleted from the repo.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`delete_patterns` (*List[str]* or *str*, *optional*) — 如果提供，与任何模式匹配的远程文件将从存储库中删除。'
- en: Upload learner checkpoint files to the Hub.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 将学习器检查点文件上传到Hub。
- en: Use *allow_patterns* and *ignore_patterns* to precisely filter which files should
    be pushed to the hub. Use *delete_patterns* to delete existing remote files in
    the same commit. See [*upload_folder*] reference for more details.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 使用*allow_patterns*和*ignore_patterns*来精确过滤应推送到hub的文件。使用*delete_patterns*来删除同一提交中的现有远程文件。有关更多详细信息，请参阅[*upload_folder*]参考。
- en: 'Raises the following error:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 引发以下错误：
- en: '[*ValueError*](https://docs.python.org/3/library/exceptions.html#ValueError)
    if the user is not log on to the Hugging Face Hub.'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*ValueError*](https://docs.python.org/3/library/exceptions.html#ValueError)
    如果用户未登录到Hugging Face Hub。'
