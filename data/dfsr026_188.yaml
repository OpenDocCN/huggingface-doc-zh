- en: DDIMScheduler
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DDIMScheduler
- en: 'Original text: [https://huggingface.co/docs/diffusers/api/schedulers/ddim](https://huggingface.co/docs/diffusers/api/schedulers/ddim)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/diffusers/api/schedulers/ddim](https://huggingface.co/docs/diffusers/api/schedulers/ddim)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: '[Denoising Diffusion Implicit Models](https://huggingface.co/papers/2010.02502)
    (DDIM) by Jiaming Song, Chenlin Meng and Stefano Ermon.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[Jiaming Songã€Chenlin Meng å’Œ Stefano Ermon æ’°å†™çš„ [å»å™ªæ‰©æ•£éšå¼æ¨¡å‹](https://huggingface.co/papers/2010.02502)ï¼ˆDDIMï¼‰ã€‚'
- en: 'The abstract from the paper is:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: è®ºæ–‡æ‘˜è¦å¦‚ä¸‹ï¼š
- en: '*Denoising diffusion probabilistic models (DDPMs) have achieved high quality
    image generation without adversarial training, yet they require simulating a Markov
    chain for many steps to produce a sample. To accelerate sampling, we present denoising
    diffusion implicit models (DDIMs), a more efficient class of iterative implicit
    probabilistic models with the same training procedure as DDPMs. In DDPMs, the
    generative process is defined as the reverse of a Markovian diffusion process.
    We construct a class of non-Markovian diffusion processes that lead to the same
    training objective, but whose reverse process can be much faster to sample from.
    We empirically demonstrate that DDIMs can produce high quality samples 10Ã— to
    50Ã— faster in terms of wall-clock time compared to DDPMs, allow us to trade off
    computation for sample quality, and can perform semantically meaningful image
    interpolation directly in the latent space.*'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '*å»å™ªæ‰©æ•£æ¦‚ç‡æ¨¡å‹ï¼ˆDDPMsï¼‰åœ¨æ²¡æœ‰å¯¹æŠ—è®­ç»ƒçš„æƒ…å†µä¸‹å®ç°äº†é«˜è´¨é‡çš„å›¾åƒç”Ÿæˆï¼Œä½†å®ƒä»¬éœ€è¦æ¨¡æ‹Ÿè®¸å¤šæ­¥éª¤çš„é©¬å°”å¯å¤«é“¾æ‰èƒ½ç”Ÿæˆæ ·æœ¬ã€‚ä¸ºäº†åŠ é€Ÿé‡‡æ ·ï¼Œæˆ‘ä»¬æå‡ºäº†å»å™ªæ‰©æ•£éšå¼æ¨¡å‹ï¼ˆDDIMsï¼‰ï¼Œè¿™æ˜¯ä¸€ç§æ›´é«˜æ•ˆçš„è¿­ä»£éšå¼æ¦‚ç‡æ¨¡å‹ç±»ï¼Œå…·æœ‰ä¸
    DDPMs ç›¸åŒçš„è®­ç»ƒè¿‡ç¨‹ã€‚åœ¨ DDPMs ä¸­ï¼Œç”Ÿæˆè¿‡ç¨‹è¢«å®šä¹‰ä¸ºé©¬å°”å¯å¤«æ‰©æ•£è¿‡ç¨‹çš„åå‘ã€‚æˆ‘ä»¬æ„å»ºäº†ä¸€ç±»éé©¬å°”å¯å¤«æ‰©æ•£è¿‡ç¨‹ï¼Œè¿™äº›è¿‡ç¨‹å¯¼è‡´ç›¸åŒçš„è®­ç»ƒç›®æ ‡ï¼Œä½†å…¶åå‘è¿‡ç¨‹å¯ä»¥æ›´å¿«åœ°ä»ä¸­é‡‡æ ·ã€‚æˆ‘ä»¬åœ¨å®è¯ä¸­è¯æ˜ï¼Œä¸
    DDPMs ç›¸æ¯”ï¼ŒDDIMs å¯ä»¥åœ¨å¢™é’Ÿæ—¶é—´æ–¹é¢ä»¥ 10Ã— åˆ° 50Ã— çš„é€Ÿåº¦äº§ç”Ÿé«˜è´¨é‡æ ·æœ¬ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨è®¡ç®—å’Œæ ·æœ¬è´¨é‡ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥åœ¨æ½œåœ¨ç©ºé—´ä¸­æ‰§è¡Œè¯­ä¹‰ä¸Šæœ‰æ„ä¹‰çš„å›¾åƒæ’å€¼ã€‚*'
- en: The original codebase of this paper can be found at [ermongroup/ddim](https://github.com/ermongroup/ddim),
    and you can contact the author on [tsong.me](https://tsong.me/).
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡çš„åŸå§‹ä»£ç å¯ä»¥åœ¨ [ermongroup/ddim](https://github.com/ermongroup/ddim) æ‰¾åˆ°ï¼Œæ‚¨å¯ä»¥åœ¨ [tsong.me](https://tsong.me/)
    ä¸Šè”ç³»ä½œè€…ã€‚
- en: Tips
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æç¤º
- en: 'The paper [Common Diffusion Noise Schedules and Sample Steps are Flawed](https://huggingface.co/papers/2305.08891)
    claims that a mismatch between the training and inference settings leads to suboptimal
    inference generation results for Stable Diffusion. To fix this, the authors propose:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: è®ºæ–‡ [Common Diffusion Noise Schedules and Sample Steps are Flawed](https://huggingface.co/papers/2305.08891)
    å£°ç§°è®­ç»ƒå’Œæ¨æ–­è®¾ç½®ä¹‹é—´çš„ä¸åŒ¹é…å¯¼è‡´äº†ç¨³å®šæ‰©æ•£çš„æ¨æ–­ç”Ÿæˆç»“æœä¸ä½³ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½œè€…æå‡ºï¼š
- en: ğŸ§ª This is an experimental feature!
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ§ª è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼
- en: rescale the noise schedule to enforce zero terminal signal-to-noise ratio (SNR)
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é‡æ–°è°ƒæ•´å™ªå£°è®¡åˆ’ä»¥å¼ºåˆ¶é›¶ç»ˆç«¯ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: train a model with `v_prediction` (add the following argument to the [train_text_to_image.py](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py)
    or [train_text_to_image_lora.py](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)
    scripts)
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `v_prediction` è®­ç»ƒæ¨¡å‹ï¼ˆå°†ä»¥ä¸‹å‚æ•°æ·»åŠ åˆ° [train_text_to_image.py](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py)
    æˆ– [train_text_to_image_lora.py](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)
    è„šæœ¬ä¸­ï¼‰
- en: '[PRE1]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: change the sampler to always start from the last timestep
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ›´æ”¹é‡‡æ ·å™¨ä»¥å§‹ç»ˆä»æœ€åä¸€ä¸ªæ—¶é—´æ­¥å¼€å§‹
- en: '[PRE2]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: rescale classifier-free guidance to prevent over-exposure
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é‡æ–°è°ƒæ•´æ— åˆ†ç±»å™¨æŒ‡å¯¼ä»¥é˜²æ­¢è¿‡åº¦æ›å…‰
- en: '[PRE3]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'For example:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼š
- en: '[PRE4]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: DDIMScheduler
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DDIMScheduler
- en: '### `class diffusers.DDIMScheduler`'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.DDIMScheduler`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L131)'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L131)'
- en: '[PRE5]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Parameters
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`num_train_timesteps` (`int`, defaults to 1000) â€” The number of diffusion steps
    to train the model.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_train_timesteps` (`int`, é»˜è®¤ä¸º 1000) â€” è®­ç»ƒæ¨¡å‹çš„æ‰©æ•£æ­¥éª¤æ•°ã€‚'
- en: '`beta_start` (`float`, defaults to 0.0001) â€” The starting `beta` value of inference.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`beta_start` (`float`, é»˜è®¤ä¸º 0.0001) â€” æ¨æ–­çš„èµ·å§‹ `beta` å€¼ã€‚'
- en: '`beta_end` (`float`, defaults to 0.02) â€” The final `beta` value.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`beta_end` (`float`, é»˜è®¤ä¸º 0.02) â€” æœ€ç»ˆçš„ `beta` å€¼ã€‚'
- en: '`beta_schedule` (`str`, defaults to `"linear"`) â€” The beta schedule, a mapping
    from a beta range to a sequence of betas for stepping the model. Choose from `linear`,
    `scaled_linear`, or `squaredcos_cap_v2`.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`beta_schedule` (`str`, é»˜è®¤ä¸º `"linear"`) â€” beta è®¡åˆ’ï¼Œä» beta èŒƒå›´åˆ°ç”¨äºæ¨¡å‹æ­¥è¿›çš„ beta åºåˆ—çš„æ˜ å°„ã€‚å¯é€‰æ‹©
    `linear`ã€`scaled_linear` æˆ– `squaredcos_cap_v2`ã€‚'
- en: '`trained_betas` (`np.ndarray`, *optional*) â€” Pass an array of betas directly
    to the constructor to bypass `beta_start` and `beta_end`.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`trained_betas` (`np.ndarray`, *å¯é€‰*) â€” ç›´æ¥ä¼ é€’ä¸€ä¸ª beta æ•°ç»„ç»™æ„é€ å‡½æ•°ï¼Œä»¥ç»•è¿‡ `beta_start`
    å’Œ `beta_end`ã€‚'
- en: '`clip_sample` (`bool`, defaults to `True`) â€” Clip the predicted sample for
    numerical stability.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip_sample` (`bool`, é»˜è®¤ä¸º `True`) â€” ä¸ºäº†æ•°å€¼ç¨³å®šæ€§è€Œè£å‰ªé¢„æµ‹æ ·æœ¬ã€‚'
- en: '`clip_sample_range` (`float`, defaults to 1.0) â€” The maximum magnitude for
    sample clipping. Valid only when `clip_sample=True`.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clip_sample_range` (`float`, é»˜è®¤ä¸º 1.0) â€” é‡‡æ ·è£å‰ªçš„æœ€å¤§å¹…åº¦ã€‚ä»…å½“ `clip_sample=True` æ—¶æœ‰æ•ˆã€‚'
- en: '`set_alpha_to_one` (`bool`, defaults to `True`) â€” Each diffusion step uses
    the alphas product value at that step and at the previous one. For the final step
    there is no previous alpha. When this option is `True` the previous alpha product
    is fixed to `1`, otherwise it uses the alpha value at step 0.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set_alpha_to_one` (`bool`, é»˜è®¤ä¸º `True`) â€” æ¯ä¸ªæ‰©æ•£æ­¥éª¤ä½¿ç”¨è¯¥æ­¥éª¤å’Œä¸Šä¸€ä¸ªæ­¥éª¤çš„ alphas ä¹˜ç§¯å€¼ã€‚å¯¹äºæœ€åä¸€æ­¥ï¼Œæ²¡æœ‰ä¸Šä¸€ä¸ª
    alphaã€‚å½“æ­¤é€‰é¡¹ä¸º `True` æ—¶ï¼Œå‰ä¸€ä¸ª alpha ä¹˜ç§¯è¢«å›ºå®šä¸º `1`ï¼Œå¦åˆ™ä½¿ç”¨æ­¥éª¤ 0 çš„ alpha å€¼ã€‚'
- en: '`steps_offset` (`int`, defaults to 0) â€” An offset added to the inference steps.
    You can use a combination of `offset=1` and `set_alpha_to_one=False` to make the
    last step use step 0 for the previous alpha product like in Stable Diffusion.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`steps_offset` (`int`, é»˜è®¤ä¸º 0) â€” æ·»åŠ åˆ°æ¨æ–­æ­¥éª¤çš„åç§»é‡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ `offset=1` å’Œ `set_alpha_to_one=False`
    çš„ç»„åˆï¼Œä½¿æœ€åä¸€æ­¥ä½¿ç”¨æ­¥éª¤ 0 ä½œä¸ºä¸Šä¸€ä¸ª alpha ä¹˜ç§¯ï¼Œå°±åƒåœ¨ Stable Diffusion ä¸­ä¸€æ ·ã€‚'
- en: '`prediction_type` (`str`, defaults to `epsilon`, *optional*) â€” Prediction type
    of the scheduler function; can be `epsilon` (predicts the noise of the diffusion
    process), `sample` (directly predicts the noisy sample`) or` v_prediction` (see
    section 2.4 of [Imagen Video](https://imagen.research.google/video/paper.pdf)
    paper).'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prediction_type`ï¼ˆ`str`ï¼Œé»˜è®¤ä¸º`epsilon`ï¼Œ*å¯é€‰*ï¼‰â€” è°ƒåº¦å‡½æ•°çš„é¢„æµ‹ç±»å‹ï¼›å¯ä»¥æ˜¯`epsilon`ï¼ˆé¢„æµ‹æ‰©æ•£è¿‡ç¨‹çš„å™ªå£°ï¼‰ï¼Œ`sample`ï¼ˆç›´æ¥é¢„æµ‹æœ‰å™ªå£°çš„æ ·æœ¬ï¼‰æˆ–`v_prediction`ï¼ˆå‚è§[Imagen
    Video](https://imagen.research.google/video/paper.pdf)è®ºæ–‡çš„ç¬¬2.4èŠ‚ï¼‰ã€‚'
- en: '`thresholding` (`bool`, defaults to `False`) â€” Whether to use the â€œdynamic
    thresholdingâ€ method. This is unsuitable for latent-space diffusion models such
    as Stable Diffusion.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`thresholding`ï¼ˆ`bool`ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦ä½¿ç”¨â€œåŠ¨æ€é˜ˆå€¼â€æ–¹æ³•ã€‚è¿™å¯¹äºç¨³å®šæ‰©æ•£ç­‰æ½œåœ¨ç©ºé—´æ‰©æ•£æ¨¡å‹ä¸é€‚ç”¨ã€‚'
- en: '`dynamic_thresholding_ratio` (`float`, defaults to 0.995) â€” The ratio for the
    dynamic thresholding method. Valid only when `thresholding=True`.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dynamic_thresholding_ratio`ï¼ˆ`float`ï¼Œé»˜è®¤ä¸º0.995ï¼‰â€” åŠ¨æ€é˜ˆå€¼æ–¹æ³•çš„æ¯”ç‡ã€‚ä»…åœ¨`thresholding=True`æ—¶æœ‰æ•ˆã€‚'
- en: '`sample_max_value` (`float`, defaults to 1.0) â€” The threshold value for dynamic
    thresholding. Valid only when `thresholding=True`.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample_max_value`ï¼ˆ`float`ï¼Œé»˜è®¤ä¸º1.0ï¼‰â€” åŠ¨æ€é˜ˆå€¼çš„é˜ˆå€¼å€¼ã€‚ä»…åœ¨`thresholding=True`æ—¶æœ‰æ•ˆã€‚'
- en: '`timestep_spacing` (`str`, defaults to `"leading"`) â€” The way the timesteps
    should be scaled. Refer to Table 2 of the [Common Diffusion Noise Schedules and
    Sample Steps are Flawed](https://huggingface.co/papers/2305.08891) for more information.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestep_spacing`ï¼ˆ`str`ï¼Œé»˜è®¤ä¸º`"leading"`ï¼‰â€” æ—¶é—´æ­¥åº”è¯¥å¦‚ä½•ç¼©æ”¾ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[Common Diffusion
    Noise Schedules and Sample Steps are Flawed](https://huggingface.co/papers/2305.08891)çš„è¡¨2ã€‚'
- en: '`rescale_betas_zero_snr` (`bool`, defaults to `False`) â€” Whether to rescale
    the betas to have zero terminal SNR. This enables the model to generate very bright
    and dark samples instead of limiting it to samples with medium brightness. Loosely
    related to [`--offset_noise`](https://github.com/huggingface/diffusers/blob/74fd735eb073eb1d774b1ab4154a0876eb82f055/examples/dreambooth/train_dreambooth.py#L506).'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`rescale_betas_zero_snr`ï¼ˆ`bool`ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” æ˜¯å¦é‡æ–°ç¼©æ”¾betaä»¥ä½¿ç»ˆç«¯SNRä¸ºé›¶ã€‚è¿™ä½¿æ¨¡å‹èƒ½å¤Ÿç”Ÿæˆéå¸¸æ˜äº®å’Œæš—çš„æ ·æœ¬ï¼Œè€Œä¸æ˜¯å°†å…¶é™åˆ¶ä¸ºå…·æœ‰ä¸­ç­‰äº®åº¦çš„æ ·æœ¬ã€‚ä¸[`--offset_noise`](https://github.com/huggingface/diffusers/blob/74fd735eb073eb1d774b1ab4154a0876eb82f055/examples/dreambooth/train_dreambooth.py#L506)
    looselyç›¸å…³ã€‚'
- en: '`DDIMScheduler` extends the denoising procedure introduced in denoising diffusion
    probabilistic models (DDPMs) with non-Markovian guidance.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '`DDIMScheduler`æ‰©å±•äº†å¼•å…¥éé©¬å°”å¯å¤«å¼•å¯¼çš„å»å™ªæ‰©æ•£æ¦‚ç‡æ¨¡å‹ï¼ˆDDPMsï¼‰çš„è¿‡ç¨‹ã€‚'
- en: This model inherits from [SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)
    and [ConfigMixin](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin).
    Check the superclass documentation for the generic methods the library implements
    for all schedulers such as loading and saving.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ¨¡å‹ç»§æ‰¿è‡ª[SchedulerMixin](/docs/diffusers/v0.26.3/en/api/schedulers/overview#diffusers.SchedulerMixin)å’Œ[ConfigMixin](/docs/diffusers/v0.26.3/en/api/configuration#diffusers.ConfigMixin)ã€‚æ£€æŸ¥è¶…ç±»æ–‡æ¡£ï¼Œäº†è§£åº“ä¸ºæ‰€æœ‰è°ƒåº¦ç¨‹åºå®ç°çš„é€šç”¨æ–¹æ³•ï¼Œå¦‚åŠ è½½å’Œä¿å­˜ã€‚
- en: '#### `scale_model_input`'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `scale_model_input`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L238)'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L238)'
- en: '[PRE6]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Parameters
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`sample` (`torch.FloatTensor`) â€” The input sample.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample`ï¼ˆ`torch.FloatTensor`ï¼‰â€” è¾“å…¥æ ·æœ¬ã€‚'
- en: '`timestep` (`int`, *optional*) â€” The current timestep in the diffusion chain.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestep`ï¼ˆ`int`ï¼Œ*å¯é€‰*ï¼‰â€” æ‰©æ•£é“¾ä¸­çš„å½“å‰æ—¶é—´æ­¥ã€‚'
- en: Returns
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '`torch.FloatTensor`'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '`torch.FloatTensor`'
- en: A scaled input sample.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªç»è¿‡ç¼©æ”¾çš„è¾“å…¥æ ·æœ¬ã€‚
- en: Ensures interchangeability with schedulers that need to scale the denoising
    model input depending on the current timestep.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®ä¿ä¸éœ€è¦æ ¹æ®å½“å‰æ—¶é—´æ­¥é•¿ç¼©æ”¾å»å™ªæ¨¡å‹è¾“å…¥çš„è°ƒåº¦ç¨‹åºå¯ä»¥äº’æ¢ã€‚
- en: '#### `set_timesteps`'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `set_timesteps`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L299)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L299)'
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Parameters
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`num_inference_steps` (`int`) â€” The number of diffusion steps used when generating
    samples with a pre-trained model.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_inference_steps`ï¼ˆ`int`ï¼‰â€” ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ç”Ÿæˆæ ·æœ¬æ—¶ä½¿ç”¨çš„æ‰©æ•£æ­¥æ•°ã€‚'
- en: Sets the discrete timesteps used for the diffusion chain (to be run before inference).
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½®ç”¨äºæ‰©æ•£é“¾çš„ç¦»æ•£æ—¶é—´æ­¥ï¼ˆåœ¨æ¨æ–­ä¹‹å‰è¿è¡Œï¼‰ã€‚
- en: '#### `step`'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `æ­¥éª¤`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L344)'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L344)'
- en: '[PRE8]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Parameters
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`model_output` (`torch.FloatTensor`) â€” The direct output from learned diffusion
    model.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_output`ï¼ˆ`torch.FloatTensor`ï¼‰â€” ä»å­¦ä¹ çš„æ‰©æ•£æ¨¡å‹ç›´æ¥è¾“å‡ºã€‚'
- en: '`timestep` (`float`) â€” The current discrete timestep in the diffusion chain.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`timestep`ï¼ˆ`float`ï¼‰â€” æ‰©æ•£é“¾ä¸­çš„å½“å‰ç¦»æ•£æ—¶é—´æ­¥ã€‚'
- en: '`sample` (`torch.FloatTensor`) â€” A current instance of a sample created by
    the diffusion process.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sample`ï¼ˆ`torch.FloatTensor`ï¼‰â€” æ‰©æ•£è¿‡ç¨‹ä¸­åˆ›å»ºçš„æ ·æœ¬çš„å½“å‰å®ä¾‹ã€‚'
- en: '`eta` (`float`) â€” The weight of noise for added noise in diffusion step.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`eta`ï¼ˆ`float`ï¼‰â€” æ‰©æ•£æ­¥éª¤ä¸­æ·»åŠ å™ªå£°çš„å™ªå£°æƒé‡ã€‚'
- en: '`use_clipped_model_output` (`bool`, defaults to `False`) â€” If `True`, computes
    â€œcorrectedâ€ `model_output` from the clipped predicted original sample. Necessary
    because predicted original sample is clipped to [-1, 1] when `self.config.clip_sample`
    is `True`. If no clipping has happened, â€œcorrectedâ€ `model_output` would coincide
    with the one provided as input and `use_clipped_model_output` has no effect.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`use_clipped_model_output`ï¼ˆ`bool`ï¼Œé»˜è®¤ä¸º`False`ï¼‰â€” å¦‚æœä¸º`True`ï¼Œåˆ™ä»å‰ªåˆ‡é¢„æµ‹çš„åŸå§‹æ ·æœ¬è®¡ç®—â€œæ ¡æ­£â€çš„`model_output`ã€‚å½“`self.config.clip_sample`ä¸º`True`æ—¶ï¼Œå¿…è¦ï¼Œå› ä¸ºé¢„æµ‹çš„åŸå§‹æ ·æœ¬è¢«å‰ªåˆ‡ä¸º[-1,
    1]ã€‚å¦‚æœæ²¡æœ‰å‘ç”Ÿå‰ªåˆ‡ï¼Œâ€œæ ¡æ­£â€çš„`model_output`å°†ä¸æä¾›çš„è¾“å…¥ä¸€è‡´ï¼Œ`use_clipped_model_output`ä¸èµ·ä½œç”¨ã€‚'
- en: '`generator` (`torch.Generator`, *optional*) â€” A random number generator.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`generator`ï¼ˆ`torch.Generator`ï¼Œ*å¯é€‰*ï¼‰â€” éšæœºæ•°ç”Ÿæˆå™¨ã€‚'
- en: '`variance_noise` (`torch.FloatTensor`) â€” Alternative to generating noise with
    `generator` by directly providing the noise for the variance itself. Useful for
    methods such as `CycleDiffusion`.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`variance_noise`ï¼ˆ`torch.FloatTensor`ï¼‰â€” é€šè¿‡ç›´æ¥æä¾›æ–¹å·®æœ¬èº«çš„å™ªå£°æ¥æ›¿ä»£ä½¿ç”¨`generator`ç”Ÿæˆå™ªå£°ã€‚å¯¹äº`CycleDiffusion`ç­‰æ–¹æ³•éå¸¸æœ‰ç”¨ã€‚'
- en: '`return_dict` (`bool`, *optional*, defaults to `True`) â€” Whether or not to
    return a [DDIMSchedulerOutput](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput)
    or `tuple`.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`return_dict` (`bool`ï¼Œ*å¯é€‰*ï¼Œé»˜è®¤ä¸º`True`) â€” æ˜¯å¦è¿”å›[DDIMSchedulerOutput](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput)æˆ–`tuple`ã€‚'
- en: Returns
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›å€¼
- en: '`~schedulers.scheduling_utils.DDIMSchedulerOutput` or `tuple`'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '`~schedulers.scheduling_utils.DDIMSchedulerOutput`æˆ–`tuple`'
- en: If return_dict is `True`, [DDIMSchedulerOutput](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput)
    is returned, otherwise a tuple is returned where the first element is the sample
    tensor.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœ`return_dict`ä¸º`True`ï¼Œåˆ™è¿”å›[DDIMSchedulerOutput](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput)ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªå…ƒç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ·æœ¬å¼ é‡ã€‚
- en: Predict the sample from the previous timestep by reversing the SDE. This function
    propagates the diffusion process from the learned model outputs (most often the
    predicted noise).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡åè½¬SDEæ¥é¢„æµ‹ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„æ ·æœ¬ã€‚æ­¤å‡½æ•°ä»å­¦ä¹ æ¨¡å‹è¾“å‡ºï¼ˆé€šå¸¸æ˜¯é¢„æµ‹çš„å™ªå£°ï¼‰ä¸­ä¼ æ’­æ‰©æ•£è¿‡ç¨‹ã€‚
- en: DDIMSchedulerOutput
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DDIMSchedulerOutput
- en: '### `class diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput`'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class diffusers.schedulers.scheduling_ddim.DDIMSchedulerOutput`'
- en: '[< source >](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L31)'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/diffusers/blob/v0.26.3/src/diffusers/schedulers/scheduling_ddim.py#L31)'
- en: '[PRE9]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Parameters
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`prev_sample` (`torch.FloatTensor` of shape `(batch_size, num_channels, height,
    width)` for images) â€” Computed sample `(x_{t-1})` of previous timestep. `prev_sample`
    should be used as next model input in the denoising loop.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prev_sample`ï¼ˆå¯¹äºå›¾åƒå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`ï¼‰
    â€” ä¸Šä¸€ä¸ªæ—¶é—´æ­¥çš„è®¡ç®—æ ·æœ¬`(x_{t-1})`ã€‚`prev_sample`åº”è¯¥åœ¨å»å™ªå¾ªç¯ä¸­ä½œä¸ºä¸‹ä¸€ä¸ªæ¨¡å‹è¾“å…¥ä½¿ç”¨ã€‚'
- en: '`pred_original_sample` (`torch.FloatTensor` of shape `(batch_size, num_channels,
    height, width)` for images) â€” The predicted denoised sample `(x_{0})` based on
    the model output from the current timestep. `pred_original_sample` can be used
    to preview progress or for guidance.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pred_original_sample`ï¼ˆå¯¹äºå›¾åƒå½¢çŠ¶ä¸º`(batch_size, num_channels, height, width)`çš„`torch.FloatTensor`ï¼‰
    â€” åŸºäºå½“å‰æ—¶é—´æ­¥çš„æ¨¡å‹è¾“å‡ºé¢„æµ‹çš„å»å™ªæ ·æœ¬`(x_{0})`ã€‚`pred_original_sample`å¯ç”¨äºé¢„è§ˆè¿›å±•æˆ–æŒ‡å¯¼ã€‚'
- en: Output class for the schedulerâ€™s `step` function output.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: è°ƒåº¦ç¨‹åºçš„`step`å‡½æ•°è¾“å‡ºçš„è¾“å‡ºç±»ã€‚
