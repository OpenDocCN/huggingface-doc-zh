- en: Building a Vanilla JavaScript Application
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ„å»ºä¸€ä¸ªåŸç”ŸJavaScriptåº”ç”¨ç¨‹åº
- en: 'Original text: [https://huggingface.co/docs/transformers.js/tutorials/vanilla-js](https://huggingface.co/docs/transformers.js/tutorials/vanilla-js)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/transformers.js/tutorials/vanilla-js](https://huggingface.co/docs/transformers.js/tutorials/vanilla-js)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: In this tutorial, youâ€™ll build a simple web application that detects objects
    in images using Transformers.js! To follow along, all you need is a code editor,
    a browser, and a simple server (e.g., VS Code Live Server).
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨Transformers.jsæ„å»ºä¸€ä¸ªç®€å•çš„Webåº”ç”¨ç¨‹åºï¼Œç”¨äºæ£€æµ‹å›¾åƒä¸­çš„å¯¹è±¡ï¼è¦è·Ÿéšæœ¬æ•™ç¨‹ï¼Œæ‚¨åªéœ€è¦ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ã€ä¸€ä¸ªæµè§ˆå™¨å’Œä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨ï¼ˆä¾‹å¦‚VS
    Code Live Serverï¼‰ã€‚
- en: 'Hereâ€™s how it works: the user clicks â€œUpload imageâ€ and selects an image using
    an input dialog. After analysing the image with an object detection model, the
    predicted bounding boxes are overlaid on top of the image, like this:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒçš„å·¥ä½œåŸç†æ˜¯ï¼šç”¨æˆ·ç‚¹å‡»â€œä¸Šä¼ å›¾åƒâ€ï¼Œç„¶åä½¿ç”¨è¾“å…¥å¯¹è¯æ¡†é€‰æ‹©å›¾åƒã€‚åœ¨ä½¿ç”¨ç›®æ ‡æ£€æµ‹æ¨¡å‹åˆ†æå›¾åƒåï¼Œé¢„æµ‹çš„è¾¹ç•Œæ¡†å°†å åŠ åœ¨å›¾åƒä¸Šï¼Œå°±åƒè¿™æ ·ï¼š
- en: '![Demo](../Images/8e870417c611226e6f69a9e332776a4e.png)'
  id: totrans-5
  prefs: []
  type: TYPE_IMG
  zh: '![æ¼”ç¤º](../Images/8e870417c611226e6f69a9e332776a4e.png)'
- en: 'Useful links:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ç”¨çš„é“¾æ¥ï¼š
- en: '[Demo site](https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector)'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[æ¼”ç¤ºç«™ç‚¹](https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector)'
- en: '[Interactive code walk-through (scrim)](https://scrimba.com/scrim/cKm9bDAg)'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[äº¤äº’å¼ä»£ç æ¼”ç»ƒï¼ˆscrimï¼‰](https://scrimba.com/scrim/cKm9bDAg)'
- en: '[Source code](https://github.com/xenova/transformers.js/tree/main/examples/vanilla-js)'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[æºä»£ç ](https://github.com/xenova/transformers.js/tree/main/examples/vanilla-js)'
- en: 'Step 1: HTML and CSS setup'
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥ï¼šHTMLå’ŒCSSè®¾ç½®
- en: 'Before we start building with Transformers.js, we first need to lay the groundwork
    with some markup and styling. Create an `index.html` file with a basic HTML skeleton,
    and add the following `<main>` tag to the `<body>`:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¼€å§‹ä½¿ç”¨Transformers.jsæ„å»ºä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€šè¿‡ä¸€äº›æ ‡è®°å’Œæ ·å¼æ¥å¥ å®šåŸºç¡€ã€‚åˆ›å»ºä¸€ä¸ªå¸¦æœ‰åŸºæœ¬HTMLæ¡†æ¶çš„`index.html`æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹`<main>`æ ‡è®°æ·»åŠ åˆ°`<body>`ä¸­ï¼š
- en: '[PRE0]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: <details data-svelte-h="svelte-m0rku7"><summary>Click here to see a breakdown
    of this markup.</summary>
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: <details data-svelte-h="svelte-m0rku7"><summary>å•å‡»æ­¤å¤„æŸ¥çœ‹æ­¤æ ‡è®°çš„è¯¦ç»†ä¿¡æ¯ã€‚</summary>
- en: Weâ€™re adding an `<input>` element with `type="file"` that accepts images. This
    allows the user to select an image from their local file system using a popup
    dialog. The default styling for this element looks quite bad, so letâ€™s add some
    styling. The easiest way to achieve this is to wrap the `<input>` element in a
    `<label>`, hide the input, and then style the label as a button.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå¸¦æœ‰`type="file"`çš„`<input>`å…ƒç´ ï¼Œç”¨äºæ¥å—å›¾åƒã€‚è¿™å…è®¸ç”¨æˆ·ä½¿ç”¨å¼¹å‡ºå¯¹è¯æ¡†ä»å…¶æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­é€‰æ‹©å›¾åƒã€‚æ­¤å…ƒç´ çš„é»˜è®¤æ ·å¼çœ‹èµ·æ¥ç›¸å½“ç³Ÿç³•ï¼Œå› æ­¤è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›æ ·å¼ã€‚å®ç°è¿™ä¸€ç‚¹çš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†`<input>`å…ƒç´ åŒ…è£…åœ¨`<label>`ä¸­ï¼Œéšè—è¾“å…¥ï¼Œç„¶åå°†æ ‡ç­¾æ ·å¼è®¾ç½®ä¸ºæŒ‰é’®ã€‚
- en: Weâ€™re also adding an empty `<div>` container for displaying the image, plus
    an empty `<p>` tag that weâ€™ll use to give status updates to the user while we
    download and run the model, since both of these operations take some time.</details>
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªç©ºçš„`<div>`å®¹å™¨ç”¨äºæ˜¾ç¤ºå›¾åƒï¼Œä»¥åŠä¸€ä¸ªç©ºçš„`<p>`æ ‡è®°ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹è½½å’Œè¿è¡Œæ¨¡å‹æ—¶ä½¿ç”¨å®ƒå‘ç”¨æˆ·æä¾›çŠ¶æ€æ›´æ–°ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ“ä½œéƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚
- en: 'Next, add the following CSS rules in a `style.css` file and and link it to
    the HTML:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œåœ¨`style.css`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹CSSè§„åˆ™ï¼Œå¹¶å°†å…¶é“¾æ¥åˆ°HTMLä¸­ï¼š
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Hereâ€™s how the UI looks at this point:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æ—¶UIçš„å¤–è§‚å¦‚ä¸‹ï¼š
- en: '![Demo](../Images/8b9eb54c5ffe79961986480e9ea6b7ea.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![æ¼”ç¤º](../Images/8b9eb54c5ffe79961986480e9ea6b7ea.png)'
- en: 'Step 2: JavaScript setup'
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬äºŒæ­¥ï¼šJavaScriptè®¾ç½®
- en: 'With the *boring* part out of the way, letâ€™s start writing some JavaScript
    code! Create a file called `index.js` and link to it in `index.html` by adding
    the following to the end of the `<body>`:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œæˆ*æ— èŠ*çš„éƒ¨åˆ†åï¼Œè®©æˆ‘ä»¬å¼€å§‹ç¼–å†™ä¸€äº›JavaScriptä»£ç ï¼åˆ›å»ºä¸€ä¸ªåä¸º`index.js`çš„æ–‡ä»¶ï¼Œå¹¶é€šè¿‡å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°`<body>`çš„æœ«å°¾æ¥å°†å…¶é“¾æ¥åˆ°`index.html`ï¼š
- en: '[PRE2]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The `type="module"` attribute is important, as it turns our file into a [JavaScript
    module](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules),
    meaning that weâ€™ll be able to use imports and exports.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '`type="module"`å±æ€§å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå°†æˆ‘ä»¬çš„æ–‡ä»¶è½¬æ¢ä¸º[JavaScriptæ¨¡å—](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†èƒ½å¤Ÿä½¿ç”¨å¯¼å…¥å’Œå¯¼å‡ºã€‚'
- en: 'Moving into `index.js`, letâ€™s import Transformers.js by adding the following
    line to the top of the file:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: è¿›å…¥`index.js`ï¼Œè®©æˆ‘ä»¬é€šè¿‡åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹è¡Œæ¥å¯¼å…¥Transformers.jsï¼š
- en: '[PRE3]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Since we will be downloading the model from the Hugging Face Hub, we can skip
    the local model check by setting:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å°†ä»Hugging Face Hubä¸‹è½½æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®æ¥è·³è¿‡æœ¬åœ°æ¨¡å‹æ£€æŸ¥ï¼š
- en: '[PRE4]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Next, letâ€™s create references to the various DOM elements we will access later:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå¯¹ç¨åå°†è®¿é—®çš„å„ç§DOMå…ƒç´ çš„å¼•ç”¨ï¼š
- en: '[PRE5]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Step 3: Create an object detection pipeline'
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸€ä¸ªç›®æ ‡æ£€æµ‹æµæ°´çº¿
- en: Weâ€™re finally ready to create our object detection pipeline! As a reminder,
    a [pipeline](./pipelines). is a high-level interface provided by the library to
    perform a specific task. In our case, we will instantiate an object detection
    pipeline with the `pipeline()` helper function.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç»ˆäºå‡†å¤‡å¥½åˆ›å»ºæˆ‘ä»¬çš„ç›®æ ‡æ£€æµ‹æµæ°´çº¿äº†ï¼ä½œä¸ºæé†’ï¼Œ[æµæ°´çº¿](./pipelines)æ˜¯åº“æä¾›çš„ç”¨äºæ‰§è¡Œç‰¹å®šä»»åŠ¡çš„é«˜çº§æ¥å£ã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`pipeline()`è¾…åŠ©å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªç›®æ ‡æ£€æµ‹æµæ°´çº¿ã€‚
- en: Since this can take some time (especially the first time when we have to download
    the ~40MB model), we first update the `status` paragraph so that the user knows
    that weâ€™re about to load the model.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸€æ¬¡éœ€è¦ä¸‹è½½çº¦40MBçš„æ¨¡å‹æ—¶ï¼‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ›´æ–°`status`æ®µè½ï¼Œä»¥ä¾¿ç”¨æˆ·çŸ¥é“æˆ‘ä»¬å³å°†åŠ è½½æ¨¡å‹ã€‚
- en: '[PRE6]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: To keep this tutorial simple, weâ€™ll be loading and running the model in the
    main (UI) thread. This is not recommended for production applications, since the
    UI will freeze when weâ€™re performing these actions. This is because JavaScript
    is a single-threaded language. To overcome this, you can use a [web worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)
    to download and run the model in the background. However, weâ€™re not going to do
    cover that in this tutorialâ€¦
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿æœ¬æ•™ç¨‹ç®€å•ï¼Œæˆ‘ä»¬å°†åœ¨ä¸»ï¼ˆUIï¼‰çº¿ç¨‹ä¸­åŠ è½½å’Œè¿è¡Œæ¨¡å‹ã€‚è¿™åœ¨ç”Ÿäº§åº”ç”¨ç¨‹åºä¸­ä¸æ¨èï¼Œå› ä¸ºåœ¨æ‰§è¡Œè¿™äº›æ“ä½œæ—¶ï¼ŒUIå°†ä¼šå†»ç»“ã€‚è¿™æ˜¯å› ä¸ºJavaScriptæ˜¯å•çº¿ç¨‹è¯­è¨€ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[web
    worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)åœ¨åå°ä¸‹è½½å’Œè¿è¡Œæ¨¡å‹ã€‚ä½†æ˜¯ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬ä¸ä¼šæ¶‰åŠåˆ°è¿™ä¸€ç‚¹...
- en: 'We can now call the `pipeline()` function that we imported at the top of our
    file, to create our object detection pipeline:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥è°ƒç”¨æˆ‘ä»¬åœ¨æ–‡ä»¶é¡¶éƒ¨å¯¼å…¥çš„`pipeline()`å‡½æ•°ï¼Œä»¥åˆ›å»ºæˆ‘ä»¬çš„ç›®æ ‡æ£€æµ‹æµæ°´çº¿ï¼š
- en: '[PRE7]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Weâ€™re passing two arguments into the `pipeline()` function: (1) task and (2)
    model.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä¸¤ä¸ªå‚æ•°ä¼ é€’ç»™`pipeline()`å‡½æ•°ï¼šï¼ˆ1ï¼‰ä»»åŠ¡å’Œï¼ˆ2ï¼‰æ¨¡å‹ã€‚
- en: The first tells Transformers.js what kind of task we want to perform. In our
    case, that is `object-detection`, but there are many other tasks that the library
    supports, including `text-generation`, `sentiment-analysis`, `summarization`,
    or `automatic-speech-recognition`. See [here](https://huggingface.co/docs/transformers.js/pipelines#tasks)
    for the full list.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå‘Šè¯‰Transformers.jsæˆ‘ä»¬æƒ³è¦æ‰§è¡Œä»€ä¹ˆæ ·çš„ä»»åŠ¡ã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œé‚£å°±æ˜¯`object-detection`ï¼Œä½†åº“æ”¯æŒè®¸å¤šå…¶ä»–ä»»åŠ¡ï¼ŒåŒ…æ‹¬`text-generation`ï¼Œ`sentiment-analysis`ï¼Œ`summarization`æˆ–`automatic-speech-recognition`ã€‚è¯·å‚é˜…[è¿™é‡Œ](https://huggingface.co/docs/transformers.js/pipelines#tasks)è·å–å®Œæ•´åˆ—è¡¨ã€‚
- en: The second argument specifies which model we would like to use to solve the
    given task. We will use [`Xenova/detr-resnet-50`](https://huggingface.co/Xenova/detr-resnet-50),
    as it is a relatively small (~40MB) but powerful model for detecting objects in
    an image.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šæˆ‘ä»¬æƒ³è¦ä½¿ç”¨å“ªä¸ªæ¨¡å‹æ¥è§£å†³ç»™å®šçš„ä»»åŠ¡ã€‚æˆ‘ä»¬å°†ä½¿ç”¨[`Xenova/detr-resnet-50`](https://huggingface.co/Xenova/detr-resnet-50)ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒå°ï¼ˆ~40MBï¼‰ä½†åŠŸèƒ½å¼ºå¤§çš„æ¨¡å‹ï¼Œç”¨äºæ£€æµ‹å›¾åƒä¸­çš„å¯¹è±¡ã€‚
- en: Once the function returns, weâ€™ll tell the user that the app is ready to be used.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°è¿”å›åï¼Œæˆ‘ä»¬å°†å‘Šè¯‰ç”¨æˆ·åº”ç”¨ç¨‹åºå·²å‡†å¤‡å¥½ä½¿ç”¨ã€‚
- en: '[PRE8]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Step 4: Create the image uploader'
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬å››æ­¥ï¼šåˆ›å»ºå›¾åƒä¸Šä¼ å™¨
- en: The next step is to support uploading/selection of images. To achieve this,
    we will listen for â€œchangeâ€ events from the `fileUpload` element. In the callback
    function, we use a `FileReader()` to read the contents of the image if one is
    selected (and nothing otherwise).
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹ä¸€æ­¥æ˜¯æ”¯æŒä¸Šä¼ /é€‰æ‹©å›¾åƒã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ç›‘å¬`fileUpload`å…ƒç´ çš„â€œchangeâ€äº‹ä»¶ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœé€‰æ‹©äº†å›¾åƒï¼ˆå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åšï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨`FileReader()`æ¥è¯»å–å›¾åƒçš„å†…å®¹ã€‚
- en: '[PRE9]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Once the image has been loaded into the browser, the `reader.onload` callback
    function will be invoked. In it, we append the new `<img>` element to the `imageContainer`
    to be displayed to the user.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦å›¾åƒè¢«åŠ è½½åˆ°æµè§ˆå™¨ä¸­ï¼Œ`reader.onload`å›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ã€‚åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°†æ–°çš„`<img>`å…ƒç´ é™„åŠ åˆ°`imageContainer`ä¸­ï¼Œä»¥ä¾›ç”¨æˆ·æŸ¥çœ‹ã€‚
- en: 'Donâ€™t worry about the `detect(image)` function call (which is commented out)
    - we will explain it later! For now, try to run the app and upload an image to
    the browser. You should see your image displayed under the button like this:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸è¦æ‹…å¿ƒ`detect(image)`å‡½æ•°è°ƒç”¨ï¼ˆå·²æ³¨é‡Šæ‰ï¼‰-æˆ‘ä»¬ç¨åä¼šè§£é‡Šï¼ç°åœ¨ï¼Œå°è¯•è¿è¡Œåº”ç”¨ç¨‹åºå¹¶å°†å›¾åƒä¸Šä¼ åˆ°æµè§ˆå™¨ã€‚æ‚¨åº”è¯¥çœ‹åˆ°æ‚¨çš„å›¾åƒæ˜¾ç¤ºåœ¨æŒ‰é’®ä¸‹æ–¹ï¼Œå°±åƒè¿™æ ·ï¼š
- en: '![Demo](../Images/cb7cca9d3c88a5511c333c6583724936.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![æ¼”ç¤º](../Images/cb7cca9d3c88a5511c333c6583724936.png)'
- en: 'Step 5: Run the model'
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬äº”æ­¥ï¼šè¿è¡Œæ¨¡å‹
- en: 'Weâ€™re finally ready to start interacting with Transformers.js! Letâ€™s uncomment
    the `detect(image)` function call from the snippet above. Then weâ€™ll define the
    function itself:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç»ˆäºå‡†å¤‡å¥½å¼€å§‹ä¸Transformers.jsäº¤äº’äº†ï¼è®©æˆ‘ä»¬å–æ¶ˆä¸Šé¢ç‰‡æ®µä¸­çš„`detect(image)`å‡½æ•°è°ƒç”¨çš„æ³¨é‡Šã€‚ç„¶åæˆ‘ä»¬å°†å®šä¹‰å‡½æ•°æœ¬èº«ï¼š
- en: '[PRE10]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'NOTE: The `detect` function needs to be asynchronous, since weâ€™ll `await` the
    result of the the model.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼š`detect`å‡½æ•°éœ€è¦æ˜¯å¼‚æ­¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°†ç­‰å¾…æ¨¡å‹çš„ç»“æœã€‚
- en: Once weâ€™ve updated the `status` to â€œAnalysingâ€, weâ€™re ready to perform *inference*,
    which simply means to run the model with some data. This is done via the `detector()`
    function that was returned from `pipeline()`. The first argument weâ€™re passing
    is the image data (`img.src`).
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬å°†`status`æ›´æ–°ä¸ºâ€œåˆ†æä¸­â€ï¼Œæˆ‘ä»¬å°±å‡†å¤‡å¥½æ‰§è¡Œ*æ¨ç†*ï¼Œè¿™åªæ˜¯æ„å‘³ç€ç”¨ä¸€äº›æ•°æ®è¿è¡Œæ¨¡å‹ã€‚è¿™æ˜¯é€šè¿‡ä»`pipeline()`è¿”å›çš„`detector()`å‡½æ•°å®Œæˆçš„ã€‚æˆ‘ä»¬ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å›¾åƒæ•°æ®ï¼ˆ`img.src`ï¼‰ã€‚
- en: 'The second argument is an options object:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼š
- en: We set the `threshold` property to `0.5`. This means that we want the model
    to be at least 50% confident before claiming it has detected an object in the
    image. The lower the threshold, the more objects itâ€™ll detect (but may misidentify
    objects); the higher the threshold, the fewer objects itâ€™ll detect (but may miss
    objects in the scene).
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†`threshold`å±æ€§è®¾ç½®ä¸º`0.5`ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¸Œæœ›æ¨¡å‹è‡³å°‘æœ‰50%çš„ä¿¡å¿ƒæ‰èƒ½å£°ç§°åœ¨å›¾åƒä¸­æ£€æµ‹åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚é˜ˆå€¼è¶Šä½ï¼Œæ£€æµ‹åˆ°çš„å¯¹è±¡å°±è¶Šå¤šï¼ˆä½†å¯èƒ½ä¼šè¯¯è¯†åˆ«å¯¹è±¡ï¼‰ï¼›é˜ˆå€¼è¶Šé«˜ï¼Œæ£€æµ‹åˆ°çš„å¯¹è±¡å°±è¶Šå°‘ï¼ˆä½†å¯èƒ½ä¼šé”™è¿‡åœºæ™¯ä¸­çš„å¯¹è±¡ï¼‰ã€‚
- en: 'We also specify `percentage: true`, which means that we want the bounding box
    for the objects to be returned as percentages (instead of pixels).'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'æˆ‘ä»¬è¿˜æŒ‡å®š`percentage: true`ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¸Œæœ›å¯¹è±¡çš„è¾¹ç•Œæ¡†ä»¥ç™¾åˆ†æ¯”å½¢å¼è¿”å›ï¼ˆè€Œä¸æ˜¯åƒç´ ï¼‰ã€‚'
- en: 'If you now try to run the app and upload an image, you should see the following
    output logged to the console:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨ç°åœ¨å°è¯•è¿è¡Œè¯¥åº”ç”¨ç¨‹åºå¹¶ä¸Šä¼ å›¾åƒï¼Œæ‚¨åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè®°å½•åˆ°æ§åˆ¶å°ï¼š
- en: '![Demo](../Images/3b9d7bad794acec4f02358c5e5494057.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![æ¼”ç¤º](../Images/3b9d7bad794acec4f02358c5e5494057.png)'
- en: In the example above, we uploaded an image of two elephants, so the `output`
    variable holds an array with two objects, each containing a `label` (the string
    â€œelephantâ€), a `score` (indicating the modelâ€™s confidence in its prediction) and
    a `box` object (representing the bounding box of the detected entity).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸Šä¼ äº†ä¸€å¼ ä¸¤åªå¤§è±¡çš„å›¾åƒï¼Œæ‰€ä»¥`output`å˜é‡åŒ…å«ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå¯¹è±¡çš„æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ª`label`ï¼ˆå­—ç¬¦ä¸²â€œelephantâ€ï¼‰ï¼Œä¸€ä¸ª`score`ï¼ˆè¡¨ç¤ºæ¨¡å‹å¯¹å…¶é¢„æµ‹çš„ä¿¡å¿ƒï¼‰å’Œä¸€ä¸ª`box`å¯¹è±¡ï¼ˆè¡¨ç¤ºæ£€æµ‹åˆ°çš„å®ä½“çš„è¾¹ç•Œæ¡†ï¼‰ã€‚
- en: 'Step 6: Render the boxes'
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬å…­æ­¥ï¼šæ¸²æŸ“æ¡†
- en: The final step is to display the `box` coordinates as rectangles around each
    of the elephants.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸€æ­¥æ˜¯å°†`box`åæ ‡æ˜¾ç¤ºä¸ºå›´ç»•æ¯åªå¤§è±¡çš„çŸ©å½¢ã€‚
- en: At the end of our `detect()` function, weâ€™ll run the `renderBox` function on
    each object in the `output` array, using `.forEach()`.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„`detect()`å‡½æ•°çš„æœ«å°¾ï¼Œæˆ‘ä»¬å°†åœ¨`output`æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šè¿è¡Œ`renderBox`å‡½æ•°ï¼Œä½¿ç”¨`.forEach()`ã€‚
- en: '[PRE11]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Hereâ€™s the code for the `renderBox()` function with comments to help you understand
    whatâ€™s going on:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯å¸¦æœ‰æ³¨é‡Šçš„`renderBox()`å‡½æ•°çš„ä»£ç ï¼Œä»¥å¸®åŠ©æ‚¨ç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼š
- en: '[PRE12]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The bounding box and label span also need some styling, so add the following
    to the `style.css` file:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: è¾¹ç•Œæ¡†å’Œæ ‡ç­¾è·¨åº¦è¿˜éœ€è¦ä¸€äº›æ ·å¼ï¼Œå› æ­¤å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°`style.css`æ–‡ä»¶ä¸­ï¼š
- en: '[PRE13]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '**And thatâ€™s it!**'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '**å°±æ˜¯è¿™æ ·ï¼**'
- en: 'Youâ€™ve now built your own fully-functional AI application that detects objects
    in images, which runns completely in your browser: no external server, APIs, or
    build tools. Pretty cool! ğŸ¥³'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨ç°åœ¨å·²ç»æ„å»ºäº†ä¸€ä¸ªå®Œå…¨åŠŸèƒ½çš„AIåº”ç”¨ç¨‹åºï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ£€æµ‹å›¾åƒä¸­çš„å¯¹è±¡ï¼šæ²¡æœ‰å¤–éƒ¨æœåŠ¡å™¨ã€APIæˆ–æ„å»ºå·¥å…·ã€‚éå¸¸é…·ï¼ğŸ¥³
- en: '![Demo](../Images/483cc54122437ce4a480746160152d3d.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![æ¼”ç¤º](../Images/483cc54122437ce4a480746160152d3d.png)'
- en: 'The app is live at the following URL: [https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector](https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥åº”ç”¨ç¨‹åºå·²åœ¨ä»¥ä¸‹ç½‘å€ä¸Šçº¿ï¼š[https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector](https://huggingface.co/spaces/Scrimba/vanilla-js-object-detector)
