- en: AutoPipeline
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AutoPipeline
- en: 'Original text: [https://huggingface.co/docs/diffusers/tutorials/autopipeline](https://huggingface.co/docs/diffusers/tutorials/autopipeline)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://huggingface.co/docs/diffusers/tutorials/autopipeline](https://huggingface.co/docs/diffusers/tutorials/autopipeline)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: ğŸ¤— Diffusers is able to complete many different tasks, and you can often reuse
    the same pretrained weights for multiple tasks such as text-to-image, image-to-image,
    and inpainting. If youâ€™re new to the library and diffusion models though, it may
    be difficult to know which pipeline to use for a task. For example, if youâ€™re
    using the [runwayml/stable-diffusion-v1-5](https://huggingface.co/runwayml/stable-diffusion-v1-5)
    checkpoint for text-to-image, you might not know that you could also use it for
    image-to-image and inpainting by loading the checkpoint with the [StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline)
    and [StableDiffusionInpaintPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/inpaint#diffusers.StableDiffusionInpaintPipeline)
    classes respectively.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¤— Diffusersèƒ½å¤Ÿå®Œæˆè®¸å¤šä¸åŒçš„ä»»åŠ¡ï¼Œæ‚¨é€šå¸¸å¯ä»¥é‡å¤ä½¿ç”¨ç›¸åŒçš„é¢„è®­ç»ƒæƒé‡æ¥å®Œæˆå¤šä¸ªä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬åˆ°å›¾åƒã€å›¾åƒåˆ°å›¾åƒå’Œä¿®å¤ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯¹åº“å’Œæ‰©æ•£æ¨¡å‹ä¸ç†Ÿæ‚‰ï¼Œå¯èƒ½å¾ˆéš¾çŸ¥é“è¦ä¸ºä»»åŠ¡ä½¿ç”¨å“ªä¸ªç®¡é“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨[runwayml/stable-diffusion-v1-5](https://huggingface.co/runwayml/stable-diffusion-v1-5)æ£€æŸ¥ç‚¹è¿›è¡Œæ–‡æœ¬åˆ°å›¾åƒï¼Œæ‚¨å¯èƒ½ä¸çŸ¥é“æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨[StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline)å’Œ[StableDiffusionInpaintPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/inpaint#diffusers.StableDiffusionInpaintPipeline)ç±»åˆ†åˆ«åŠ è½½æ£€æŸ¥ç‚¹è¿›è¡Œå›¾åƒåˆ°å›¾åƒå’Œä¿®å¤ã€‚
- en: The `AutoPipeline` class is designed to simplify the variety of pipelines in
    ğŸ¤— Diffusers. It is a generic, *task-first* pipeline that lets you focus on the
    task. The `AutoPipeline` automatically detects the correct pipeline class to use,
    which makes it easier to load a checkpoint for a task without knowing the specific
    pipeline class name.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '`AutoPipeline`ç±»æ—¨åœ¨ç®€åŒ–ğŸ¤— Diffusersä¸­å„ç§ç®¡é“ã€‚å®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„ã€*ä»»åŠ¡ä¼˜å…ˆ*çš„ç®¡é“ï¼Œè®©æ‚¨ä¸“æ³¨äºä»»åŠ¡ã€‚`AutoPipeline`ä¼šè‡ªåŠ¨æ£€æµ‹è¦ä½¿ç”¨çš„æ­£ç¡®ç®¡é“ç±»ï¼Œè¿™ä½¿å¾—åœ¨ä¸çŸ¥é“ç‰¹å®šç®¡é“ç±»åç§°çš„æƒ…å†µä¸‹ä¸ºä»»åŠ¡åŠ è½½æ£€æŸ¥ç‚¹å˜å¾—æ›´å®¹æ˜“ã€‚'
- en: Take a look at the [AutoPipeline](../api/pipelines/auto_pipeline) reference
    to see which tasks are supported. Currently, it supports text-to-image, image-to-image,
    and inpainting.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹[AutoPipeline](../api/pipelines/auto_pipeline)å‚è€ƒä»¥æŸ¥çœ‹æ”¯æŒçš„ä»»åŠ¡ã€‚ç›®å‰ï¼Œå®ƒæ”¯æŒæ–‡æœ¬åˆ°å›¾åƒã€å›¾åƒåˆ°å›¾åƒå’Œä¿®å¤ã€‚
- en: This tutorial shows you how to use an `AutoPipeline` to automatically infer
    the pipeline class to load for a specific task, given the pretrained weights.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ•™ç¨‹å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨`AutoPipeline`è‡ªåŠ¨æ¨æ–­è¦åŠ è½½çš„ç‰¹å®šä»»åŠ¡çš„ç®¡é“ç±»ï¼Œç»™å®šé¢„è®­ç»ƒæƒé‡ã€‚
- en: Choose an AutoPipeline for your task
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸ºæ‚¨çš„ä»»åŠ¡é€‰æ‹©ä¸€ä¸ªAutoPipeline
- en: 'Start by picking a checkpoint. For example, if youâ€™re interested in text-to-image
    with the [runwayml/stable-diffusion-v1-5](https://huggingface.co/runwayml/stable-diffusion-v1-5)
    checkpoint, use [AutoPipelineForText2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForText2Image):'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆé€‰æ‹©ä¸€ä¸ªæ£€æŸ¥ç‚¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¯¹ä½¿ç”¨[runwayml/stable-diffusion-v1-5](https://huggingface.co/runwayml/stable-diffusion-v1-5)æ£€æŸ¥ç‚¹è¿›è¡Œæ–‡æœ¬åˆ°å›¾åƒæ„Ÿå…´è¶£ï¼Œè¯·ä½¿ç”¨[AutoPipelineForText2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForText2Image)ï¼š
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![generated image of peasant fighting dragon in wood cutting style](../Images/6b36788d2ba60d3bbff51fcbbb0d71e8.png)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![ç”Ÿæˆçš„å†œæ°‘ä¸é¾™åœ¨æœ¨åˆ»é£æ ¼ä¸­æˆ˜æ–—çš„å›¾åƒ](../Images/6b36788d2ba60d3bbff51fcbbb0d71e8.png)'
- en: 'Under the hood, [AutoPipelineForText2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForText2Image):'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¹•åï¼Œ[AutoPipelineForText2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForText2Image)ï¼š
- en: automatically detects a `"stable-diffusion"` class from the [`model_index.json`](https://huggingface.co/runwayml/stable-diffusion-v1-5/blob/main/model_index.json)
    file
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è‡ªåŠ¨ä»[`model_index.json`](https://huggingface.co/runwayml/stable-diffusion-v1-5/blob/main/model_index.json)æ–‡ä»¶ä¸­æ£€æµ‹åˆ°ä¸€ä¸ª`"stable-diffusion"`ç±»
- en: loads the corresponding text-to-image [StableDiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/text2img#diffusers.StableDiffusionPipeline)
    based on the `"stable-diffusion"` class name
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ ¹æ®`"stable-diffusion"`ç±»ååŠ è½½ç›¸åº”çš„æ–‡æœ¬åˆ°å›¾åƒ[StableDiffusionPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/text2img#diffusers.StableDiffusionPipeline)
- en: 'Likewise, for image-to-image, [AutoPipelineForImage2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image)
    detects a `"stable-diffusion"` checkpoint from the `model_index.json` file and
    itâ€™ll load the corresponding [StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline)
    behind the scenes. You can also pass any additional arguments specific to the
    pipeline class such as `strength`, which determines the amount of noise or variation
    added to an input image:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·ï¼Œå¯¹äºå›¾åƒåˆ°å›¾åƒï¼Œ[AutoPipelineForImage2Image](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image)ä¼šä»`model_index.json`æ–‡ä»¶ä¸­æ£€æµ‹åˆ°ä¸€ä¸ª`"stable-diffusion"`æ£€æŸ¥ç‚¹ï¼Œå¹¶åœ¨å¹•ååŠ è½½ç›¸åº”çš„[StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline)ã€‚æ‚¨è¿˜å¯ä»¥ä¼ é€’ä»»ä½•ç‰¹å®šäºç®¡é“ç±»çš„å…¶ä»–å‚æ•°ï¼Œå¦‚`strength`ï¼Œå®ƒç¡®å®šæ·»åŠ åˆ°è¾“å…¥å›¾åƒçš„å™ªéŸ³æˆ–å˜åŒ–çš„é‡ï¼š
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![generated image of a vermeer portrait of a dog wearing a pearl earring](../Images/324a523572635d35cf0a7729b6276327.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![ç”Ÿæˆçš„æˆ´çç è€³ç¯çš„ç‹—çš„ç»´æ¢…å°”è‚–åƒ](../Images/324a523572635d35cf0a7729b6276327.png)'
- en: 'And if you want to do inpainting, then [AutoPipelineForInpainting](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForInpainting)
    loads the underlying [StableDiffusionInpaintPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/inpaint#diffusers.StableDiffusionInpaintPipeline)
    class in the same way:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æƒ³è¦è¿›è¡Œä¿®å¤ï¼Œåˆ™[AutoPipelineForInpainting](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForInpainting)ä»¥ç›¸åŒçš„æ–¹å¼åŠ è½½åº•å±‚çš„[StableDiffusionInpaintPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/inpaint#diffusers.StableDiffusionInpaintPipeline)ç±»ï¼š
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![generated image of a tiger sitting on a bench](../Images/0a4e68dcc87ca3b2dd1efff748f52b7d.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![ç”Ÿæˆçš„è€è™ååœ¨é•¿æ¤…ä¸Šçš„å›¾åƒ](../Images/0a4e68dcc87ca3b2dd1efff748f52b7d.png)'
- en: 'If you try to load an unsupported checkpoint, itâ€™ll throw an error:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœå°è¯•åŠ è½½ä¸å—æ”¯æŒçš„æ£€æŸ¥ç‚¹ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ï¼š
- en: '[PRE3]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Use multiple pipelines
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å¤šä¸ªç®¡é“
- en: For some workflows or if youâ€™re loading many pipelines, it is more memory-efficient
    to reuse the same components from a checkpoint instead of reloading them which
    would unnecessarily consume additional memory. For example, if youâ€™re using a
    checkpoint for text-to-image and you want to use it again for image-to-image,
    use the [from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)
    method. This method creates a new pipeline from the components of a previously
    loaded pipeline at no additional memory cost.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæŸäº›å·¥ä½œæµç¨‹æˆ–è€…å¦‚æœæ‚¨æ­£åœ¨åŠ è½½è®¸å¤šæµæ°´çº¿ï¼Œæ›´èŠ‚çœå†…å­˜çš„æ–¹æ³•æ˜¯é‡å¤ä½¿ç”¨æ¥è‡ªæ£€æŸ¥ç‚¹çš„ç›¸åŒç»„ä»¶ï¼Œè€Œä¸æ˜¯é‡æ–°åŠ è½½å®ƒä»¬ï¼Œè¿™æ ·ä¼šä¸å¿…è¦åœ°æ¶ˆè€—é¢å¤–çš„å†…å­˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç”¨äºæ–‡æœ¬åˆ°å›¾åƒçš„æ£€æŸ¥ç‚¹ï¼Œå¹¶ä¸”æƒ³è¦å†æ¬¡ç”¨äºå›¾åƒåˆ°å›¾åƒï¼Œå¯ä»¥ä½¿ç”¨[from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä»¥é›¶é¢å¤–å†…å­˜æˆæœ¬ä»å…ˆå‰åŠ è½½çš„æµæ°´çº¿çš„ç»„ä»¶åˆ›å»ºä¸€ä¸ªæ–°çš„æµæ°´çº¿ã€‚
- en: 'The [from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)
    method detects the original pipeline class and maps it to the new pipeline class
    corresponding to the task you want to do. For example, if you load a `"stable-diffusion"`
    class pipeline for text-to-image:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)æ–¹æ³•æ£€æµ‹åŸå§‹æµæ°´çº¿ç±»ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°æ‚¨æƒ³è¦æ‰§è¡Œçš„ä»»åŠ¡å¯¹åº”çš„æ–°æµæ°´çº¿ç±»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨åŠ è½½äº†ä¸€ä¸ªç”¨äºæ–‡æœ¬åˆ°å›¾åƒçš„`"stable-diffusion"`ç±»æµæ°´çº¿ï¼š'
- en: '[PRE4]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Then [from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)
    maps the original `"stable-diffusion"` pipeline class to [StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline):'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶å[from_pipe()](/docs/diffusers/v0.26.3/en/api/pipelines/auto_pipeline#diffusers.AutoPipelineForImage2Image.from_pipe)å°†åŸå§‹çš„`"stable-diffusion"`æµæ°´çº¿ç±»æ˜ å°„åˆ°[StableDiffusionImg2ImgPipeline](/docs/diffusers/v0.26.3/en/api/pipelines/stable_diffusion/img2img#diffusers.StableDiffusionImg2ImgPipeline)ï¼š
- en: '[PRE5]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'If you passed an optional argument - like disabling the safety checker - to
    the original pipeline, this argument is also passed on to the new pipeline:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨å‘åŸå§‹æµæ°´çº¿ä¼ é€’äº†ä¸€ä¸ªå¯é€‰å‚æ•° - æ¯”å¦‚ç¦ç”¨å®‰å…¨æ£€æŸ¥å™¨ - è¿™ä¸ªå‚æ•°ä¹Ÿä¼šä¼ é€’ç»™æ–°çš„æµæ°´çº¿ï¼š
- en: '[PRE6]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'You can overwrite any of the arguments and even configuration from the original
    pipeline if you want to change the behavior of the new pipeline. For example,
    to turn the safety checker back on and add the `strength` argument:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æƒ³è¦æ›´æ”¹æ–°æµæ°´çº¿çš„è¡Œä¸ºï¼Œå¯ä»¥è¦†ç›–åŸå§‹æµæ°´çº¿çš„ä»»ä½•å‚æ•°ç”šè‡³é…ç½®ã€‚ä¾‹å¦‚ï¼Œè¦é‡æ–°æ‰“å¼€å®‰å…¨æ£€æŸ¥å™¨å¹¶æ·»åŠ `strength`å‚æ•°ï¼š
- en: '[PRE7]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
