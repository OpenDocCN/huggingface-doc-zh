- en: MMS
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MMS
- en: 'Original text: [https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mms](https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mms)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mms](https://huggingface.co/docs/transformers/v4.37.2/en/model_doc/mms)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Overview
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¦‚è¿°
- en: The MMS model was proposed in [Scaling Speech Technology to 1,000+ Languages](https://arxiv.org/abs/2305.13516)
    by Vineel Pratap, Andros Tjandra, Bowen Shi, Paden Tomasello, Arun Babu, Sayani
    Kundu, Ali Elkahky, Zhaoheng Ni, Apoorv Vyas, Maryam Fazel-Zarandi, Alexei Baevski,
    Yossi Adi, Xiaohui Zhang, Wei-Ning Hsu, Alexis Conneau, Michael Auli
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: MMSæ¨¡å‹æ˜¯ç”±Vineel Pratapã€Andros Tjandraã€Bowen Shiã€Paden Tomaselloã€Arun Babuã€Sayani
    Kunduã€Ali Elkahkyã€Zhaoheng Niã€Apoorv Vyasã€Maryam Fazel-Zarandiã€Alexei Baevskiã€Yossi
    Adiã€Xiaohui Zhangã€Wei-Ning Hsuã€Alexis Conneauã€Michael Auliåœ¨[å°†è¯­éŸ³æŠ€æœ¯æ‰©å±•åˆ°1000å¤šç§è¯­è¨€](https://arxiv.org/abs/2305.13516)ä¸­æå‡ºçš„ã€‚
- en: 'The abstract from the paper is the following:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: è®ºæ–‡çš„æ‘˜è¦å¦‚ä¸‹ï¼š
- en: '*Expanding the language coverage of speech technology has the potential to
    improve access to information for many more people. However, current speech technology
    is restricted to about one hundred languages which is a small fraction of the
    over 7,000 languages spoken around the world. The Massively Multilingual Speech
    (MMS) project increases the number of supported languages by 10-40x, depending
    on the task. The main ingredients are a new dataset based on readings of publicly
    available religious texts and effectively leveraging self-supervised learning.
    We built pre-trained wav2vec 2.0 models covering 1,406 languages, a single multilingual
    automatic speech recognition model for 1,107 languages, speech synthesis models
    for the same number of languages, as well as a language identification model for
    4,017 languages. Experiments show that our multilingual speech recognition model
    more than halves the word error rate of Whisper on 54 languages of the FLEURS
    benchmark while being trained on a small fraction of the labeled data.*'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '*æ‰©å¤§è¯­éŸ³æŠ€æœ¯çš„è¯­è¨€è¦†ç›–èŒƒå›´æœ‰å¯èƒ½æé«˜æ›´å¤šäººè·å–ä¿¡æ¯çš„æœºä¼šã€‚ç„¶è€Œï¼Œå½“å‰çš„è¯­éŸ³æŠ€æœ¯ä»…é™äºå¤§çº¦100ç§è¯­è¨€ï¼Œè¿™åªæ˜¯å…¨çƒçº¦7000ç§è¯­è¨€ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚å¤§è§„æ¨¡å¤šè¯­è¨€è¯­éŸ³ï¼ˆMMSï¼‰é¡¹ç›®é€šè¿‡10-40å€å¢åŠ äº†æ”¯æŒçš„è¯­è¨€æ•°é‡ï¼Œå…·ä½“å–å†³äºä»»åŠ¡ã€‚ä¸»è¦æˆåˆ†æ˜¯åŸºäºå…¬å¼€å¯ç”¨å®—æ•™æ–‡æœ¬çš„æ–°æ•°æ®é›†ï¼Œå¹¶æœ‰æ•ˆåœ°åˆ©ç”¨è‡ªç›‘ç£å­¦ä¹ ã€‚æˆ‘ä»¬æ„å»ºäº†è¦†ç›–1406ç§è¯­è¨€çš„é¢„è®­ç»ƒwav2vec
    2.0æ¨¡å‹ï¼Œä¸€ç§å•ä¸€çš„æ”¯æŒ1107ç§è¯­è¨€çš„å¤šè¯­è¨€è‡ªåŠ¨è¯­éŸ³è¯†åˆ«æ¨¡å‹ï¼Œä»¥åŠç›¸åŒæ•°é‡è¯­è¨€çš„è¯­éŸ³åˆæˆæ¨¡å‹ï¼Œä»¥åŠæ”¯æŒ4017ç§è¯­è¨€çš„è¯­è¨€è¯†åˆ«æ¨¡å‹ã€‚å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„å¤šè¯­è¨€è¯­éŸ³è¯†åˆ«æ¨¡å‹åœ¨FLEURSåŸºå‡†æµ‹è¯•çš„54ç§è¯­è¨€ä¸Šå°†Whisperçš„è¯é”™è¯¯ç‡å‡å°‘äº†ä¸€åŠä»¥ä¸Šï¼ŒåŒæ—¶åœ¨è®­ç»ƒæ—¶ä»…ä½¿ç”¨äº†å°‘é‡æ ‡è®°æ•°æ®ã€‚*'
- en: Here are the different models open sourced in the MMS project. The models and
    code are originally released [here](https://github.com/facebookresearch/fairseq/tree/main/examples/mms).
    We have add them to the `transformers` framework, making them easier to use.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯MMSé¡¹ç›®ä¸­å¼€æºçš„ä¸åŒæ¨¡å‹ã€‚è¿™äº›æ¨¡å‹å’Œä»£ç æœ€åˆå‘å¸ƒåœ¨[è¿™é‡Œ](https://github.com/facebookresearch/fairseq/tree/main/examples/mms)ã€‚æˆ‘ä»¬å·²å°†å®ƒä»¬æ·»åŠ åˆ°`transformers`æ¡†æ¶ä¸­ï¼Œä½¿å…¶æ›´æ˜“äºä½¿ç”¨ã€‚
- en: Automatic Speech Recognition (ASR)
  id: totrans-8
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰
- en: 'The ASR model checkpoints can be found here : [mms-1b-fl102](https://huggingface.co/facebook/mms-1b-fl102),
    [mms-1b-l1107](https://huggingface.co/facebook/mms-1b-l1107), [mms-1b-all](https://huggingface.co/facebook/mms-1b-all).
    For best accuracy, use the `mms-1b-all` model.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ASRæ¨¡å‹çš„æ£€æŸ¥ç‚¹å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š[mms-1b-fl102](https://huggingface.co/facebook/mms-1b-fl102)ï¼Œ[mms-1b-l1107](https://huggingface.co/facebook/mms-1b-l1107)ï¼Œ[mms-1b-all](https://huggingface.co/facebook/mms-1b-all)ã€‚ä¸ºäº†è·å¾—æœ€ä½³å‡†ç¡®æ€§ï¼Œè¯·ä½¿ç”¨`mms-1b-all`æ¨¡å‹ã€‚
- en: 'Tips:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºï¼š
- en: All ASR models accept a float array corresponding to the raw waveform of the
    speech signal. The raw waveform should be pre-processed with [Wav2Vec2FeatureExtractor](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2FeatureExtractor).
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ‰€æœ‰ASRæ¨¡å‹éƒ½æ¥å—ä¸€ä¸ªä¸è¯­éŸ³ä¿¡å·çš„åŸå§‹æ³¢å½¢å¯¹åº”çš„æµ®ç‚¹æ•°ç»„ã€‚åŸå§‹æ³¢å½¢åº”è¯¥ä½¿ç”¨[Wav2Vec2FeatureExtractor](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2FeatureExtractor)è¿›è¡Œé¢„å¤„ç†ã€‚
- en: The models were trained using connectionist temporal classification (CTC) so
    the model output has to be decoded using [Wav2Vec2CTCTokenizer](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2CTCTokenizer).
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¿™äº›æ¨¡å‹æ˜¯ä½¿ç”¨è¿æ¥ä¸»ä¹‰æ—¶é—´åˆ†ç±»ï¼ˆCTCï¼‰è¿›è¡Œè®­ç»ƒçš„ï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨[Wav2Vec2CTCTokenizer](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2CTCTokenizer)å¯¹æ¨¡å‹è¾“å‡ºè¿›è¡Œè§£ç ã€‚
- en: You can load different language adapter weights for different languages via
    [load_adapter()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC.load_adapter).
    Language adapters only consists of roughly 2 million parameters and can therefore
    be efficiently loaded on the fly when needed.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ‚¨å¯ä»¥é€šè¿‡[load_adapter()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC.load_adapter)ä¸ºä¸åŒè¯­è¨€åŠ è½½ä¸åŒçš„è¯­è¨€é€‚é…å™¨æƒé‡ã€‚è¯­è¨€é€‚é…å™¨ä»…åŒ…å«å¤§çº¦200ä¸‡ä¸ªå‚æ•°ï¼Œå› æ­¤åœ¨éœ€è¦æ—¶å¯ä»¥é«˜æ•ˆåœ°åŠ¨æ€åŠ è½½ã€‚
- en: Loading
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: åŠ è½½
- en: By default MMS loads adapter weights for English. If you want to load adapter
    weights of another language make sure to specify `target_lang=<your-chosen-target-lang>`
    as well as `"ignore_mismatched_sizes=True`. The `ignore_mismatched_sizes=True`
    keyword has to be passed to allow the language model head to be resized according
    to the vocabulary of the specified language. Similarly, the processor should be
    loaded with the same target language
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤æƒ…å†µä¸‹ï¼ŒMMSä¼šåŠ è½½è‹±è¯­çš„é€‚é…å™¨æƒé‡ã€‚å¦‚æœæ‚¨æƒ³åŠ è½½å¦ä¸€ç§è¯­è¨€çš„é€‚é…å™¨æƒé‡ï¼Œè¯·ç¡®ä¿æŒ‡å®š`target_lang=<your-chosen-target-lang>`ä»¥åŠ`"ignore_mismatched_sizes=True`ã€‚å¿…é¡»ä¼ é€’`ignore_mismatched_sizes=True`å…³é”®å­—ï¼Œä»¥å…è®¸è¯­è¨€æ¨¡å‹å¤´æ ¹æ®æŒ‡å®šè¯­è¨€çš„è¯æ±‡é‡æ–°è°ƒæ•´å¤§å°ã€‚åŒæ ·ï¼Œå¤„ç†å™¨åº”è¯¥åŠ è½½ç›¸åŒçš„ç›®æ ‡è¯­è¨€ã€‚
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'You can safely ignore a warning such as:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨å¯ä»¥å®‰å…¨åœ°å¿½ç•¥è­¦å‘Šï¼Œä¾‹å¦‚ï¼š
- en: '[PRE1]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'If you want to use the ASR pipeline, you can load your chosen target language
    as such:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè¦ä½¿ç”¨ASRæµç¨‹ï¼Œå¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼åŠ è½½æ‰€é€‰çš„ç›®æ ‡è¯­è¨€ï¼š
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Inference
  id: totrans-21
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: æ¨ç†
- en: Next, letâ€™s look at how we can run MMS in inference and change adapter layers
    after having called `~PretrainedModel.from_pretrained` First, we load audio data
    in different languages using the [Datasets](https://github.com/huggingface/datasets).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨è°ƒç”¨`~PretrainedModel.from_pretrained`ä¹‹åè¿è¡ŒMMSçš„æ¨ç†å¹¶æ›´æ”¹é€‚é…å™¨å±‚ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨[Datasets](https://github.com/huggingface/datasets)åŠ è½½ä¸åŒè¯­è¨€çš„éŸ³é¢‘æ•°æ®ã€‚
- en: '[PRE3]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Next, we load the model and processor
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŠ è½½æ¨¡å‹å’Œå¤„ç†å™¨
- en: '[PRE4]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Now we process the audio data, pass the processed audio data to the model and
    transcribe the model output, just like we usually do for [Wav2Vec2ForCTC](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC).
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¤„ç†éŸ³é¢‘æ•°æ®ï¼Œå°†å¤„ç†åçš„éŸ³é¢‘æ•°æ®ä¼ é€’ç»™æ¨¡å‹å¹¶è½¬å½•æ¨¡å‹è¾“å‡ºï¼Œå°±åƒæˆ‘ä»¬é€šå¸¸ä¸º[Wav2Vec2ForCTC](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC)æ‰€åšçš„é‚£æ ·ã€‚
- en: '[PRE5]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: We can now keep the same model in memory and simply switch out the language
    adapters by calling the convenient [load_adapter()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC.load_adapter)
    function for the model and [set_target_lang()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2CTCTokenizer.set_target_lang)
    for the tokenizer. We pass the target language as an input - `"fra"` for French.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†ç›¸åŒçš„æ¨¡å‹ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶é€šè¿‡è°ƒç”¨æ–¹ä¾¿çš„[load_adapter()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2ForCTC.load_adapter)å‡½æ•°ä¸ºæ¨¡å‹å’Œ[set_target_lang()](/docs/transformers/v4.37.2/en/model_doc/wav2vec2#transformers.Wav2Vec2CTCTokenizer.set_target_lang)ä¸ºåˆ†è¯å™¨åˆ‡æ¢è¯­è¨€é€‚é…å™¨ã€‚æˆ‘ä»¬å°†ç›®æ ‡è¯­è¨€ä½œä¸ºè¾“å…¥ä¼ é€’
    - `"fra"`è¡¨ç¤ºæ³•è¯­ã€‚
- en: '[PRE6]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In the same way the language can be switched out for all other supported languages.
    Please have a look at:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥åŒæ ·çš„æ–¹å¼ï¼Œè¯­è¨€å¯ä»¥åˆ‡æ¢ä¸ºæ‰€æœ‰å…¶ä»–æ”¯æŒçš„è¯­è¨€ã€‚è¯·æŸ¥çœ‹ï¼š
- en: '[PRE7]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: to see all supported languages.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„è¯­è¨€ã€‚
- en: To further improve performance from ASR models, language model decoding can
    be used. See the documentation [here](https://huggingface.co/facebook/mms-1b-all)
    for further details.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¿›ä¸€æ­¥æé«˜ASRæ¨¡å‹çš„æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨è¯­è¨€æ¨¡å‹è§£ç ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ­¤å¤„çš„æ–‡æ¡£[here](https://huggingface.co/facebook/mms-1b-all)ã€‚
- en: Speech Synthesis (TTS)
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¯­éŸ³åˆæˆï¼ˆTTSï¼‰
- en: 'MMS-TTS uses the same model architecture as VITS, which was added to ğŸ¤— Transformers
    in v4.33\. MMS trains a separate model checkpoint for each of the 1100+ languages
    in the project. All available checkpoints can be found on the Hugging Face Hub:
    [facebook/mms-tts](https://huggingface.co/models?sort=trending&search=facebook%2Fmms-tts),
    and the inference documentation under [VITS](https://huggingface.co/docs/transformers/main/en/model_doc/vits).'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: MMS-TTSä½¿ç”¨ä¸VITSç›¸åŒçš„æ¨¡å‹æ¶æ„ï¼Œè¯¥æ¶æ„åœ¨v4.33ä¸­æ·»åŠ åˆ°ğŸ¤— Transformersä¸­ã€‚MMSä¸ºé¡¹ç›®ä¸­çš„1100å¤šç§è¯­è¨€ä¸­çš„æ¯ç§è¯­è¨€è®­ç»ƒäº†ä¸€ä¸ªå•ç‹¬çš„æ¨¡å‹æ£€æŸ¥ç‚¹ã€‚æ‰€æœ‰å¯ç”¨çš„æ£€æŸ¥ç‚¹éƒ½å¯ä»¥åœ¨Hugging
    Face Hubä¸Šæ‰¾åˆ°ï¼š[facebook/mms-tts](https://huggingface.co/models?sort=trending&search=facebook%2Fmms-tts)ï¼Œä»¥åŠ[VITS](https://huggingface.co/docs/transformers/main/en/model_doc/vits)ä¸‹çš„æ¨ç†æ–‡æ¡£ã€‚
- en: Inference
  id: totrans-36
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: æ¨ç†
- en: 'To use the MMS model, first update to the latest version of the Transformers
    library:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ä½¿ç”¨MMSæ¨¡å‹ï¼Œé¦–å…ˆæ›´æ–°åˆ°Transformersåº“çš„æœ€æ–°ç‰ˆæœ¬ï¼š
- en: '[PRE8]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Since the flow-based model in VITS is non-deterministic, it is good practice
    to set a seed to ensure reproducibility of the outputs.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºVITSä¸­çš„åŸºäºæµçš„æ¨¡å‹æ˜¯éç¡®å®šæ€§çš„ï¼Œå› æ­¤æœ€å¥½è®¾ç½®ä¸€ä¸ªç§å­ä»¥ç¡®ä¿è¾“å‡ºçš„å¯é‡ç°æ€§ã€‚
- en: 'For languages with a Roman alphabet, such as English or French, the tokenizer
    can be used directly to pre-process the text inputs. The following code example
    runs a forward pass using the MMS-TTS English checkpoint:'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯¹äºå…·æœ‰ç½—é©¬å­—æ¯è¡¨çš„è¯­è¨€ï¼Œä¾‹å¦‚è‹±è¯­æˆ–æ³•è¯­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åˆ†è¯å™¨å¯¹æ–‡æœ¬è¾“å…¥è¿›è¡Œé¢„å¤„ç†ã€‚ä»¥ä¸‹ä»£ç ç¤ºä¾‹ä½¿ç”¨MMS-TTSè‹±è¯­æ£€æŸ¥ç‚¹è¿è¡Œå‰å‘ä¼ é€’ï¼š
- en: '[PRE9]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The resulting waveform can be saved as a `.wav` file:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ç”Ÿæˆçš„æ³¢å½¢å¯ä»¥ä¿å­˜ä¸º`.wav`æ–‡ä»¶ï¼š
- en: '[PRE10]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Or displayed in a Jupyter Notebook / Google Colab:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–è€…åœ¨Jupyter Notebook / Google Colabä¸­æ˜¾ç¤ºï¼š
- en: '[PRE11]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: For certain languages with non-Roman alphabets, such as Arabic, Mandarin or
    Hindi, the [`uroman`](https://github.com/isi-nlp/uroman) perl package is required
    to pre-process the text inputs to the Roman alphabet.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå…·æœ‰éç½—é©¬å­—æ¯è¡¨çš„æŸäº›è¯­è¨€ï¼Œä¾‹å¦‚é˜¿æ‹‰ä¼¯è¯­ã€æ™®é€šè¯æˆ–å°åœ°è¯­ï¼Œéœ€è¦ä½¿ç”¨[`uroman`](https://github.com/isi-nlp/uroman)
    perlåŒ…å¯¹æ–‡æœ¬è¾“å…¥è¿›è¡Œé¢„å¤„ç†ä¸ºç½—é©¬å­—æ¯è¡¨ã€‚
- en: 'You can check whether you require the `uroman` package for your language by
    inspecting the `is_uroman` attribute of the pre-trained `tokenizer`:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥é¢„è®­ç»ƒçš„`tokenizer`çš„`is_uroman`å±æ€§æ¥æ£€æŸ¥æ‚¨çš„è¯­è¨€æ˜¯å¦éœ€è¦`uroman`åŒ…ï¼š
- en: '[PRE12]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: If required, you should apply the uroman package to your text inputs **prior**
    to passing them to the `VitsTokenizer`, since currently the tokenizer does not
    support performing the pre-processing itself.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœéœ€è¦ï¼Œåœ¨å°†æ–‡æœ¬è¾“å…¥ä¼ é€’ç»™`VitsTokenizer`ä¹‹å‰ï¼Œåº”è¯¥å°†uromanåŒ…åº”ç”¨äºæ‚¨çš„æ–‡æœ¬è¾“å…¥**ä¹‹å‰**ï¼Œå› ä¸ºç›®å‰åˆ†è¯å™¨ä¸æ”¯æŒæ‰§è¡Œé¢„å¤„ç†ã€‚
- en: 'To do this, first clone the uroman repository to your local machine and set
    the bash variable `UROMAN` to the local path:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆå°†uromanå­˜å‚¨åº“å…‹éš†åˆ°æœ¬åœ°è®¡ç®—æœºï¼Œå¹¶å°†bashå˜é‡`UROMAN`è®¾ç½®ä¸ºæœ¬åœ°è·¯å¾„ï¼š
- en: '[PRE13]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'You can then pre-process the text input using the following code snippet. You
    can either rely on using the bash variable `UROMAN` to point to the uroman repository,
    or you can pass the uroman directory as an argument to the `uromaize` function:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µå¯¹æ–‡æœ¬è¾“å…¥è¿›è¡Œé¢„å¤„ç†ã€‚æ‚¨å¯ä»¥ä¾èµ–ä½¿ç”¨bashå˜é‡`UROMAN`æŒ‡å‘uromanå­˜å‚¨åº“ï¼Œæˆ–è€…å¯ä»¥å°†uromanç›®å½•ä½œä¸ºå‚æ•°ä¼ é€’ç»™`uromaize`å‡½æ•°ï¼š
- en: '[PRE14]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '**Tips:**'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**æç¤ºï¼š**'
- en: The MMS-TTS checkpoints are trained on lower-cased, un-punctuated text. By default,
    the `VitsTokenizer` *normalizes* the inputs by removing any casing and punctuation,
    to avoid passing out-of-vocabulary characters to the model. Hence, the model is
    agnostic to casing and punctuation, so these should be avoided in the text prompt.
    You can disable normalisation by setting `noramlize=False` in the call to the
    tokenizer, but this will lead to un-expected behaviour and is discouraged.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MMS-TTSæ£€æŸ¥ç‚¹æ˜¯åœ¨å°å†™ã€æ— æ ‡ç‚¹çš„æ–‡æœ¬ä¸Šè®­ç»ƒçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`VitsTokenizer`é€šè¿‡åˆ é™¤ä»»ä½•å¤§å°å†™å’Œæ ‡ç‚¹æ¥*è§„èŒƒåŒ–*è¾“å…¥ï¼Œä»¥é¿å…å°†è¶…å‡ºè¯æ±‡è¡¨çš„å­—ç¬¦ä¼ é€’ç»™æ¨¡å‹ã€‚å› æ­¤ï¼Œæ¨¡å‹å¯¹å¤§å°å†™å’Œæ ‡ç‚¹ä¸æ•æ„Ÿï¼Œå› æ­¤åº”é¿å…åœ¨æ–‡æœ¬æç¤ºä¸­ä½¿ç”¨å®ƒä»¬ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨è°ƒç”¨åˆ†è¯å™¨æ—¶è®¾ç½®`noramlize=False`æ¥ç¦ç”¨è§„èŒƒåŒ–ï¼Œä½†è¿™å°†å¯¼è‡´æ„å¤–è¡Œä¸ºï¼Œä¸å»ºè®®è¿™æ ·åšã€‚
- en: 'The speaking rate can be varied by setting the attribute `model.speaking_rate`
    to a chosen value. Likewise, the randomness of the noise is controlled by `model.noise_scale`:'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é€šè¿‡å°†å±æ€§`model.speaking_rate`è®¾ç½®ä¸ºæ‰€é€‰å€¼ï¼Œå¯ä»¥æ”¹å˜è¯´è¯é€Ÿåº¦ã€‚åŒæ ·ï¼Œå™ªå£°çš„éšæœºæ€§ç”±`model.noise_scale`æ§åˆ¶ï¼š
- en: '[PRE15]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Language Identification (LID)
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: è¯­è¨€è¯†åˆ«ï¼ˆLIDï¼‰
- en: Different LID models are available based on the number of languages they can
    recognize - [126](https://huggingface.co/facebook/mms-lid-126), [256](https://huggingface.co/facebook/mms-lid-256),
    [512](https://huggingface.co/facebook/mms-lid-512), [1024](https://huggingface.co/facebook/mms-lid-1024),
    [2048](https://huggingface.co/facebook/mms-lid-2048), [4017](https://huggingface.co/facebook/mms-lid-4017).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®èƒ½å¤Ÿè¯†åˆ«çš„è¯­è¨€æ•°é‡ï¼Œæä¾›ä¸åŒçš„LIDæ¨¡å‹ - [126](https://huggingface.co/facebook/mms-lid-126)ï¼Œ[256](https://huggingface.co/facebook/mms-lid-256)ï¼Œ[512](https://huggingface.co/facebook/mms-lid-512)ï¼Œ[1024](https://huggingface.co/facebook/mms-lid-1024)ï¼Œ[2048](https://huggingface.co/facebook/mms-lid-2048)ï¼Œ[4017](https://huggingface.co/facebook/mms-lid-4017)ã€‚
- en: Inference
  id: totrans-60
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: æ¨ç†
- en: First, we install transformers and some other libraries
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬å®‰è£…transformerså’Œå…¶ä»–ä¸€äº›åº“
- en: '[PRE16]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Next, we load a couple of audio samples via `datasets`. Make sure that the audio
    data is sampled to 16000 kHz.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡`datasets`åŠ è½½ä¸€äº›éŸ³é¢‘æ ·æœ¬ã€‚ç¡®ä¿éŸ³é¢‘æ•°æ®é‡‡æ ·ç‡ä¸º16000 kHzã€‚
- en: '[PRE17]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Next, we load the model and processor
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åŠ è½½æ¨¡å‹å’Œå¤„ç†å™¨
- en: '[PRE18]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Now we process the audio data, pass the processed audio data to the model to
    classify it into a language, just like we usually do for Wav2Vec2 audio classification
    models such as [ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition](https://huggingface.co/harshit345/xlsr-wav2vec-speech-emotion-recognition)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¤„ç†éŸ³é¢‘æ•°æ®ï¼Œå°†å¤„ç†åçš„éŸ³é¢‘æ•°æ®ä¼ é€’ç»™æ¨¡å‹è¿›è¡Œåˆ†ç±»ï¼Œå°±åƒæˆ‘ä»¬é€šå¸¸å¯¹Wav2Vec2éŸ³é¢‘åˆ†ç±»æ¨¡å‹è¿›è¡Œçš„æ“ä½œä¸€æ ·ï¼Œæ¯”å¦‚[ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition](https://huggingface.co/harshit345/xlsr-wav2vec-speech-emotion-recognition)
- en: '[PRE19]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'To see all the supported languages of a checkpoint, you can print out the language
    ids as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹æ£€æŸ¥ç‚¹æ”¯æŒçš„æ‰€æœ‰è¯­è¨€ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼æ‰“å°è¯­è¨€æ ‡è¯†ç¬¦ï¼š
- en: '[PRE20]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Audio Pretrained Models
  id: totrans-71
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: éŸ³é¢‘é¢„è®­ç»ƒæ¨¡å‹
- en: Pretrained models are available for two different sizes - [300M](https://huggingface.co/facebook/mms-300m)
    , [1Bil](https://huggingface.co/facebook/mms-1b).
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: é¢„è®­ç»ƒæ¨¡å‹æä¾›ä¸¤ç§ä¸åŒå¤§å°çš„æ¨¡å‹ - [300M](https://huggingface.co/facebook/mms-300m)ï¼Œ[1Bil](https://huggingface.co/facebook/mms-1b)ã€‚
- en: The MMS for ASR architecture is based on the Wav2Vec2 model, refer to [Wav2Vec2â€™s
    documentation page](wav2vec2) for further details on how to finetune with models
    for various downstream tasks.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ASRæ¶æ„çš„MMSåŸºäºWav2Vec2æ¨¡å‹ï¼Œè¯·å‚è€ƒ[Wav2Vec2çš„æ–‡æ¡£é¡µé¢](wav2vec2)ä»¥è·å–æœ‰å…³å¦‚ä½•é’ˆå¯¹å„ç§ä¸‹æ¸¸ä»»åŠ¡å¾®è°ƒæ¨¡å‹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚
- en: MMS-TTS uses the same model architecture as VITS, refer to [VITSâ€™s documentation
    page](vits) for API reference.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: MMS-TTSä½¿ç”¨ä¸VITSç›¸åŒçš„æ¨¡å‹æ¶æ„ï¼Œè¯·å‚è€ƒ[VITSçš„æ–‡æ¡£é¡µé¢](vits)è·å–APIå‚è€ƒã€‚
