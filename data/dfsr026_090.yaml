- en: Habana Gaudi
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Habana Gaudi
- en: 'Original text: [https://huggingface.co/docs/diffusers/optimization/habana](https://huggingface.co/docs/diffusers/optimization/habana)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/diffusers/optimization/habana](https://huggingface.co/docs/diffusers/optimization/habana)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: 'ğŸ¤— Diffusers is compatible with Habana Gaudi through ğŸ¤— [Optimum](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion).
    Follow the [installation](https://docs.habana.ai/en/latest/Installation_Guide/index.html)
    guide to install the SynapseAI and Gaudi drivers, and then install Optimum Habana:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¤— Diffusersé€šè¿‡ğŸ¤— [Optimum](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion)ä¸Habana
    Gaudiå…¼å®¹ã€‚æŒ‰ç…§[å®‰è£…](https://docs.habana.ai/en/latest/Installation_Guide/index.html)æŒ‡å—å®‰è£…SynapseAIå’ŒGaudié©±åŠ¨ç¨‹åºï¼Œç„¶åå®‰è£…Optimum
    Habanaï¼š
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To generate images with Stable Diffusion 1 and 2 on Gaudi, you need to instantiate
    two instances:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Gaudiä¸Šçš„Stable Diffusion 1å’Œ2ç”Ÿæˆå›¾åƒï¼Œæ‚¨éœ€è¦å®ä¾‹åŒ–ä¸¤ä¸ªå®ä¾‹ï¼š
- en: '`GaudiStableDiffusionPipeline`, a pipeline for text-to-image generation.'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GaudiStableDiffusionPipeline`ï¼Œä¸€ä¸ªç”¨äºæ–‡æœ¬åˆ°å›¾åƒç”Ÿæˆçš„ç®¡é“ã€‚'
- en: '`GaudiDDIMScheduler`, a Gaudi-optimized scheduler.'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`GaudiDDIMScheduler`ï¼Œä¸€ä¸ªç»è¿‡ä¼˜åŒ–çš„Gaudiè°ƒåº¦å™¨ã€‚'
- en: When you initialize the pipeline, you have to specify `use_habana=True` to deploy
    it on HPUs and to get the fastest possible generation, you should enable **HPU
    graphs** with `use_hpu_graphs=True`.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ‚¨åˆå§‹åŒ–ç®¡é“æ—¶ï¼Œå¿…é¡»æŒ‡å®š`use_habana=True`ä»¥åœ¨HPUsä¸Šéƒ¨ç½²å®ƒï¼Œå¹¶ä¸”ä¸ºäº†è·å¾—å°½å¯èƒ½å¿«çš„ç”Ÿæˆé€Ÿåº¦ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨`use_hpu_graphs=True`å¯ç”¨**HPUå›¾**ã€‚
- en: Finally, specify a `GaudiConfig` which can be downloaded from the [Habana](https://huggingface.co/Habana)
    organization on the Hub.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼ŒæŒ‡å®šä¸€ä¸ªå¯ä»¥ä»[Habana](https://huggingface.co/Habana)ç»„ç»‡åœ¨Hubä¸Šä¸‹è½½çš„`GaudiConfig`ã€‚
- en: '[PRE1]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Now you can call the pipeline to generate images by batches from one or several
    prompts:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ç®¡é“æŒ‰æ‰¹æ¬¡ä»ä¸€ä¸ªæˆ–å¤šä¸ªæç¤ºç”Ÿæˆå›¾åƒï¼š
- en: '[PRE2]'
  id: totrans-12
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: For more information, check out ğŸ¤— Optimum Habanaâ€™s [documentation](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion)
    and the [example](https://github.com/huggingface/optimum-habana/tree/main/examples/stable-diffusion)
    provided in the official GitHub repository.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ğŸ¤— Optimum Habanaçš„[æ–‡æ¡£](https://huggingface.co/docs/optimum/habana/usage_guides/stable_diffusion)å’Œå®˜æ–¹GitHubå­˜å‚¨åº“ä¸­æä¾›çš„[ç¤ºä¾‹](https://github.com/huggingface/optimum-habana/tree/main/examples/stable-diffusion)ã€‚
- en: Benchmark
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: åŸºå‡†æµ‹è¯•
- en: We benchmarked Habanaâ€™s first-generation Gaudi and Gaudi2 with the [Habana/stable-diffusion](https://huggingface.co/Habana/stable-diffusion)
    and [Habana/stable-diffusion-2](https://huggingface.co/Habana/stable-diffusion-2)
    Gaudi configurations (mixed precision bf16/fp32) to demonstrate their performance.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯¹Habanaçš„ç¬¬ä¸€ä»£Gaudiå’ŒGaudi2è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ï¼Œä½¿ç”¨[Habana/stable-diffusion](https://huggingface.co/Habana/stable-diffusion)å’Œ[Habana/stable-diffusion-2](https://huggingface.co/Habana/stable-diffusion-2)
    Gaudié…ç½®ï¼ˆæ··åˆç²¾åº¦bf16/fp32ï¼‰æ¥å±•ç¤ºå®ƒä»¬çš„æ€§èƒ½ã€‚
- en: 'For [Stable Diffusion v1.5](https://huggingface.co/runwayml/stable-diffusion-v1-5)
    on 512x512 images:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äº[Stable Diffusion v1.5](https://huggingface.co/runwayml/stable-diffusion-v1-5)åœ¨512x512å›¾åƒä¸Šï¼š
- en: '|  | Latency (batch size = 1) | Throughput |'
  id: totrans-17
  prefs: []
  type: TYPE_TB
  zh: '|  | å»¶è¿Ÿï¼ˆæ‰¹é‡å¤§å°=1ï¼‰ | ååé‡ |'
- en: '| --- | :-: | :-: |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| --- | :-: | :-: |'
- en: '| first-generation Gaudi | 3.80s | 0.308 images/s (batch size = 8) |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| ç¬¬ä¸€ä»£Gaudi | 3.80ç§’ | 0.308 images/sï¼ˆæ‰¹é‡å¤§å°=8ï¼‰|'
- en: '| Gaudi2 | 1.33s | 1.081 images/s (batch size = 8) |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| Gaudi2 | 1.33ç§’ | 1.081 images/sï¼ˆæ‰¹é‡å¤§å°=8ï¼‰|'
- en: 'For [Stable Diffusion v2.1](https://huggingface.co/stabilityai/stable-diffusion-2-1)
    on 768x768 images:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äº[Stable Diffusion v2.1](https://huggingface.co/stabilityai/stable-diffusion-2-1)åœ¨768x768å›¾åƒä¸Šï¼š
- en: '|  | Latency (batch size = 1) | Throughput |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '|  | å»¶è¿Ÿï¼ˆæ‰¹é‡å¤§å°=1ï¼‰ | ååé‡ |'
- en: '| --- | :-: | :-: |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| --- | :-: | :-: |'
- en: '| first-generation Gaudi | 10.2s | 0.108 images/s (batch size = 4) |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| ç¬¬ä¸€ä»£Gaudi | 10.2ç§’ | 0.108 images/sï¼ˆæ‰¹é‡å¤§å°=4ï¼‰|'
- en: '| Gaudi2 | 3.17s | 0.379 images/s (batch size = 8) |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| Gaudi2 | 3.17ç§’ | 0.379 images/sï¼ˆæ‰¹é‡å¤§å°=8ï¼‰|'
