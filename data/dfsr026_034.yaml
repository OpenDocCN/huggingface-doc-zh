- en: Control image brightness
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ§åˆ¶å›¾åƒäº®åº¦
- en: 'Original text: [https://huggingface.co/docs/diffusers/using-diffusers/control_brightness](https://huggingface.co/docs/diffusers/using-diffusers/control_brightness)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡é“¾æ¥ï¼š[https://huggingface.co/docs/diffusers/using-diffusers/control_brightness](https://huggingface.co/docs/diffusers/using-diffusers/control_brightness)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The Stable Diffusion pipeline is mediocre at generating images that are either
    very bright or dark as explained in the [Common Diffusion Noise Schedules and
    Sample Steps are Flawed](https://huggingface.co/papers/2305.08891) paper. The
    solutions proposed in the paper are currently implemented in the [DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)
    which you can use to improve the lighting in your images.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ç¨³å®šæ‰©æ•£ç®¡é“åœ¨ç”Ÿæˆéå¸¸æ˜äº®æˆ–é»‘æš—çš„å›¾åƒæ–¹é¢è¡¨ç°å¹³å¹³ï¼Œå¦‚[å¸¸è§æ‰©æ•£å™ªå£°è®¡åˆ’å’Œæ ·æœ¬æ­¥éª¤å­˜åœ¨ç¼ºé™·](https://huggingface.co/papers/2305.08891)è®ºæ–‡ä¸­æ‰€è¿°ã€‚è®ºæ–‡ä¸­æå‡ºçš„è§£å†³æ–¹æ¡ˆç›®å‰å·²åœ¨[DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)ä¸­å®ç°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ”¹å–„å›¾åƒçš„ç…§æ˜ã€‚
- en: ğŸ’¡ Take a look at the paper linked above for more details about the proposed
    solutions!
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ’¡æŸ¥çœ‹ä¸Šé¢é“¾æ¥çš„è®ºæ–‡ï¼Œäº†è§£æ›´å¤šå…³äºæå‡ºçš„è§£å†³æ–¹æ¡ˆçš„ç»†èŠ‚ï¼
- en: 'One of the solutions is to train a model with *v prediction* and *v loss*.
    Add the following flag to the [`train_text_to_image.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py)
    or [`train_text_to_image_lora.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)
    scripts to enable `v_prediction`:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯è®­ç»ƒä¸€ä¸ªå¸¦æœ‰*v prediction*å’Œ*v loss*çš„æ¨¡å‹ã€‚åœ¨[`train_text_to_image.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image.py)æˆ–[`train_text_to_image_lora.py`](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)è„šæœ¬ä¸­æ·»åŠ ä»¥ä¸‹æ ‡å¿—ä»¥å¯ç”¨`v_prediction`ï¼š
- en: '[PRE0]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: For example, letâ€™s use the [`ptx0/pseudo-journey-v2`](https://huggingface.co/ptx0/pseudo-journey-v2)
    checkpoint which has been finetuned with `v_prediction`.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨å·²ç»ç”¨`v_prediction`å¾®è°ƒè¿‡çš„[`ptx0/pseudo-journey-v2`](https://huggingface.co/ptx0/pseudo-journey-v2)æ£€æŸ¥ç‚¹ã€‚
- en: 'Next, configure the following parameters in the [DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler):'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œåœ¨[DDIMScheduler](/docs/diffusers/v0.26.3/en/api/schedulers/ddim#diffusers.DDIMScheduler)ä¸­é…ç½®ä»¥ä¸‹å‚æ•°ï¼š
- en: '`rescale_betas_zero_snr=True`, rescales the noise schedule to zero terminal
    signal-to-noise ratio (SNR)'
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rescale_betas_zero_snr=True`ï¼Œå°†å™ªå£°è®¡åˆ’é‡æ–°ç¼©æ”¾ä¸ºé›¶ç»ˆç«¯ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰'
- en: '`timestep_spacing="trailing"`, starts sampling from the last timestep'
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`timestep_spacing="trailing"`ï¼Œä»æœ€åä¸€ä¸ªæ—¶é—´æ­¥å¼€å§‹é‡‡æ ·'
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Finally, in your call to the pipeline, set `guidance_rescale` to prevent overexposure:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œåœ¨è°ƒç”¨ç®¡é“æ—¶ï¼Œè®¾ç½®`guidance_rescale`ä»¥é˜²æ­¢è¿‡æ›å…‰ï¼š
- en: '[PRE2]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/3870b9f500f183b40c0a88444a5b8e97.png)'
  id: totrans-14
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3870b9f500f183b40c0a88444a5b8e97.png)'
