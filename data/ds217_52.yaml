- en: Datasets ğŸ¤ Arrow
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®é›† ğŸ¤ Arrow
- en: 'Original text: [https://huggingface.co/docs/datasets/about_arrow](https://huggingface.co/docs/datasets/about_arrow)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡é“¾æ¥ï¼š[https://huggingface.co/docs/datasets/about_arrow](https://huggingface.co/docs/datasets/about_arrow)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: What is Arrow?
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Arrowæ˜¯ä»€ä¹ˆï¼Ÿ
- en: '[Arrow](https://arrow.apache.org/) enables large amounts of data to be processed
    and moved quickly. It is a specific data format that stores data in a columnar
    memory layout. This provides several significant advantages:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[Arrow](https://arrow.apache.org/)ä½¿å¤§é‡æ•°æ®èƒ½å¤Ÿå¿«é€Ÿå¤„ç†å’Œç§»åŠ¨ã€‚å®ƒæ˜¯ä¸€ç§ç‰¹å®šçš„æ•°æ®æ ¼å¼ï¼Œä»¥åˆ—å¼å†…å­˜å¸ƒå±€å­˜å‚¨æ•°æ®ã€‚è¿™æä¾›äº†å‡ ä¸ªé‡è¦ä¼˜åŠ¿ï¼š'
- en: Arrowâ€™s standard format allows [zero-copy reads](https://en.wikipedia.org/wiki/Zero-copy)
    which removes virtually all serialization overhead.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arrowçš„æ ‡å‡†æ ¼å¼å…è®¸[é›¶æ‹·è´è¯»å–](https://en.wikipedia.org/wiki/Zero-copy)ï¼Œä»è€Œæ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„åºåˆ—åŒ–å¼€é”€ã€‚
- en: Arrow is language-agnostic so it supports different programming languages.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arrowæ˜¯ä¸è¯­è¨€æ— å…³çš„ï¼Œå› æ­¤æ”¯æŒä¸åŒçš„ç¼–ç¨‹è¯­è¨€ã€‚
- en: Arrow is column-oriented so it is faster at querying and processing slices or
    columns of data.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arrowæ˜¯é¢å‘åˆ—çš„ï¼Œå› æ­¤åœ¨æŸ¥è¯¢å’Œå¤„ç†æ•°æ®çš„åˆ‡ç‰‡æˆ–åˆ—æ—¶æ›´å¿«ã€‚
- en: Arrow allows for copy-free hand-offs to standard machine learning tools such
    as NumPy, Pandas, PyTorch, and TensorFlow.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arrowå…è®¸æ— æ‹·è´åœ°å°†æ•°æ®ä¼ é€’ç»™æ ‡å‡†çš„æœºå™¨å­¦ä¹ å·¥å…·ï¼Œå¦‚NumPyã€Pandasã€PyTorchå’ŒTensorFlowã€‚
- en: Arrow supports many, possibly nested, column types.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Arrowæ”¯æŒè®¸å¤šå¯èƒ½æ˜¯åµŒå¥—çš„åˆ—ç±»å‹ã€‚
- en: Memory-mapping
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å†…å­˜æ˜ å°„
- en: ğŸ¤— Datasets uses Arrow for its local caching system. It allows datasets to be
    backed by an on-disk cache, which is memory-mapped for fast lookup. This architecture
    allows for large datasets to be used on machines with relatively small device
    memory.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¤— æ•°æ®é›†ä½¿ç”¨Arrowä½œä¸ºå…¶æœ¬åœ°ç¼“å­˜ç³»ç»Ÿã€‚å®ƒå…è®¸æ•°æ®é›†ç”±ä¸€ä¸ªåœ¨ç£ç›˜ä¸Šçš„ç¼“å­˜æ”¯æŒï¼Œè¯¥ç¼“å­˜ä¸ºå¿«é€ŸæŸ¥æ‰¾è€Œè¿›è¡Œäº†å†…å­˜æ˜ å°„ã€‚è¿™ç§æ¶æ„å…è®¸åœ¨è®¾å¤‡å†…å­˜ç›¸å¯¹è¾ƒå°çš„æœºå™¨ä¸Šä½¿ç”¨å¤§å‹æ•°æ®é›†ã€‚
- en: 'For example, loading the full English Wikipedia dataset only takes a few MB
    of RAM:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼ŒåŠ è½½å®Œæ•´çš„è‹±æ–‡ç»´åŸºç™¾ç§‘æ•°æ®é›†åªéœ€è¦å‡ MBçš„RAMï¼š
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This is possible because the Arrow data is actually memory-mapped from disk,
    and not loaded in memory. Memory-mapping allows access to data on disk, and leverages
    virtual memory capabilities for fast lookups.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºArrowæ•°æ®å®é™…ä¸Šæ˜¯ä»ç£ç›˜å†…å­˜æ˜ å°„çš„ï¼Œè€Œä¸æ˜¯åŠ è½½åˆ°å†…å­˜ä¸­ã€‚å†…å­˜æ˜ å°„å…è®¸è®¿é—®ç£ç›˜ä¸Šçš„æ•°æ®ï¼Œå¹¶åˆ©ç”¨è™šæ‹Ÿå†…å­˜åŠŸèƒ½è¿›è¡Œå¿«é€ŸæŸ¥æ‰¾ã€‚
- en: Performance
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ€§èƒ½
- en: 'Iterating over a memory-mapped dataset using Arrow is fast. Iterating over
    Wikipedia on a laptop gives you speeds of 1-3 Gbit/s:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Arrowè¿­ä»£å†…å­˜æ˜ å°„æ•°æ®é›†å¾ˆå¿«ã€‚åœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿­ä»£ç»´åŸºç™¾ç§‘å¯ä»¥è¾¾åˆ°1-3 Gbit/sçš„é€Ÿåº¦ï¼š
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
