- en: Exporting ğŸ¤— Transformers models to ONNX
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å°†ğŸ¤— Transformersæ¨¡å‹å¯¼å‡ºåˆ°ONNX
- en: 'Original text: [https://huggingface.co/docs/transformers/v4.37.2/en/main_classes/onnx](https://huggingface.co/docs/transformers/v4.37.2/en/main_classes/onnx)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸå§‹æ–‡æœ¬ï¼š[https://huggingface.co/docs/transformers/v4.37.2/en/main_classes/onnx](https://huggingface.co/docs/transformers/v4.37.2/en/main_classes/onnx)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: ğŸ¤— Transformers provides a `transformers.onnx` package that enables you to convert
    model checkpoints to an ONNX graph by leveraging configuration objects.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¤— Transformersæä¾›äº†ä¸€ä¸ª`transformers.onnx`åŒ…ï¼Œé€šè¿‡åˆ©ç”¨é…ç½®å¯¹è±¡ï¼Œæ‚¨å¯ä»¥å°†æ¨¡å‹æ£€æŸ¥ç‚¹è½¬æ¢ä¸ºONNXå›¾ã€‚
- en: See the [guide](../serialization) on exporting ğŸ¤— Transformers models for more
    details.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: æŸ¥çœ‹æœ‰å…³å¯¼å‡ºğŸ¤— Transformersæ¨¡å‹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯çš„[æŒ‡å—](../serialization)ã€‚
- en: ONNX Configurations
  id: totrans-5
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ONNXé…ç½®
- en: 'We provide three abstract classes that you should inherit from, depending on
    the type of model architecture you wish to export:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªæŠ½è±¡ç±»ï¼Œæ‚¨åº”è¯¥æ ¹æ®å¸Œæœ›å¯¼å‡ºçš„æ¨¡å‹æ¶æ„ç±»å‹ç»§æ‰¿å…¶ä¸­ä¸€ä¸ªï¼š
- en: Encoder-based models inherit from [OnnxConfig](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxConfig)
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŸºäºç¼–ç å™¨çš„æ¨¡å‹ç»§æ‰¿è‡ª[OnnxConfig](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxConfig)
- en: Decoder-based models inherit from [OnnxConfigWithPast](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxConfigWithPast)
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŸºäºè§£ç å™¨çš„æ¨¡å‹ç»§æ‰¿è‡ª[OnnxConfigWithPast](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxConfigWithPast)
- en: Encoder-decoder models inherit from [OnnxSeq2SeqConfigWithPast](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxSeq2SeqConfigWithPast)
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼–ç å™¨-è§£ç å™¨æ¨¡å‹ç»§æ‰¿è‡ª[OnnxSeq2SeqConfigWithPast](/docs/transformers/v4.37.2/en/main_classes/onnx#transformers.onnx.OnnxSeq2SeqConfigWithPast)
- en: OnnxConfig
  id: totrans-10
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: OnnxConfig
- en: '### `class transformers.onnx.OnnxConfig`'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.onnx.OnnxConfig`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L68)'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L68)'
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Base class for ONNX exportable model describing metadata on how to export the
    model through the ONNX format.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨äºæè¿°é€šè¿‡ONNXæ ¼å¼å¯¼å‡ºæ¨¡å‹çš„å…ƒæ•°æ®çš„å¯å¯¼å‡ºæ¨¡å‹çš„åŸºç±»ã€‚
- en: '#### `flatten_output_collection_property`'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `flatten_output_collection_property`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L424)'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L424)'
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Returns
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: (Dict[str, Any])
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: ï¼ˆDict[str, Any])
- en: Outputs with flattened structure and key mapping this new structure.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å…·æœ‰æ‰å¹³ç»“æ„å’Œæ˜ å°„åˆ°æ­¤æ–°ç»“æ„çš„é”®çš„è¾“å‡ºã€‚
- en: Flatten any potential nested structure expanding the name of the field with
    the index of the element within the structure.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: å±•å¹³ä»»ä½•æ½œåœ¨çš„åµŒå¥—ç»“æ„ï¼Œå°†å­—æ®µçš„åç§°ä¸ç»“æ„ä¸­å…ƒç´ çš„ç´¢å¼•æ‰©å±•ã€‚
- en: '#### `from_model_config`'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `from_model_config`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L127)'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L127)'
- en: '[PRE2]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Instantiate a OnnxConfig for a specific model
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºç‰¹å®šæ¨¡å‹å®ä¾‹åŒ–ä¸€ä¸ªOnnxConfig
- en: '#### `generate_dummy_inputs`'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `generate_dummy_inputs`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L280)'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L280)'
- en: '[PRE3]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Parameters
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`batch_size` (`int`, *optional*, defaults to -1) â€” The batch size to export
    the model for (-1 means dynamic axis).'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`batch_size` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º-1) â€” ç”¨äºå¯¼å‡ºæ¨¡å‹çš„æ‰¹é‡å¤§å°ï¼ˆ-1è¡¨ç¤ºåŠ¨æ€è½´ï¼‰ã€‚'
- en: '`num_choices` (`int`, *optional*, defaults to -1) â€” The number of candidate
    answers provided for multiple choice task (-1 means dynamic axis).'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_choices` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º-1) â€” ä¸ºå¤šé€‰ä»»åŠ¡æä¾›çš„å€™é€‰ç­”æ¡ˆæ•°é‡ï¼ˆ-1è¡¨ç¤ºåŠ¨æ€è½´ï¼‰ã€‚'
- en: '`seq_length` (`int`, *optional*, defaults to -1) â€” The sequence length to export
    the model for (-1 means dynamic axis).'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`seq_length` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º-1) â€” ä¸ºå¯¼å‡ºæ¨¡å‹æŒ‡å®šçš„åºåˆ—é•¿åº¦ï¼ˆ-1è¡¨ç¤ºåŠ¨æ€è½´ï¼‰ã€‚'
- en: '`is_pair` (`bool`, *optional*, defaults to `False`) â€” Indicate if the input
    is a pair (sentence 1, sentence 2)'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`is_pair` (`bool`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º`False`) â€” æŒ‡ç¤ºè¾“å…¥æ˜¯å¦ä¸ºä¸€å¯¹ï¼ˆå¥å­1ï¼Œå¥å­2ï¼‰'
- en: '`framework` (`TensorType`, *optional*, defaults to `None`) â€” The framework
    (PyTorch or TensorFlow) that the tokenizer will generate tensors for.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`framework` (`TensorType`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º`None`) â€” åˆ†è¯å™¨å°†ä¸ºå…¶ç”Ÿæˆå¼ é‡çš„æ¡†æ¶ï¼ˆPyTorchæˆ–TensorFlowï¼‰ã€‚'
- en: '`num_channels` (`int`, *optional*, defaults to 3) â€” The number of channels
    of the generated images.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`num_channels` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º3) â€” ç”Ÿæˆå›¾åƒçš„é€šé“æ•°ã€‚'
- en: '`image_width` (`int`, *optional*, defaults to 40) â€” The width of the generated
    images.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image_width` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º40) â€” ç”Ÿæˆå›¾åƒçš„å®½åº¦ã€‚'
- en: '`image_height` (`int`, *optional*, defaults to 40) â€” The height of the generated
    images.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`image_height` (`int`, *å¯é€‰*ï¼Œé»˜è®¤ä¸º40) â€” ç”Ÿæˆå›¾åƒçš„é«˜åº¦ã€‚'
- en: '`sampling_rate` (`int`, *optional* defaults to 22050) â€” The sampling rate for
    audio data generation.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sampling_rate` (`int`, *å¯é€‰* é»˜è®¤ä¸º22050) â€” ç”¨äºéŸ³é¢‘æ•°æ®ç”Ÿæˆçš„é‡‡æ ·ç‡ã€‚'
- en: '`time_duration` (`float`, *optional* defaults to 5.0) â€” Total seconds of sampling
    for audio data generation.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`time_duration` (`float`, *å¯é€‰* é»˜è®¤ä¸º5.0) â€” ç”¨äºéŸ³é¢‘æ•°æ®ç”Ÿæˆçš„é‡‡æ ·æ€»ç§’æ•°ã€‚'
- en: '`frequency` (`int`, *optional* defaults to 220) â€” The desired natural frequency
    of generated audio.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`frequency` (`int`, *å¯é€‰* é»˜è®¤ä¸º220) â€” ç”ŸæˆéŸ³é¢‘çš„æœŸæœ›è‡ªç„¶é¢‘ç‡ã€‚'
- en: Generate inputs to provide to the ONNX exporter for the specific framework
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ç”Ÿæˆè¦æä¾›ç»™ç‰¹å®šæ¡†æ¶çš„ONNXå¯¼å‡ºå™¨çš„è¾“å…¥
- en: '#### `generate_dummy_inputs_onnxruntime`'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `generate_dummy_inputs_onnxruntime`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L400)'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L400)'
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Parameters
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`reference_model_inputs` ([`Mapping[str, Tensor]`) â€” Reference inputs for the
    model.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`reference_model_inputs`ï¼ˆ[`Mapping[str, Tensor]`ï¼‰â€” æ¨¡å‹çš„å‚è€ƒè¾“å…¥ã€‚'
- en: Returns
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '`Mapping[str, Tensor]`'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '`Mapping[str, Tensor]`'
- en: The mapping holding the kwargs to provide to the modelâ€™s forward function
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: ä¿å­˜è¦æä¾›ç»™æ¨¡å‹å‰å‘å‡½æ•°çš„kwargsçš„æ˜ å°„
- en: Generate inputs for ONNX Runtime using the reference model inputs. Override
    this to run inference with seq2seq models which have the encoder and decoder exported
    as separate ONNX files.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å‚è€ƒæ¨¡å‹è¾“å…¥ä¸ºONNX Runtimeç”Ÿæˆè¾“å…¥ã€‚è¦†ç›–æ­¤é€‰é¡¹ä»¥ä½¿ç”¨å°†ç¼–ç å™¨å’Œè§£ç å™¨å¯¼å‡ºä¸ºå•ç‹¬çš„ONNXæ–‡ä»¶çš„seq2seqæ¨¡å‹è¿›è¡Œæ¨ç†ã€‚
- en: '#### `use_external_data_format`'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `use_external_data_format`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L241)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L241)'
- en: '[PRE5]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Flag indicating if the model requires using external data format
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿—ï¼ŒæŒ‡ç¤ºæ¨¡å‹æ˜¯å¦éœ€è¦ä½¿ç”¨å¤–éƒ¨æ•°æ®æ ¼å¼
- en: OnnxConfigWithPast
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: OnnxConfigWithPast
- en: '### `class transformers.onnx.OnnxConfigWithPast`'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.onnx.OnnxConfigWithPast`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L443)'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L443)'
- en: '[PRE6]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '#### `fill_with_past_key_values_`'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '`fill_with_past_key_values_`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L550)'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L550)'
- en: '[PRE7]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Fill the input_or_outputs mapping with past_key_values dynamic axes considering.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘å¡«å……å…·æœ‰è¿‡å»é”®å€¼åŠ¨æ€è½´çš„è¾“å…¥æˆ–è¾“å‡ºæ˜ å°„ã€‚
- en: '#### `with_past`'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `with_past`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L454)'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L454)'
- en: '[PRE8]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Instantiate a OnnxConfig with `use_past` attribute set to True
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: å®ä¾‹åŒ–ä¸€ä¸ªå…·æœ‰ `use_past` å±æ€§è®¾ç½®ä¸º True çš„ OnnxConfig
- en: OnnxSeq2SeqConfigWithPast
  id: totrans-67
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: OnnxSeq2SeqConfigWithPast
- en: '### `class transformers.onnx.OnnxSeq2SeqConfigWithPast`'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.onnx.OnnxSeq2SeqConfigWithPast`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L590)'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/config.py#L590)'
- en: '[PRE9]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: ONNX Features
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ONNX ç‰¹æ€§
- en: Each ONNX configuration is associated with a set of *features* that enable you
    to export models for different types of topologies or tasks.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ª ONNX é…ç½®éƒ½ä¸ä¸€ç»„ *ç‰¹æ€§* å…³è”ï¼Œä½¿æ‚¨èƒ½å¤Ÿä¸ºä¸åŒç±»å‹çš„æ‹“æ‰‘æˆ–ä»»åŠ¡å¯¼å‡ºæ¨¡å‹ã€‚
- en: FeaturesManager
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: FeaturesManager
- en: '### `class transformers.onnx.FeaturesManager`'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '### `class transformers.onnx.FeaturesManager`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L85)'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L85)'
- en: '[PRE10]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '#### `check_supported_model_or_raise`'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '`check_supported_model_or_raise`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L711)'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L711)'
- en: '[PRE11]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Check whether or not the model has the requested features.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æ£€æŸ¥æ¨¡å‹æ˜¯å¦å…·æœ‰è¯·æ±‚çš„ç‰¹å¾ã€‚
- en: '#### `determine_framework`'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `determine_framework`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L628)'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L628)'
- en: '[PRE12]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Parameters
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`model` (`str`) â€” The name of the model to export.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model` (`str`) â€” è¦å¯¼å‡ºçš„æ¨¡å‹çš„åç§°ã€‚'
- en: '`framework` (`str`, *optional*, defaults to `None`) â€” The framework to use
    for the export. See above for priority if none provided.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`framework` (`str`, *å¯é€‰*, é»˜è®¤ä¸º `None`) â€” ç”¨äºå¯¼å‡ºçš„æ¡†æ¶ã€‚å¦‚æœæœªæä¾›ï¼Œåˆ™å‚è§ä¸Šæ–‡çš„ä¼˜å…ˆçº§ã€‚'
- en: Determines the framework to use for the export.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®å®šç”¨äºå¯¼å‡ºçš„æ¡†æ¶ã€‚
- en: 'The priority is in the following order:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜å…ˆçº§æŒ‰ä»¥ä¸‹é¡ºåºæ’åˆ—ï¼š
- en: User input via `framework`.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: é€šè¿‡ `framework` çš„ç”¨æˆ·è¾“å…¥ã€‚
- en: If local checkpoint is provided, use the same framework as the checkpoint.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚æœæä¾›äº†æœ¬åœ°æ£€æŸ¥ç‚¹ï¼Œåˆ™ä½¿ç”¨ä¸æ£€æŸ¥ç‚¹ç›¸åŒçš„æ¡†æ¶ã€‚
- en: Available framework in environment, with priority given to PyTorch
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¯å¢ƒä¸­å¯ç”¨çš„æ¡†æ¶ï¼Œä¼˜å…ˆè€ƒè™‘ PyTorchã€‚
- en: '#### `get_config`'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `get_config`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L736)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L736)'
- en: '[PRE13]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Parameters
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`model_type` (`str`) â€” The model type to retrieve the config for.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_type` (`str`) â€” è¦æ£€ç´¢é…ç½®çš„æ¨¡å‹ç±»å‹ã€‚'
- en: '`feature` (`str`) â€” The feature to retrieve the config for.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`feature` (`str`) â€” è¦æ£€ç´¢é…ç½®çš„ç‰¹å¾ã€‚'
- en: Returns
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›
- en: '`OnnxConfig`'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '`OnnxConfig`'
- en: config for the combination
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨äºç»„åˆçš„é…ç½®
- en: Gets the OnnxConfig for a model_type and feature combination.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: è·å–æ¨¡å‹ç±»å‹å’Œç‰¹å¾ç»„åˆçš„ OnnxConfigã€‚
- en: '#### `get_model_class_for_feature`'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `get_model_class_for_feature`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L601)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L601)'
- en: '[PRE14]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Parameters
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`feature` (`str`) â€” The feature required.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`feature` (`str`) â€” æ‰€éœ€çš„ç‰¹å¾ã€‚'
- en: '`framework` (`str`, *optional*, defaults to `"pt"`) â€” The framework to use
    for the export.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`framework` (`str`, *å¯é€‰*, é»˜è®¤ä¸º `"pt"`) â€” ç”¨äºå¯¼å‡ºçš„æ¡†æ¶ã€‚'
- en: Attempts to retrieve an AutoModel class from a feature name.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å°è¯•ä»ç‰¹å¾åç§°ä¸­æ£€ç´¢ AutoModel ç±»ã€‚
- en: '#### `get_model_from_feature`'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `get_model_from_feature`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L678)'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L678)'
- en: '[PRE15]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Parameters
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`feature` (`str`) â€” The feature required.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`feature` (`str`) â€” æ‰€éœ€çš„ç‰¹å¾ã€‚'
- en: '`model` (`str`) â€” The name of the model to export.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model` (`str`) â€” è¦å¯¼å‡ºçš„æ¨¡å‹çš„åç§°ã€‚'
- en: '`framework` (`str`, *optional*, defaults to `None`) â€” The framework to use
    for the export. See `FeaturesManager.determine_framework` for the priority should
    none be provided.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`framework` (`str`, *å¯é€‰*, é»˜è®¤ä¸º `None`) â€” ç”¨äºå¯¼å‡ºçš„æ¡†æ¶ã€‚å¦‚æœæœªæä¾›ï¼Œåˆ™å‚è§ `FeaturesManager.determine_framework`
    çš„ä¼˜å…ˆçº§ã€‚'
- en: Attempts to retrieve a model from a modelâ€™s name and the feature to be enabled.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: å°è¯•ä»æ¨¡å‹çš„åç§°å’Œè¦å¯ç”¨çš„ç‰¹å¾ä¸­æ£€ç´¢æ¨¡å‹ã€‚
- en: '#### `get_supported_features_for_model_type`'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '#### `get_supported_features_for_model_type`'
- en: '[< source >](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L556)'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '[<æ¥æº>](https://github.com/huggingface/transformers/blob/v4.37.2/src/transformers/onnx/features.py#L556)'
- en: '[PRE16]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Parameters
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: å‚æ•°
- en: '`model_type` (`str`) â€” The model type to retrieve the supported features for.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_type` (`str`) â€” è¦æ£€ç´¢æ”¯æŒç‰¹å¾çš„æ¨¡å‹ç±»å‹ã€‚'
- en: '`model_name` (`str`, *optional*) â€” The name attribute of the model object,
    only used for the exception message.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`model_name` (`str`, *å¯é€‰*) â€” æ¨¡å‹å¯¹è±¡çš„åç§°å±æ€§ï¼Œä»…ç”¨äºå¼‚å¸¸æ¶ˆæ¯ã€‚'
- en: Tries to retrieve the feature -> OnnxConfig constructor map from the model type.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: å°è¯•ä»æ¨¡å‹ç±»å‹ä¸­æ£€ç´¢ç‰¹å¾ -> OnnxConfig æ„é€ å‡½æ•°æ˜ å°„ã€‚
