- en: Train and deploy Hugging Face on Amazon SageMaker
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨Amazon SageMakerä¸Šè®­ç»ƒå’Œéƒ¨ç½²Hugging Face
- en: 'Original text: [https://huggingface.co/docs/sagemaker/getting-started](https://huggingface.co/docs/sagemaker/getting-started)'
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡é“¾æ¥ï¼š[https://huggingface.co/docs/sagemaker/getting-started](https://huggingface.co/docs/sagemaker/getting-started)
- en: null
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The get started guide will show you how to quickly use Hugging Face on Amazon
    SageMaker. Learn how to fine-tune and deploy a pretrained ğŸ¤— Transformers model
    on SageMaker for a binary text classification task.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: å…¥é—¨æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨Amazon SageMakerä¸Šå¿«é€Ÿä½¿ç”¨Hugging Faceã€‚å­¦ä¹ å¦‚ä½•åœ¨SageMakerä¸Šä¸ºäºŒè¿›åˆ¶æ–‡æœ¬åˆ†ç±»ä»»åŠ¡å¾®è°ƒå’Œéƒ¨ç½²é¢„è®­ç»ƒçš„ğŸ¤—
    Transformersæ¨¡å‹ã€‚
- en: ğŸ’¡ If you are new to Hugging Face, we recommend first reading the ğŸ¤— Transformers
    [quick tour](https://huggingface.co/docs/transformers/quicktour).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ’¡ å¦‚æœæ‚¨æ˜¯Hugging Faceçš„æ–°æ‰‹ï¼Œæˆ‘ä»¬å»ºè®®å…ˆé˜…è¯»ğŸ¤— Transformersçš„[å¿«é€Ÿå…¥é—¨](https://huggingface.co/docs/transformers/quicktour)ã€‚
- en: '[https://www.youtube.com/embed/pYqjCzoyWyo](https://www.youtube.com/embed/pYqjCzoyWyo)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.youtube.com/embed/pYqjCzoyWyo](https://www.youtube.com/embed/pYqjCzoyWyo)'
- en: ğŸ““ Open the [notebook](https://github.com/huggingface/notebooks/blob/main/sagemaker/01_getting_started_pytorch/sagemaker-notebook.ipynb)
    to follow along!
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ““ æ‰“å¼€[notebook](https://github.com/huggingface/notebooks/blob/main/sagemaker/01_getting_started_pytorch/sagemaker-notebook.ipynb)è¿›è¡Œè·Ÿéšï¼
- en: Installation and setup
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®‰è£…å’Œè®¾ç½®
- en: Get started by installing the necessary Hugging Face libraries and SageMaker.
    You will also need to install [PyTorch](https://pytorch.org/get-started/locally/)
    and [TensorFlow](https://www.tensorflow.org/install/pip#tensorflow-2-packages-are-available)
    if you donâ€™t already have it installed.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡å®‰è£…å¿…è¦çš„Hugging Faceåº“å’ŒSageMakeræ¥å¼€å§‹ã€‚å¦‚æœæ‚¨å°šæœªå®‰è£…ï¼Œè¿˜éœ€è¦å®‰è£…[PyTorch](https://pytorch.org/get-started/locally/)å’Œ[TensorFlow](https://www.tensorflow.org/install/pip#tensorflow-2-packages-are-available)ã€‚
- en: '[PRE0]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If you want to run this example in [SageMaker Studio](https://docs.aws.amazon.com/sagemaker/latest/dg/studio.html),
    upgrade [ipywidgets](https://ipywidgets.readthedocs.io/en/latest/) for the ğŸ¤— Datasets
    library and restart the kernel:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨æƒ³åœ¨[SageMaker Studio](https://docs.aws.amazon.com/sagemaker/latest/dg/studio.html)ä¸­è¿è¡Œæ­¤ç¤ºä¾‹ï¼Œè¯·å‡çº§[ipywidgets](https://ipywidgets.readthedocs.io/en/latest/)ä»¥é…åˆğŸ¤—
    Datasetsåº“ï¼Œå¹¶é‡æ–°å¯åŠ¨å†…æ ¸ï¼š
- en: '[PRE1]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next, you should set up your environment: a SageMaker session and an S3 bucket.
    The S3 bucket will store data, models, and logs. You will need access to an [IAM
    execution role](https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html)
    with the required permissions.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæ‚¨åº”è¯¥è®¾ç½®æ‚¨çš„ç¯å¢ƒï¼šä¸€ä¸ªSageMakerä¼šè¯å’Œä¸€ä¸ªS3å­˜å‚¨æ¡¶ã€‚S3å­˜å‚¨æ¡¶å°†å­˜å‚¨æ•°æ®ã€æ¨¡å‹å’Œæ—¥å¿—ã€‚æ‚¨éœ€è¦è®¿é—®ä¸€ä¸ªå…·æœ‰æ‰€éœ€æƒé™çš„[IAMæ‰§è¡Œè§’è‰²](https://docs.aws.amazon.com/sagemaker/latest/dg/sagemaker-roles.html)ã€‚
- en: If you are planning on using SageMaker in a local environment, you need to provide
    the `role` yourself. Learn more about how to set this up [here](https://huggingface.co/docs/sagemaker/train#installation-and-setup).
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ‚¨è®¡åˆ’åœ¨æœ¬åœ°ç¯å¢ƒä¸­ä½¿ç”¨SageMakerï¼Œæ‚¨éœ€è¦è‡ªå·±æä¾›`role`ã€‚äº†è§£å¦‚ä½•è®¾ç½®è¯·æŸ¥çœ‹[è¿™é‡Œ](https://huggingface.co/docs/sagemaker/train#installation-and-setup)ã€‚
- en: âš ï¸ The execution role is only available when you run a notebook within SageMaker.
    If you try to run `get_execution_role` in a notebook not on SageMaker, you will
    get a region error.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: âš ï¸ åªæœ‰åœ¨SageMakerå†…è¿è¡Œç¬”è®°æœ¬æ—¶æ‰å¯ç”¨æ‰§è¡Œè§’è‰²ã€‚å¦‚æœæ‚¨å°è¯•åœ¨ä¸åœ¨SageMakerä¸Šè¿è¡Œçš„ç¬”è®°æœ¬ä¸­è¿è¡Œ`get_execution_role`ï¼Œæ‚¨å°†æ”¶åˆ°åŒºåŸŸé”™è¯¯ã€‚
- en: '[PRE2]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Preprocess
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é¢„å¤„ç†
- en: 'The ğŸ¤— Datasets library makes it easy to download and preprocess a dataset for
    training. Download and tokenize the [IMDb](https://huggingface.co/datasets/imdb)
    dataset:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ¤— Datasetsåº“ä½¿ä¸‹è½½å’Œé¢„å¤„ç†æ•°æ®é›†å˜å¾—å®¹æ˜“ã€‚ä¸‹è½½å’Œæ ‡è®°[IMDb](https://huggingface.co/datasets/imdb)æ•°æ®é›†ï¼š
- en: '[PRE3]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Upload dataset to S3 bucket
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å°†æ•°æ®é›†ä¸Šä¼ åˆ°S3å­˜å‚¨æ¡¶
- en: 'Next, upload the preprocessed dataset to your S3 session bucket with ğŸ¤— Datasets
    S3 [filesystem](https://huggingface.co/docs/datasets/filesystems.html) implementation:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ğŸ¤— Datasets S3 [æ–‡ä»¶ç³»ç»Ÿ](https://huggingface.co/docs/datasets/filesystems.html)å®ç°å°†é¢„å¤„ç†çš„æ•°æ®é›†ä¸Šä¼ åˆ°æ‚¨çš„S3ä¼šè¯å­˜å‚¨æ¡¶ä¸­ï¼š
- en: '[PRE4]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Start a training job
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¼€å§‹è®­ç»ƒä½œä¸š
- en: 'Create a Hugging Face Estimator to handle end-to-end SageMaker training and
    deployment. The most important parameters to pay attention to are:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªHugging Face Estimatoræ¥å¤„ç†ç«¯åˆ°ç«¯çš„SageMakerè®­ç»ƒå’Œéƒ¨ç½²ã€‚éœ€è¦æ³¨æ„çš„æœ€é‡è¦çš„å‚æ•°æ˜¯ï¼š
- en: '`entry_point` refers to the fine-tuning script which you can find [here](https://github.com/huggingface/notebooks/blob/main/sagemaker/01_getting_started_pytorch/scripts/train.py).'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`entry_point`æŒ‡çš„æ˜¯æ‚¨å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/huggingface/notebooks/blob/main/sagemaker/01_getting_started_pytorch/scripts/train.py)æ‰¾åˆ°çš„å¾®è°ƒè„šæœ¬ã€‚'
- en: '`instance_type` refers to the SageMaker instance that will be launched. Take
    a look [here](https://aws.amazon.com/sagemaker/pricing/) for a complete list of
    instance types.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`instance_type`æŒ‡çš„æ˜¯å°†å¯åŠ¨çš„SageMakerå®ä¾‹ã€‚æŸ¥çœ‹[è¿™é‡Œ](https://aws.amazon.com/sagemaker/pricing/)ä»¥è·å–å®Œæ•´çš„å®ä¾‹ç±»å‹åˆ—è¡¨ã€‚'
- en: '`hyperparameters` refers to the training hyperparameters the model will be
    fine-tuned with.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`è¶…å‚æ•°`æŒ‡çš„æ˜¯æ¨¡å‹å°†è¿›è¡Œå¾®è°ƒçš„è®­ç»ƒè¶…å‚æ•°ã€‚'
- en: '[PRE5]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Begin training with one line of code:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€è¡Œä»£ç å¼€å§‹è®­ç»ƒï¼š
- en: '[PRE6]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Deploy model
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: éƒ¨ç½²æ¨¡å‹
- en: 'Once the training job is complete, deploy your fine-tuned model by calling
    `deploy()` with the number of instances and instance type:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦è®­ç»ƒä½œä¸šå®Œæˆï¼Œé€šè¿‡è°ƒç”¨`deploy()`éƒ¨ç½²æ‚¨çš„å¾®è°ƒæ¨¡å‹ï¼ŒæŒ‡å®šå®ä¾‹æ•°é‡å’Œå®ä¾‹ç±»å‹ï¼š
- en: '[PRE7]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Call `predict()` on your data:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ‚¨çš„æ•°æ®ä¸Šè°ƒç”¨`predict()`ï¼š
- en: '[PRE8]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'After running your request, delete the endpoint:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œå®Œæ‚¨çš„è¯·æ±‚åï¼Œåˆ é™¤ç«¯ç‚¹ï¼š
- en: '[PRE9]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Whatâ€™s next?
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ
- en: Congratulations, youâ€™ve just fine-tuned and deployed a pretrained ğŸ¤— Transformers
    model on SageMaker! ğŸ‰
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æ­å–œï¼Œæ‚¨åˆšåˆšåœ¨SageMakerä¸Šå¾®è°ƒå’Œéƒ¨ç½²äº†ä¸€ä¸ªé¢„è®­ç»ƒçš„ğŸ¤— Transformersæ¨¡å‹ï¼ğŸ‰
- en: For your next steps, keep reading our documentation for more details about training
    and deployment. There are many interesting features such as [distributed training](/docs/sagemaker/train#distributed-training)
    and [Spot instances](/docs/sagemaker/train#spot-instances).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œç»§ç»­é˜…è¯»æˆ‘ä»¬çš„æ–‡æ¡£ï¼Œäº†è§£æ›´å¤šå…³äºè®­ç»ƒå’Œéƒ¨ç½²çš„ç»†èŠ‚ã€‚æœ‰è®¸å¤šæœ‰è¶£çš„åŠŸèƒ½ï¼Œå¦‚[åˆ†å¸ƒå¼è®­ç»ƒ](/docs/sagemaker/train#distributed-training)å’Œ[Spotå®ä¾‹](/docs/sagemaker/train#spot-instances)ã€‚
